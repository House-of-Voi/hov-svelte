/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 */
import * as algokit from '@algorandfoundation/algokit-utils'
import type {
  ABIAppCallArg,
  AppCallTransactionResult,
  AppCallTransactionResultOfType,
  AppCompilationResult,
  AppReference,
  AppState,
  CoreAppCallArgs,
  RawAppCallArgs,
  TealTemplateParams,
} from '@algorandfoundation/algokit-utils/types/app'
import type {
  AppClientCallCoreParams,
  AppClientCompilationParams,
  AppClientDeployCoreParams,
  AppDetails,
  ApplicationClient,
} from '@algorandfoundation/algokit-utils/types/app-client'
import type { AppSpec } from '@algorandfoundation/algokit-utils/types/app-spec'
import type { SendTransactionResult, TransactionToSign, SendTransactionFrom, SendTransactionParams } from '@algorandfoundation/algokit-utils/types/transaction'
import type { ABIResult, TransactionWithSigner } from 'algosdk'
import { Algodv2, OnApplicationComplete, Transaction, AtomicTransactionComposer, modelsv2 } from 'algosdk'
export const APP_SPEC: AppSpec = {
  "hints": {
    "grant_delegate(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_owner()address": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer_ownership(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_seed(byte[32])byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_bet_key(byte[56])byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_reel1()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_others()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "reel_has_symbol(byte[15],uint64,byte[1])bool": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "SpinResult",
          "elements": [
            [
              "payout",
              "uint64"
            ],
            [
              "payout_multiplier",
              "uint64"
            ],
            [
              "bonus_spins_awarded",
              "uint64"
            ],
            [
              "jackpot_hit",
              "uint64"
            ]
          ]
        }
      }
    },
    "owner_deposit(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "deposit()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "withdraw(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balances()(uint64,uint64,uint64,bool)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "BankBalances",
          "elements": [
            [
              "balance_available",
              "uint64"
            ],
            [
              "balance_total",
              "uint64"
            ],
            [
              "balance_locked",
              "uint64"
            ],
            [
              "balance_fuse",
              "bool"
            ]
          ]
        }
      }
    },
    "get_balance_available()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balance_locked()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balance_total()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "sync_balance()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_user(address)(address,uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "UserData",
          "elements": [
            [
              "who",
              "address"
            ],
            [
              "credit",
              "uint64"
            ],
            [
              "bonus_spin",
              "uint64"
            ],
            [
              "spin_count",
              "uint64"
            ],
            [
              "last_spin_timestamp",
              "uint64"
            ]
          ]
        }
      }
    },
    "grant_reward_manager(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "credit(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "Bet",
          "elements": [
            [
              "who",
              "address"
            ],
            [
              "bet_amount",
              "uint64"
            ],
            [
              "is_kicker_bet",
              "bool"
            ],
            [
              "net_bet_amount",
              "uint64"
            ],
            [
              "spin_index",
              "uint64"
            ],
            [
              "mode",
              "uint64"
            ],
            [
              "claim_round",
              "uint64"
            ]
          ]
        }
      }
    },
    "get_bet_key(address,uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "spin(uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "claim(byte[56])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_free_spins(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "pause(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "is_paused()bool": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_storage_app_id(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_safe_jackpot_app_id(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_safe_fee_app_id(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "nop()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_version(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "approve_update(bool)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_upgrader(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    }
  },
  "source": {
    "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5Wb2lOZXR3b3JrU2xvdE1hY2hpbmUuYXBwcm92YWxfcHJvZ3JhbToKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBibnogbWFpbl9lbnRyeXBvaW50QDIKICAgIGNhbGxzdWIgX19pbml0X18KCm1haW5fZW50cnlwb2ludEAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4biBOdW1BcHBBcmdzCiAgICBieiBtYWluX2JhcmVfcm91dGluZ0A0MwogICAgbWV0aG9kICJncmFudF9kZWxlZ2F0ZShhZGRyZXNzKXZvaWQiCiAgICBtZXRob2QgInBhcnRpY2lwYXRlKGJ5dGVbMzJdLGJ5dGVbMzJdLHVpbnQ2NCx1aW50NjQsdWludDY0LGJ5dGVbNjRdKXZvaWQiCiAgICBtZXRob2QgImdldF9vd25lcigpYWRkcmVzcyIKICAgIG1ldGhvZCAidHJhbnNmZXJfb3duZXJzaGlwKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZChieXRlWzMyXSlieXRlWzE1XSIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShieXRlWzU2XSlieXRlWzE1XSIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbihieXRlWzMyXSx1aW50NjQpYnl0ZVsxNV0iCiAgICBtZXRob2QgImdldF9jZGZfcmVlbDEoKXVpbnQ2NFsxNl0iCiAgICBtZXRob2QgImdldF9jZGZfb3RoZXJzKCl1aW50NjRbMTZdIgogICAgbWV0aG9kICJyZWVsX2hhc19zeW1ib2woYnl0ZVsxNV0sdWludDY0LGJ5dGVbMV0pYm9vbCIKICAgIG1ldGhvZCAiY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoYnl0ZVsxNV0sYm9vbCkodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIG1ldGhvZCAib3duZXJfZGVwb3NpdCh1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZGVwb3NpdCgpdm9pZCIKICAgIG1ldGhvZCAid2l0aGRyYXcodWludDY0KXZvaWQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlcygpKHVpbnQ2NCx1aW50NjQsdWludDY0LGJvb2wpIgogICAgbWV0aG9kICJnZXRfYmFsYW5jZV9hdmFpbGFibGUoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X2JhbGFuY2VfbG9ja2VkKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlX3RvdGFsKCl1aW50NjQiCiAgICBtZXRob2QgInN5bmNfYmFsYW5jZSgpdWludDY0IgogICAgbWV0aG9kICJnZXRfdXNlcihhZGRyZXNzKShhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBtZXRob2QgImdyYW50X3Jld2FyZF9tYW5hZ2VyKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAiY3JlZGl0KGFkZHJlc3MsdWludDY0KXZvaWQiCiAgICBtZXRob2QgImdldF9iZXQoYnl0ZVs1Nl0pKGFkZHJlc3MsdWludDY0LGJvb2wsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIG1ldGhvZCAiZ2V0X2JldF9rZXkoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NClieXRlWzU2XSIKICAgIG1ldGhvZCAic3Bpbih1aW50NjQsdWludDY0LHVpbnQ2NClieXRlWzU2XSIKICAgIG1ldGhvZCAiY2xhaW0oYnl0ZVs1Nl0pdWludDY0IgogICAgbWV0aG9kICJncmFudF9mcmVlX3NwaW5zKGFkZHJlc3MsdWludDY0KXZvaWQiCiAgICBtZXRob2QgInBhdXNlKHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJpc19wYXVzZWQoKWJvb2wiCiAgICBtZXRob2QgInNldF9zdG9yYWdlX2FwcF9pZCh1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAic2V0X3NhZmVfamFja3BvdF9hcHBfaWQodWludDY0KXZvaWQiCiAgICBtZXRob2QgInNldF9zYWZlX2ZlZV9hcHBfaWQodWludDY0KXZvaWQiCiAgICBtZXRob2QgIm5vcCgpdm9pZCIKICAgIG1ldGhvZCAic2V0X3ZlcnNpb24odWludDY0LHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJhcHByb3ZlX3VwZGF0ZShib29sKXZvaWQiCiAgICBtZXRob2QgImdyYW50X3VwZ3JhZGVyKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAidHJhbnNmZXIoYWRkcmVzcyl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9ncmFudF9kZWxlZ2F0ZV9yb3V0ZUA0IG1haW5fcGFydGljaXBhdGVfcm91dGVANSBtYWluX2dldF9vd25lcl9yb3V0ZUA2IG1haW5fdHJhbnNmZXJfb3duZXJzaGlwX3JvdXRlQDcgbWFpbl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX3JvdXRlQDggbWFpbl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5X3JvdXRlQDkgbWFpbl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluX3JvdXRlQDEwIG1haW5fZ2V0X2NkZl9yZWVsMV9yb3V0ZUAxMSBtYWluX2dldF9jZGZfb3RoZXJzX3JvdXRlQDEyIG1haW5fcmVlbF9oYXNfc3ltYm9sX3JvdXRlQDEzIG1haW5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Rfcm91dGVAMTQgbWFpbl9vd25lcl9kZXBvc2l0X3JvdXRlQDE1IG1haW5fZGVwb3NpdF9yb3V0ZUAxNiBtYWluX3dpdGhkcmF3X3JvdXRlQDE3IG1haW5fZ2V0X2JhbGFuY2VzX3JvdXRlQDE4IG1haW5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlX3JvdXRlQDE5IG1haW5fZ2V0X2JhbGFuY2VfbG9ja2VkX3JvdXRlQDIwIG1haW5fZ2V0X2JhbGFuY2VfdG90YWxfcm91dGVAMjEgbWFpbl9zeW5jX2JhbGFuY2Vfcm91dGVAMjIgbWFpbl9nZXRfdXNlcl9yb3V0ZUAyMyBtYWluX2dyYW50X3Jld2FyZF9tYW5hZ2VyX3JvdXRlQDI0IG1haW5fY3JlZGl0X3JvdXRlQDI1IG1haW5fZ2V0X2JldF9yb3V0ZUAyNiBtYWluX2dldF9iZXRfa2V5X3JvdXRlQDI3IG1haW5fc3Bpbl9yb3V0ZUAyOCBtYWluX2NsYWltX3JvdXRlQDI5IG1haW5fZ3JhbnRfZnJlZV9zcGluc19yb3V0ZUAzMCBtYWluX3BhdXNlX3JvdXRlQDMxIG1haW5faXNfcGF1c2VkX3JvdXRlQDMyIG1haW5fc2V0X3N0b3JhZ2VfYXBwX2lkX3JvdXRlQDMzIG1haW5fc2V0X3NhZmVfamFja3BvdF9hcHBfaWRfcm91dGVAMzQgbWFpbl9zZXRfc2FmZV9mZWVfYXBwX2lkX3JvdXRlQDM1IG1haW5fbm9wX3JvdXRlQDM2IG1haW5fc2V0X3ZlcnNpb25fcm91dGVAMzcgbWFpbl9hcHByb3ZlX3VwZGF0ZV9yb3V0ZUAzOCBtYWluX2dyYW50X3VwZ3JhZGVyX3JvdXRlQDM5IG1haW5fdHJhbnNmZXJfcm91dGVANDAKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCm1haW5fZ3JhbnRfZGVsZWdhdGVfcm91dGVANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU1NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTU2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ3JhbnRfZGVsZWdhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fcGFydGljaXBhdGVfcm91dGVANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTYxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgcGFydGljaXBhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X293bmVyX3JvdXRlQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfb3duZXIKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fdHJhbnNmZXJfb3duZXJzaGlwX3JvdXRlQDc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NTIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk1MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHRyYW5zZmVyX293bmVyc2hpcAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX3JvdXRlQDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk3NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleV9yb3V0ZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTgwCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5ODAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW5fcm91dGVAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5OTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk5MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9yZWVsMV9yb3V0ZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAyOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9jZGZfcmVlbDEKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9vdGhlcnNfcm91dGVAMTI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNDcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfY2RmX290aGVycwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9yZWVsX2hhc19zeW1ib2xfcm91dGVAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNTYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE1NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIHJlZWxfaGFzX3N5bWJvbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9yb3V0ZUAxNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM0MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzQxCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUAxNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDIzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgb3duZXJfZGVwb3NpdAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9kZXBvc2l0X3JvdXRlQDE2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDMzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZGVwb3NpdAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl93aXRoZHJhd19yb3V0ZUAxNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ1MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDUwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgd2l0aGRyYXcKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2JhbGFuY2VzX3JvdXRlQDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDc4LTM0NzkKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYmFsYW5jZXMKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlX3JvdXRlQDE5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlX2xvY2tlZF9yb3V0ZUAyMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU0MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlX2xvY2tlZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZV90b3RhbF9yb3V0ZUAyMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlX3RvdGFsCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3N5bmNfYmFsYW5jZV9yb3V0ZUAyMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIHN5bmNfYmFsYW5jZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfdXNlcl9yb3V0ZUAyMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjUyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X3VzZXIKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ3JhbnRfcmV3YXJkX21hbmFnZXJfcm91dGVAMjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY4MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdyYW50X3Jld2FyZF9tYW5hZ2VyCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NyZWRpdF9yb3V0ZUAyNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY4NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjg2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY3JlZGl0CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iZXRfcm91dGVAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9iZXQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2JldF9rZXlfcm91dGVAMjc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc3NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9iZXRfa2V5CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3NwaW5fcm91dGVAMjg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNwaW4KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fY2xhaW1fcm91dGVAMjk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGNsYWltCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dyYW50X2ZyZWVfc3BpbnNfcm91dGVAMzA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdyYW50X2ZyZWVfc3BpbnMKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fcGF1c2Vfcm91dGVAMzE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwOTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHBhdXNlCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2lzX3BhdXNlZF9yb3V0ZUAzMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGlzX3BhdXNlZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfc3RvcmFnZV9hcHBfaWRfcm91dGVAMzM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjQ1CiAgICAvLyBjbGFzcyBWb2lOZXR3b3JrU2xvdE1hY2hpbmUoTmV0d29ya1Nsb3RNYWNoaW5lKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIzNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNldF9zdG9yYWdlX2FwcF9pZAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfc2FmZV9qYWNrcG90X2FwcF9pZF9yb3V0ZUAzNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3NhZmVfamFja3BvdF9hcHBfaWQKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc2V0X3NhZmVfZmVlX2FwcF9pZF9yb3V0ZUAzNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQ1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3NhZmVfZmVlX2FwcF9pZAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9ub3Bfcm91dGVAMzY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfdmVyc2lvbl9yb3V0ZUAzNzoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIGNsYXNzIFZvaU5ldHdvcmtTbG90TWFjaGluZShOZXR3b3JrU2xvdE1hY2hpbmUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3ZlcnNpb24KICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYXBwcm92ZV91cGRhdGVfcm91dGVAMzg6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgYXBwcm92ZV91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVAMzk6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ3JhbnRfdXBncmFkZXIKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fdHJhbnNmZXJfcm91dGVANDA6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2JhcmVfcm91dGluZ0A0MzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICBpbnQgMAogICAgaW50IDQKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIG1hdGNoIG1haW5fY3JlYXRlQDQ0IG1haW5fb25fdXBkYXRlQDQ1CiAgICBlcnIgLy8gcmVqZWN0IHRyYW5zYWN0aW9uCgptYWluX2NyZWF0ZUA0NDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgIQogICAgYXNzZXJ0IC8vIGlzIGNyZWF0aW5nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX29uX3VwZGF0ZUA0NToKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5MgogICAgLy8gQGFyYzQuYmFyZW1ldGhvZChhbGxvd19hY3Rpb25zPVsiVXBkYXRlQXBwbGljYXRpb24iXSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTItOTMKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICAvLyBkZWYgb25fdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICBjYWxsc3ViIG9uX3VwZGF0ZQogICAgaW50IDEKICAgIHJldHVybgoKCi8vIGNvbnRyYWN0Lk5ldHdvcmtTbG90TWFjaGluZS5ncmFudF9kZWxlZ2F0ZShhZGRyZXNzOiBieXRlcykgLT4gdm9pZDoKZ3JhbnRfZGVsZWdhdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTYtNDU1NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ3JhbnRfZGVsZWdhdGUoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTgKICAgIC8vIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICBjYWxsc3ViIF9vbmx5X3N1cGVyX21hbmFnZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3My00Mjc0CiAgICAvLyAjIHN0YWtlYWJsZSBzdGF0ZQogICAgLy8gc2VsZi5kZWxlZ2F0ZSA9IEFjY291bnQoKQogICAgYnl0ZSAiZGVsZWdhdGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTkKICAgIC8vIHNlbGYuZGVsZWdhdGUgPSBhZGRyZXNzLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX29ubHlfc3VwZXJfbWFuYWdlcigpIC0+IHZvaWQ6Cl9vbmx5X3N1cGVyX21hbmFnZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjktMzY3MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9zdXBlcl9tYW5hZ2VyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3MgogICAgLy8gVHhuLnNlbmRlciA9PSBzZWxmLnN1cGVyX21hbmFnZXIKICAgIHR4biBTZW5kZXIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MjktMjkzMAogICAgLy8gIyBhY2Nlc3MgY29udHJvbAogICAgLy8gc2VsZi5zdXBlcl9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgYnl0ZSAic3VwZXJfbWFuYWdlciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3MgogICAgLy8gVHhuLnNlbmRlciA9PSBzZWxmLnN1cGVyX21hbmFnZXIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zdXBlcl9tYW5hZ2VyIGV4aXN0cwogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3MS0zNjczCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIFR4bi5zZW5kZXIgPT0gc2VsZi5zdXBlcl9tYW5hZ2VyCiAgICAvLyApLCAib25seSBzdXBlciBtYW5hZ2VyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICBhc3NlcnQgLy8gb25seSBzdXBlciBtYW5hZ2VyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk5ldHdvcmtTbG90TWFjaGluZS5wYXJ0aWNpcGF0ZSh2b3RlX2s6IGJ5dGVzLCBzZWxfazogYnl0ZXMsIHZvdGVfZnN0OiBieXRlcywgdm90ZV9sc3Q6IGJ5dGVzLCB2b3RlX2tkOiBieXRlcywgc3Bfa2V5OiBieXRlcykgLT4gdm9pZDoKcGFydGljaXBhdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NjEtNDU3MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcGFydGljaXBhdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICB2b3RlX2s6IEJ5dGVzMzIsCiAgICAvLyAgICAgc2VsX2s6IEJ5dGVzMzIsCiAgICAvLyAgICAgdm90ZV9mc3Q6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHZvdGVfbHN0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICB2b3RlX2tkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBzcF9rZXk6IEJ5dGVzNjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byA2IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3NAogICAgLy8gdm90ZV9mc3QubmF0aXZlLAogICAgZnJhbWVfZGlnIC00CiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NzUKICAgIC8vIHZvdGVfbHN0Lm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTc2CiAgICAvLyB2b3RlX2tkLm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTcxLTQ1NzgKICAgIC8vIHNlbGYuX3BhcnRpY2lwYXRlKAogICAgLy8gICAgIHZvdGVfay5ieXRlcywKICAgIC8vICAgICBzZWxfay5ieXRlcywKICAgIC8vICAgICB2b3RlX2ZzdC5uYXRpdmUsCiAgICAvLyAgICAgdm90ZV9sc3QubmF0aXZlLAogICAgLy8gICAgIHZvdGVfa2QubmF0aXZlLAogICAgLy8gICAgIHNwX2tleS5ieXRlcywKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNgogICAgZnJhbWVfZGlnIC01CiAgICBjb3ZlciA0CiAgICBjb3ZlciA0CiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3BhcnRpY2lwYXRlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5OZXR3b3JrU2xvdE1hY2hpbmUuX3BhcnRpY2lwYXRlKHZvdGVfazogYnl0ZXMsIHNlbF9rOiBieXRlcywgdm90ZV9mc3Q6IHVpbnQ2NCwgdm90ZV9sc3Q6IHVpbnQ2NCwgdm90ZV9rZDogdWludDY0LCBzcF9rZXk6IGJ5dGVzKSAtPiB2b2lkOgpfcGFydGljaXBhdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1ODAtNDU4OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcGFydGljaXBhdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICB2b3RlX2s6IEJ5dGVzLAogICAgLy8gICAgIHNlbF9rOiBCeXRlcywKICAgIC8vICAgICB2b3RlX2ZzdDogVUludDY0LAogICAgLy8gICAgIHZvdGVfbHN0OiBVSW50NjQsCiAgICAvLyAgICAgdm90ZV9rZDogVUludDY0LAogICAgLy8gICAgIHNwX2tleTogQnl0ZXMsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byA2IDAKICAgIGJ5dGUgIiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU5MgogICAgLy8gVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyIG9yIFR4bi5zZW5kZXIgPT0gc2VsZi5kZWxlZ2F0ZQogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU5MgogICAgLy8gVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyIG9yIFR4bi5zZW5kZXIgPT0gc2VsZi5kZWxlZ2F0ZQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm93bmVyIGV4aXN0cwogICAgPT0KICAgIGJueiBfcGFydGljaXBhdGVfYm9vbF90cnVlQDIKICAgIHR4biBTZW5kZXIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNzMtNDI3NAogICAgLy8gIyBzdGFrZWFibGUgc3RhdGUKICAgIC8vIHNlbGYuZGVsZWdhdGUgPSBBY2NvdW50KCkKICAgIGJ5dGUgImRlbGVnYXRlIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTkyCiAgICAvLyBUeG4uc2VuZGVyID09IHNlbGYub3duZXIgb3IgVHhuLnNlbmRlciA9PSBzZWxmLmRlbGVnYXRlCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZGVsZWdhdGUgZXhpc3RzCiAgICA9PQogICAgYnogX3BhcnRpY2lwYXRlX2Jvb2xfZmFsc2VAMwoKX3BhcnRpY2lwYXRlX2Jvb2xfdHJ1ZUAyOgogICAgaW50IDEKICAgIGIgX3BhcnRpY2lwYXRlX2Jvb2xfbWVyZ2VANAoKX3BhcnRpY2lwYXRlX2Jvb2xfZmFsc2VAMzoKICAgIGludCAwCgpfcGFydGljaXBhdGVfYm9vbF9tZXJnZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTkwLTQ1OTMKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgVHhuLnNlbmRlciA9PSBzZWxmLm93bmVyIG9yIFR4bi5zZW5kZXIgPT0gc2VsZi5kZWxlZ2F0ZQogICAgLy8gKSwgIm11c3QgYmUgb3duZXIgb3IgZGVsZWdhdGUiCiAgICBhc3NlcnQgLy8gbXVzdCBiZSBvd25lciBvciBkZWxlZ2F0ZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk0LTQ1OTUKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk3CiAgICAvLyBwYXltZW50ID49IEdsb2JhbC5taW5fdHhuX2ZlZSBhbmQgcGF5bWVudCA8PSAxMDAwMDAwMAogICAgZ2xvYmFsIE1pblR4bkZlZQogICAgPj0KICAgIGJ6IF9wYXJ0aWNpcGF0ZV9ib29sX2ZhbHNlQDcKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgMTAwMDAwMDAKICAgIDw9CiAgICBieiBfcGFydGljaXBhdGVfYm9vbF9mYWxzZUA3CiAgICBpbnQgMQogICAgYiBfcGFydGljaXBhdGVfYm9vbF9tZXJnZUA4CgpfcGFydGljaXBhdGVfYm9vbF9mYWxzZUA3OgogICAgaW50IDAKCl9wYXJ0aWNpcGF0ZV9ib29sX21lcmdlQDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1OTYtNDU5OAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwYXltZW50ID49IEdsb2JhbC5taW5fdHhuX2ZlZSBhbmQgcGF5bWVudCA8PSAxMDAwMDAwMAogICAgLy8gKSwgInBheW1lbnQgYW1vdW50IGFjY3VyYXRlIiAgIyBwYXltZW50IG11c3QgYmUgYmV0d2VlbiBtaW4gZmVlIGFuZCAxMCBWT0kKICAgIGFzc2VydCAvLyBwYXltZW50IGFtb3VudCBhY2N1cmF0ZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjAyCiAgICAvLyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDQKICAgIC8vIGFkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDcKICAgIC8vIHZvdGVfZmlyc3Q9YXJjNC5VSW50NjQodm90ZV9mc3QpLAogICAgZnJhbWVfZGlnIC00CiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDgKICAgIC8vIHZvdGVfbGFzdD1hcmM0LlVJbnQ2NCh2b3RlX2xzdCksCiAgICBmcmFtZV9kaWcgLTMKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYwOQogICAgLy8gdm90ZV9rZXlfZGlsdXRpb249YXJjNC5VSW50NjQodm90ZV9rZCksCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIGNvdmVyIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYwMy00NjExCiAgICAvLyBQYXJ0S2V5SW5mbygKICAgIC8vICAgICBhZGRyZXNzPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICB2b3RlX2tleT1CeXRlczMyLmZyb21fYnl0ZXModm90ZV9rKSwKICAgIC8vICAgICBzZWxlY3Rpb25fa2V5PUJ5dGVzMzIuZnJvbV9ieXRlcyhzZWxfayksCiAgICAvLyAgICAgdm90ZV9maXJzdD1hcmM0LlVJbnQ2NCh2b3RlX2ZzdCksCiAgICAvLyAgICAgdm90ZV9sYXN0PWFyYzQuVUludDY0KHZvdGVfbHN0KSwKICAgIC8vICAgICB2b3RlX2tleV9kaWx1dGlvbj1hcmM0LlVJbnQ2NCh2b3RlX2tkKSwKICAgIC8vICAgICBzdGF0ZV9wcm9vZl9rZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHNwX2tleSksCiAgICAvLyApLAogICAgZnJhbWVfZGlnIC02CiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAtNQogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjAxLTQ2MTIKICAgIC8vIFBhcnRpY2lwYXRlZCgKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgUGFydEtleUluZm8oCiAgICAvLyAgICAgICAgIGFkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICB2b3RlX2tleT1CeXRlczMyLmZyb21fYnl0ZXModm90ZV9rKSwKICAgIC8vICAgICAgICAgc2VsZWN0aW9uX2tleT1CeXRlczMyLmZyb21fYnl0ZXMoc2VsX2spLAogICAgLy8gICAgICAgICB2b3RlX2ZpcnN0PWFyYzQuVUludDY0KHZvdGVfZnN0KSwKICAgIC8vICAgICAgICAgdm90ZV9sYXN0PWFyYzQuVUludDY0KHZvdGVfbHN0KSwKICAgIC8vICAgICAgICAgdm90ZV9rZXlfZGlsdXRpb249YXJjNC5VSW50NjQodm90ZV9rZCksCiAgICAvLyAgICAgICAgIHN0YXRlX3Byb29mX2tleT1CeXRlczY0LmZyb21fYnl0ZXMoc3Bfa2V5KSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1OTktNDYxMwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFBhcnRpY2lwYXRlZCgKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBQYXJ0S2V5SW5mbygKICAgIC8vICAgICAgICAgICAgIGFkZHJlc3M9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICAgICAgdm90ZV9rZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHZvdGVfayksCiAgICAvLyAgICAgICAgICAgICBzZWxlY3Rpb25fa2V5PUJ5dGVzMzIuZnJvbV9ieXRlcyhzZWxfayksCiAgICAvLyAgICAgICAgICAgICB2b3RlX2ZpcnN0PWFyYzQuVUludDY0KHZvdGVfZnN0KSwKICAgIC8vICAgICAgICAgICAgIHZvdGVfbGFzdD1hcmM0LlVJbnQ2NCh2b3RlX2xzdCksCiAgICAvLyAgICAgICAgICAgICB2b3RlX2tleV9kaWx1dGlvbj1hcmM0LlVJbnQ2NCh2b3RlX2tkKSwKICAgIC8vICAgICAgICAgICAgIHN0YXRlX3Byb29mX2tleT1CeXRlczY0LmZyb21fYnl0ZXMoc3Bfa2V5KSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlBhcnRpY2lwYXRlZChhZGRyZXNzLChhZGRyZXNzLGJ5dGVbMzJdLGJ5dGVbMzJdLHVpbnQ2NCx1aW50NjQsdWludDY0LGJ5dGVbNjRdKSkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjE0LTQ2MjIKICAgIC8vIGl0eG4uS2V5UmVnaXN0cmF0aW9uKAogICAgLy8gICAgIHZvdGVfa2V5PXZvdGVfaywKICAgIC8vICAgICBzZWxlY3Rpb25fa2V5PXNlbF9rLAogICAgLy8gICAgIHZvdGVfZmlyc3Q9dm90ZV9mc3QsCiAgICAvLyAgICAgdm90ZV9sYXN0PXZvdGVfbHN0LAogICAgLy8gICAgIHZvdGVfa2V5X2RpbHV0aW9uPXZvdGVfa2QsCiAgICAvLyAgICAgc3RhdGVfcHJvb2Zfa2V5PXNwX2tleSwKICAgIC8vICAgICBmZWU9cGF5bWVudCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIGZyYW1lX2RpZyAtMQogICAgaXR4bl9maWVsZCBTdGF0ZVByb29mUEsKICAgIGZyYW1lX2RpZyAtMgogICAgaXR4bl9maWVsZCBWb3RlS2V5RGlsdXRpb24KICAgIGZyYW1lX2RpZyAtMwogICAgaXR4bl9maWVsZCBWb3RlTGFzdAogICAgZnJhbWVfZGlnIC00CiAgICBpdHhuX2ZpZWxkIFZvdGVGaXJzdAogICAgZnJhbWVfZGlnIC01CiAgICBpdHhuX2ZpZWxkIFNlbGVjdGlvblBLCiAgICBmcmFtZV9kaWcgLTYKICAgIGl0eG5fZmllbGQgVm90ZVBLCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MTQKICAgIC8vIGl0eG4uS2V5UmVnaXN0cmF0aW9uKAogICAgaW50IGtleXJlZwogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgZnJhbWVfZGlnIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MTQtNDYyMgogICAgLy8gaXR4bi5LZXlSZWdpc3RyYXRpb24oCiAgICAvLyAgICAgdm90ZV9rZXk9dm90ZV9rLAogICAgLy8gICAgIHNlbGVjdGlvbl9rZXk9c2VsX2ssCiAgICAvLyAgICAgdm90ZV9maXJzdD12b3RlX2ZzdCwKICAgIC8vICAgICB2b3RlX2xhc3Q9dm90ZV9sc3QsCiAgICAvLyAgICAgdm90ZV9rZXlfZGlsdXRpb249dm90ZV9rZCwKICAgIC8vICAgICBzdGF0ZV9wcm9vZl9rZXk9c3Bfa2V5LAogICAgLy8gICAgIGZlZT1wYXltZW50LAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUudXRpbHMuYWxnb3JhbmQucmVxdWlyZV9wYXltZW50KHdobzogYnl0ZXMpIC0+IHVpbnQ2NDoKcmVxdWlyZV9wYXltZW50OgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToxNS0yMwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBmdW5jdGlvbjogcmVxdWlyZV9wYXltZW50IChpbnRlcm5hbCkKICAgIC8vICMgYXJndW1lbnRzOiBOb25lCiAgICAvLyAjIHB1cnBvc2U6IGNoZWNrIHBheW1lbnQKICAgIC8vICMgcHJlLWNvbmRpdGlvbnM6IE5vbmUKICAgIC8vICMgcG9zdC1jb25kaXRpb25zOiBOb25lCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIHJlcXVpcmVfcGF5bWVudCh3aG86IEFjY291bnQpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNAogICAgLy8gcmVmX2dyb3VwX2luZGV4ID0gVHhuLmdyb3VwX2luZGV4CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNQogICAgLy8gYXNzZXJ0IHJlZl9ncm91cF9pbmRleCA+IDAsICJncm91cCBpbmRleCBncmVhdGVyIHRoYW4gemVybyIKICAgIGR1cAogICAgYXNzZXJ0IC8vIGdyb3VwIGluZGV4IGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI2CiAgICAvLyBwYXltZW50X2dyb3VwX2luZGV4ID0gcmVmX2dyb3VwX2luZGV4IC0gMQogICAgaW50IDEKICAgIC0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjgKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnNlbmRlciA9PSB3aG8KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludCBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICBmcmFtZV9kaWcgLTEKICAgID09CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI3LTI5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnNlbmRlciA9PSB3aG8KICAgIC8vICksICJwYXltZW50IHNlbmRlciBhY2N1cmF0ZSIKICAgIGFzc2VydCAvLyBwYXltZW50IHNlbmRlciBhY2N1cmF0ZQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMQogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkucmVjZWl2ZXIKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzIKICAgIC8vID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMxLTMyCiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgLy8gPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgPT0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzAtMzMKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkucmVjZWl2ZXIKICAgIC8vICAgICA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICAvLyApLCAicGF5bWVudCByZWNlaXZlciBhY2N1cmF0ZSIKICAgIGFzc2VydCAvLyBwYXltZW50IHJlY2VpdmVyIGFjY3VyYXRlCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjM0CiAgICAvLyByZXR1cm4gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuYW1vdW50CiAgICBndHhucyBBbW91bnQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9vd25lcigpIC0+IGJ5dGVzOgpnZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NDEtMjk0MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTQ2CiAgICAvLyByZXR1cm4gYXJjNC5BZGRyZXNzKHNlbGYuX2dldF9vd25lcigpKQogICAgY2FsbHN1YiBfZ2V0X293bmVyCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X293bmVyKCkgLT4gYnl0ZXM6Cl9nZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NDgtMjk0OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X293bmVyKHNlbGYpIC0+IEFjY291bnQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk1MAogICAgLy8gcmV0dXJuIHNlbGYub3duZXIKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NTAKICAgIC8vIHJldHVybiBzZWxmLm93bmVyCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS50cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTUyLTI5NTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTU3CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk1OAogICAgLy8gc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3RyYW5zZmVyX293bmVyc2hpcAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX29ubHlfb3duZXIoKSAtPiB2b2lkOgpfb25seV9vd25lcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk2NC0yOTY1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk2OQogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5fZ2V0X293bmVyKCksICJvbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiBfZ2V0X293bmVyCiAgICA9PQogICAgYXNzZXJ0IC8vIG9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKX3RyYW5zZmVyX293bmVyc2hpcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk2MC0yOTYxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF90cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBBY2NvdW50KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5NjIKICAgIC8vIHNlbGYub3duZXIgPSBuZXdfb3duZXIKICAgIGZyYW1lX2RpZyAtMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfZ3JpZF9mcm9tX3NlZWQoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfY2RmX2dyaWRfZnJvbV9zZWVkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTc1LTI5NzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTc3CiAgICAvLyBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjgwMAogICAgaW50IDAKICAgIGNhbGxzdWIgZW5zdXJlX2J1ZGdldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTc4CiAgICAvLyByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZChzZWVkLmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICByZXRzdWIKCgovLyBhbGdvcHkuZW5zdXJlX2J1ZGdldChyZXF1aXJlZF9idWRnZXQ6IHVpbnQ2NCwgZmVlX3NvdXJjZTogdWludDY0KSAtPiB2b2lkOgplbnN1cmVfYnVkZ2V0OgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjExLTE3CiAgICBwcm90byAyIDAKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToxOAogICAgZnJhbWVfZGlnIC0yCiAgICBpbnQgMTAKICAgICsKCmVuc3VyZV9idWRnZXRfd2hpbGVfdG9wQDE6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MTkKICAgIGZyYW1lX2RpZyAwCiAgICBnbG9iYWwgT3Bjb2RlQnVkZ2V0CiAgICA+CiAgICBieiBlbnN1cmVfYnVkZ2V0X2FmdGVyX3doaWxlQDcKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyMAogICAgaXR4bl9iZWdpbgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIxCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIyCiAgICBpbnQgRGVsZXRlQXBwbGljYXRpb24KICAgIGl0eG5fZmllbGQgT25Db21wbGV0aW9uCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjMKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQXBwcm92YWxQcm9ncmFtCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjQKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQ2xlYXJTdGF0ZVByb2dyYW0KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNS0yOQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2l0Y2ggZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8wQDMgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8xQDQKICAgIGIgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDYKCmVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfMEAzOgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI3CiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGIgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDYKCmVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfMUA0OgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI5CiAgICBnbG9iYWwgTWluVHhuRmVlCiAgICBpdHhuX2ZpZWxkIEZlZQoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDY6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MzAKICAgIGl0eG5fc3VibWl0CiAgICBiIGVuc3VyZV9idWRnZXRfd2hpbGVfdG9wQDEKCmVuc3VyZV9idWRnZXRfYWZ0ZXJfd2hpbGVANzoKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX2dyaWQoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9ncmlkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTQwLTMxNDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfZ3JpZChzZWxmLCBzZWVkOiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE0MgogICAgLy8gY2RmX3JlZWwxID0gc2VsZi5fZ2V0X2NkZl9yZWVsMSgpCiAgICBjYWxsc3ViIF9nZXRfY2RmX3JlZWwxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNDMKICAgIC8vIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICBjYWxsc3ViIF9nZXRfY2RmX290aGVycwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTQ0CiAgICAvLyBjb2wxID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX3JlZWwxLCBVSW50NjQoMCkpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGludCAwCiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTQ1CiAgICAvLyBjb2wyID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDEpKQogICAgZnJhbWVfZGlnIC0xCiAgICBkaWcgMQogICAgaW50IDEKICAgIGNhbGxzdWIgX2dldF9jb2xfc2VsZWN0aW9uCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNDYKICAgIC8vIGNvbDMgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMikpCiAgICBmcmFtZV9kaWcgLTEKICAgIGRpZyAxCiAgICBpbnQgMgogICAgY2FsbHN1YiBfZ2V0X2NvbF9zZWxlY3Rpb24KICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE0NwogICAgLy8gY29sNCA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgZGlnIDEKICAgIGludCAzCiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTQ4CiAgICAvLyBjb2w1ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDQpKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBpbnQgNAogICAgY2FsbHN1YiBfZ2V0X2NvbF9zZWxlY3Rpb24KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE0OQogICAgLy8gcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIHVuY292ZXIgNAogICAgdW5jb3ZlciA0CiAgICBjb25jYXQKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2NkZl9yZWVsMSgpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9yZWVsMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAxNS0zMDIyCiAgICAvLyAjIENERl9SRUVMMSA9IFsKICAgIC8vICMgICAgIDQyNzA3NjY2LCAgIDg1NDE1MzMyLCAgMTcwODMwNjY0LCAgMjM0ODkyMTYzLAogICAgLy8gIyAgICAgMjk4OTUzNjYyLCAgMzg0MzY4OTk0LCAgNDY5Nzg0MzI2LCAgNTU1MTk5NjU4LAogICAgLy8gIyAgICAgNjgzMzIyNjU2LCAgODMyNzk5NDg4LCAgOTgyMjc2MzE5LCAgOTgyMjc2MzE5LAogICAgLy8gIyAgICAgOTgyMjc2MzE5LCAgOTgyMjc2MzE5LCAgOTgzOTg0NjI1LCAxMDAwMDAwMDAwCiAgICAvLyAjIF0KICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfcmVlbDEoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAyMy0zMDI2CiAgICAvLyBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAyNQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNy0yOTE5CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDI1CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAyMy0zMDI2CiAgICAvLyBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiY2RmX3JlZWwxX2RlZmF1bHQoKXVpbnQ2NFsxNl0iCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDI3CiAgICAvLyByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2NkZl9vdGhlcnMoKSAtPiBieXRlczoKX2dldF9jZGZfb3RoZXJzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDMzLTMwNDAKICAgIC8vICMgQ0RGX09USEVSUyA9IFsKICAgIC8vICMgICAgIDQwNzQ5Nzk2LCAgIDgxNDk5NTkzLCAgMTYyOTk5MTg1LCAgMjI0MTIzODc5LAogICAgLy8gIyAgICAgMjg1MjQ4NTc0LCAgMzY2NzQ4MTY2LCAgNDQ4MjQ3NzU5LCAgNTI5NzQ3MzUxLAogICAgLy8gIyAgICAgNjUxOTk2NzQwLCAgNzk0NjIxMDI3LCAgKjkzNzI0NTMxNCwgIDk1NzYyMDIxMiwKICAgIC8vICMgICAgIDk3MjkwMTM4NSwgIDk4MzA4ODgzNSosICA5ODQ3MTg4MjYsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA0MS0zMDQ0CiAgICAvLyBjZGZfb3RoZXJzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfb3RoZXJfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNDMKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTctMjkxOQogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA0MwogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNDEtMzA0NAogICAgLy8gY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX290aGVyX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJjZGZfb3RoZXJfZGVmYXVsdCgpdWludDY0WzE2XSIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBkdXAKICAgIGV4dHJhY3QgNCAwCiAgICBzd2FwCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNDUKICAgIC8vIHJldHVybiBjZGZfb3RoZXJzLmJ5dGVzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZDogYnl0ZXMsIGNkZjogYnl0ZXMsIGNvbF9pbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9jb2xfc2VsZWN0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTM0LTMxMzUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEzNgogICAgLy8gcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3JuZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTM3CiAgICAvLyBjb2xfc2VsZWN0aW9uID0gc2VsZi5fZ2V0X2RyYXdfY29sX251bWJhKGNkZiwgcm5nKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9nZXRfZHJhd19jb2xfbnVtYmEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEzOAogICAgLy8gcmV0dXJuIGNvbF9zZWxlY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfcm5nKHNlZWQ6IGJ5dGVzLCBpbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9ybmc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNTktMzA2MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZyhzZWxmLCBzZWVkOiBCeXRlcywgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA2NS0zMDY2CiAgICAvLyAjIENvbWJpbmUgc2VlZCB3aXRoIHNwaW5fY291bnQgYXMgbm9uY2UgZm9yIHVuaXF1ZW5lc3MKICAgIC8vIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNjcKICAgIC8vIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA2OAogICAgLy8gcmV0dXJuIG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIHNoYTI1NgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9kcmF3X2NvbF9udW1iYShjZGY6IGJ5dGVzLCBybmc6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9kcmF3X2NvbF9udW1iYToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEyNi0zMTI3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfZHJhd19jb2xfbnVtYmEoc2VsZiwgY2RmOiBCeXRlcywgcm5nOiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEyOAogICAgLy8gY29sX3NlbGVjdGlvbnMgPSBVSW50NjRfMy5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmdfdHJpcGxlKHJuZykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9ybmdfdHJpcGxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMjkKICAgIC8vIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9jZGZfZHJhdwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTMwCiAgICAvLyBkcmF3MiA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMV0ubmF0aXZlKQogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY2RmX2RyYXcKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEzMQogICAgLy8gZHJhdzMgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzJdLm5hdGl2ZSkKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY2RmX2RyYXcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEzMgogICAgLy8gcmV0dXJuIEJ5dGVzMy5mcm9tX2J5dGVzKGRyYXcxICsgZHJhdzIgKyBkcmF3MykuYnl0ZXMKICAgIGNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3JuZ190cmlwbGUoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X3JuZ190cmlwbGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNzAtMzA3MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZ190cmlwbGUoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNzMKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA3NAogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNzMtMzA3NAogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgwKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNzcKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAxCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA3OAogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNzctMzA3OAogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgxKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwODEKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAyCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA4MgogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwODEtMzA4MgogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgyKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwODUKICAgIC8vIGFyYzQuVUludDY0KHJuZzEpLAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwODYKICAgIC8vIGFyYzQuVUludDY0KHJuZzIpLAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwODcKICAgIC8vIGFyYzQuVUludDY0KHJuZzMpLAogICAgc3dhcAogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDg0LTMwODgKICAgIC8vIHJldHVybiBVSW50NjRfMygKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmcxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmczKSwKICAgIC8vICkuYnl0ZXMKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jZGZfZHJhdyhjZGY6IGJ5dGVzLCBjb2xfc2VsZWN0aW9uOiB1aW50NjQpIC0+IGJ5dGVzOgpfY2RmX2RyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwOTAtMzA5MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2RmX2RyYXcoc2VsZiwgY2RmOiBCeXRlcywgY29sX3NlbGVjdGlvbjogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDkzCiAgICAvLyBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGR1cAogICAgY292ZXIgMgogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA5NAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICBieXRlIDB4MzAKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDk1CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzFdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDk2CiAgICAvLyByZXR1cm4gQnl0ZXMoYiIxIikKICAgIGJ5dGUgMHgzMQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwOTcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMl06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDk4CiAgICAvLyByZXR1cm4gQnl0ZXMoYiIyIikKICAgIGJ5dGUgMHgzMgogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwOTkKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbM106CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMjQgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTAwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiIzIikKICAgIGJ5dGUgMHgzMwogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMDEKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbNF06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEwMgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICBieXRlIDB4MzQKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEwMwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAxMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTA0CiAgICAvLyByZXR1cm4gQnl0ZXMoYiI1IikKICAgIGJ5dGUgMHgzNQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTA1CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzZdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDQ4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDE0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMDYKICAgIC8vIHJldHVybiBCeXRlcyhiIjYiKQogICAgYnl0ZSAweDM2CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMTQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMDcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbN106CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEwOAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICBieXRlIDB4MzcKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEwOQogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA2NCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAxOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTEwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiI4IikKICAgIGJ5dGUgMHgzOAogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTExCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzldOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDcyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTIKICAgIC8vIHJldHVybiBCeXRlcyhiIjkiKQogICAgYnl0ZSAweDM5CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTMKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTBdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDgwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTQKICAgIC8vIHJldHVybiBCeXRlcyhiIkEiKQogICAgYnl0ZSAweDQxCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTUKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDg4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDI0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTYKICAgIC8vIHJldHVybiBCeXRlcyhiIkIiKQogICAgYnl0ZSAweDQyCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTJdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDk2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDI2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTgKICAgIC8vIHJldHVybiBCeXRlcyhiIkMiKQogICAgYnl0ZSAweDQzCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxMTkKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTNdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDEwNCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTIwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiJEIikKICAgIGJ5dGUgMHg0NAogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDI4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTIxCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzE0XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCAxMTIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMzAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEyMgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiRSIpCiAgICBieXRlIDB4NDUKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAzMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzEyNAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiRiIpCiAgICBieXRlIDB4NDYKICAgIHN3YXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoYm94X2tleTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTgwLTI5ODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTgyCiAgICAvLyBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjgwMAogICAgaW50IDAKICAgIGNhbGxzdWIgZW5zdXJlX2J1ZGdldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTgzCiAgICAvLyByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoYm94X2tleS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KGJveF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5ODUtMjk4NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShzZWxmLCBib3hfa2V5OiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjk4NwogICAgLy8gYm94ID0gc2VsZi5fZ2V0X2JldChib3hfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5ODgKICAgIC8vIGdyaWRfc2VlZCA9IG9wLnNoYTI1Nihib3hfa2V5ICsgYm94LnNwaW5faW5kZXguYnl0ZXMpCiAgICBleHRyYWN0IDQ5IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5ODkKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JldChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQ4LTM3NDkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg0LTM3NTAKICAgIC8vICAgICAjIHNwaW4gc3RhdGUKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoKQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuID0gQmlnVUludChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KCkKICAgIC8vICAgICAjIDEgPSBjcmVkaXQsIDIgPSBuZXR3b3JrLCA0ID0gdG9rZW4KICAgIC8vICAgICAjIDAgPSBkaXNhYmxlZAogICAgLy8gICAgICMgMSA9IGNyZWRpdCBlbmFibGVkCiAgICAvLyAgICAgIyAyID0gbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgMyA9IGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA1ID0gY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgNyA9IGNyZWRpdCwgbmV0d29yaywgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICBzZWxmLmNyZWRpdF9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KSAgIyA0MCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgPSBVSW50NjQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgPSBVSW50NjQoMTAwXzAwMCAqIDEwKio2KSAgIyAxMDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya191bml0ID0gVUludDY0KDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpICAjIDQwICogMTAqKjYKICAgIC8vICAgICBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50ID0gQmlnVUludCgxMDBfMDAwICogMTAqKjYpICAjIDEwMCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi50b2tlbl91bml0ID0gQmlnVUludCgxMCoqNikKICAgIC8vICAgICBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMzAsIDAuMyUKICAgIC8vICAgICBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzID0gVUludDY0KDIwKSAgIyAyMCwwLjIlCiAgICAvLyAgICAgIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICAgICAjIHN0b3JhZ2UKICAgIC8vICAgICBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICAjIGJvbnVzOiBhZGRlZCB0byBhZGp1c3QgYm9udXMgc3BpbiBjb250cmlidXRpb24gdG8gb3ZlcmFsbCBydHAgd2l0aG91dCB1cGRhdGUKICAgIC8vICAgICBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQgPSBVSW50NjQoQk9OVVNfVFJJR0dFUl9DT1VOVCkKICAgIC8vICAgICBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoQk9OVVNfU1BJTlNfQVdBUkRFRCkKICAgIC8vICAgICBzZWxmLmJvbnVzX2xpbmVfbXVsdCA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAgICAgIyBwYXVzaWJsZSBzdGF0ZQogICAgLy8gICAgIHNlbGYucGF1c2VkID0gVUludDY0KCkgICMgMCA9IG5vdCBwYXVzZWQgKGRlZmF1bHQpLCAxID0gcGF1c2VkCiAgICAvLyAgICAgIyBzYWZlIHN0YXRlCiAgICAvLyAgICAgc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgIyBhY2Nlc3MgY29udHJvbAogICAgLy8gICAgIHNlbGYuc3VwZXJfbWFuYWdlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIC8vICAgICBzZWxmLnJld2FyZF9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gCiAgICAvLyAjIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gIyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBwYXNzCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBPd25hYmxlCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkFkZHJlc3Moc2VsZi5fZ2V0X293bmVyKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9vd25lcihzZWxmKSAtPiBBY2NvdW50OgogICAgLy8gICAgIHJldHVybiBzZWxmLm93bmVyCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXIubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF90cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYub3duZXIgPSBuZXdfb3duZXIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIE9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLl9nZXRfb3duZXIoKSwgIm9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBDREYgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWQoc2VlZC5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KGJveF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KHNlbGYsIGJveF9rZXk6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBib3ggPSBzZWxmLl9nZXRfYmV0KGJveF9rZXkpCiAgICAvLyAgICAgZ3JpZF9zZWVkID0gb3Auc2hhMjU2KGJveF9rZXkgKyBib3guc3Bpbl9pbmRleC5ieXRlcykKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X2NkZl9ncmlkKGdyaWRfc2VlZCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlczMyLCBzcGluX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczE1OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQuYnl0ZXMsIHNwaW5faW5kZXgubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlcywgc3Bpbl9pbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIGluZGV4ID0gYXJjNC5VSW50NjQoc3Bpbl9pbmRleCkKICAgIC8vICAgICBncmlkX3NlZWQgPSBvcC5zaGEyNTYoc2VlZCArIGluZGV4LmJ5dGVzKQogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogVUludDY0KSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJsb2NrIHNlZWQgZm9yIGEgc3BlY2lmaWMgcm91bmQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gb3AuQmxvY2suYmxrX3NlZWQocm91bmQpWy0zMjpdCiAgICAvLyAKICAgIC8vICMgQ0RGX1JFRUwxID0gWwogICAgLy8gIyAgICAgNDI3MDc2NjYsICAgODU0MTUzMzIsICAxNzA4MzA2NjQsICAyMzQ4OTIxNjMsCiAgICAvLyAjICAgICAyOTg5NTM2NjIsICAzODQzNjg5OTQsICA0Njk3ODQzMjYsICA1NTUxOTk2NTgsCiAgICAvLyAjICAgICA2ODMzMjI2NTYsICA4MzI3OTk0ODgsICA5ODIyNzYzMTksICA5ODIyNzYzMTksCiAgICAvLyAjICAgICA5ODIyNzYzMTksICA5ODIyNzYzMTksICA5ODM5ODQ2MjUsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfcmVlbDFfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfcmVlbDEoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX3JlZWwxKCkpCiAgICAvLyAKICAgIC8vICMgQ0RGX09USEVSUyA9IFsKICAgIC8vICMgICAgIDQwNzQ5Nzk2LCAgIDgxNDk5NTkzLCAgMTYyOTk5MTg1LCAgMjI0MTIzODc5LAogICAgLy8gIyAgICAgMjg1MjQ4NTc0LCAgMzY2NzQ4MTY2LCAgNDQ4MjQ3NzU5LCAgNTI5NzQ3MzUxLAogICAgLy8gIyAgICAgNjUxOTk2NzQwLCAgNzk0NjIxMDI3LCAgKjkzNzI0NTMxNCwgIDk1NzYyMDIxMiwKICAgIC8vICMgICAgIDk3MjkwMTM4NSwgIDk4MzA4ODgzNSosICA5ODQ3MTg4MjYsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfb3RoZXJzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIC8vICAgICByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheV9kZW5zZShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBwYXlfZGVuc2UsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcGF5X2RlbnNlLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmcoc2VsZiwgc2VlZDogQnl0ZXMsIGluZGV4OiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdlbmVyYXRlIHJhbmRvbSBieXRlcyBmcm9tIHNlZWQgKyBnbG9iYWwgc3BpbiBjb3VudC4KICAgIC8vICAgICBUaGUgc3Bpbl9jb3VudCBlbnN1cmVzIGVhY2ggc3BpbiBnZXRzIGEgdW5pcXVlIHNlZWQgZXZlbiBpZiBvdGhlciBpbnB1dHMgYXJlIHRoZSBzYW1lLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgQ29tYmluZSBzZWVkIHdpdGggc3Bpbl9jb3VudCBhcyBub25jZSBmb3IgdW5pcXVlbmVzcwogICAgLy8gICAgIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgLy8gICAgIHJldHVybiBvcC5zaGEyNTYoY29tYmluZWQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmdfdHJpcGxlKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBybmcxID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDApKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmcyID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDEpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmczID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDIpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMyksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jZGZfZHJhdyhzZWxmLCBjZGY6IEJ5dGVzLCBjb2xfc2VsZWN0aW9uOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9hcnJheSA9IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKGNkZikKICAgIC8vICAgICBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVszXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs0XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs2XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs3XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs5XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkEiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJCIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxM106CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkQiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJFIikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJGIikKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xpbmVfc3ltYm9scyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBCeXRlcyhiIjAxMjM0NTY3ODlBQkNERUYiKQogICAgLy8gICAgIHJldHVybiBsaW5lX3N5bWJvbHMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgcmVlbF9oYXNfc3ltYm9sKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHJlZWw6IGFyYzQuVUludDY0LCBzeW06IEJ5dGVzMQogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZC5ieXRlcywgcmVlbC5uYXRpdmUsIHN5bS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfaGFzX3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzKSAtPiBib29sOgogICAgLy8gICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAvLyAgICAgcmV0dXJuIEZhbHNlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bWJvbF90b19pbmRleChzZWxmLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgaWYgc3ltID09IEJVRkZBTE86CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBFQUdMRToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxKQogICAgLy8gICAgIGVsaWYgc3ltID09IENPVUdBUjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVMSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgzKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdPTEY6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBBOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDUpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg2KQogICAgLy8gICAgIGVsaWYgc3ltID09IFE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBKOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDgpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gVEVOOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDkpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gTklORToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBIT1Y6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9tYXRjaGVzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiByZWVsX21hdGNoZXMuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCB0aGUgbnVtYmVyIG9mIG1hdGNoZXMgb2YgdGhlIHN5bWJvbCBvciB3aWxkIG9uIHRoZSBncmlkIGZvciBhIGdpdmVuIHJlZWwuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgY250ID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgdiA9IGdyaWRbcmVlbCAqIDMgKyByXQogICAgLy8gICAgICAgICBpZiB2ID09IHN5bSBvciB2ID09IFdJTEQxIG9yIHYgPT0gV0lMRDIgb3IgdiA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgICAgIGNudCArPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gY250CiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIGNvbnRyaWJfcmVlbHM6IEJ5dGVzLCBuX3JlZWxzOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0XzI6CiAgICAvLyAgICAgY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKGNvbnRyaWJfcmVlbHMpCiAgICAvLyAgICAgbXVsdCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIGFueV93aWxkID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgLy8gICAgICAgICByaSA9IGNvbnRyaWJbaV0ubmF0aXZlCiAgICAvLyAgICAgICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgICAgIHYgPSBncmlkW3JpICogMyArIHJdCiAgICAvLyAgICAgICAgICAgICBpZiB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KDMpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDI6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICBpZiBtdWx0IDwgVUludDY0KDIpOgogICAgLy8gICAgICAgICAgICAgICAgICAgICBtdWx0ID0gVUludDY0KDIpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDE6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQobXVsdCksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZGVmYXVsdChzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLndheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICAvLyAKICAgIC8vICAgICBwZCA9IFBheURlbnNlLmZyb21fYnl0ZXMocGF5X2RlbnNlKQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzID0gV2F5c1dpdGhTcGluQ2FwRGV0YWlscy5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBpZiBub3Qgc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQsIFVJbnQ2NCgwKSwgc3ltKToKICAgIC8vICAgICAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICAvLyAKICAgIC8vICAgICByZWVsX21hdGNoZXMgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBjb250cmliID0gcmVlbF9tYXRjaGVzLmNvcHkoKQogICAgLy8gICAgIG5fY29udHJpYiA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGsgPSBVSW50NjQoMCkKICAgIC8vICAgICB3aGlsZSBrIDwgVUludDY0KE5VTV9SRUVMUyk6CiAgICAvLyAgICAgICAgIG0gPSBzZWxmLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQsIGssIHN5bSkKICAgIC8vICAgICAgICAgaWYgbSA9PSAwOgogICAgLy8gICAgICAgICAgICAgYnJlYWsKICAgIC8vICAgICAgICAgcmVlbF9tYXRjaGVzW2tdID0gYXJjNC5VSW50NjQobSkKICAgIC8vICAgICAgICAgY29udHJpYltuX2NvbnRyaWJdID0gYXJjNC5VSW50NjQoaykKICAgIC8vICAgICAgICAgbl9jb250cmliICs9IDEKICAgIC8vICAgICAgICAgayArPSAxCiAgICAvLyAKICAgIC8vICAgICBtYXRjaF9sZW4gPSBrCiAgICAvLyAgICAgaWYgbWF0Y2hfbGVuIDwgMzoKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubWF0Y2hfbGVuID0gYXJjNC5VSW50NjQobWF0Y2hfbGVuKQogICAgLy8gICAgICAgICByZXR1cm4gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIC8vIAogICAgLy8gICAgIHdheXMgPSBVSW50NjQoMSkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIC8vICAgICAgICAgd2F5cyAqPSByZWVsX21hdGNoZXNbaV0ubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBiYXNlID0gcGRbc2VsZi5fc3ltYm9sX3RvX2luZGV4KHN5bSkgKiA2ICsgbWF0Y2hfbGVuXS5uYXRpdmUKICAgIC8vICAgICBpZiBiYXNlID09IDA6CiAgICAvLyAgICAgICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMud2F5cyA9IGFyYzQuVUludDY0KHdheXMpCiAgICAvLyAgICAgICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyAgICAgaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZSA9IHNlbGYuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gICAgICkKICAgIC8vICAgICBtdWx0ID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVswXS5uYXRpdmUKICAgIC8vICAgICBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICAvLyAgICAgcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMucGF5b3V0ID0gYXJjNC5VSW50NjQocGF5b3V0KQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy53YXlzID0gYXJjNC5VSW50NjQod2F5cykKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy5hbnlfd2lsZF91c2VkID0gYXJjNC5VSW50NjQoYW55X3dpbGQpCiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubXVsdGlfbGV2ZWwgPSBhcmM0LlVJbnQ2NChtdWx0KQogICAgLy8gICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCBhbGwgb2NjdXJyZW5jZXMgb2YgYSBzeW1ib2wgaW4gdGhlIGVudGlyZSBncmlkLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGNudCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICAgICAgaWYgZ3JpZFtjICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgICAgICBjbnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIGNudAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFByb2Nlc3Mgb25lIHNwaW4gYW5kIHJldHVybiB0aGUgcGF5b3V0LgogICAgLy8gICAgIEluY2x1ZGVzIGxpbmUgcGF5cywgamFja3BvdCBjaGVjaywgYW5kIGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgcm91bmQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IHNlbGYuX2dldF9saW5lX3N5bWJvbHMoKQogICAgLy8gICAgIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgLy8gICAgIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIC8vICAgICAgICAgc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIC8vICAgICAgICAgd2F5c19yZXN1bHQgPSBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkLCBzeW0sIHBheV9kZW5zZSkKICAgIC8vICAgICAgICAgbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gbGluZV90b3RhbAogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCBpc19ib251c19zcGluOiBhcmM0LkJvb2wKICAgIC8vICkgLT4gU3BpblJlc3VsdDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgICAgICAgICAgZ3JpZC5ieXRlcywgaXNfYm9udXNfc3Bpbi5uYXRpdmUKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBpc19ib251c19zcGluOiBib29sCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGN1bGF0ZSBwYXlvdXQgaW5jbHVkaW5nIGxpbmUgcGF5cywgYm9udXMgbXVsdGlwbGllciwgYW5kIGphY2twb3QuCiAgICAvLyAgICAgUmV0dXJucyBVSW50NjRfMyBhcnJheTogW3BheW91dCwgYm9udXNfc3BpbnNfYXdhcmRlZCwgamFja3BvdF9oaXRdCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKQogICAgLy8gCiAgICAvLyAgICAgIyBDaGVjayBqYWNrcG90IHRyaWdnZXIgKEhvViBzY2F0dGVyKQogICAgLy8gICAgIGphY2twb3RfaGl0ID0gVUludDY0KDApCiAgICAvLyAgICAgaG92X2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEhPVikpCiAgICAvLyAgICAgaWYgaG92X2NvdW50ID49IFVJbnQ2NChKQUNLUE9UX1RSSUdHRVJfQ09VTlQpOgogICAgLy8gICAgICAgICBqYWNrcG90X2hpdCA9IFVJbnQ2NCgxKQogICAgLy8gCiAgICAvLyAgICAgIyBBcHBseSBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHNwaW4KICAgIC8vICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFRfRElWSVNPUikKICAgIC8vICAgICBpZiBpc19ib251c19zcGluOgogICAgLy8gICAgICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAKICAgIC8vICAgICAjIENoZWNrIGJvbnVzIHRyaWdnZXIgKEJvbnVzIHNjYXR0ZXIpCiAgICAvLyAgICAgYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGJvbnVzX2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEJPTlVTKSkKICAgIC8vICAgICBpZiBib251c19jb3VudCA+PSBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQ6CiAgICAvLyAgICAgICAgIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQKICAgIC8vIAogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0KAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQobGluZV90b3RhbCksCiAgICAvLyAgICAgICAgIHBheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBheW91dF9tdWx0aXBsaWVyKSwKICAgIC8vICAgICAgICAgYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIC8vICAgICAgICAgamFja3BvdF9oaXQ9YXJjNC5VSW50NjQoamFja3BvdF9oaXQpLAogICAgLy8gICAgICkuYnl0ZXMKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIEJhbmsgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vICMgIyBvdmVycmlkZQogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gIyAgICAgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICMgIyBvdnJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gIyAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDE3NzAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSBzdG9yYWdlIGZvciBiYWxhbmNlcyBib3hlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9kZXBvc2l0KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHdpdGhkcmF3KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fd2l0aGRyYXcoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJhbGFuY2VzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmJhbmtfYmFsYW5jZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBiYW5rX2JhbGFuY2VzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2xvY2tlZCgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9sb2NrZWQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGxvY2tlZCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX29ubHlfc3VwZXJfbWFuYWdlcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIFR4bi5zZW5kZXIgPT0gc2VsZi5zdXBlcl9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgc3VwZXIgbWFuYWdlciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X3Jld2FyZF9tYW5hZ2VyKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgVHhuLnNlbmRlciA9PSBzZWxmLnJld2FyZF9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgcmV3YXJkIG1hbmFnZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ3JhbnRfcmV3YXJkX21hbmFnZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICAvLyAgICAgc2VsZi5yZXdhcmRfbWFuYWdlciA9IGFkZHJlc3MubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X3Jld2FyZF9tYW5hZ2VyKCkKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICBpZiBiZXRfa2V5IGluIHNlbGYuYmV0OiAgIyBoZXJlCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzUwCiAgICAvLyBpZiBiZXRfa2V5IGluIHNlbGYuYmV0OiAgIyBoZXJlCiAgICBieiBfZ2V0X2JldF9lbHNlX2JvZHlAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzUxCiAgICAvLyByZXR1cm4gc2VsZi5iZXRbYmV0X2tleV0KICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2dldAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYmV0IGVudHJ5IGV4aXN0cwogICAgcmV0c3ViCgpfZ2V0X2JldF9lbHNlX2JvZHlAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc1My0zNzU2CiAgICAvLyBiZXQsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmJldF9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc1NQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNy0yOTE5CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzU1CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc1My0zNzU2CiAgICAvLyBiZXQsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmJldF9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiYmV0X2RlZmF1bHQoKShhZGRyZXNzLHVpbnQ2NCxib29sLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzU3CiAgICAvLyByZXR1cm4gYmV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQ6IGJ5dGVzLCBzcGluX2luZGV4OiBieXRlcykgLT4gYnl0ZXM6CmdldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5OTEtMjk5NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlczMyLCBzcGluX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczE1OgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5OTUKICAgIC8vIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIGludCAyODAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5OTcKICAgIC8vIHNlbGYuX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oc2VlZC5ieXRlcywgc3Bpbl9pbmRleC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTk2LTI5OTgKICAgIC8vIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbihzZWVkLmJ5dGVzLCBzcGluX2luZGV4Lm5hdGl2ZSkKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQ6IGJ5dGVzLCBzcGluX2luZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAwMC0zMDAzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKAogICAgLy8gICAgIHNlbGYsIHNlZWQ6IEJ5dGVzLCBzcGluX2luZGV4OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAwNAogICAgLy8gaW5kZXggPSBhcmM0LlVJbnQ2NChzcGluX2luZGV4KQogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwMDUKICAgIC8vIGdyaWRfc2VlZCA9IG9wLnNoYTI1NihzZWVkICsgaW5kZXguYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwMDYKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfY2RmX3JlZWwxKCkgLT4gYnl0ZXM6CmdldF9jZGZfcmVlbDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwMjktMzAzMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb246CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzAzMQogICAgLy8gcmV0dXJuIEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfcmVlbDEoKSkKICAgIGNhbGxzdWIgX2dldF9jZGZfcmVlbDEKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfb3RoZXJzKCkgLT4gYnl0ZXM6CmdldF9jZGZfb3RoZXJzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDQ3LTMwNDgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDQ5CiAgICAvLyByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKSkKICAgIGNhbGxzdWIgX2dldF9jZGZfb3RoZXJzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5yZWVsX2hhc19zeW1ib2woZ3JpZDogYnl0ZXMsIHJlZWw6IGJ5dGVzLCBzeW06IGJ5dGVzKSAtPiBieXRlczoKcmVlbF9oYXNfc3ltYm9sOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTU2LTMxNTkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIHJlZWxfaGFzX3N5bWJvbCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCByZWVsOiBhcmM0LlVJbnQ2NCwgc3ltOiBCeXRlczEKICAgIC8vICkgLT4gYXJjNC5Cb29sOgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNjAKICAgIC8vIHJldHVybiBhcmM0LkJvb2woc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQuYnl0ZXMsIHJlZWwubmF0aXZlLCBzeW0uYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTMKICAgIHN3YXAKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfcmVlbF9oYXNfc3ltYm9sCiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3JlZWxfaGFzX3N5bWJvbChncmlkOiBieXRlcywgcmVlbDogdWludDY0LCBzeW06IGJ5dGVzKSAtPiB1aW50NjQ6Cl9yZWVsX2hhc19zeW1ib2w6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNjItMzE2MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9oYXNfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMpIC0+IGJvb2w6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE2NAogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgaW50IDAKCl9yZWVsX2hhc19zeW1ib2xfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTY0CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBmcmFtZV9kaWcgMAogICAgaW50IDMKICAgIDwKICAgIGJ6IF9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfZm9yQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE2NQogICAgLy8gaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDMKICAgICoKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTMKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIGJ6IF9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNjYKICAgIC8vIHJldHVybiBUcnVlCiAgICBpbnQgMQogICAgc3dhcAogICAgcmV0c3ViCgpfcmVlbF9oYXNfc3ltYm9sX2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE2NAogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgZnJhbWVfZGlnIDAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDAKICAgIGIgX3JlZWxfaGFzX3N5bWJvbF9mb3JfaGVhZGVyQDEKCl9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfZm9yQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNjcKICAgIC8vIHJldHVybiBGYWxzZQogICAgaW50IDAKICAgIHN3YXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KGdyaWQ6IGJ5dGVzLCBpc19ib251c19zcGluOiBieXRlcykgLT4gYnl0ZXM6CmNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzQxLTMzNDQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIGlzX2JvbnVzX3NwaW46IGFyYzQuQm9vbAogICAgLy8gKSAtPiBTcGluUmVzdWx0OgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNDUKICAgIC8vIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjAwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM0OAogICAgLy8gZ3JpZC5ieXRlcywgaXNfYm9udXNfc3Bpbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDAKICAgIGdldGJpdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzQ3LTMzNDkKICAgIC8vIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIGdyaWQuYnl0ZXMsIGlzX2JvbnVzX3NwaW4ubmF0aXZlCiAgICAvLyApLAogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzQ2LTMzNTAKICAgIC8vIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoCiAgICAvLyAgICAgICAgIGdyaWQuYnl0ZXMsIGlzX2JvbnVzX3NwaW4ubmF0aXZlCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChncmlkOiBieXRlcywgaXNfYm9udXNfc3BpbjogdWludDY0KSAtPiBieXRlczoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzUyLTMzNTUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBpc19ib251c19zcGluOiBib29sCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gMiAxCiAgICBieXRlICIiCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM2MAogICAgLy8gbGluZV90b3RhbCA9IHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM2Mi0zMzYzCiAgICAvLyAjIENoZWNrIGphY2twb3QgdHJpZ2dlciAoSG9WIHNjYXR0ZXIpCiAgICAvLyBqYWNrcG90X2hpdCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM2NAogICAgLy8gaG92X2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEhPVikpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ5dGUgMHg0NQogICAgY2FsbHN1YiBfY291bnRfc3ltYm9sCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNjUKICAgIC8vIGlmIGhvdl9jb3VudCA+PSBVSW50NjQoSkFDS1BPVF9UUklHR0VSX0NPVU5UKToKICAgIGludCAzCiAgICA+PQogICAgYnogX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzY2CiAgICAvLyBqYWNrcG90X2hpdCA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIGZyYW1lX2J1cnkgMwoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM2OC0zMzY5CiAgICAvLyAjIEFwcGx5IGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgc3BpbgogICAgLy8gcGF5b3V0X211bHRpcGxpZXIgPSBVSW50NjQoQk9OVVNfTElORV9NVUxUX0RJVklTT1IpCiAgICBpbnQgMTAwMDAKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzcwCiAgICAvLyBpZiBpc19ib251c19zcGluOgogICAgZnJhbWVfZGlnIC0xCiAgICBieiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3RfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNzEKICAgIC8vIHBheW91dF9tdWx0aXBsaWVyID0gVUludDY0KEJPTlVTX0xJTkVfTVVMVCkKICAgIGludCAxNzUwMAogICAgZnJhbWVfYnVyeSAxCgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3RfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzczLTMzNzQKICAgIC8vICMgQ2hlY2sgYm9udXMgdHJpZ2dlciAoQm9udXMgc2NhdHRlcikKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM3NQogICAgLy8gYm9udXNfY291bnQgPSBzZWxmLl9jb3VudF9zeW1ib2woZ3JpZCwgQnl0ZXMoQk9OVVMpKQogICAgZnJhbWVfZGlnIC0yCiAgICBieXRlIDB4NDYKICAgIGNhbGxzdWIgX2NvdW50X3N5bWJvbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzc2CiAgICAvLyBpZiBib251c19jb3VudCA+PSBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQ6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTIwLTI5MjEKICAgIC8vICMgYm9udXM6IGFkZGVkIHRvIGFkanVzdCBib251cyBzcGluIGNvbnRyaWJ1dGlvbiB0byBvdmVyYWxsIHJ0cCB3aXRob3V0IHVwZGF0ZQogICAgLy8gc2VsZi5ib251c190cmlnZ2VyX2NvdW50ID0gVUludDY0KEJPTlVTX1RSSUdHRVJfQ09VTlQpCiAgICBieXRlICJib251c190cmlnZ2VyX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzc2CiAgICAvLyBpZiBib251c19jb3VudCA+PSBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQ6CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYm9udXNfdHJpZ2dlcl9jb3VudCBleGlzdHMKICAgID49CiAgICBieiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3RfYWZ0ZXJfaWZfZWxzZUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzNzcKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MjIKICAgIC8vIHNlbGYuYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NChCT05VU19TUElOU19BV0FSREVEKQogICAgYnl0ZSAiYm9udXNfc3BpbnNfYXdhcmRlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM3NwogICAgLy8gYm9udXNfc3BpbnNfYXdhcmRlZCA9IHNlbGYuYm9udXNfc3BpbnNfYXdhcmRlZAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIHN3YXAKICAgIGZyYW1lX2J1cnkgMAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYm9udXNfc3BpbnNfYXdhcmRlZCBleGlzdHMKCl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzODAKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NChsaW5lX3RvdGFsKSwKICAgIGZyYW1lX2RpZyAyCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzODEKICAgIC8vIHBheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBheW91dF9tdWx0aXBsaWVyKSwKICAgIGZyYW1lX2RpZyAxCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzODIKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQ9YXJjNC5VSW50NjQoYm9udXNfc3BpbnNfYXdhcmRlZCksCiAgICBmcmFtZV9kaWcgMAogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzgzCiAgICAvLyBqYWNrcG90X2hpdD1hcmM0LlVJbnQ2NChqYWNrcG90X2hpdCksCiAgICBmcmFtZV9kaWcgMwogICAgaXRvYgogICAgY292ZXIgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzc5LTMzODQKICAgIC8vIHJldHVybiBTcGluUmVzdWx0KAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NChsaW5lX3RvdGFsKSwKICAgIC8vICAgICBwYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwYXlvdXRfbXVsdGlwbGllciksCiAgICAvLyAgICAgYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIC8vICAgICBqYWNrcG90X2hpdD1hcmM0LlVJbnQ2NChqYWNrcG90X2hpdCksCiAgICAvLyApLmJ5dGVzCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkOiBieXRlcykgLT4gdWludDY0OgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzIyLTMzMjYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGdyaWQ6IEJ5dGVzLAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMzMQogICAgLy8gbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMzMgogICAgLy8gbGluZV9zeW1ib2xzID0gc2VsZi5fZ2V0X2xpbmVfc3ltYm9scygpCiAgICBjYWxsc3ViIF9nZXRfbGluZV9zeW1ib2xzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMzMKICAgIC8vIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgY2FsbHN1YiBfZ2V0X3BheV9kZW5zZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzM0CiAgICAvLyBmb3IgaWR4IGluIHVyYW5nZSgxNik6CiAgICBpbnQgMAoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMzQKICAgIC8vIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMTYKICAgIDwKICAgIGJ6IF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfYWZ0ZXJfZm9yQDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMzNQogICAgLy8gc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgMQogICAgdW5jb3ZlciAyCiAgICBkaWcgMgogICAgc3Vic3RyaW5nMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzM2CiAgICAvLyB3YXlzX3Jlc3VsdCA9IHNlbGYuX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKGdyaWQsIHN5bSwgcGF5X2RlbnNlKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBmcmFtZV9kaWcgMgogICAgY2FsbHN1YiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMzNwogICAgLy8gbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICBmcmFtZV9idXJ5IDAKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X2Zvcl9oZWFkZXJAMQoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9hZnRlcl9mb3JANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMzOQogICAgLy8gcmV0dXJuIGxpbmVfdG90YWwKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfbGluZV9zeW1ib2xzKCkgLT4gYnl0ZXM6Cl9nZXRfbGluZV9zeW1ib2xzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTUxLTMxNTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9saW5lX3N5bWJvbHMoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE1MwogICAgLy8gbGluZV9zeW1ib2xzID0gQnl0ZXMoYiIwMTIzNDU2Nzg5QUJDREVGIikKICAgIGJ5dGUgMHgzMDMxMzIzMzM0MzUzNjM3MzgzOTQxNDI0MzQ0NDU0NgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTU0CiAgICAvLyByZXR1cm4gbGluZV9zeW1ib2xzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3BheV9kZW5zZSgpIC0+IGJ5dGVzOgpfZ2V0X3BheV9kZW5zZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA1MS0zMDUyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5X2RlbnNlKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNTMtMzA1NgogICAgLy8gcGF5X2RlbnNlLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNTUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTctMjkxOQogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA1NQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwNTMtMzA1NgogICAgLy8gcGF5X2RlbnNlLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgInBheV9kZW5zZV9kZWZhdWx0KCl1aW50NjRbOTZdIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzA1NwogICAgLy8gcmV0dXJuIHBheV9kZW5zZS5ieXRlcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKGdyaWQ6IGJ5dGVzLCBzeW06IGJ5dGVzLCBwYXlfZGVuc2U6IGJ5dGVzKSAtPiBieXRlczoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjU2LTMyNTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICBwcm90byAzIDEKICAgIGludCAwCiAgICBkdXAKICAgIGJ5dGUgIiIKICAgIGR1cG4gNQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjYzCiAgICAvLyBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkKICAgIGNhbGxzdWIgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI2NgogICAgLy8gaWYgbm90IHNlbGYuX3JlZWxfaGFzX3N5bWJvbChncmlkLCBVSW50NjQoMCksIHN5bSk6CiAgICBmcmFtZV9kaWcgLTMKICAgIGludCAwCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX3JlZWxfaGFzX3N5bWJvbAogICAgYm56IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI2NwogICAgLy8gcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICBmcmFtZV9kaWcgOAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNjkKICAgIC8vIHJlZWxfbWF0Y2hlcyA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgY2FsbHN1YiBfcmVlbF9tYXRjaGVzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNzEKICAgIC8vIG5fY29udHJpYiA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjcyCiAgICAvLyBrID0gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSA0CiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfYnVyeSAxCgpfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfd2hpbGVfdG9wQDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNzMKICAgIC8vIHdoaWxlIGsgPCBVSW50NjQoTlVNX1JFRUxTKToKICAgIGZyYW1lX2RpZyA0CiAgICBpbnQgNQogICAgPAogICAgYnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX3doaWxlQDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI3NAogICAgLy8gbSA9IHNlbGYuX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQoZ3JpZCwgaywgc3ltKQogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgNAogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgNQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjc1CiAgICAvLyBpZiBtID09IDA6CiAgICBieiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfd2hpbGVANwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjc3CiAgICAvLyByZWVsX21hdGNoZXNba10gPSBhcmM0LlVJbnQ2NChtKQogICAgZnJhbWVfZGlnIDUKICAgIGl0b2IKICAgIGZyYW1lX2RpZyA0CiAgICBkdXAKICAgIGludCAxNgogICAgPAogICAgYXNzZXJ0IC8vIEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGludCA4CiAgICAqCiAgICBmcmFtZV9kaWcgMQogICAgc3dhcAogICAgdW5jb3ZlciAzCiAgICByZXBsYWNlMwogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNzgKICAgIC8vIGNvbnRyaWJbbl9jb250cmliXSA9IGFyYzQuVUludDY0KGspCiAgICBkdXAKICAgIGl0b2IKICAgIGZyYW1lX2RpZyA2CiAgICBkdXAKICAgIGludCAxNgogICAgPAogICAgYXNzZXJ0IC8vIEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGludCA4CiAgICAqCiAgICBmcmFtZV9kaWcgMAogICAgc3dhcAogICAgdW5jb3ZlciAzCiAgICByZXBsYWNlMwogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNzkKICAgIC8vIG5fY29udHJpYiArPSAxCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODAKICAgIC8vIGsgKz0gMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgNAogICAgYiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfd2hpbGVfdG9wQDMKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl93aGlsZUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjgzCiAgICAvLyBpZiBtYXRjaF9sZW4gPCAzOgogICAgZnJhbWVfZGlnIDQKICAgIGludCAzCiAgICA8CiAgICBieiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfaWZfZWxzZUA5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODQKICAgIC8vIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIGZyYW1lX2RpZyA0CiAgICBpdG9iCiAgICBmcmFtZV9kaWcgOAogICAgc3dhcAogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjg1CiAgICAvLyByZXR1cm4gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfaWZfZWxzZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjg3CiAgICAvLyB3YXlzID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODgKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMwoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2Zvcl9oZWFkZXJAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODgKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgZnJhbWVfZGlnIDMKICAgIGZyYW1lX2RpZyA0CiAgICA8CiAgICBieiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfZm9yQDEzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODkKICAgIC8vIHdheXMgKj0gcmVlbF9tYXRjaGVzW2ldLm5hdGl2ZQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAxCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgNwogICAgKgogICAgZnJhbWVfYnVyeSA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyODgKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZm9yX2hlYWRlckAxMAoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2ZvckAxMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI5MQogICAgLy8gYmFzZSA9IHBkW3NlbGYuX3N5bWJvbF90b19pbmRleChzeW0pICogNiArIG1hdGNoX2xlbl0ubmF0aXZlCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX3N5bWJvbF90b19pbmRleAogICAgaW50IDYKICAgICoKICAgIGZyYW1lX2RpZyA0CiAgICArCiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjkyCiAgICAvLyBpZiBiYXNlID09IDA6CiAgICBibnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAMTUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI5MwogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubWF0Y2hfbGVuID0gYXJjNC5VSW50NjQobWF0Y2hfbGVuKQogICAgZnJhbWVfZGlnIDQKICAgIGl0b2IKICAgIGZyYW1lX2RpZyA4CiAgICBzd2FwCiAgICByZXBsYWNlMiA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyOTQKICAgIC8vIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLndheXMgPSBhcmM0LlVJbnQ2NCh3YXlzKQogICAgZnJhbWVfZGlnIDcKICAgIGl0b2IKICAgIHJlcGxhY2UyIDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyOTUKICAgIC8vIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDE1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjk3LTMyOTkKICAgIC8vIGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2UgPSBzZWxmLl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKAogICAgLy8gICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gKQogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfZGlnIDYKICAgIGNhbGxzdWIgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwMAogICAgLy8gbXVsdCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMF0ubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzAxCiAgICAvLyBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwMgogICAgLy8gcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDcKICAgIGR1cAogICAgY292ZXIgMwogICAgKgogICAgZGlnIDEKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwMwogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMucGF5b3V0ID0gYXJjNC5VSW50NjQocGF5b3V0KQogICAgaXRvYgogICAgZnJhbWVfZGlnIDgKICAgIHN3YXAKICAgIHJlcGxhY2UyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwNAogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubWF0Y2hfbGVuID0gYXJjNC5VSW50NjQobWF0Y2hfbGVuKQogICAgZnJhbWVfZGlnIDQKICAgIGl0b2IKICAgIHJlcGxhY2UyIDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwNQogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMud2F5cyA9IGFyYzQuVUludDY0KHdheXMpCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIHJlcGxhY2UyIDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMDYKICAgIC8vIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLmFueV93aWxkX3VzZWQgPSBhcmM0LlVJbnQ2NChhbnlfd2lsZCkKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgcmVwbGFjZTIgMjQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwNwogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubXVsdGlfbGV2ZWwgPSBhcmM0LlVJbnQ2NChtdWx0KQogICAgc3dhcAogICAgaXRvYgogICAgcmVwbGFjZTIgMzIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMwOAogICAgLy8gcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkgLT4gYnl0ZXM6Cl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjQ4LTMyNDkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI1MC0zMjUzCiAgICAvLyB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2Uud2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNTIKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTctMjkxOQogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI1MgogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNTAtMzI1MwogICAgLy8gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLndheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJ3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjU0CiAgICAvLyByZXR1cm4gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9yZWVsX21hdGNoZXMoKSAtPiBieXRlczoKX3JlZWxfbWF0Y2hlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIwNC0zMjA1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWVsX21hdGNoZXMoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIwNi0zMjA5CiAgICAvLyByZWVsX21hdGNoZXMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIwOAogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNy0yOTE5CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjA4CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIwNi0zMjA5CiAgICAvLyByZWVsX21hdGNoZXMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAicmVlbF9tYXRjaGVzX2RlZmF1bHQoKXVpbnQ2NFsxNl0iCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjEwCiAgICAvLyByZXR1cm4gcmVlbF9tYXRjaGVzLmJ5dGVzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZChncmlkOiBieXRlcywgcmVlbDogdWludDY0LCBzeW06IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjEyLTMyMTUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIHJlZWw6IFVJbnQ2NCwgc3ltOiBCeXRlcwogICAgLy8gKSAtPiBVSW50NjQ6CiAgICBwcm90byAzIDEKICAgIGludCAwCiAgICBieXRlICIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMTkKICAgIC8vIGNudCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIyMAogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGR1cAoKX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIwCiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCAzCiAgICA8CiAgICBieiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9hZnRlcl9mb3JAOQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIxCiAgICAvLyB2ID0gZ3JpZFtyZWVsICogMyArIHJdCiAgICBmcmFtZV9kaWcgLTIKICAgIGludCAzCiAgICAqCiAgICBmcmFtZV9kaWcgMwogICAgKwogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfZGlnIC0zCiAgICBjb3ZlciAyCiAgICBzdWJzdHJpbmczCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIyCiAgICAvLyBpZiB2ID09IHN5bSBvciB2ID09IFdJTEQxIG9yIHYgPT0gV0lMRDIgb3IgdiA9PSBXSUxEMzoKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIGJueiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9pZl9ib2R5QDYKICAgIGZyYW1lX2RpZyAwCiAgICBieXRlIDB4NDIKICAgID09CiAgICBibnogX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfaWZfYm9keUA2CiAgICBmcmFtZV9kaWcgMAogICAgYnl0ZSAweDQzCiAgICA9PQogICAgYm56IF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2lmX2JvZHlANgogICAgZnJhbWVfZGlnIDAKICAgIGJ5dGUgMHg0NAogICAgPT0KICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9idXJ5IDEKICAgIGJ6IF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2FmdGVyX2lmX2Vsc2VANwoKX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfaWZfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIzCiAgICAvLyBjbnQgKz0gVUludDY0KDEpCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMQoKX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfYWZ0ZXJfaWZfZWxzZUA3OgogICAgZnJhbWVfZGlnIDEKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjIwCiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfZm9yX2hlYWRlckAxCgpfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9hZnRlcl9mb3JAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIyNAogICAgLy8gcmV0dXJuIGNudAogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3N5bWJvbF90b19pbmRleChzeW06IGJ5dGVzKSAtPiB1aW50NjQ6Cl9zeW1ib2xfdG9faW5kZXg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNjktMzE3MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3ltYm9sX3RvX2luZGV4KHNlbGYsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTcxCiAgICAvLyBpZiBzeW0gPT0gQlVGRkFMTzoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDMwCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTcyCiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTczCiAgICAvLyBlbGlmIHN5bSA9PSBFQUdMRToKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDMxCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTc0CiAgICAvLyByZXR1cm4gVUludDY0KDEpCiAgICBpbnQgMQogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTc1CiAgICAvLyBlbGlmIHN5bSA9PSBDT1VHQVI6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzMgogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE3NgogICAgLy8gcmV0dXJuIFVJbnQ2NCgyKQogICAgaW50IDIKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE3NwogICAgLy8gZWxpZiBzeW0gPT0gRUxLOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzMKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNzgKICAgIC8vIHJldHVybiBVSW50NjQoMykKICAgIGludCAzCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNzkKICAgIC8vIGVsaWYgc3ltID09IFdPTEY6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzNAogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDEwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxODAKICAgIC8vIHJldHVybiBVSW50NjQoNCkKICAgIGludCA0CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTgxCiAgICAvLyBlbGlmIHN5bSA9PSBBOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzUKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTgyCiAgICAvLyByZXR1cm4gVUludDY0KDUpCiAgICBpbnQgNQogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE4MwogICAgLy8gZWxpZiBzeW0gPT0gSzoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM2CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE4NAogICAgLy8gcmV0dXJuIFVJbnQ2NCg2KQogICAgaW50IDYKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxODUKICAgIC8vIGVsaWYgc3ltID09IFE6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzNwogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxODYKICAgIC8vIHJldHVybiBVSW50NjQoNykKICAgIGludCA3CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTg3CiAgICAvLyBlbGlmIHN5bSA9PSBKOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzgKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTg4CiAgICAvLyByZXR1cm4gVUludDY0KDgpCiAgICBpbnQgOAogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE4OQogICAgLy8gZWxpZiBzeW0gPT0gVEVOOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzkKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTkwCiAgICAvLyByZXR1cm4gVUludDY0KDkpCiAgICBpbnQgOQogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE5MQogICAgLy8gZWxpZiBzeW0gPT0gTklORToKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDQxCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE5MgogICAgLy8gcmV0dXJuIFVJbnQ2NCgxMCkKICAgIGludCAxMAogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE5MwogICAgLy8gZWxpZiBzeW0gPT0gV0lMRDE6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHg0MgogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxOTQKICAgIC8vIHJldHVybiBVSW50NjQoMTEpCiAgICBpbnQgMTEKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxOTUKICAgIC8vIGVsaWYgc3ltID09IFdJTEQyOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4NDMKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTk2CiAgICAvLyByZXR1cm4gVUludDY0KDEyKQogICAgaW50IDEyCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTk3CiAgICAvLyBlbGlmIHN5bSA9PSBXSUxEMzoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDQ0CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE5OAogICAgLy8gcmV0dXJuIFVJbnQ2NCgxMykKICAgIGludCAxMwogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE5OQogICAgLy8gZWxpZiBzeW0gPT0gSE9WOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4NDUKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAzMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjAwCiAgICAvLyByZXR1cm4gVUludDY0KDE0KQogICAgaW50IDE0CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDMwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjAyCiAgICAvLyByZXR1cm4gVUludDY0KDE1KQogICAgaW50IDE1CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZyhncmlkOiBieXRlcywgY29udHJpYl9yZWVsczogYnl0ZXMsIG5fcmVlbHM6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjI2LTMyMjkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIGNvbnRyaWJfcmVlbHM6IEJ5dGVzLCBuX3JlZWxzOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0XzI6CiAgICBwcm90byAzIDEKICAgIGludCAwCiAgICBieXRlICIiCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIzMQogICAgLy8gbXVsdCA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIzMgogICAgLy8gYW55X3dpbGQgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMzMKICAgIC8vIGZvciBpIGluIHVyYW5nZShuX3JlZWxzKToKICAgIGR1cAoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjMzCiAgICAvLyBmb3IgaSBpbiB1cmFuZ2Uobl9yZWVscyk6CiAgICBmcmFtZV9kaWcgNQogICAgZnJhbWVfZGlnIC0xCiAgICA8CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9mb3JAMTgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIzNAogICAgLy8gcmkgPSBjb250cmliW2ldLm5hdGl2ZQogICAgZnJhbWVfZGlnIDUKICAgIGludCA4CiAgICAqCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjM1CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAxCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19mb3JfaGVhZGVyQDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMzUKICAgIC8vIGZvciByIGluIHVyYW5nZSgzKToKICAgIGZyYW1lX2RpZyAxCiAgICBpbnQgMwogICAgPAogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfZm9yQDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMzYKICAgIC8vIHYgPSBncmlkW3JpICogMyArIHJdCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDMKICAgICoKICAgIGZyYW1lX2RpZyAxCiAgICArCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTMKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyMzcKICAgIC8vIGlmIHYgPT0gV0lMRDM6CiAgICBieXRlIDB4NDQKICAgID09CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjM5CiAgICAvLyByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQoMyksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAzMDAwMDAwMDAwMDAwMDAwMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjQwCiAgICAvLyBlbGlmIHYgPT0gV0lMRDI6CiAgICBmcmFtZV9kaWcgMAogICAgYnl0ZSAweDQzCiAgICA9PQogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZWxzZV9ib2R5QDEwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNDEKICAgIC8vIGFueV93aWxkID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNDIKICAgIC8vIGlmIG11bHQgPCBVSW50NjQoMik6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDIKICAgIDwKICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2lmX2Vsc2VAMTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI0MwogICAgLy8gbXVsdCA9IFVJbnQ2NCgyKQogICAgaW50IDIKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9pZl9lbHNlQDEzCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19lbHNlX2JvZHlAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNDQKICAgIC8vIGVsaWYgdiA9PSBXSUxEMToKICAgIGZyYW1lX2RpZyAwCiAgICBieXRlIDB4NDIKICAgID09CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9pZl9lbHNlQDEzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNDUKICAgIC8vIGFueV93aWxkID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSA0CgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9pZl9lbHNlQDEzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjM1CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBmcmFtZV9kaWcgMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMQogICAgYiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19mb3JfaGVhZGVyQDMKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2ZvckAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzIzMwogICAgLy8gZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgZnJhbWVfZGlnIDUKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDUKICAgIGIgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZm9yX2hlYWRlckAxCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9mb3JAMTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMyNDYKICAgIC8vIHJldHVybiBVSW50NjRfMihhcmM0LlVJbnQ2NChtdWx0KSwgYXJjNC5VSW50NjQoYW55X3dpbGQpKQogICAgZnJhbWVfZGlnIDMKICAgIGl0b2IKICAgIGZyYW1lX2RpZyA0CiAgICBpdG9iCiAgICBjb25jYXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NvdW50X3N5bWJvbChncmlkOiBieXRlcywgc3ltOiBieXRlcykgLT4gdWludDY0OgpfY291bnRfc3ltYm9sOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzEwLTMzMTEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NvdW50X3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgc3ltOiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMiAxCiAgICBieXRlICIiCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMxNQogICAgLy8gY250ID0gVUludDY0KDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzE2CiAgICAvLyBmb3IgYyBpbiB1cmFuZ2UoTlVNX1JFRUxTKToKICAgIGR1cAoKX2NvdW50X3N5bWJvbF9mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMTYKICAgIC8vIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCA1CiAgICA8CiAgICBieiBfY291bnRfc3ltYm9sX2FmdGVyX2ZvckAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzE3CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMQoKX2NvdW50X3N5bWJvbF9mb3JfaGVhZGVyQDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMTcKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBmcmFtZV9kaWcgMQogICAgaW50IDMKICAgIDwKICAgIGJ6IF9jb3VudF9zeW1ib2xfYWZ0ZXJfZm9yQDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMxOAogICAgLy8gaWYgZ3JpZFtjICogMyArIHJdID09IHN5bToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMwogICAgKgogICAgZnJhbWVfZGlnIDEKICAgICsKICAgIGR1cAogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2RpZyAtMgogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgZnJhbWVfZGlnIC0xCiAgICA9PQogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2J1cnkgMAogICAgYnogX2NvdW50X3N5bWJvbF9hZnRlcl9pZl9lbHNlQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzMxOQogICAgLy8gY250ICs9IFVJbnQ2NCgxKQogICAgZnJhbWVfZGlnIDIKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDAKCl9jb3VudF9zeW1ib2xfYWZ0ZXJfaWZfZWxzZUA2OgogICAgZnJhbWVfZGlnIDAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzE3CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgZnJhbWVfZGlnIDEKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDEKICAgIGIgX2NvdW50X3N5bWJvbF9mb3JfaGVhZGVyQDMKCl9jb3VudF9zeW1ib2xfYWZ0ZXJfZm9yQDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzMTYKICAgIC8vIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgX2NvdW50X3N5bWJvbF9mb3JfaGVhZGVyQDEKCl9jb3VudF9zeW1ib2xfYWZ0ZXJfZm9yQDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzIwCiAgICAvLyByZXR1cm4gY250CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5vd25lcl9kZXBvc2l0KGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cm93bmVyX2RlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MjMtMzQyNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MjkKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDMwCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBkdXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MzEKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQubmF0aXZlKQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5MC0zNTkxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTkyCiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTQKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5My0zNTk1CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTYKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk5CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwMAogICAgLy8gYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk4LTM2MDIKICAgIC8vIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTctMzYwMwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCYWxhbmNlc1VwZGF0ZWQodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9iYW5rX2JhbGFuY2VzKCkgLT4gYnl0ZXM6Cl9iYW5rX2JhbGFuY2VzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDg2LTM0ODcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2JhbmtfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0ODkKICAgIC8vIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9pbnZhbGlkX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0ODgKICAgIC8vIHJldHVybiBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS5nZXQoCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDg4LTM0OTAKICAgIC8vIHJldHVybiBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS5nZXQoCiAgICAvLyAgICAgZGVmYXVsdD1zZWxmLl9pbnZhbGlkX2JhbGFuY2VzKCkKICAgIC8vICkKICAgIGJveF9nZXQKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2ludmFsaWRfYmFsYW5jZXMoKSAtPiBieXRlczoKX2ludmFsaWRfYmFsYW5jZXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0OTItMzQ5MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ5NC0zNDk3CiAgICAvLyBiYW5rX2JhbGFuY2VzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5iYW5rX2JhbGFuY2VfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0OTYKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTctMjkxOQogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ5NgogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0OTQtMzQ5NwogICAgLy8gYmFua19iYWxhbmNlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuYmFua19iYWxhbmNlX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJiYW5rX2JhbGFuY2VfZGVmYXVsdCgpKHVpbnQ2NCx1aW50NjQsdWludDY0LGJvb2wpIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ5OAogICAgLy8gcmV0dXJuIGJhbmtfYmFsYW5jZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MDgtMzUwOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MTAKICAgIC8vIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUxMgogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUxMS0zNTEzCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUxNAogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MTcKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTE4CiAgICAvLyBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MTkKICAgIC8vIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MTYtMzUyMAogICAgLy8gQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUxNS0zNTIxCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJhbGFuY2VzVXBkYXRlZCh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZGVwb3NpdCgpIC0+IHZvaWQ6CmRlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MzMtMzQzNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0MzgKICAgIC8vIHNlbGYuX2RlcG9zaXQoKQogICAgY2FsbHN1YiBfZGVwb3NpdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlcG9zaXQoKSAtPiB2b2lkOgpfZGVwb3NpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ0MC0zNDQxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ0NQogICAgLy8gcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiByZXF1aXJlX3BheW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ0NgogICAgLy8gYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZHVwCiAgICBhc3NlcnQgLy8gcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NDcKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NDgKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShwYXltZW50KQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS53aXRoZHJhdyhhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgp3aXRoZHJhdzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ1MC0zNDUxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB3aXRoZHJhdyhzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NTkKICAgIC8vIHNlbGYuX3dpdGhkcmF3KGFtb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX3dpdGhkcmF3CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fd2l0aGRyYXcoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl93aXRoZHJhdzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ2MS0zNDYyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93aXRoZHJhdyhzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDcwCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ3MQogICAgLy8gYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZnJhbWVfZGlnIC0xCiAgICBhc3NlcnQgLy8gYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ3MgogICAgLy8gYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICBhc3NlcnQgLy8gaW5zdWZmaWNpZW50IGJhbGFuY2UKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ3MwogICAgLy8gYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV90b3RhbAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgYXNzZXJ0IC8vIGluc3VmZmljaWVudCBiYWxhbmNlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NzQKICAgIC8vIGl0eG4uUGF5bWVudChyZWNlaXZlcj1UeG4uc2VuZGVyLCBhbW91bnQ9YW1vdW50KS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgdHhuIFNlbmRlcgogICAgZnJhbWVfZGlnIC0xCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDc1CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ3NgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpIC0+IHVpbnQ2NDoKX2dldF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUwNC0zNTA1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MDYKICAgIC8vIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmFsYW5jZV90b3RhbCgpIC0+IHVpbnQ2NDoKX2dldF9iYWxhbmNlX3RvdGFsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTg2LTM1ODcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTg4CiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MjMtMzUyNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MjUKICAgIC8vIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUyNwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MjYtMzUyOAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgYXNzZXJ0IC8vIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUzMAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTI5LTM1MzEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTMyCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUzNQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1MzYKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUzNwogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUzNC0zNTM4CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTMzLTM1MzkKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNS0zNjA2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA3CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDkKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDgtMzYxMAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxMgogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MTEtMzYxMwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE0CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxNwogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MTgKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxOQogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxNi0zNjIwCiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE1LTM2MjEKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfYmFsYW5jZXMoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDc4LTM0ODAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzQ4NAogICAgLy8gcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkgLT4gYnl0ZXM6CmdldF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUwMC0zNTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzUwMgogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpKQogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfYmFsYW5jZV9sb2NrZWQoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTQxLTM1NDIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTQzCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfbG9ja2VkKCkpCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV9sb2NrZWQKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmFsYW5jZV9sb2NrZWQoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV9sb2NrZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NDUtMzU0NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfbG9ja2VkKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTQ3CiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2JhbGFuY2VfdG90YWwoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1ODItMzU4MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4NAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV90b3RhbAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuc3luY19iYWxhbmNlKCkgLT4gYnl0ZXM6CnN5bmNfYmFsYW5jZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMy0zNjI0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzeW5jX2JhbGFuY2Uoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyOAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX3N5bmNfYmFsYW5jZSgpKQogICAgY2FsbHN1YiBfc3luY19iYWxhbmNlCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3luY19iYWxhbmNlKCkgLT4gdWludDY0Ogpfc3luY19iYWxhbmNlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMwLTM2MzEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bmNfYmFsYW5jZShzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMgogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMzCiAgICAvLyBhc3NlcnQgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgPT0gMAogICAgZHVwCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAhCiAgICBhc3NlcnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzNAogICAgLy8gYWNjb3VudCA9IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzUKICAgIC8vIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgZHVwCiAgICBhY2N0X3BhcmFtc19nZXQgQWNjdEJhbGFuY2UKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IGZ1bmRlZAogICAgYWNjdF9wYXJhbXNfZ2V0IEFjY3RNaW5CYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBmdW5kZWQKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzNgogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KGF2YWlsYWJsZV9iYWxhbmNlKQogICAgZHVwCiAgICBpdG9iCiAgICB1bmNvdmVyIDIKICAgIGRpZyAxCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzcKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KGF2YWlsYWJsZV9iYWxhbmNlKQogICAgc3dhcAogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjM4CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY0MQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDIKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY0MwogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY0MC0zNjQ0CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjM5LTM2NDUKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDYKICAgIC8vIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X3VzZXIoYWRkcmVzczogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfdXNlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1Mi0zNjUzCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfdXNlcihzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MpIC0+IFVzZXJEYXRhOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NTQKICAgIC8vIHJldHVybiBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MubmF0aXZlKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfdXNlcihhZGRyZXNzOiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfdXNlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1Ni0zNjU3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdXNlcihzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjYwLTM2NjYKICAgIC8vIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgZnJhbWVfZGlnIC0xCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjIKICAgIC8vIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjAtMzY2NgogICAgLy8gZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2MwogICAgLy8gYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjAtMzY2NgogICAgLy8gZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2NAogICAgLy8gc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjAtMzY2NgogICAgLy8gZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2NQogICAgLy8gbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjAtMzY2NgogICAgLy8gZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1OC0zNjY3CiAgICAvLyByZXR1cm4gc2VsZi51c2VyLmdldCgKICAgIC8vICAgICBhZGRyZXNzLAogICAgLy8gICAgIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICApLAogICAgLy8gKS5ieXRlcwogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZ2V0CiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdyYW50X3Jld2FyZF9tYW5hZ2VyKGFkZHJlc3M6IGJ5dGVzKSAtPiB2b2lkOgpncmFudF9yZXdhcmRfbWFuYWdlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY4MS0zNjgyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBncmFudF9yZXdhcmRfbWFuYWdlcihzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY4MwogICAgLy8gc2VsZi5fb25seV9zdXBlcl9tYW5hZ2VyKCkKICAgIGNhbGxzdWIgX29ubHlfc3VwZXJfbWFuYWdlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTMxCiAgICAvLyBzZWxmLnJld2FyZF9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgYnl0ZSAicmV3YXJkX21hbmFnZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODQKICAgIC8vIHNlbGYucmV3YXJkX21hbmFnZXIgPSBhZGRyZXNzLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuY3JlZGl0KGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpjcmVkaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODYtMzY4NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY3JlZGl0KHNlbGYsIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjkxCiAgICAvLyBzZWxmLl9vbmx5X3Jld2FyZF9tYW5hZ2VyKCkKICAgIGNhbGxzdWIgX29ubHlfcmV3YXJkX21hbmFnZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY5MgogICAgLy8gc2VsZi5fY3JlZGl0KGFkZHJlc3MubmF0aXZlLCBhbW91bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNhbGxzdWIgX2NyZWRpdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX29ubHlfcmV3YXJkX21hbmFnZXIoKSAtPiB2b2lkOgpfb25seV9yZXdhcmRfbWFuYWdlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3NS0zNjc2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X3Jld2FyZF9tYW5hZ2VyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3OAogICAgLy8gVHhuLnNlbmRlciA9PSBzZWxmLnJld2FyZF9tYW5hZ2VyCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTMxCiAgICAvLyBzZWxmLnJld2FyZF9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgYnl0ZSAicmV3YXJkX21hbmFnZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NzgKICAgIC8vIFR4bi5zZW5kZXIgPT0gc2VsZi5yZXdhcmRfbWFuYWdlcgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnJld2FyZF9tYW5hZ2VyIGV4aXN0cwogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3Ny0zNjc5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIFR4bi5zZW5kZXIgPT0gc2VsZi5yZXdhcmRfbWFuYWdlcgogICAgLy8gKSwgIm9ubHkgcmV3YXJkIG1hbmFnZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIGFzc2VydCAvLyBvbmx5IHJld2FyZCBtYW5hZ2VyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jcmVkaXQoYWRkcmVzczogYnl0ZXMsIGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjk0LTM2OTUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjk2CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfY3JlZGl0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2NyZWRpdChhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjk4LTM2OTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwMAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MDEKICAgIC8vIHVzZXIuY3JlZGl0ID0gYXJjNC5VSW50NjQodXNlci5jcmVkaXQubmF0aXZlICsgYW1vdW50KQogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIGl0b2IKICAgIHJlcGxhY2UyIDMyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MDIKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iZXQoYmV0X2tleTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQ0LTM3NDUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDYKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iZXRfa2V5KGFkZHJlc3M6IGJ5dGVzLCBiZXRfYW1vdW50OiBieXRlcywgaW5kZXg6IGJ5dGVzLCBtb2RlOiBieXRlcykgLT4gYnl0ZXM6CmdldF9iZXRfa2V5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzc2LTM3ODMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogYXJjNC5BZGRyZXNzLAogICAgLy8gICAgIGJldF9hbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzg3CiAgICAvLyBiZXRfYW1vdW50Lm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzg4CiAgICAvLyBpbmRleC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4OQogICAgLy8gbW9kZS5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4NS0zNzkwCiAgICAvLyBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICBiZXRfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICBpbmRleC5uYXRpdmUsCiAgICAvLyAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGNvdmVyIDMKICAgIGNhbGxzdWIgX2dldF9iZXRfa2V5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3ODQtMzc5MQogICAgLy8gcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICAgICAgYWRkcmVzcy5uYXRpdmUsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBpbmRleC5uYXRpdmUsCiAgICAvLyAgICAgICAgIG1vZGUubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmV0X2tleShhZGRyZXNzOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBpbmRleDogdWludDY0LCBtb2RlOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTMtMzgwMAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBhZGRyZXNzOiBBY2NvdW50LAogICAgLy8gICAgIGJldF9hbW91bnQ6IFVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byA0IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgwMwogICAgLy8gKyBhcmM0LlVJbnQ2NChiZXRfYW1vdW50KS5ieXRlcwogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MDItMzgwMwogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA0CiAgICAvLyArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MDItMzgwNAogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MDUKICAgIC8vICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODAyLTM4MDUKICAgIC8vIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChiZXRfYW1vdW50KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODAxLTM4MDYKICAgIC8vIHJldHVybiAoCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChiZXRfYW1vdW50KS5ieXRlcwogICAgLy8gICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChtb2RlKS5ieXRlcwogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuc3BpbihiZXRfYW1vdW50OiBieXRlcywgaW5kZXg6IGJ5dGVzLCBtb2RlOiBieXRlcykgLT4gYnl0ZXM6CnNwaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjgtMzg3NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3BpbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGJldF9hbW91bnQ6IGFyYzQuVUludDY0LCAgIyBiZXQgYW1vdW50IGluIGNyZWRpdHMKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsICAjIGVhY2ggc3BpbiBoYXMgYSB1bmlxdWUgaW5kZXgKICAgIC8vICAgICBtb2RlOiBhcmM0LlVJbnQ2NCwgICMgMCA9IGJvbnVzIHNwaW4gLCAxID0gY3JlZGl0IHNwaW4sIDIgPSBuZXR3b3JrIHNwaW4sIDQgPSB0b2tlbiBzcGluCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3NQogICAgLy8gYXNzZXJ0IG5vdCBzZWxmLl9pc19wYXVzZWQoKSwgInNwaW5zIGFyZSBwYXVzZWQiCiAgICBjYWxsc3ViIF9pc19wYXVzZWQKICAgICEKICAgIGFzc2VydCAvLyBzcGlucyBhcmUgcGF1c2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzcKICAgIC8vIHNlbGYuX3NwaW4oVHhuLnNlbmRlciwgYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgbW9kZS5uYXRpdmUpCiAgICB0eG4gU2VuZGVyCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9zcGluCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzYtMzg3OAogICAgLy8gcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9zcGluKFR4bi5zZW5kZXIsIGJldF9hbW91bnQubmF0aXZlLCBpbmRleC5uYXRpdmUsIG1vZGUubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2lzX3BhdXNlZCgpIC0+IHVpbnQ2NDoKX2lzX3BhdXNlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5OS00MTAwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pc19wYXVzZWQoc2VsZikgLT4gYm9vbDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTAxCiAgICAvLyByZXR1cm4gc2VsZi5wYXVzZWQgPT0gVUludDY0KDEpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI0LTI5MjUKICAgIC8vICMgcGF1c2libGUgc3RhdGUKICAgIC8vIHNlbGYucGF1c2VkID0gVUludDY0KCkgICMgMCA9IG5vdCBwYXVzZWQgKGRlZmF1bHQpLCAxID0gcGF1c2VkCiAgICBieXRlICJwYXVzZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMDEKICAgIC8vIHJldHVybiBzZWxmLnBhdXNlZCA9PSBVSW50NjQoMSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5wYXVzZWQgZXhpc3RzCiAgICBpbnQgMQogICAgPT0KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluKHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX3NwaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODAtMzg4MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3BpbigKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTUtMzkwMQogICAgLy8gIyByZWNlaXZlIG5ldHdvcmsgZmVlIGZyb20gc2FmZSBmb3IgYmV0IGJveAogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTYWZlLnNhZmVfbmV0d29ya190cmFuc2ZlciwKICAgIC8vICAgICBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzLAogICAgLy8gICAgIDUwNTAwLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnNhZmVfZmVlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTgKICAgIC8vIEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTAwCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkyOAogICAgLy8gc2VsZi5zYWZlX2ZlZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic2FmZV9mZWVfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTAwCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNhZmVfZmVlX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk1LTM5MDEKICAgIC8vICMgcmVjZWl2ZSBuZXR3b3JrIGZlZSBmcm9tIHNhZmUgZm9yIGJldCBib3gKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2FmZS5zYWZlX25ldHdvcmtfdHJhbnNmZXIsCiAgICAvLyAgICAgR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIC8vICAgICA1MDUwMCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJzYWZlX25ldHdvcmtfdHJhbnNmZXIoYWRkcmVzcyx1aW50NjQpdm9pZCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk5CiAgICAvLyA1MDUwMCwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDBjNTQ0CiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk1LTM5MDEKICAgIC8vICMgcmVjZWl2ZSBuZXR3b3JrIGZlZSBmcm9tIHNhZmUgZm9yIGJldCBib3gKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2FmZS5zYWZlX25ldHdvcmtfdHJhbnNmZXIsCiAgICAvLyAgICAgR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIC8vICAgICA1MDUwMCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpLAogICAgLy8gKQogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwMwogICAgLy8gY3JlZGl0X3NwaW4gPSBtb2RlID09IFVJbnQ2NCgxKQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwNAogICAgLy8gbmV0d29ya19zcGluID0gbW9kZSA9PSBVSW50NjQoMikKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDIKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDUKICAgIC8vIHRva2VuX3NwaW4gPSBtb2RlID09IFVJbnQ2NCg0KQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgNAogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwNgogICAgLy8gaWYgYm9udXNfc3BpbjoKICAgIGZyYW1lX2RpZyAtMQogICAgYm56IF9zcGluX2Vsc2VfYm9keUAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDcKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX2JvbnVzKHVzZXJfaWQsIFVJbnQ2NCgwKSwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgaW50IDAKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9zcGluX2JvbnVzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3NwaW5fZWxzZV9ib2R5QDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDgKICAgIC8vIGVsaWYgY3JlZGl0X3NwaW46CiAgICBmcmFtZV9kaWcgMAogICAgYnogX3NwaW5fZWxzZV9ib2R5QDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwOQogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDEpID09IFVJbnQ2NCgxKSwgImNyZWRpdCBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA5CiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMSkgPT0gVUludDY0KDEpLCAiY3JlZGl0IG1vZGUgbm90IGVuYWJsZWQiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDEKICAgICYKICAgIGludCAxCiAgICA9PQogICAgYXNzZXJ0IC8vIGNyZWRpdCBtb2RlIG5vdCBlbmFibGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTAKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX2NyZWRpdCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9zcGluX2NyZWRpdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9zcGluX2Vsc2VfYm9keUA1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTExCiAgICAvLyBlbGlmIG5ldHdvcmtfc3BpbjoKICAgIGZyYW1lX2RpZyAxCiAgICBieiBfc3Bpbl9lbHNlX2JvZHlANwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTEyCiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTEyCiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCAyCiAgICAmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTItMzkxNAogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgKICAgIC8vICAgICAyCiAgICAvLyApLCAibmV0d29yayBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDIKICAgID09CiAgICBhc3NlcnQgLy8gbmV0d29yayBtb2RlIG5vdCBlbmFibGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTUKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX25ldHdvcmsodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc3Bpbl9uZXR3b3JrCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3NwaW5fZWxzZV9ib2R5QDc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTYKICAgIC8vIGVsaWYgdG9rZW5fc3BpbjoKICAgIGZyYW1lX2RpZyAyCiAgICBhc3NlcnQgLy8gaW52YWxpZCBtb2RlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTcKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCksICJ0b2tlbiBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTE3CiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoNCkgPT0gVUludDY0KDQpLCAidG9rZW4gbW9kZSBub3QgZW5hYmxlZCIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgNAogICAgJgogICAgaW50IDQKICAgID09CiAgICBhc3NlcnQgLy8gdG9rZW4gbW9kZSBub3QgZW5hYmxlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTE4CiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl90b2tlbih1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9zcGluX3Rva2VuCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluX2JvbnVzKHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX3NwaW5fYm9udXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMDctNDExMAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9ib251cygKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMTEtNDExMgogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMTMtNDExNAogICAgLy8gIyAqIGJvbnVzIHNwZWNpZmljIGFzc2VydGlvbnMgKgogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPj0gVUludDY0KDEpLCAiYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gMSIKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICA+PQogICAgYXNzZXJ0IC8vIGJvbnVzIHNwaW4gaXMgbGVzcyB0aGFuIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDExNS00MTIwCiAgICAvLyAjIHBheSBzcGluIGNvc3QgKyBleHRyYSBwYXltZW50IGlmIG5ldHdvcmsKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyAjIE5vdGU6IGJvbnVzIHNwaW5zIGFyZSBub3Qga2lja2VyIGJldHMsIHNvIHRoZXkgY2Fubm90IHRyaWdnZXIgYm9udXMgc3BpbnMgb3IgamFja3BvdHMKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIEZhbHNlLCBzcGluX2luZGV4LCBtb2RlLCBiZXRfYW1vdW50KQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDExOQogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBGYWxzZSwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2Ftb3VudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMTUtNDEyMAogICAgLy8gIyBwYXkgc3BpbiBjb3N0ICsgZXh0cmEgcGF5bWVudCBpZiBuZXR3b3JrCiAgICAvLyAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gIyBOb3RlOiBib251cyBzcGlucyBhcmUgbm90IGtpY2tlciBiZXRzLCBzbyB0aGV5IGNhbm5vdCB0cmlnZ2VyIGJvbnVzIHNwaW5zIG9yIGphY2twb3RzCiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBGYWxzZSwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2Ftb3VudCkKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9kaWcgLTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDExOQogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBGYWxzZSwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2Ftb3VudCkKICAgIGNhbGxzdWIgX2NyZWF0ZV9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEyMS00MTIyCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4NgogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjEtNDEyMgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zcGluX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4NgogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjEtNDEyMgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjMtNDEyNAogICAgLy8gIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfc3Bpbl9jb3VudCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfc3Bpbl9jb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTI1CiAgICAvLyBzZWxmLl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTI2LTQxMjcKICAgIC8vICMgKiBib251cyBzcGVjaWZpYyB1c2VyIHVwZGF0ZXMgKgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JvbnVzX3NwaW4odXNlcl9pZCwgVUludDY0KDEpKQogICAgZnJhbWVfZGlnIC00CiAgICBpbnQgMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JvbnVzX3NwaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEzMAogICAgLy8gdXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjgtNDEzMQogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMzItNDEzMwogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY3JlYXRlX2JldCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBpc19raWNrZXJfYmV0OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0LCBuZXRfYmV0X2Ftb3VudDogdWludDY0KSAtPiBieXRlczoKX2NyZWF0ZV9iZXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzUtMzg0NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlYXRlX2JldCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIGlzX2tpY2tlcl9iZXQ6IGJvb2wsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBuZXRfYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDYgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ1CiAgICAvLyBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIGdsb2JhbCBSb3VuZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ2LTM4NTEKICAgIC8vIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICB1c2VyX2lkLAogICAgLy8gICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC02CiAgICBmcmFtZV9kaWcgLTUKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfYmV0X2tleQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg0LTM4NTIKICAgIC8vICAgICAjIHNwaW4gc3RhdGUKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoKQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuID0gQmlnVUludChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KCkKICAgIC8vICAgICAjIDEgPSBjcmVkaXQsIDIgPSBuZXR3b3JrLCA0ID0gdG9rZW4KICAgIC8vICAgICAjIDAgPSBkaXNhYmxlZAogICAgLy8gICAgICMgMSA9IGNyZWRpdCBlbmFibGVkCiAgICAvLyAgICAgIyAyID0gbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgMyA9IGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA1ID0gY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgNyA9IGNyZWRpdCwgbmV0d29yaywgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICBzZWxmLmNyZWRpdF9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KSAgIyA0MCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgPSBVSW50NjQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgPSBVSW50NjQoMTAwXzAwMCAqIDEwKio2KSAgIyAxMDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya191bml0ID0gVUludDY0KDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpICAjIDQwICogMTAqKjYKICAgIC8vICAgICBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50ID0gQmlnVUludCgxMDBfMDAwICogMTAqKjYpICAjIDEwMCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi50b2tlbl91bml0ID0gQmlnVUludCgxMCoqNikKICAgIC8vICAgICBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMzAsIDAuMyUKICAgIC8vICAgICBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzID0gVUludDY0KDIwKSAgIyAyMCwwLjIlCiAgICAvLyAgICAgIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICAgICAjIHN0b3JhZ2UKICAgIC8vICAgICBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICAjIGJvbnVzOiBhZGRlZCB0byBhZGp1c3QgYm9udXMgc3BpbiBjb250cmlidXRpb24gdG8gb3ZlcmFsbCBydHAgd2l0aG91dCB1cGRhdGUKICAgIC8vICAgICBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQgPSBVSW50NjQoQk9OVVNfVFJJR0dFUl9DT1VOVCkKICAgIC8vICAgICBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoQk9OVVNfU1BJTlNfQVdBUkRFRCkKICAgIC8vICAgICBzZWxmLmJvbnVzX2xpbmVfbXVsdCA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAgICAgIyBwYXVzaWJsZSBzdGF0ZQogICAgLy8gICAgIHNlbGYucGF1c2VkID0gVUludDY0KCkgICMgMCA9IG5vdCBwYXVzZWQgKGRlZmF1bHQpLCAxID0gcGF1c2VkCiAgICAvLyAgICAgIyBzYWZlIHN0YXRlCiAgICAvLyAgICAgc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgIyBhY2Nlc3MgY29udHJvbAogICAgLy8gICAgIHNlbGYuc3VwZXJfbWFuYWdlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIC8vICAgICBzZWxmLnJld2FyZF9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gCiAgICAvLyAjIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gIyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBwYXNzCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBPd25hYmxlCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkFkZHJlc3Moc2VsZi5fZ2V0X293bmVyKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9vd25lcihzZWxmKSAtPiBBY2NvdW50OgogICAgLy8gICAgIHJldHVybiBzZWxmLm93bmVyCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXIubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF90cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYub3duZXIgPSBuZXdfb3duZXIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIE9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLl9nZXRfb3duZXIoKSwgIm9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBDREYgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWQoc2VlZC5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KGJveF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KHNlbGYsIGJveF9rZXk6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBib3ggPSBzZWxmLl9nZXRfYmV0KGJveF9rZXkpCiAgICAvLyAgICAgZ3JpZF9zZWVkID0gb3Auc2hhMjU2KGJveF9rZXkgKyBib3guc3Bpbl9pbmRleC5ieXRlcykKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X2NkZl9ncmlkKGdyaWRfc2VlZCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlczMyLCBzcGluX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczE1OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQuYnl0ZXMsIHNwaW5faW5kZXgubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlcywgc3Bpbl9pbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIGluZGV4ID0gYXJjNC5VSW50NjQoc3Bpbl9pbmRleCkKICAgIC8vICAgICBncmlkX3NlZWQgPSBvcC5zaGEyNTYoc2VlZCArIGluZGV4LmJ5dGVzKQogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogVUludDY0KSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJsb2NrIHNlZWQgZm9yIGEgc3BlY2lmaWMgcm91bmQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gb3AuQmxvY2suYmxrX3NlZWQocm91bmQpWy0zMjpdCiAgICAvLyAKICAgIC8vICMgQ0RGX1JFRUwxID0gWwogICAgLy8gIyAgICAgNDI3MDc2NjYsICAgODU0MTUzMzIsICAxNzA4MzA2NjQsICAyMzQ4OTIxNjMsCiAgICAvLyAjICAgICAyOTg5NTM2NjIsICAzODQzNjg5OTQsICA0Njk3ODQzMjYsICA1NTUxOTk2NTgsCiAgICAvLyAjICAgICA2ODMzMjI2NTYsICA4MzI3OTk0ODgsICA5ODIyNzYzMTksICA5ODIyNzYzMTksCiAgICAvLyAjICAgICA5ODIyNzYzMTksICA5ODIyNzYzMTksICA5ODM5ODQ2MjUsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfcmVlbDFfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfcmVlbDEoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX3JlZWwxKCkpCiAgICAvLyAKICAgIC8vICMgQ0RGX09USEVSUyA9IFsKICAgIC8vICMgICAgIDQwNzQ5Nzk2LCAgIDgxNDk5NTkzLCAgMTYyOTk5MTg1LCAgMjI0MTIzODc5LAogICAgLy8gIyAgICAgMjg1MjQ4NTc0LCAgMzY2NzQ4MTY2LCAgNDQ4MjQ3NzU5LCAgNTI5NzQ3MzUxLAogICAgLy8gIyAgICAgNjUxOTk2NzQwLCAgNzk0NjIxMDI3LCAgKjkzNzI0NTMxNCwgIDk1NzYyMDIxMiwKICAgIC8vICMgICAgIDk3MjkwMTM4NSwgIDk4MzA4ODgzNSosICA5ODQ3MTg4MjYsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfb3RoZXJzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIC8vICAgICByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheV9kZW5zZShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBwYXlfZGVuc2UsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcGF5X2RlbnNlLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmcoc2VsZiwgc2VlZDogQnl0ZXMsIGluZGV4OiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdlbmVyYXRlIHJhbmRvbSBieXRlcyBmcm9tIHNlZWQgKyBnbG9iYWwgc3BpbiBjb3VudC4KICAgIC8vICAgICBUaGUgc3Bpbl9jb3VudCBlbnN1cmVzIGVhY2ggc3BpbiBnZXRzIGEgdW5pcXVlIHNlZWQgZXZlbiBpZiBvdGhlciBpbnB1dHMgYXJlIHRoZSBzYW1lLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgQ29tYmluZSBzZWVkIHdpdGggc3Bpbl9jb3VudCBhcyBub25jZSBmb3IgdW5pcXVlbmVzcwogICAgLy8gICAgIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgLy8gICAgIHJldHVybiBvcC5zaGEyNTYoY29tYmluZWQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmdfdHJpcGxlKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBybmcxID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDApKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmcyID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDEpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmczID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDIpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMyksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jZGZfZHJhdyhzZWxmLCBjZGY6IEJ5dGVzLCBjb2xfc2VsZWN0aW9uOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9hcnJheSA9IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKGNkZikKICAgIC8vICAgICBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVszXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs0XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs2XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs3XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs5XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkEiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJCIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxM106CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkQiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJFIikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJGIikKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xpbmVfc3ltYm9scyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBCeXRlcyhiIjAxMjM0NTY3ODlBQkNERUYiKQogICAgLy8gICAgIHJldHVybiBsaW5lX3N5bWJvbHMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgcmVlbF9oYXNfc3ltYm9sKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHJlZWw6IGFyYzQuVUludDY0LCBzeW06IEJ5dGVzMQogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZC5ieXRlcywgcmVlbC5uYXRpdmUsIHN5bS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfaGFzX3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzKSAtPiBib29sOgogICAgLy8gICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAvLyAgICAgcmV0dXJuIEZhbHNlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bWJvbF90b19pbmRleChzZWxmLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgaWYgc3ltID09IEJVRkZBTE86CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBFQUdMRToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxKQogICAgLy8gICAgIGVsaWYgc3ltID09IENPVUdBUjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVMSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgzKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdPTEY6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBBOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDUpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg2KQogICAgLy8gICAgIGVsaWYgc3ltID09IFE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBKOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDgpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gVEVOOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDkpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gTklORToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBIT1Y6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9tYXRjaGVzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiByZWVsX21hdGNoZXMuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCB0aGUgbnVtYmVyIG9mIG1hdGNoZXMgb2YgdGhlIHN5bWJvbCBvciB3aWxkIG9uIHRoZSBncmlkIGZvciBhIGdpdmVuIHJlZWwuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgY250ID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgdiA9IGdyaWRbcmVlbCAqIDMgKyByXQogICAgLy8gICAgICAgICBpZiB2ID09IHN5bSBvciB2ID09IFdJTEQxIG9yIHYgPT0gV0lMRDIgb3IgdiA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgICAgIGNudCArPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gY250CiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIGNvbnRyaWJfcmVlbHM6IEJ5dGVzLCBuX3JlZWxzOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0XzI6CiAgICAvLyAgICAgY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKGNvbnRyaWJfcmVlbHMpCiAgICAvLyAgICAgbXVsdCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIGFueV93aWxkID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgLy8gICAgICAgICByaSA9IGNvbnRyaWJbaV0ubmF0aXZlCiAgICAvLyAgICAgICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgICAgIHYgPSBncmlkW3JpICogMyArIHJdCiAgICAvLyAgICAgICAgICAgICBpZiB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KDMpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDI6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICBpZiBtdWx0IDwgVUludDY0KDIpOgogICAgLy8gICAgICAgICAgICAgICAgICAgICBtdWx0ID0gVUludDY0KDIpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDE6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQobXVsdCksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZGVmYXVsdChzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLndheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICAvLyAKICAgIC8vICAgICBwZCA9IFBheURlbnNlLmZyb21fYnl0ZXMocGF5X2RlbnNlKQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzID0gV2F5c1dpdGhTcGluQ2FwRGV0YWlscy5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBpZiBub3Qgc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQsIFVJbnQ2NCgwKSwgc3ltKToKICAgIC8vICAgICAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICAvLyAKICAgIC8vICAgICByZWVsX21hdGNoZXMgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBjb250cmliID0gcmVlbF9tYXRjaGVzLmNvcHkoKQogICAgLy8gICAgIG5fY29udHJpYiA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGsgPSBVSW50NjQoMCkKICAgIC8vICAgICB3aGlsZSBrIDwgVUludDY0KE5VTV9SRUVMUyk6CiAgICAvLyAgICAgICAgIG0gPSBzZWxmLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQsIGssIHN5bSkKICAgIC8vICAgICAgICAgaWYgbSA9PSAwOgogICAgLy8gICAgICAgICAgICAgYnJlYWsKICAgIC8vICAgICAgICAgcmVlbF9tYXRjaGVzW2tdID0gYXJjNC5VSW50NjQobSkKICAgIC8vICAgICAgICAgY29udHJpYltuX2NvbnRyaWJdID0gYXJjNC5VSW50NjQoaykKICAgIC8vICAgICAgICAgbl9jb250cmliICs9IDEKICAgIC8vICAgICAgICAgayArPSAxCiAgICAvLyAKICAgIC8vICAgICBtYXRjaF9sZW4gPSBrCiAgICAvLyAgICAgaWYgbWF0Y2hfbGVuIDwgMzoKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubWF0Y2hfbGVuID0gYXJjNC5VSW50NjQobWF0Y2hfbGVuKQogICAgLy8gICAgICAgICByZXR1cm4gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIC8vIAogICAgLy8gICAgIHdheXMgPSBVSW50NjQoMSkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIC8vICAgICAgICAgd2F5cyAqPSByZWVsX21hdGNoZXNbaV0ubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBiYXNlID0gcGRbc2VsZi5fc3ltYm9sX3RvX2luZGV4KHN5bSkgKiA2ICsgbWF0Y2hfbGVuXS5uYXRpdmUKICAgIC8vICAgICBpZiBiYXNlID09IDA6CiAgICAvLyAgICAgICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMud2F5cyA9IGFyYzQuVUludDY0KHdheXMpCiAgICAvLyAgICAgICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyAgICAgaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZSA9IHNlbGYuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gICAgICkKICAgIC8vICAgICBtdWx0ID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVswXS5uYXRpdmUKICAgIC8vICAgICBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICAvLyAgICAgcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMucGF5b3V0ID0gYXJjNC5VSW50NjQocGF5b3V0KQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy53YXlzID0gYXJjNC5VSW50NjQod2F5cykKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy5hbnlfd2lsZF91c2VkID0gYXJjNC5VSW50NjQoYW55X3dpbGQpCiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubXVsdGlfbGV2ZWwgPSBhcmM0LlVJbnQ2NChtdWx0KQogICAgLy8gICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCBhbGwgb2NjdXJyZW5jZXMgb2YgYSBzeW1ib2wgaW4gdGhlIGVudGlyZSBncmlkLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGNudCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICAgICAgaWYgZ3JpZFtjICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgICAgICBjbnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIGNudAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFByb2Nlc3Mgb25lIHNwaW4gYW5kIHJldHVybiB0aGUgcGF5b3V0LgogICAgLy8gICAgIEluY2x1ZGVzIGxpbmUgcGF5cywgamFja3BvdCBjaGVjaywgYW5kIGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgcm91bmQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IHNlbGYuX2dldF9saW5lX3N5bWJvbHMoKQogICAgLy8gICAgIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgLy8gICAgIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIC8vICAgICAgICAgc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIC8vICAgICAgICAgd2F5c19yZXN1bHQgPSBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkLCBzeW0sIHBheV9kZW5zZSkKICAgIC8vICAgICAgICAgbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gbGluZV90b3RhbAogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCBpc19ib251c19zcGluOiBhcmM0LkJvb2wKICAgIC8vICkgLT4gU3BpblJlc3VsdDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgICAgICAgICAgZ3JpZC5ieXRlcywgaXNfYm9udXNfc3Bpbi5uYXRpdmUKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBpc19ib251c19zcGluOiBib29sCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGN1bGF0ZSBwYXlvdXQgaW5jbHVkaW5nIGxpbmUgcGF5cywgYm9udXMgbXVsdGlwbGllciwgYW5kIGphY2twb3QuCiAgICAvLyAgICAgUmV0dXJucyBVSW50NjRfMyBhcnJheTogW3BheW91dCwgYm9udXNfc3BpbnNfYXdhcmRlZCwgamFja3BvdF9oaXRdCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKQogICAgLy8gCiAgICAvLyAgICAgIyBDaGVjayBqYWNrcG90IHRyaWdnZXIgKEhvViBzY2F0dGVyKQogICAgLy8gICAgIGphY2twb3RfaGl0ID0gVUludDY0KDApCiAgICAvLyAgICAgaG92X2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEhPVikpCiAgICAvLyAgICAgaWYgaG92X2NvdW50ID49IFVJbnQ2NChKQUNLUE9UX1RSSUdHRVJfQ09VTlQpOgogICAgLy8gICAgICAgICBqYWNrcG90X2hpdCA9IFVJbnQ2NCgxKQogICAgLy8gCiAgICAvLyAgICAgIyBBcHBseSBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHNwaW4KICAgIC8vICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFRfRElWSVNPUikKICAgIC8vICAgICBpZiBpc19ib251c19zcGluOgogICAgLy8gICAgICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAKICAgIC8vICAgICAjIENoZWNrIGJvbnVzIHRyaWdnZXIgKEJvbnVzIHNjYXR0ZXIpCiAgICAvLyAgICAgYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGJvbnVzX2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEJPTlVTKSkKICAgIC8vICAgICBpZiBib251c19jb3VudCA+PSBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQ6CiAgICAvLyAgICAgICAgIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQKICAgIC8vIAogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0KAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQobGluZV90b3RhbCksCiAgICAvLyAgICAgICAgIHBheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBheW91dF9tdWx0aXBsaWVyKSwKICAgIC8vICAgICAgICAgYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIC8vICAgICAgICAgamFja3BvdF9oaXQ9YXJjNC5VSW50NjQoamFja3BvdF9oaXQpLAogICAgLy8gICAgICkuYnl0ZXMKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIEJhbmsgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vICMgIyBvdmVycmlkZQogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gIyAgICAgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICMgIyBvdnJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gIyAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDE3NzAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSBzdG9yYWdlIGZvciBiYWxhbmNlcyBib3hlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9kZXBvc2l0KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHdpdGhkcmF3KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fd2l0aGRyYXcoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJhbGFuY2VzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmJhbmtfYmFsYW5jZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBiYW5rX2JhbGFuY2VzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2xvY2tlZCgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9sb2NrZWQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGxvY2tlZCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX29ubHlfc3VwZXJfbWFuYWdlcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIFR4bi5zZW5kZXIgPT0gc2VsZi5zdXBlcl9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgc3VwZXIgbWFuYWdlciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X3Jld2FyZF9tYW5hZ2VyKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgVHhuLnNlbmRlciA9PSBzZWxmLnJld2FyZF9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgcmV3YXJkIG1hbmFnZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ3JhbnRfcmV3YXJkX21hbmFnZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICAvLyAgICAgc2VsZi5yZXdhcmRfbWFuYWdlciA9IGFkZHJlc3MubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X3Jld2FyZF9tYW5hZ2VyKCkKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICBpZiBiZXRfa2V5IGluIHNlbGYuYmV0OiAgIyBoZXJlCiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLmJldFtiZXRfa2V5XQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIGJldCwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5iZXRfZGVmYXVsdCwKICAgIC8vICAgICAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICByZXR1cm4gYmV0CiAgICAvLyAKICAgIC8vICMgVE9ETyBkZXByZWNpYXRlIHVudXNlZAogICAgLy8gCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfZ2V0X2JldF9tb2RlKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAjICAgICBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICAvLyAjICAgICByZXR1cm4gYmV0Lm1vZGUubmF0aXZlCiAgICAvLyAKICAgIC8vICMgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAjIGRlZiBzZXRfbW9kZShzZWxmLCBtb2RlOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICMgICAgIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICAvLyAjICAgICBzZWxmLl9zZXRfbW9kZShtb2RlLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX3NldF9tb2RlKHNlbGYsIG1vZGU6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICMgICAgIGFzc2VydCBtb2RlID4gVUludDY0KDApLCAibW9kZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gIyAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgc3BpbiBwYXJhbXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gCiAgICAvLyAjIHNwaW4KICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgdXNlcl9pZDogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBjbGFpbV9yb3VuZDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyh1c2VyX2lkKSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIC8vICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlYXRlX2JldCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIGlzX2tpY2tlcl9iZXQ6IGJvb2wsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBuZXRfYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGUsCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTIKICAgIC8vIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGFzc2VydCAvLyBiZXQgYWxyZWFkeSBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1MwogICAgLy8gY2xhaW1fcm91bmQgPSBjb25maXJtZWRfcm91bmQgKyBzZWxmLl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKCkKICAgIGNhbGxzdWIgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEKICAgIHVuY292ZXIgMgogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODU2CiAgICAvLyBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC01CiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTcKICAgIC8vIGlzX2tpY2tlcl9iZXQ9YXJjNC5Cb29sKGlzX2tpY2tlcl9iZXQpLAogICAgYnl0ZSAweDAwCiAgICBpbnQgMAogICAgZnJhbWVfZGlnIC00CiAgICBzZXRiaXQKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1OAogICAgLy8gbmV0X2JldF9hbW91bnQ9YXJjNC5VSW50NjQobmV0X2JldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTkKICAgIC8vIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoc2VsZi5zcGluX2NvdW50KSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODYKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODU5CiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNlbGYuc3Bpbl9jb3VudCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3Bpbl9jb3VudCBleGlzdHMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2MAogICAgLy8gbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODYxCiAgICAvLyBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1NC0zODYyCiAgICAvLyBzZWxmLmJldFtiZXRfa2V5XSA9IEJldCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgaXNfa2lja2VyX2JldD1hcmM0LkJvb2woaXNfa2lja2VyX2JldCksCiAgICAvLyAgICAgbmV0X2JldF9hbW91bnQ9YXJjNC5VSW50NjQobmV0X2JldF9hbW91bnQpLAogICAgLy8gICAgIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoc2VsZi5zcGluX2NvdW50KSwKICAgIC8vICAgICBtb2RlPWFyYzQuVUludDY0KG1vZGUpLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNgogICAgdW5jb3ZlciA1CiAgICBjb25jYXQKICAgIHVuY292ZXIgNAogICAgY29uY2F0CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGRpZyAyCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjMtMzg2NgogICAgLy8gcmV0dXJuIEJldEtleUluZm8oCiAgICAvLyAgICAgYmV0X2tleT1CeXRlczU2LmZyb21fYnl0ZXMoYmV0X2tleSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKS5ieXRlcwogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YSgpIC0+IHVpbnQ2NDoKX2dldF9yb3VuZF9mdXR1cmVfZGVsdGE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTAtMzgxMQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxMgogICAgLy8gcmV0dXJuIFVJbnQ2NCgyKQogICAgaW50IDIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfc3Bpbl9jb3VudChhZGRyZXNzOiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF9zcGluX2NvdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzI0LTM3MjUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9zcGluX2NvdW50KHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczMAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzEKICAgIC8vIHVzZXIuc3Bpbl9jb3VudCA9IGFyYzQuVUludDY0KHVzZXIuc3Bpbl9jb3VudC5uYXRpdmUgKyBVSW50NjQoMSkpCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICBpdG9iCiAgICByZXBsYWNlMiA0OAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzMyCiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAoYWRkcmVzczogYnl0ZXMpIC0+IHZvaWQ6Cl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczNC0zNzM1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzYKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzM3CiAgICAvLyB1c2VyLmxhc3Rfc3Bpbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGl0b2IKICAgIHJlcGxhY2UyIDU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzgKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfYm9udXNfc3BpbihhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYm9udXNfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcxNy0zNzE4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzE5CiAgICAvLyB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyMAogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPj0gYW1vdW50LCAiYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyMQogICAgLy8gdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgaXRvYgogICAgcmVwbGFjZTIgNDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyMgogICAgLy8gc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2VtaXRfYmV0X3BsYWNlZCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCwgY2xhaW1fcm91bmQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2VtaXRfYmV0X3BsYWNlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxNi0zODI0CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICB1c2VyX2lkOiBBY2NvdW50LAogICAgLy8gICAgIGJldF9hbW91bnQ6IFVJbnQ2NCwKICAgIC8vICAgICBzcGluX2luZGV4OiBVSW50NjQsCiAgICAvLyAgICAgbW9kZTogVUludDY0LAogICAgLy8gICAgIGNsYWltX3JvdW5kOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byA1IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgyOAogICAgLy8gYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAtNAogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODI5CiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzAKICAgIC8vIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgzMQogICAgLy8gY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjYtMzgzMgogICAgLy8gQmV0UGxhY2VkKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC01CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgyNS0zODMzCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICBtb2RlPWFyYzQuVUludDY0KG1vZGUpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRQbGFjZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluX2NyZWRpdCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluX2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE0My00MTUwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2NyZWRpdCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTEtNDE1MgogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTMtNDE1NAogICAgLy8gIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIGR1cAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIGJvbnVzIHNwaW4gaXMgbm90IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE1NS00MTU2CiAgICAvLyAjIGNyZWRpdCBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBhc3NlcnQgdXNlci5jcmVkaXQubmF0aXZlID49IGJldF9hbW91bnQsICJjcmVkaXQgaXMgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTMKICAgID49CiAgICBhc3NlcnQgLy8gY3JlZGl0IGlzIGxlc3MgdGhhbiBiZXQgYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTctNDE1OAogICAgLy8gIyBhc3NlcnQgYmV0X2Ftb3VudCA9PSBzZWxmLmNyZWRpdF9iZXRfY29zdCwgImJldCBhbW91bnQgaXMgY3JlZGl0IGJldCBjb3N0IgogICAgLy8gYXNzZXJ0IGJldF9hbW91bnQgPT0gc2VsZi5jcmVkaXRfYmV0X2Nvc3QsICJiZXQgYW1vdW50IGlzIGNyZWRpdCBiZXQgY29zdCIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4OTQtMjkwMwogICAgLy8gIyAxID0gY3JlZGl0LCAyID0gbmV0d29yaywgNCA9IHRva2VuCiAgICAvLyAjIDAgPSBkaXNhYmxlZAogICAgLy8gIyAxID0gY3JlZGl0IGVuYWJsZWQKICAgIC8vICMgMiA9IG5ldHdvcmsgZW5hYmxlZAogICAgLy8gIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gIyAzID0gY3JlZGl0IGFuZCBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICMgNSA9IGNyZWRpdCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gIyA3ID0gY3JlZGl0LCBuZXR3b3JrLCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gc2VsZi5jcmVkaXRfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgYnl0ZSAiY3JlZGl0X2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTU3LTQxNTgKICAgIC8vICMgYXNzZXJ0IGJldF9hbW91bnQgPT0gc2VsZi5jcmVkaXRfYmV0X2Nvc3QsICJiZXQgYW1vdW50IGlzIGNyZWRpdCBiZXQgY29zdCIKICAgIC8vIGFzc2VydCBiZXRfYW1vdW50ID09IHNlbGYuY3JlZGl0X2JldF9jb3N0LCAiYmV0IGFtb3VudCBpcyBjcmVkaXQgYmV0IGNvc3QiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuY3JlZGl0X2JldF9jb3N0IGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICA9PQogICAgYXNzZXJ0IC8vIGJldCBhbW91bnQgaXMgY3JlZGl0IGJldCBjb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTktNDE2MwogICAgLy8gIyBwYXkgc3BpbiBjb3N0ICsgZXh0cmEgcGF5bWVudCBpZiBuZXR3b3JrCiAgICAvLyAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgRmFsc2UsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9hbW91bnQpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTYyCiAgICAvLyBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIEZhbHNlLCBzcGluX2luZGV4LCBtb2RlLCBiZXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE1OS00MTYzCiAgICAvLyAjIHBheSBzcGluIGNvc3QgKyBleHRyYSBwYXltZW50IGlmIG5ldHdvcmsKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBGYWxzZSwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2Ftb3VudCkKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9kaWcgLTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE2MgogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBGYWxzZSwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2Ftb3VudCkKICAgIGNhbGxzdWIgX2NyZWF0ZV9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE2NC00MTY1CiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4NgogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNjQtNDE2NQogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zcGluX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4NgogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNjQtNDE2NQogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNjYtNDE2NwogICAgLy8gIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfc3Bpbl9jb3VudCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfc3Bpbl9jb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTY4CiAgICAvLyBzZWxmLl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTY5LTQxNzAKICAgIC8vICMgKiBjcmVkaXQgc3BlY2lmaWMgdXBkYXRlcyAqCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfY3JlZGl0KHVzZXJfaWQsIGJldF9hbW91bnQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfZGVjcmVtZW50X2NyZWRpdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTc0CiAgICAvLyB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE3MS00MTc1CiAgICAvLyAjIHNlbGYuamFja3BvdF9jcmVkaXQgKz0gc2VsZi5qYWNrcG90X2NyZWRpdF9jb250cmlidXRpb24KICAgIC8vICMgZW1pdCBiZXQgcGxhY2VkIGV2ZW50CiAgICAvLyBzZWxmLl9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgdXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICB1bmNvdmVyIDQKICAgIGNhbGxzdWIgX2VtaXRfYmV0X3BsYWNlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTc2LTQxNzcKICAgIC8vICMgcmV0dXJuIGJldCBrZXkKICAgIC8vIHJldHVybiBiZXRfa2V5X2luZm8uYmV0X2tleS5ieXRlcwogICAgZXh0cmFjdCAwIDU2IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlY3JlbWVudF9jcmVkaXQoYWRkcmVzczogYnl0ZXMsIGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwNC0zNzA1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MDYKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzA3CiAgICAvLyBhc3NlcnQgdXNlci5jcmVkaXQubmF0aXZlID49IGFtb3VudCwgImNyZWRpdCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBjcmVkaXQgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzA4CiAgICAvLyB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSAtIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgaXRvYgogICAgcmVwbGFjZTIgMzIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwOQogICAgLy8gc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuTmV0d29ya1Nsb3RNYWNoaW5lLl9zcGluX25ldHdvcmsodXNlcl9pZDogYnl0ZXMsIGJldF9hbW91bnQ6IHVpbnQ2NCwgc3Bpbl9pbmRleDogdWludDY0LCBtb2RlOiB1aW50NjQpIC0+IGJ5dGVzOgpfc3Bpbl9uZXR3b3JrOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzMzLTQzMzYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbmV0d29yaygKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICBpbnQgMAogICAgYnl0ZSAiIgogICAgZHVwbiA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzgtNDMzOQogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNDEtNDM0MgogICAgLy8gIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICEKICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIG5vdCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNDQtNDM0NQogICAgLy8gIyBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vIGJhc2VfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwNAogICAgLy8gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgYnl0ZSAibmV0d29ya19iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzQ0LTQzNDUKICAgIC8vICMgbmV0d29yayBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBiYXNlX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzQ2CiAgICAvLyBraWNrZXJfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCArIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MDQKICAgIC8vIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpICAjIDQwICogMTAqKjYKICAgIGJ5dGUgIm5ldHdvcmtfYmFzZV9iZXRfY29zdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM0NgogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0IGV4aXN0cwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwNQogICAgLy8gc2VsZi5uZXR3b3JrX2tpY2tlcl9leHRyYSA9IFVJbnQ2NCgyMCAqIDEwKio2KSAgIyAyMCAqIDEwKio2CiAgICBieXRlICJuZXR3b3JrX2tpY2tlcl9leHRyYSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM0NgogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgZXhpc3RzCiAgICArCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNDgKICAgIC8vIGJldF9hbW91bnQgPT0gYmFzZV9iZXRfY29zdCBvciBiZXRfYW1vdW50ID09IGtpY2tlcl9iZXRfY29zdAogICAgZnJhbWVfZGlnIC0zCiAgICA9PQogICAgYm56IF9zcGluX25ldHdvcmtfYm9vbF90cnVlQDIKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIDgKICAgID09CiAgICBieiBfc3Bpbl9uZXR3b3JrX2Jvb2xfZmFsc2VAMwoKX3NwaW5fbmV0d29ya19ib29sX3RydWVAMjoKICAgIGludCAxCiAgICBiIF9zcGluX25ldHdvcmtfYm9vbF9tZXJnZUA0Cgpfc3Bpbl9uZXR3b3JrX2Jvb2xfZmFsc2VAMzoKICAgIGludCAwCgpfc3Bpbl9uZXR3b3JrX2Jvb2xfbWVyZ2VANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM0Ny00MzQ5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJldF9hbW91bnQgPT0gYmFzZV9iZXRfY29zdCBvciBiZXRfYW1vdW50ID09IGtpY2tlcl9iZXRfY29zdAogICAgLy8gKSwgImJldCBhbW91bnQgbXVzdCBiZSBiYXNlIGJldCBjb3N0IG9yIGtpY2tlciBiZXQgY29zdCIKICAgIGFzc2VydCAvLyBiZXQgYW1vdW50IG11c3QgYmUgYmFzZSBiZXQgY29zdCBvciBraWNrZXIgYmV0IGNvc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM1MgogICAgLy8gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50CiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV90b3RhbAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwNgogICAgLy8gc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCA9IFVJbnQ2NCgxMDBfMDAwICogMTAqKjYpICAjIDEwMCAqIDEwKio2CiAgICBieXRlICJuZXR3b3JrX21pbl9iYW5rX2Ftb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM1MgogICAgLy8gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgZXhpc3RzCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzUwLTQzNTMKICAgIC8vICMgbmV0d29yayBhbmQgdG9rZW4gc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpID49IHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQKICAgIC8vICksICJiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzU1CiAgICAvLyBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNTYKICAgIC8vIGFzc2VydCBwYXltZW50ID49IGJhc2VfYmV0X2Nvc3QsICJwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJhc2UgYmV0IGNvc3QiCiAgICBkdXAKICAgIGZyYW1lX2RpZyA3CiAgICA+PQogICAgYXNzZXJ0IC8vIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gYmFzZSBiZXQgY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzU3LTQzNTkKICAgIC8vIGFzc2VydCBwYXltZW50IDw9IGtpY2tlcl9iZXRfY29zdCArIFVJbnQ2NCgKICAgIC8vICAgICAxXzAwMF8wMDAKICAgIC8vICksICJwYXltZW50IG11c3QgYmUgbGVzcyB0aGFuIGtpY2tlciBiZXQgY29zdCIKICAgIGZyYW1lX2RpZyA4CiAgICBpbnQgMTAwMDAwMAogICAgKwogICAgPD0KICAgIGFzc2VydCAvLyBwYXltZW50IG11c3QgYmUgbGVzcyB0aGFuIGtpY2tlciBiZXQgY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzYxLTQzNjIKICAgIC8vICMgY2FsY3VsYXRlIGZlZXMKICAgIC8vIGZlZV90cmVhc3VyeSA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV90cmVhc3VyeV9icHMgLy8gVUludDY0KDEwMDAwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNQogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYnBzID0gVUludDY0KDMwKSAgIyAzMCwgMC4zJQogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2JwcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM2MS00MzYyCiAgICAvLyAjIGNhbGN1bGF0ZSBmZWVzCiAgICAvLyBmZWVfdHJlYXN1cnkgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfdHJlYXN1cnlfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5mZWVfdHJlYXN1cnlfYnBzIGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICAqCiAgICBpbnQgMTAwMDAKICAgIC8KICAgIGZyYW1lX2J1cnkgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzYzCiAgICAvLyBmZWVfbWFya2V0aW5nID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX21hcmtldGluZ19icHMgLy8gVUludDY0KDEwMDAwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNgogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2JwcyA9IFVJbnQ2NCgyMCkgICMgMjAsMC4yJQogICAgYnl0ZSAiZmVlX21hcmtldGluZ19icHMiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNjMKICAgIC8vIGZlZV9tYXJrZXRpbmcgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfbWFya2V0aW5nX2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX21hcmtldGluZ19icHMgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTMKICAgICoKICAgIGludCAxMDAwMAogICAgLwogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNjQtNDM2NgogICAgLy8gIyBjb25kIGZlZSBzaW5jZSBwYXltZW50CiAgICAvLyAjIGlmIGZlZSBzYWZlIGJhbGFuY2UgaXMgbGVzcyB0aGFuIDFfMDAwXzAwMCwgZnVuZCBpdCB3aXRoIDFfMDAwXzAwMAogICAgLy8gZmVlX3NhZmVfYXBwID0gQXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI4CiAgICAvLyBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzYWZlX2ZlZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNjQtNDM2NgogICAgLy8gIyBjb25kIGZlZSBzaW5jZSBwYXltZW50CiAgICAvLyAjIGlmIGZlZSBzYWZlIGJhbGFuY2UgaXMgbGVzcyB0aGFuIDFfMDAwXzAwMCwgZnVuZCBpdCB3aXRoIDFfMDAwXzAwMAogICAgLy8gZmVlX3NhZmVfYXBwID0gQXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICBjb3ZlciAyCiAgICBmcmFtZV9idXJ5IDIKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNhZmVfZmVlX2FwcF9pZCBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM2NwogICAgLy8gZmVlX3NhZmVfYWRkciA9IGZlZV9zYWZlX2FwcC5hZGRyZXNzCiAgICBhcHBfcGFyYW1zX2dldCBBcHBBZGRyZXNzCiAgICBhc3NlcnQgLy8gYXBwbGljYXRpb24gZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNjgKICAgIC8vIGZlZV9zYWZlX2JhbGFuY2UgPSBmZWVfc2FmZV9hZGRyLmJhbGFuY2UKICAgIGFjY3RfcGFyYW1zX2dldCBBY2N0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgZnVuZGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNjkKICAgIC8vIGZlZV9zYWZlX3BheW91dCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzcwCiAgICAvLyBpZiBmZWVfc2FmZV9iYWxhbmNlIDwgVUludDY0KDFfMDAwXzAwMCk6CiAgICBpbnQgMTAwMDAwMAogICAgPAogICAgYnogX3NwaW5fbmV0d29ya19hZnRlcl9pZl9lbHNlQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM3MQogICAgLy8gZmVlX3NhZmVfcGF5b3V0ID0gVUludDY0KDFfMDAwXzAwMCkKICAgIGludCAxMDAwMDAwCiAgICBmcmFtZV9idXJ5IDMKCl9zcGluX25ldHdvcmtfYWZ0ZXJfaWZfZWxzZUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzcyLTQzNzMKICAgIC8vICMgZ2V0IGphY2twb3QgY29udHJpYnV0aW9uCiAgICAvLyBqYWNrcG90X2NvbnRyaWJ1dGlvbiA9IHNlbGYuX2dldF9qYWNrcG90X2NvbnRyaWJ1dGlvbigpCiAgICBjYWxsc3ViIF9nZXRfamFja3BvdF9jb250cmlidXRpb24KICAgIGR1cAogICAgZnJhbWVfYnVyeSA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNzYKICAgIC8vIGZlZV90cmVhc3VyeSArIGZlZV9tYXJrZXRpbmcgKyBqYWNrcG90X2NvbnRyaWJ1dGlvbiArIGZlZV9zYWZlX3BheW91dAogICAgZnJhbWVfZGlnIDQKICAgIGZyYW1lX2RpZyAxCiAgICArCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNzQtNDM3NwogICAgLy8gIyBjYWxjdWxhdGUgdG90YWwgZmVlcwogICAgLy8gdG90YWxfZmVlcyA9ICgKICAgIC8vICAgICBmZWVfdHJlYXN1cnkgKyBmZWVfbWFya2V0aW5nICsgamFja3BvdF9jb250cmlidXRpb24gKyBmZWVfc2FmZV9wYXlvdXQKICAgIC8vICkKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM3NgogICAgLy8gZmVlX3RyZWFzdXJ5ICsgZmVlX21hcmtldGluZyArIGphY2twb3RfY29udHJpYnV0aW9uICsgZmVlX3NhZmVfcGF5b3V0CiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzNzgtNDM3OQogICAgLy8gIyBjYWxjdWxhdGUgbmV0IGJldCBhbW91bnQKICAgIC8vIGFzc2VydCB0b3RhbF9mZWVzIDw9IGJldF9hbW91bnQsICJ0b3RhbCBmZWVzIG11c3QgYmUgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMwogICAgPD0KICAgIGFzc2VydCAvLyB0b3RhbCBmZWVzIG11c3QgYmUgbGVzcyB0aGFuIGJldCBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM4MAogICAgLy8gbmV0X2JldF9hbW91bnQgPSBiZXRfYW1vdW50IC0gdG90YWxfZmVlcwogICAgZnJhbWVfZGlnIC0zCiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzgxLTQzODIKICAgIC8vICMgZGV0ZXJtaW5lIGlmIHRoaXMgaXMgYSBraWNrZXIgYmV0CiAgICAvLyBpc19raWNrZXJfYmV0ID0gYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIDgKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzODMtNDM4OAogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KAogICAgLy8gICAgICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBpc19raWNrZXJfYmV0LCBzcGluX2luZGV4LCBtb2RlLCBuZXRfYmV0X2Ftb3VudAogICAgLy8gICAgICkKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICB1bmNvdmVyIDIKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICB1bmNvdmVyIDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM4NS00Mzg3CiAgICAvLyBzZWxmLl9jcmVhdGVfYmV0KAogICAgLy8gICAgIHVzZXJfaWQsIGJldF9hbW91bnQsIGlzX2tpY2tlcl9iZXQsIHNwaW5faW5kZXgsIG1vZGUsIG5ldF9iZXRfYW1vdW50CiAgICAvLyApCiAgICBjYWxsc3ViIF9jcmVhdGVfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzODMtNDM4OAogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KAogICAgLy8gICAgICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBpc19raWNrZXJfYmV0LCBzcGluX2luZGV4LCBtb2RlLCBuZXRfYmV0X2Ftb3VudAogICAgLy8gICAgICkKICAgIC8vICkKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mzg5LTQzOTAKICAgIC8vICMgKiBuZXR3b3JrIHNwZWNpZmljIGZlZSBwYXlvdXQgKgogICAgLy8gaWYgZmVlX3NhZmVfcGF5b3V0ID4gMDoKICAgIGJ6IF9zcGluX25ldHdvcmtfYWZ0ZXJfaWZfZWxzZUA5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzOTEtNDM5NAogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWZlZV9zYWZlX2FwcC5hZGRyZXNzLAogICAgLy8gICAgIGFtb3VudD1mZWVfc2FmZV9wYXlvdXQsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzOTIKICAgIC8vIHJlY2VpdmVyPWZlZV9zYWZlX2FwcC5hZGRyZXNzLAogICAgZnJhbWVfZGlnIDIKICAgIGFwcF9wYXJhbXNfZ2V0IEFwcEFkZHJlc3MKICAgIGFzc2VydCAvLyBhcHBsaWNhdGlvbiBleGlzdHMKICAgIGZyYW1lX2RpZyAzCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzkxCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM5MS00Mzk0CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9ZmVlX3NhZmVfYXBwLmFkZHJlc3MsCiAgICAvLyAgICAgYW1vdW50PWZlZV9zYWZlX3BheW91dCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0Cgpfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM5NgogICAgLy8gaWYgZmVlX3RyZWFzdXJ5ID4gMDoKICAgIGZyYW1lX2RpZyA0CiAgICBieiBfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAMTIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM5Ny00NDAwCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9c2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ9ZmVlX3RyZWFzdXJ5LAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mzk4CiAgICAvLyByZWNlaXZlcj1zZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxMwogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGJ5dGUgImZlZV90cmVhc3VyeV9hZGRyZXNzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mzk4CiAgICAvLyByZWNlaXZlcj1zZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzIGV4aXN0cwogICAgZnJhbWVfZGlnIDQKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzOTcKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mzk3LTQ0MDAKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1zZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzLAogICAgLy8gICAgIGFtb3VudD1mZWVfdHJlYXN1cnksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX3N1Ym1pdAoKX3NwaW5fbmV0d29ya19hZnRlcl9pZl9lbHNlQDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDAyCiAgICAvLyBpZiBmZWVfbWFya2V0aW5nID4gMDoKICAgIGZyYW1lX2RpZyAxCiAgICBieiBfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAMTUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQwMy00NDA2CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9c2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MsCiAgICAvLyAgICAgYW1vdW50PWZlZV9tYXJrZXRpbmcsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MDQKICAgIC8vIHJlY2VpdmVyPXNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNAogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MDQKICAgIC8vIHJlY2VpdmVyPXNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyBleGlzdHMKICAgIGZyYW1lX2RpZyAxCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDAzCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQwMy00NDA2CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9c2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MsCiAgICAvLyAgICAgYW1vdW50PWZlZV9tYXJrZXRpbmcsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX3N1Ym1pdAoKX3NwaW5fbmV0d29ya19hZnRlcl9pZl9lbHNlQDE1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDA4CiAgICAvLyBpZiBqYWNrcG90X2NvbnRyaWJ1dGlvbiA+IDA6CiAgICBmcmFtZV9kaWcgNQogICAgYnogX3NwaW5fbmV0d29ya19hZnRlcl9pZl9lbHNlQDE4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MDkKICAgIC8vIGFwcCA9IEFwcGxpY2F0aW9uKHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MjYtMjkyNwogICAgLy8gIyBzYWZlIHN0YXRlCiAgICAvLyBzZWxmLnNhZmVfamFja3BvdF9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic2FmZV9qYWNrcG90X2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQwOQogICAgLy8gYXBwID0gQXBwbGljYXRpb24oc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNhZmVfamFja3BvdF9hcHBfaWQgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTAtNDQxMwogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWFwcC5hZGRyZXNzLAogICAgLy8gICAgIGFtb3VudD1qYWNrcG90X2NvbnRyaWJ1dGlvbiwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxMQogICAgLy8gcmVjZWl2ZXI9YXBwLmFkZHJlc3MsCiAgICBhcHBfcGFyYW1zX2dldCBBcHBBZGRyZXNzCiAgICBhc3NlcnQgLy8gYXBwbGljYXRpb24gZXhpc3RzCiAgICBmcmFtZV9kaWcgNQogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxMAogICAgLy8gaXR4bi5QYXltZW50KAogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTAtNDQxMwogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWFwcC5hZGRyZXNzLAogICAgLy8gICAgIGFtb3VudD1qYWNrcG90X2NvbnRyaWJ1dGlvbiwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0Cgpfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAMTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTUtNDQxNgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODYKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE1LTQ0MTYKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3Bpbl9jb3VudCBleGlzdHMKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODYKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE1LTQ0MTYKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE3LTQ0MTgKICAgIC8vICMgY29tbW9uIHVzZXIgdXBkYXRlcwogICAgLy8gc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIGZyYW1lX2RpZyAtNAogICAgY2FsbHN1YiBfaW5jcmVtZW50X3NwaW5fY291bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxOS00NDIwCiAgICAvLyAjICogbmV0d29yayBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKG5ldF9iZXRfYW1vdW50KQogICAgZnJhbWVfZGlnIDYKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyMQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG5ldF9iZXRfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyMgogICAgLy8gbG9ja3VwX2Ftb3VudCA9IHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpCiAgICBjYWxsc3ViIF9sb2NrdXBfYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MjMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChsb2NrdXBfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyNAogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGxvY2t1cF9hbW91bnQpCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyNQogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gamFja3BvdF9jb250cmlidXRpb24KICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODcKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KCkKICAgIGJ5dGUgImphY2twb3RfbmV0d29yayIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyNQogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gamFja3BvdF9jb250cmlidXRpb24KICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmsgZXhpc3RzCiAgICBmcmFtZV9kaWcgNQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg3CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NCgpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmsiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MjUKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrICs9IGphY2twb3RfY29udHJpYnV0aW9uCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDI4CiAgICAvLyB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MjYtNDQyOQogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzAtNDQzMQogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk5ldHdvcmtTbG90TWFjaGluZS5fZ2V0X2phY2twb3RfY29udHJpYnV0aW9uKCkgLT4gdWludDY0OgpfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjkxLTQyOTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9qYWNrcG90X2NvbnRyaWJ1dGlvbihzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIGJ5dGUgIiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMxMAogICAgLy8gbmV0d29ya19lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoTU9ERV9ORVRXT1JLKSA9PSBVSW50NjQoCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkzCiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTAKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KE1PREVfTkVUV09SSykgPT0gVUludDY0KAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCAyCiAgICAmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTAtNDMxMgogICAgLy8gbmV0d29ya19lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoTU9ERV9ORVRXT1JLKSA9PSBVSW50NjQoCiAgICAvLyAgICAgTU9ERV9ORVRXT1JLCiAgICAvLyApCiAgICBpbnQgMgogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMxMwogICAgLy8gdG9rZW5fZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KE1PREVfVE9LRU4pID09IFVJbnQ2NChNT0RFX1RPS0VOKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzEzCiAgICAvLyB0b2tlbl9lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoTU9ERV9UT0tFTikgPT0gVUludDY0KE1PREVfVE9LRU4pCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDQKICAgICYKICAgIGludCA0CiAgICA9PQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE1CiAgICAvLyBpZiBuZXR3b3JrX2VuYWJsZWQ6CiAgICBieiBfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE2CiAgICAvLyBhcHAgPSBBcHBsaWNhdGlvbihzZWxmLnNhZmVfamFja3BvdF9hcHBfaWQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI2LTI5MjcKICAgIC8vICMgc2FmZSBzdGF0ZQogICAgLy8gc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInNhZmVfamFja3BvdF9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTYKICAgIC8vIGFwcCA9IEFwcGxpY2F0aW9uKHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE3CiAgICAvLyBiYWxhbmNlID0gYXBwLmFkZHJlc3MuYmFsYW5jZQogICAgYXBwX3BhcmFtc19nZXQgQXBwQWRkcmVzcwogICAgYXNzZXJ0IC8vIGFwcGxpY2F0aW9uIGV4aXN0cwogICAgYWNjdF9wYXJhbXNfZ2V0IEFjY3RCYWxhbmNlCiAgICBzd2FwCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgYXNzZXJ0IC8vIGFjY291bnQgZnVuZGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTgKICAgIC8vIGlmIGJhbGFuY2UgPD0gc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbDoKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODgKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2luaXRpYWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTgKICAgIC8vIGlmIGJhbGFuY2UgPD0gc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbDoKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCBleGlzdHMKICAgIDw9CiAgICBieiBfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTkKICAgIC8vIHJldHVybiBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24KICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODkKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE5CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiBleGlzdHMKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzIwCiAgICAvLyBlbGlmIGJhbGFuY2UgPD0gc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCAqIDI6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg4CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29ya19pbml0aWFsIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzIwCiAgICAvLyBlbGlmIGJhbGFuY2UgPD0gc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCAqIDI6CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgZXhpc3RzCiAgICBpbnQgMgogICAgKgogICAgZnJhbWVfZGlnIDAKICAgID49CiAgICBieiBfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMjEKICAgIC8vIHJldHVybiBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gKiAyIC8vIDMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODkKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzIxCiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uICogMiAvLyAzCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiBleGlzdHMKICAgIGludCAyCiAgICAqCiAgICBpbnQgMwogICAgLwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfamFja3BvdF9jb250cmlidXRpb25fZWxzZV9ib2R5QDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMjIKICAgIC8vIGVsaWYgYmFsYW5jZSA8PSBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsICogMzoKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODgKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2luaXRpYWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMjIKICAgIC8vIGVsaWYgYmFsYW5jZSA8PSBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsICogMzoKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCBleGlzdHMKICAgIGludCAzCiAgICAqCiAgICBmcmFtZV9kaWcgMAogICAgPj0KICAgIGJ6IF9nZXRfamFja3BvdF9jb250cmlidXRpb25fZWxzZV9ib2R5QDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyMwogICAgLy8gcmV0dXJuIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiAvLyAyCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg5CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyMwogICAgLy8gcmV0dXJuIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiAvLyAyCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiBleGlzdHMKICAgIGludCAyCiAgICAvCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2dldF9qYWNrcG90X2NvbnRyaWJ1dGlvbl9lbHNlX2JvZHlANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyNAogICAgLy8gZWxpZiBiYWxhbmNlIDw9IHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgKiA0OgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4OAogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfaW5pdGlhbCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyNAogICAgLy8gZWxpZiBiYWxhbmNlIDw9IHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgKiA0OgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsIGV4aXN0cwogICAgaW50IDQKICAgICoKICAgIGZyYW1lX2RpZyAwCiAgICA+PQogICAgYnogX2dldF9qYWNrcG90X2NvbnRyaWJ1dGlvbl9lbHNlX2JvZHlAOQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzI1CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIC8vIDMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODkKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzI1CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIC8vIDMKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIGV4aXN0cwogICAgaW50IDMKICAgIC8KICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzI3CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIC8vIDUKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODkKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzI3CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIC8vIDUKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIGV4aXN0cwogICAgaW50IDUKICAgIC8KICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X2phY2twb3RfY29udHJpYnV0aW9uX2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyOAogICAgLy8gZWxpZiB0b2tlbl9lbmFibGVkOgogICAgZnJhbWVfZGlnIDEKICAgIGJ6IF9nZXRfamFja3BvdF9jb250cmlidXRpb25fZWxzZV9ib2R5QDEyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMjkKICAgIC8vIHJldHVybiBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkyCiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzI5CiAgICAvLyByZXR1cm4gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uIGV4aXN0cwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfamFja3BvdF9jb250cmlidXRpb25fZWxzZV9ib2R5QDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzMxCiAgICAvLyByZXR1cm4gVUludDY0KDApICAjIGludmFsaWQgbW9kZQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2xvY2t1cF9hbW91bnQoYmV0X2Ftb3VudDogdWludDY0KSAtPiB1aW50NjQ6Cl9sb2NrdXBfYW1vdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTIyLTM5MjMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2t1cF9hbW91bnQoc2VsZiwgYmV0X2Ftb3VudDogVUludDY0KSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyNwogICAgLy8gcmV0dXJuIGJldF9hbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU0OS0zNTUwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU1MQogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTUzCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU1Mi0zNTU0CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NTUKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTU4CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU1OQogICAgLy8gYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTYwCiAgICAvLyBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTU3LTM1NjEKICAgIC8vIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NTYtMzU2MgogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCYWxhbmNlc1VwZGF0ZWQodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluX3Rva2VuKHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX3NwaW5fdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMTEtNDIxNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl90b2tlbigKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMTUKICAgIC8vIHJldHVybiBzZWxmLl9iZXRfa2V5X2RlZmF1bHQoKQogICAgY2FsbHN1YiBfYmV0X2tleV9kZWZhdWx0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fYmV0X2tleV9kZWZhdWx0KCkgLT4gYnl0ZXM6Cl9iZXRfa2V5X2RlZmF1bHQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNjktNDA3MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmV0X2tleV9kZWZhdWx0KHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNzEtNDA3NAogICAgLy8gYmV0X2tleSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuYmV0X2tleV9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA3MwogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNy0yOTE5CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDczCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA3MS00MDc0CiAgICAvLyBiZXRfa2V5LCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5iZXRfa2V5X2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJiZXRfa2V5X2RlZmF1bHQoKWJ5dGVbNTZdIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA3NQogICAgLy8gcmV0dXJuIGJldF9rZXkuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmNsYWltKGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzEtMzkzMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNgogICAgLy8gZW5zdXJlX2J1ZGdldCgyMDAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkgICMgbG9jYWwgcHJvZ3JhbSBjb3N0IHdhcyA5Nzg3CiAgICBpbnQgMjAwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNwogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NsYWltKGJldF9rZXkuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NsYWltKGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzOS0zOTQwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg0LTM5NDQKICAgIC8vICAgICAjIHNwaW4gc3RhdGUKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoKQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuID0gQmlnVUludChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KCkKICAgIC8vICAgICAjIDEgPSBjcmVkaXQsIDIgPSBuZXR3b3JrLCA0ID0gdG9rZW4KICAgIC8vICAgICAjIDAgPSBkaXNhYmxlZAogICAgLy8gICAgICMgMSA9IGNyZWRpdCBlbmFibGVkCiAgICAvLyAgICAgIyAyID0gbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgMyA9IGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA1ID0gY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgNyA9IGNyZWRpdCwgbmV0d29yaywgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICBzZWxmLmNyZWRpdF9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KSAgIyA0MCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgPSBVSW50NjQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgPSBVSW50NjQoMTAwXzAwMCAqIDEwKio2KSAgIyAxMDAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYubmV0d29ya191bml0ID0gVUludDY0KDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpICAjIDQwICogMTAqKjYKICAgIC8vICAgICBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikgICMgMjAgKiAxMCoqNgogICAgLy8gICAgIHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50ID0gQmlnVUludCgxMDBfMDAwICogMTAqKjYpICAjIDEwMCAqIDEwKio2CiAgICAvLyAgICAgc2VsZi50b2tlbl91bml0ID0gQmlnVUludCgxMCoqNikKICAgIC8vICAgICBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMzAsIDAuMyUKICAgIC8vICAgICBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzID0gVUludDY0KDIwKSAgIyAyMCwwLjIlCiAgICAvLyAgICAgIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICAgICAjIHN0b3JhZ2UKICAgIC8vICAgICBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICAjIGJvbnVzOiBhZGRlZCB0byBhZGp1c3QgYm9udXMgc3BpbiBjb250cmlidXRpb24gdG8gb3ZlcmFsbCBydHAgd2l0aG91dCB1cGRhdGUKICAgIC8vICAgICBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQgPSBVSW50NjQoQk9OVVNfVFJJR0dFUl9DT1VOVCkKICAgIC8vICAgICBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoQk9OVVNfU1BJTlNfQVdBUkRFRCkKICAgIC8vICAgICBzZWxmLmJvbnVzX2xpbmVfbXVsdCA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAgICAgIyBwYXVzaWJsZSBzdGF0ZQogICAgLy8gICAgIHNlbGYucGF1c2VkID0gVUludDY0KCkgICMgMCA9IG5vdCBwYXVzZWQgKGRlZmF1bHQpLCAxID0gcGF1c2VkCiAgICAvLyAgICAgIyBzYWZlIHN0YXRlCiAgICAvLyAgICAgc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgIyBhY2Nlc3MgY29udHJvbAogICAgLy8gICAgIHNlbGYuc3VwZXJfbWFuYWdlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIC8vICAgICBzZWxmLnJld2FyZF9tYW5hZ2VyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gCiAgICAvLyAjIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gIyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBwYXNzCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBPd25hYmxlCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkFkZHJlc3Moc2VsZi5fZ2V0X293bmVyKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9vd25lcihzZWxmKSAtPiBBY2NvdW50OgogICAgLy8gICAgIHJldHVybiBzZWxmLm93bmVyCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXIubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF90cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYub3duZXIgPSBuZXdfb3duZXIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIE9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLl9nZXRfb3duZXIoKSwgIm9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBDREYgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWQoc2VlZC5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KGJveF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KHNlbGYsIGJveF9rZXk6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBib3ggPSBzZWxmLl9nZXRfYmV0KGJveF9rZXkpCiAgICAvLyAgICAgZ3JpZF9zZWVkID0gb3Auc2hhMjU2KGJveF9rZXkgKyBib3guc3Bpbl9pbmRleC5ieXRlcykKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X2NkZl9ncmlkKGdyaWRfc2VlZCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlczMyLCBzcGluX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczE1OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQuYnl0ZXMsIHNwaW5faW5kZXgubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbigKICAgIC8vICAgICBzZWxmLCBzZWVkOiBCeXRlcywgc3Bpbl9pbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIGluZGV4ID0gYXJjNC5VSW50NjQoc3Bpbl9pbmRleCkKICAgIC8vICAgICBncmlkX3NlZWQgPSBvcC5zaGEyNTYoc2VlZCArIGluZGV4LmJ5dGVzKQogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogVUludDY0KSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJsb2NrIHNlZWQgZm9yIGEgc3BlY2lmaWMgcm91bmQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gb3AuQmxvY2suYmxrX3NlZWQocm91bmQpWy0zMjpdCiAgICAvLyAKICAgIC8vICMgQ0RGX1JFRUwxID0gWwogICAgLy8gIyAgICAgNDI3MDc2NjYsICAgODU0MTUzMzIsICAxNzA4MzA2NjQsICAyMzQ4OTIxNjMsCiAgICAvLyAjICAgICAyOTg5NTM2NjIsICAzODQzNjg5OTQsICA0Njk3ODQzMjYsICA1NTUxOTk2NTgsCiAgICAvLyAjICAgICA2ODMzMjI2NTYsICA4MzI3OTk0ODgsICA5ODIyNzYzMTksICA5ODIyNzYzMTksCiAgICAvLyAjICAgICA5ODIyNzYzMTksICA5ODIyNzYzMTksICA5ODM5ODQ2MjUsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfcmVlbDFfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfcmVlbDEoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX3JlZWwxKCkpCiAgICAvLyAKICAgIC8vICMgQ0RGX09USEVSUyA9IFsKICAgIC8vICMgICAgIDQwNzQ5Nzk2LCAgIDgxNDk5NTkzLCAgMTYyOTk5MTg1LCAgMjI0MTIzODc5LAogICAgLy8gIyAgICAgMjg1MjQ4NTc0LCAgMzY2NzQ4MTY2LCAgNDQ4MjQ3NzU5LCAgNTI5NzQ3MzUxLAogICAgLy8gIyAgICAgNjUxOTk2NzQwLCAgNzk0NjIxMDI3LCAgKjkzNzI0NTMxNCwgIDk1NzYyMDIxMiwKICAgIC8vICMgICAgIDk3MjkwMTM4NSwgIDk4MzA4ODgzNSosICA5ODQ3MTg4MjYsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfb3RoZXJzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIC8vICAgICByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheV9kZW5zZShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBwYXlfZGVuc2UsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcGF5X2RlbnNlLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmcoc2VsZiwgc2VlZDogQnl0ZXMsIGluZGV4OiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdlbmVyYXRlIHJhbmRvbSBieXRlcyBmcm9tIHNlZWQgKyBnbG9iYWwgc3BpbiBjb3VudC4KICAgIC8vICAgICBUaGUgc3Bpbl9jb3VudCBlbnN1cmVzIGVhY2ggc3BpbiBnZXRzIGEgdW5pcXVlIHNlZWQgZXZlbiBpZiBvdGhlciBpbnB1dHMgYXJlIHRoZSBzYW1lLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgQ29tYmluZSBzZWVkIHdpdGggc3Bpbl9jb3VudCBhcyBub25jZSBmb3IgdW5pcXVlbmVzcwogICAgLy8gICAgIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgLy8gICAgIHJldHVybiBvcC5zaGEyNTYoY29tYmluZWQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmdfdHJpcGxlKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBybmcxID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDApKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmcyID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDEpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmczID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDIpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMyksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jZGZfZHJhdyhzZWxmLCBjZGY6IEJ5dGVzLCBjb2xfc2VsZWN0aW9uOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9hcnJheSA9IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKGNkZikKICAgIC8vICAgICBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVszXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs0XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs2XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs3XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs5XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkEiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJCIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxM106CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkQiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJFIikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJGIikKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xpbmVfc3ltYm9scyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBCeXRlcyhiIjAxMjM0NTY3ODlBQkNERUYiKQogICAgLy8gICAgIHJldHVybiBsaW5lX3N5bWJvbHMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgcmVlbF9oYXNfc3ltYm9sKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHJlZWw6IGFyYzQuVUludDY0LCBzeW06IEJ5dGVzMQogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZC5ieXRlcywgcmVlbC5uYXRpdmUsIHN5bS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfaGFzX3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzKSAtPiBib29sOgogICAgLy8gICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAvLyAgICAgcmV0dXJuIEZhbHNlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bWJvbF90b19pbmRleChzZWxmLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgaWYgc3ltID09IEJVRkZBTE86CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBFQUdMRToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxKQogICAgLy8gICAgIGVsaWYgc3ltID09IENPVUdBUjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVMSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgzKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdPTEY6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBBOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDUpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg2KQogICAgLy8gICAgIGVsaWYgc3ltID09IFE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBKOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDgpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gVEVOOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDkpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gTklORToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBIT1Y6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9tYXRjaGVzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiByZWVsX21hdGNoZXMuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCB0aGUgbnVtYmVyIG9mIG1hdGNoZXMgb2YgdGhlIHN5bWJvbCBvciB3aWxkIG9uIHRoZSBncmlkIGZvciBhIGdpdmVuIHJlZWwuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgY250ID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgdiA9IGdyaWRbcmVlbCAqIDMgKyByXQogICAgLy8gICAgICAgICBpZiB2ID09IHN5bSBvciB2ID09IFdJTEQxIG9yIHYgPT0gV0lMRDIgb3IgdiA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgICAgIGNudCArPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gY250CiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIGNvbnRyaWJfcmVlbHM6IEJ5dGVzLCBuX3JlZWxzOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0XzI6CiAgICAvLyAgICAgY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKGNvbnRyaWJfcmVlbHMpCiAgICAvLyAgICAgbXVsdCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIGFueV93aWxkID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgLy8gICAgICAgICByaSA9IGNvbnRyaWJbaV0ubmF0aXZlCiAgICAvLyAgICAgICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgICAgIHYgPSBncmlkW3JpICogMyArIHJdCiAgICAvLyAgICAgICAgICAgICBpZiB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KDMpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDI6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICBpZiBtdWx0IDwgVUludDY0KDIpOgogICAgLy8gICAgICAgICAgICAgICAgICAgICBtdWx0ID0gVUludDY0KDIpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDE6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQobXVsdCksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZGVmYXVsdChzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLndheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICAvLyAKICAgIC8vICAgICBwZCA9IFBheURlbnNlLmZyb21fYnl0ZXMocGF5X2RlbnNlKQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzID0gV2F5c1dpdGhTcGluQ2FwRGV0YWlscy5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19kZWZhdWx0KCkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBpZiBub3Qgc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQsIFVJbnQ2NCgwKSwgc3ltKToKICAgIC8vICAgICAgICAgcmV0dXJuIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICAvLyAKICAgIC8vICAgICByZWVsX21hdGNoZXMgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBjb250cmliID0gcmVlbF9tYXRjaGVzLmNvcHkoKQogICAgLy8gICAgIG5fY29udHJpYiA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGsgPSBVSW50NjQoMCkKICAgIC8vICAgICB3aGlsZSBrIDwgVUludDY0KE5VTV9SRUVMUyk6CiAgICAvLyAgICAgICAgIG0gPSBzZWxmLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQsIGssIHN5bSkKICAgIC8vICAgICAgICAgaWYgbSA9PSAwOgogICAgLy8gICAgICAgICAgICAgYnJlYWsKICAgIC8vICAgICAgICAgcmVlbF9tYXRjaGVzW2tdID0gYXJjNC5VSW50NjQobSkKICAgIC8vICAgICAgICAgY29udHJpYltuX2NvbnRyaWJdID0gYXJjNC5VSW50NjQoaykKICAgIC8vICAgICAgICAgbl9jb250cmliICs9IDEKICAgIC8vICAgICAgICAgayArPSAxCiAgICAvLyAKICAgIC8vICAgICBtYXRjaF9sZW4gPSBrCiAgICAvLyAgICAgaWYgbWF0Y2hfbGVuIDwgMzoKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubWF0Y2hfbGVuID0gYXJjNC5VSW50NjQobWF0Y2hfbGVuKQogICAgLy8gICAgICAgICByZXR1cm4gd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIC8vIAogICAgLy8gICAgIHdheXMgPSBVSW50NjQoMSkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIC8vICAgICAgICAgd2F5cyAqPSByZWVsX21hdGNoZXNbaV0ubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBiYXNlID0gcGRbc2VsZi5fc3ltYm9sX3RvX2luZGV4KHN5bSkgKiA2ICsgbWF0Y2hfbGVuXS5uYXRpdmUKICAgIC8vICAgICBpZiBiYXNlID09IDA6CiAgICAvLyAgICAgICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMud2F5cyA9IGFyYzQuVUludDY0KHdheXMpCiAgICAvLyAgICAgICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyAgICAgaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZSA9IHNlbGYuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gICAgICkKICAgIC8vICAgICBtdWx0ID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVswXS5uYXRpdmUKICAgIC8vICAgICBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICAvLyAgICAgcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMucGF5b3V0ID0gYXJjNC5VSW50NjQocGF5b3V0KQogICAgLy8gICAgIHdheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzLm1hdGNoX2xlbiA9IGFyYzQuVUludDY0KG1hdGNoX2xlbikKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy53YXlzID0gYXJjNC5VSW50NjQod2F5cykKICAgIC8vICAgICB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscy5hbnlfd2lsZF91c2VkID0gYXJjNC5VSW50NjQoYW55X3dpbGQpCiAgICAvLyAgICAgd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMubXVsdGlfbGV2ZWwgPSBhcmM0LlVJbnQ2NChtdWx0KQogICAgLy8gICAgIHJldHVybiB3YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCBhbGwgb2NjdXJyZW5jZXMgb2YgYSBzeW1ib2wgaW4gdGhlIGVudGlyZSBncmlkLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGNudCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICAgICAgaWYgZ3JpZFtjICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgICAgICBjbnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIGNudAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFByb2Nlc3Mgb25lIHNwaW4gYW5kIHJldHVybiB0aGUgcGF5b3V0LgogICAgLy8gICAgIEluY2x1ZGVzIGxpbmUgcGF5cywgamFja3BvdCBjaGVjaywgYW5kIGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgcm91bmQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IHNlbGYuX2dldF9saW5lX3N5bWJvbHMoKQogICAgLy8gICAgIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgLy8gICAgIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIC8vICAgICAgICAgc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIC8vICAgICAgICAgd2F5c19yZXN1bHQgPSBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkLCBzeW0sIHBheV9kZW5zZSkKICAgIC8vICAgICAgICAgbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gbGluZV90b3RhbAogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCBpc19ib251c19zcGluOiBhcmM0LkJvb2wKICAgIC8vICkgLT4gU3BpblJlc3VsdDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgICAgICAgICAgZ3JpZC5ieXRlcywgaXNfYm9udXNfc3Bpbi5uYXRpdmUKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBpc19ib251c19zcGluOiBib29sCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENhbGN1bGF0ZSBwYXlvdXQgaW5jbHVkaW5nIGxpbmUgcGF5cywgYm9udXMgbXVsdGlwbGllciwgYW5kIGphY2twb3QuCiAgICAvLyAgICAgUmV0dXJucyBVSW50NjRfMyBhcnJheTogW3BheW91dCwgYm9udXNfc3BpbnNfYXdhcmRlZCwgamFja3BvdF9oaXRdCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKQogICAgLy8gCiAgICAvLyAgICAgIyBDaGVjayBqYWNrcG90IHRyaWdnZXIgKEhvViBzY2F0dGVyKQogICAgLy8gICAgIGphY2twb3RfaGl0ID0gVUludDY0KDApCiAgICAvLyAgICAgaG92X2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEhPVikpCiAgICAvLyAgICAgaWYgaG92X2NvdW50ID49IFVJbnQ2NChKQUNLUE9UX1RSSUdHRVJfQ09VTlQpOgogICAgLy8gICAgICAgICBqYWNrcG90X2hpdCA9IFVJbnQ2NCgxKQogICAgLy8gCiAgICAvLyAgICAgIyBBcHBseSBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHNwaW4KICAgIC8vICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFRfRElWSVNPUikKICAgIC8vICAgICBpZiBpc19ib251c19zcGluOgogICAgLy8gICAgICAgICBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NChCT05VU19MSU5FX01VTFQpCiAgICAvLyAKICAgIC8vICAgICAjIENoZWNrIGJvbnVzIHRyaWdnZXIgKEJvbnVzIHNjYXR0ZXIpCiAgICAvLyAgICAgYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGJvbnVzX2NvdW50ID0gc2VsZi5fY291bnRfc3ltYm9sKGdyaWQsIEJ5dGVzKEJPTlVTKSkKICAgIC8vICAgICBpZiBib251c19jb3VudCA+PSBzZWxmLmJvbnVzX3RyaWdnZXJfY291bnQ6CiAgICAvLyAgICAgICAgIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQKICAgIC8vIAogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0KAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQobGluZV90b3RhbCksCiAgICAvLyAgICAgICAgIHBheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBheW91dF9tdWx0aXBsaWVyKSwKICAgIC8vICAgICAgICAgYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIC8vICAgICAgICAgamFja3BvdF9oaXQ9YXJjNC5VSW50NjQoamFja3BvdF9oaXQpLAogICAgLy8gICAgICkuYnl0ZXMKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIEJhbmsgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vICMgIyBvdmVycmlkZQogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gIyAgICAgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICMgIyBvdnJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gIyAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDE3NzAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSBzdG9yYWdlIGZvciBiYWxhbmNlcyBib3hlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9kZXBvc2l0KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHdpdGhkcmF3KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fd2l0aGRyYXcoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJhbGFuY2VzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmJhbmtfYmFsYW5jZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBiYW5rX2JhbGFuY2VzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2xvY2tlZCgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9sb2NrZWQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGxvY2tlZCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX29ubHlfc3VwZXJfbWFuYWdlcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIFR4bi5zZW5kZXIgPT0gc2VsZi5zdXBlcl9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgc3VwZXIgbWFuYWdlciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X3Jld2FyZF9tYW5hZ2VyKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgVHhuLnNlbmRlciA9PSBzZWxmLnJld2FyZF9tYW5hZ2VyCiAgICAvLyAgICAgKSwgIm9ubHkgcmV3YXJkIG1hbmFnZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ3JhbnRfcmV3YXJkX21hbmFnZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICAvLyAgICAgc2VsZi5yZXdhcmRfbWFuYWdlciA9IGFkZHJlc3MubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X3Jld2FyZF9tYW5hZ2VyKCkKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICBpZiBiZXRfa2V5IGluIHNlbGYuYmV0OiAgIyBoZXJlCiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLmJldFtiZXRfa2V5XQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIGJldCwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5iZXRfZGVmYXVsdCwKICAgIC8vICAgICAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICByZXR1cm4gYmV0CiAgICAvLyAKICAgIC8vICMgVE9ETyBkZXByZWNpYXRlIHVudXNlZAogICAgLy8gCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfZ2V0X2JldF9tb2RlKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAjICAgICBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICAvLyAjICAgICByZXR1cm4gYmV0Lm1vZGUubmF0aXZlCiAgICAvLyAKICAgIC8vICMgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAjIGRlZiBzZXRfbW9kZShzZWxmLCBtb2RlOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICMgICAgIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICAvLyAjICAgICBzZWxmLl9zZXRfbW9kZShtb2RlLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX3NldF9tb2RlKHNlbGYsIG1vZGU6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICMgICAgIGFzc2VydCBtb2RlID4gVUludDY0KDApLCAibW9kZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gIyAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgc3BpbiBwYXJhbXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gCiAgICAvLyAjIHNwaW4KICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgdXNlcl9pZDogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBjbGFpbV9yb3VuZDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyh1c2VyX2lkKSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIC8vICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlYXRlX2JldCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIGlzX2tpY2tlcl9iZXQ6IGJvb2wsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBuZXRfYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGUsCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBjbGFpbV9yb3VuZCA9IGNvbmZpcm1lZF9yb3VuZCArIHNlbGYuX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoKQogICAgLy8gICAgIHNlbGYuYmV0W2JldF9rZXldID0gQmV0KAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBpc19raWNrZXJfYmV0PWFyYzQuQm9vbChpc19raWNrZXJfYmV0KSwKICAgIC8vICAgICAgICAgbmV0X2JldF9hbW91bnQ9YXJjNC5VSW50NjQobmV0X2JldF9hbW91bnQpLAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNlbGYuc3Bpbl9jb3VudCksCiAgICAvLyAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIEJldEtleUluZm8oCiAgICAvLyAgICAgICAgIGJldF9rZXk9Qnl0ZXM1Ni5mcm9tX2J5dGVzKGJldF9rZXkpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsICAjIGJldCBhbW91bnQgaW4gY3JlZGl0cwogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwgICMgZWFjaCBzcGluIGhhcyBhIHVuaXF1ZSBpbmRleAogICAgLy8gICAgIG1vZGU6IGFyYzQuVUludDY0LCAgIyAwID0gYm9udXMgc3BpbiAsIDEgPSBjcmVkaXQgc3BpbiwgMiA9IG5ldHdvcmsgc3BpbiwgNCA9IHRva2VuIHNwaW4KICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICBhc3NlcnQgbm90IHNlbGYuX2lzX3BhdXNlZCgpLCAic3BpbnMgYXJlIHBhdXNlZCIKICAgIC8vICAgICByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9zcGluKFR4bi5zZW5kZXIsIGJldF9hbW91bnQubmF0aXZlLCBpbmRleC5uYXRpdmUsIG1vZGUubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3BpbigKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFNwaW4gdGhlIHNsb3QgbWFjaGluZS4gT3V0Y29tZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBzZWVkCiAgICAvLyAgICAgb2YgZnV0dXJlIHJvdW5kLgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYmV0ICh1aW50KTogVGhlIHBsYXllcidzIHdhZ2VyLgogICAgLy8gICAgICAgICBpbmRleCAodWludCk6IFBsYXllcidzIGNob2ljZSBvZiBpbmRleC4KICAgIC8vIAogICAgLy8gICAgIFJldHVybnM6CiAgICAvLyAgICAgICAgIHIgKHVpbnQpOiBUaGUgcm91bmQgbnVtYmVyIG9mIHRoZSBzcGluLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgcmVjZWl2ZSBuZXR3b3JrIGZlZSBmcm9tIHNhZmUgZm9yIGJldCBib3gKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTYWZlLnNhZmVfbmV0d29ya190cmFuc2ZlciwKICAgIC8vICAgICAgICAgR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIC8vICAgICAgICAgNTA1MDAsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnNhZmVfZmVlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGJvbnVzX3NwaW4gPSBtb2RlID09IFVJbnQ2NCgwKQogICAgLy8gICAgIGNyZWRpdF9zcGluID0gbW9kZSA9PSBVSW50NjQoMSkKICAgIC8vICAgICBuZXR3b3JrX3NwaW4gPSBtb2RlID09IFVJbnQ2NCgyKQogICAgLy8gICAgIHRva2VuX3NwaW4gPSBtb2RlID09IFVJbnQ2NCg0KQogICAgLy8gICAgIGlmIGJvbnVzX3NwaW46CiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9zcGluX2JvbnVzKHVzZXJfaWQsIFVJbnQ2NCgwKSwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICBlbGlmIGNyZWRpdF9zcGluOgogICAgLy8gICAgICAgICBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMSkgPT0gVUludDY0KDEpLCAiY3JlZGl0IG1vZGUgbm90IGVuYWJsZWQiCiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9zcGluX2NyZWRpdCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gICAgIGVsaWYgbmV0d29ya19zcGluOgogICAgLy8gICAgICAgICBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KAogICAgLy8gICAgICAgICAgICAgMgogICAgLy8gICAgICAgICApLCAibmV0d29yayBtb2RlIG5vdCBlbmFibGVkIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9uZXR3b3JrKHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgZWxpZiB0b2tlbl9zcGluOgogICAgLy8gICAgICAgICBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoNCkgPT0gVUludDY0KDQpLCAidG9rZW4gbW9kZSBub3QgZW5hYmxlZCIKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fdG9rZW4odXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICBhc3NlcnQgRmFsc2UsICJpbnZhbGlkIG1vZGUiCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2t1cF9hbW91bnQoc2VsZiwgYmV0X2Ftb3VudDogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgTG9ja3VwIGFtb3VudCBpcyB0aGUgYmV0IGFtb3VudCBtdWx0aXBsaWVkIGJ5IHRoZSBtYXggcGF5b3V0IG11bHRpcGxpZXIgZXhjbHVkaW5nIHRoZSBqYWNrcG90LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBiZXRfYW1vdW50CiAgICAvLyAKICAgIC8vICMgY2xhaW0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2xhaW0gYWxsIGJldHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KSAgIyBsb2NhbCBwcm9ncmFtIGNvc3Qgd2FzIDk3ODcKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fY2xhaW0oYmV0X2tleS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2xhaW0gYmV0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0NAogICAgLy8gYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgYXNzZXJ0IC8vIGJldCBub3QgZm91bmQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0NgogICAgLy8gYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0NwogICAgLy8gbW9kZSA9IGJldC5tb2RlLm5hdGl2ZQogICAgZXh0cmFjdCA1NyA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0OS0zOTUxCiAgICAvLyAjIGJvbnVzCiAgICAvLyAjIGNyZWRpdAogICAgLy8gaWYgbW9kZSA9PSBVSW50NjQoMik6ICAjIG5ldHdvcmsKICAgIGludCAyCiAgICA9PQogICAgZHVwCiAgICBieiBfY2xhaW1fYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NTIKICAgIC8vIGxvY2t1cF9yZWxlYXNlID0gc2VsZi5fbG9ja3VwX2Ftb3VudChiZXQubmV0X2JldF9hbW91bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIDEKICAgIGV4dHJhY3QgNDEgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2xvY2t1cF9hbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1MwogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKGxvY2t1cF9yZWxlYXNlKQogICAgZHVwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1NAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGxvY2t1cF9yZWxlYXNlKQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCgpfY2xhaW1fYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTY0LTM5NjcKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1BcHBsaWNhdGlvbihzZWxmLnNhZmVfZmVlX2FwcF9pZCkuYWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ9VUludDY0KDUwNTAwKSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NQogICAgLy8gcmVjZWl2ZXI9QXBwbGljYXRpb24oc2VsZi5zYWZlX2ZlZV9hcHBfaWQpLmFkZHJlc3MsCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI4CiAgICAvLyBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzYWZlX2ZlZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjUKICAgIC8vIHJlY2VpdmVyPUFwcGxpY2F0aW9uKHNlbGYuc2FmZV9mZWVfYXBwX2lkKS5hZGRyZXNzLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNhZmVfZmVlX2FwcF9pZCBleGlzdHMKICAgIGFwcF9wYXJhbXNfZ2V0IEFwcEFkZHJlc3MKICAgIGFzc2VydCAvLyBhcHBsaWNhdGlvbiBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NgogICAgLy8gYW1vdW50PVVJbnQ2NCg1MDUwMCksCiAgICBpbnQgNTA1MDAKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjQKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTY0LTM5NjcKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1BcHBsaWNhdGlvbihzZWxmLnNhZmVfZmVlX2FwcF9pZCkuYWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ9VUludDY0KDUwNTAwKSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjkKICAgIC8vIGlmIEdsb2JhbC5yb3VuZCA+IGJldC5jbGFpbV9yb3VuZC5uYXRpdmUgKyBVSW50NjQoTUFYX0NMQUlNX1JPVU5EX0RFTFRBKToKICAgIGdsb2JhbCBSb3VuZAogICAgZnJhbWVfZGlnIDEKICAgIGV4dHJhY3QgNjUgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICBidG9pCiAgICBpbnQgMTAwMAogICAgKwogICAgPgogICAgYnogX2NsYWltX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTcwCiAgICAvLyBkZWwgc2VsZi5iZXRbYmV0X2tleV0KICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzMKICAgIC8vIHdobz1iZXQud2hvLAogICAgZnJhbWVfZGlnIDEKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc0CiAgICAvLyBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzUKICAgIC8vIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICBleHRyYWN0IDQ5IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzItMzk3OQogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZnJhbWVfZGlnIDIKICAgIGNvbmNhdAogICAgZnJhbWVfZGlnIDAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc4CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTcyLTM5NzkKICAgIC8vIEJldENsYWltZWQoCiAgICAvLyAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTcxLTM5ODAKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCZXRDbGFpbWVkKAogICAgLy8gICAgICAgICB3aG89YmV0LndobywKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRDbGFpbWVkKGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTgxCiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9hZnRlcl9pZl9lbHNlQDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5ODMKICAgIC8vIGlmIG1vZGUgPT0gVUludDY0KDApOiAgIyBib251cwogICAgZnJhbWVfZGlnIDMKICAgIGJueiBfY2xhaW1fZWxzZV9ib2R5QDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4NAogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX2JvbnVzKGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2NsYWltX2JvbnVzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg1CiAgICAvLyBlbGlmIG1vZGUgPT0gVUludDY0KDEpOiAgIyBjcmVkaXQKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMQogICAgPT0KICAgIGJ6IF9jbGFpbV9lbHNlX2JvZHlAOQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg2CiAgICAvLyByZXR1cm4gc2VsZi5fY2xhaW1fY3JlZGl0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2NsYWltX2NyZWRpdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9lbHNlX2JvZHlAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4NwogICAgLy8gZWxpZiBtb2RlID09IFVJbnQ2NCgyKTogICMgbmV0d29yawogICAgZnJhbWVfZGlnIDQKICAgIGJ6IF9jbGFpbV9lbHNlX2JvZHlAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4OAogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX25ldHdvcmsoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW1fbmV0d29yawogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9lbHNlX2JvZHlAMTE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5ODkKICAgIC8vIGVsaWYgbW9kZSA9PSBVSW50NjQoNCk6ICAjIHRva2VuCiAgICBmcmFtZV9kaWcgMwogICAgaW50IDQKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBtb2RlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTAKICAgIC8vIHJldHVybiBzZWxmLl9jbGFpbV90b2tlbihiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbV90b2tlbgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTY0LTM1NjUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTY2CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NjgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU2Ny0zNTY5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcxCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3MgogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAxNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTczCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3NgogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzcKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3OAogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3NS0zNTc5CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTc0LTM1ODAKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW1fYm9udXMoYmV0X2tleTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NsYWltX2JvbnVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTM1LTQxMzYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NsYWltX2JvbnVzKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEzNwogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX2NvbW1vbihiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbV9jb21tb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbV9jb21tb24oYmV0X2tleTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NsYWltX2NvbW1vbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5NC0zOTk1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbV9jb21tb24oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgYnl0ZSAiIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTk3CiAgICAvLyBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5OQogICAgLy8gc3Bpbl9yZXN1bHRfYnl0ZXMgPSBzZWxmLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9zcGluX3Jlc3VsdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwMgogICAgLy8gcGF5b3V0ID0gc3Bpbl9yZXN1bHQucGF5b3V0Lm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwMwogICAgLy8gcGF5b3V0X211bHRpcGxpZXIgPSBzcGluX3Jlc3VsdC5wYXlvdXRfbXVsdGlwbGllci5uYXRpdmUKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDA1CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KEJPTlVTX0xJTkVfTVVMVF9ESVZJU09SKQogICAgZGlnIDEKICAgICoKICAgIGludCAxMDAwMAogICAgLwogICAgZHVwCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDcKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxMQogICAgLy8gd2hvPWJldC53aG8sCiAgICBkaWcgMgogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBjb3ZlciAyCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTIKICAgIC8vIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICBkaWcgMwogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDEzCiAgICAvLyBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgZGlnIDQKICAgIGV4dHJhY3QgNDkgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxNAogICAgLy8gbW9kZT1iZXQubW9kZSwKICAgIGRpZyA1CiAgICBleHRyYWN0IDU3IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTUKICAgIC8vIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIHVuY292ZXIgNgogICAgZXh0cmFjdCA2NSA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDE2CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0X2Ftb3VudCksCiAgICBpdG9iCiAgICBjb3ZlciA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTAtNDAxNwogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dF9hbW91bnQpLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDktNDAxOAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXRfYW1vdW50KSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldENsYWltZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjAKICAgIC8vIGlmIHBheW91dCA+IDA6CiAgICBieiBfY2xhaW1fY29tbW9uX2FmdGVyX2lmX2Vsc2VANwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIxCiAgICAvLyBlZmZlY3RpdmVfbW9kZSA9IHNlbGYuX2dldF9lZmZlY3RpdmVfbW9kZSgpCiAgICBjYWxsc3ViIF9nZXRfZWZmZWN0aXZlX21vZGUKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjIKICAgIC8vIGlmIGVmZmVjdGl2ZV9tb2RlID09IFVJbnQ2NChNT0RFX1RPS0VOKToKICAgIGludCA0CiAgICA9PQogICAgYnogX2NsYWltX2NvbW1vbl9lbHNlX2JvZHlAMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIzCiAgICAvLyByZXR1cm4gc2VsZi5fdG9rZW5fcGF5b3V0KGJldC53aG8ubmF0aXZlLCBwYXlvdXRfYW1vdW50LCBVSW50NjQoMCkpCiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDEKICAgIGludCAwCiAgICBjYWxsc3ViIF90b2tlbl9wYXlvdXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfY2xhaW1fY29tbW9uX2Vsc2VfYm9keUAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI0CiAgICAvLyBlbGlmIGVmZmVjdGl2ZV9tb2RlID09IFVJbnQ2NChNT0RFX05FVFdPUkspOgogICAgZnJhbWVfZGlnIDAKICAgIGludCAyCiAgICA9PQogICAgYnogX2NsYWltX2NvbW1vbl9hZnRlcl9pZl9lbHNlQDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyNQogICAgLy8gcmV0dXJuIHNlbGYuX25ldHdvcmtfcGF5b3V0KGJldC53aG8ubmF0aXZlLCBwYXlvdXRfYW1vdW50LCBVSW50NjQoMCkpCiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDEKICAgIGludCAwCiAgICBjYWxsc3ViIF9uZXR3b3JrX3BheW91dAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9jb21tb25fYWZ0ZXJfaWZfZWxzZUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI3CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3NwaW5fcmVzdWx0cyhiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfc3Bpbl9yZXN1bHRzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUzLTQwNTQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9zcGluX3Jlc3VsdHMoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTUKICAgIC8vIGJldCA9IHNlbGYuYmV0W2JldF9rZXldLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZ2V0CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iZXQgZW50cnkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTYKICAgIC8vIHNlZWQgPSBzZWxmLl9nZXRfYmxvY2tfc2VlZChiZXQuY2xhaW1fcm91bmQubmF0aXZlKSAgIyBibG9jayBzZWVkCiAgICBkdXAKICAgIGV4dHJhY3QgNjUgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTcKICAgIC8vIGdyaWRfc2VlZCA9IG9wLnNoYTI1NihzZWVkICsgYmV0LnNwaW5faW5kZXguYnl0ZXMpICAjIGJsb2NrIHNlZWQgKyBzcGluIGluZGV4CiAgICBkaWcgMQogICAgZXh0cmFjdCA0OSA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1OAogICAgLy8gYm9udXNfc3BpbiA9IGJldC5tb2RlLm5hdGl2ZSA9PSBVSW50NjQoMCkKICAgIGV4dHJhY3QgNTcgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1OQogICAgLy8gZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChncmlkX3NlZWQpCiAgICBzd2FwCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2MC00MDYzCiAgICAvLyByZXR1cm4gc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoCiAgICAvLyAgICAgZ3JpZCwKICAgIC8vICAgICBib251c19zcGluLAogICAgLy8gKQogICAgc3dhcAogICAgY2FsbHN1YiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmxvY2tfc2VlZChyb3VuZDogdWludDY0KSAtPiBieXRlczoKX2dldF9ibG9ja19zZWVkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMDA4LTMwMDkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMwMTMKICAgIC8vIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIGZyYW1lX2RpZyAtMQogICAgYmxvY2sgQmxrU2VlZAogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgZGlnIDEKICAgID49CiAgICBpbnQgMzIKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgZGlnIDEKICAgIHN3YXAKICAgIC0KICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfZWZmZWN0aXZlX21vZGUoKSAtPiB1aW50NjQ6Cl9nZXRfZWZmZWN0aXZlX21vZGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjktNDAzMAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2VmZmVjdGl2ZV9tb2RlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDMxCiAgICAvLyB0b2tlbl9lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoTU9ERV9UT0tFTikgPT0gVUludDY0KE1PREVfVE9LRU4pCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkzCiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzEKICAgIC8vIHRva2VuX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NChNT0RFX1RPS0VOKSA9PSBVSW50NjQoTU9ERV9UT0tFTikKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgNAogICAgJgogICAgaW50IDQKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzIKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KE1PREVfTkVUV09SSykgPT0gVUludDY0KAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDMyCiAgICAvLyBuZXR3b3JrX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NChNT0RFX05FVFdPUkspID09IFVJbnQ2NCgKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgMgogICAgJgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDMyLTQwMzQKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KE1PREVfTkVUV09SSykgPT0gVUludDY0KAogICAgLy8gICAgIE1PREVfTkVUV09SSwogICAgLy8gKQogICAgaW50IDIKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzYKICAgIC8vIGFzc2VydCB0b2tlbl9lbmFibGVkIG9yIG5ldHdvcmtfZW5hYmxlZCwgImF0IGxlYXN0IG9uZSBtb2RlIG11c3QgYmUgZW5hYmxlZCIKICAgIGRpZyAxCiAgICB8fAogICAgYXNzZXJ0IC8vIGF0IGxlYXN0IG9uZSBtb2RlIG11c3QgYmUgZW5hYmxlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDM4CiAgICAvLyBpZiB0b2tlbl9lbmFibGVkOgogICAgYnogX2dldF9lZmZlY3RpdmVfbW9kZV9lbHNlX2JvZHlAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDM5CiAgICAvLyByZXR1cm4gVUludDY0KE1PREVfVE9LRU4pCiAgICBpbnQgNAogICAgcmV0c3ViCgpfZ2V0X2VmZmVjdGl2ZV9tb2RlX2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQxCiAgICAvLyByZXR1cm4gVUludDY0KE1PREVfTkVUV09SSykKICAgIGludCAyCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fdG9rZW5fcGF5b3V0KHdobzogYnl0ZXMsIHBheW91dDogdWludDY0LCBqYWNrcG90X2hpdDogdWludDY0KSAtPiB1aW50NjQ6Cl90b2tlbl9wYXlvdXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMTctNDIyMAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdG9rZW5fcGF5b3V0KAogICAgLy8gICAgIHNlbGYsIHdobzogQWNjb3VudCwgcGF5b3V0OiBVSW50NjQsIGphY2twb3RfaGl0OiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0OgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMjEKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5OZXR3b3JrU2xvdE1hY2hpbmUuX25ldHdvcmtfcGF5b3V0KHdobzogYnl0ZXMsIHBheW91dDogdWludDY0LCBqYWNrcG90X2hpdDogdWludDY0KSAtPiB1aW50NjQ6Cl9uZXR3b3JrX3BheW91dDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQzMy00NDM2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9uZXR3b3JrX3BheW91dCgKICAgIC8vICAgICBzZWxmLCB3aG86IEFjY291bnQsIHBheW91dDogVUludDY0LCBqYWNrcG90X2hpdDogVUludDY0CiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDQ2CiAgICAvLyBiYXNlX3BheW91dCA9IHBheW91dCAqIHNlbGYubmV0d29ya191bml0CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTA3CiAgICAvLyBzZWxmLm5ldHdvcmtfdW5pdCA9IFVJbnQ2NCgxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfdW5pdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ0NgogICAgLy8gYmFzZV9wYXlvdXQgPSBwYXlvdXQgKiBzZWxmLm5ldHdvcmtfdW5pdAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm5ldHdvcmtfdW5pdCBleGlzdHMKICAgIGZyYW1lX2RpZyAtMgogICAgKgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDcKICAgIC8vIHByb2dyZXNzaXZlX3BheW91dCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ0OAogICAgLy8gaWYgamFja3BvdF9oaXQgPiAwOgogICAgZnJhbWVfZGlnIC0xCiAgICBieiBfbmV0d29ya19wYXlvdXRfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDkKICAgIC8vIGJhc2VfcGF5b3V0ICs9IHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODgKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2luaXRpYWwiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDkKICAgIC8vIGJhc2VfcGF5b3V0ICs9IHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X25ldHdvcmtfaW5pdGlhbCBleGlzdHMKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTAKICAgIC8vIHByb2dyZXNzaXZlX3BheW91dCA9IHNlbGYuX3Byb2dyZXNzaXZlX2phY2twb3RfY2xhaW1fbmV0d29yaygpCiAgICBjYWxsc3ViIF9wcm9ncmVzc2l2ZV9qYWNrcG90X2NsYWltX25ldHdvcmsKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg3CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NCgpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmsiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTEKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KDApCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIGZyYW1lX2J1cnkgMgoKX25ldHdvcmtfcGF5b3V0X2FmdGVyX2lmX2Vsc2VAMjoKICAgIGZyYW1lX2RpZyAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTIKICAgIC8vIHRvdGFsX3BheW91dCA9IGJhc2VfcGF5b3V0ICsgcHJvZ3Jlc3NpdmVfcGF5b3V0CiAgICBkdXAKICAgIGZyYW1lX2RpZyAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTMKICAgIC8vIGl0eG4uUGF5bWVudChyZWNlaXZlcj13aG8sIGFtb3VudD10b3RhbF9wYXlvdXQpLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICBkdXAKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBmcmFtZV9kaWcgLTMKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1NAogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGJhc2VfcGF5b3V0KQogICAgZGlnIDEKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDU1CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChiYXNlX3BheW91dCkKICAgIHN3YXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTYKICAgIC8vIHJldHVybiB0b3RhbF9wYXlvdXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuTmV0d29ya1Nsb3RNYWNoaW5lLl9wcm9ncmVzc2l2ZV9qYWNrcG90X2NsYWltX25ldHdvcmsoKSAtPiB1aW50NjQ6Cl9wcm9ncmVzc2l2ZV9qYWNrcG90X2NsYWltX25ldHdvcms6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTgtNDQ1OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvZ3Jlc3NpdmVfamFja3BvdF9jbGFpbV9uZXR3b3JrKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDYwCiAgICAvLyBhcHAgPSBBcHBsaWNhdGlvbihzZWxmLnNhZmVfamFja3BvdF9hcHBfaWQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI2LTI5MjcKICAgIC8vICMgc2FmZSBzdGF0ZQogICAgLy8gc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInNhZmVfamFja3BvdF9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjAKICAgIC8vIGFwcCA9IEFwcGxpY2F0aW9uKHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDYxCiAgICAvLyBiYWxhbmNlID0gYXBwLmFkZHJlc3MuYmFsYW5jZQogICAgZHVwCiAgICBhcHBfcGFyYW1zX2dldCBBcHBBZGRyZXNzCiAgICBhc3NlcnQgLy8gYXBwbGljYXRpb24gZXhpc3RzCiAgICBhY2N0X3BhcmFtc19nZXQgQWNjdEJhbGFuY2UKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IGZ1bmRlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDYyCiAgICAvLyBtaW5fYmFsYW5jZSA9IGFwcC5hZGRyZXNzLm1pbl9iYWxhbmNlCiAgICBkdXAKICAgIGFwcF9wYXJhbXNfZ2V0IEFwcEFkZHJlc3MKICAgIGFzc2VydCAvLyBhcHBsaWNhdGlvbiBleGlzdHMKICAgIGFjY3RfcGFyYW1zX2dldCBBY2N0TWluQmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgZnVuZGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjMKICAgIC8vIGF2YWlsYWJsZV9iYWxhbmNlID0gYmFsYW5jZSAtIG1pbl9iYWxhbmNlCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ2NC00NDY5CiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNhZmUuc2FmZV9uZXR3b3JrX3RyYW5zZmVyLAogICAgLy8gICAgIEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MsCiAgICAvLyAgICAgYXZhaWxhYmxlX2JhbGFuY2UsCiAgICAvLyAgICAgYXBwX2lkPWFwcCwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ2NgogICAgLy8gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjcKICAgIC8vIGF2YWlsYWJsZV9iYWxhbmNlLAogICAgZHVwCiAgICBpdG9iCiAgICB1bmNvdmVyIDMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDY0LTQ0NjkKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2FmZS5zYWZlX25ldHdvcmtfdHJhbnNmZXIsCiAgICAvLyAgICAgR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcywKICAgIC8vICAgICBhdmFpbGFibGVfYmFsYW5jZSwKICAgIC8vICAgICBhcHBfaWQ9YXBwLAogICAgLy8gKQogICAgbWV0aG9kICJzYWZlX25ldHdvcmtfdHJhbnNmZXIoYWRkcmVzcyx1aW50NjQpdm9pZCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ3MAogICAgLy8gcmV0dXJuIGF2YWlsYWJsZV9iYWxhbmNlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW1fY3JlZGl0KGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbV9jcmVkaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNzktNDE4MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fY3JlZGl0KHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE4MQogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX2NvbW1vbihiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbV9jb21tb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk5ldHdvcmtTbG90TWFjaGluZS5fY2xhaW1fbmV0d29yayhiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fbmV0d29yazoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ3Mi00NDczCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbV9uZXR3b3JrKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIGJ5dGUgIiIKICAgIGR1cG4gMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTAzCiAgICAvLyBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA1CiAgICAvLyBzcGluX3Jlc3VsdF9ieXRlcyA9IHNlbGYuX2dldF9zcGluX3Jlc3VsdHMoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3NwaW5fcmVzdWx0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA4CiAgICAvLyBwYXlvdXQgPSBzcGluX3Jlc3VsdC5wYXlvdXQubmF0aXZlICogc2VsZi5uZXR3b3JrX3VuaXQKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTA3CiAgICAvLyBzZWxmLm5ldHdvcmtfdW5pdCA9IFVJbnQ2NCgxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfdW5pdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUwOAogICAgLy8gcGF5b3V0ID0gc3Bpbl9yZXN1bHQucGF5b3V0Lm5hdGl2ZSAqIHNlbGYubmV0d29ya191bml0CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya191bml0IGV4aXN0cwogICAgKgogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA5CiAgICAvLyBib251c19zcGluc19hd2FyZGVkID0gc3Bpbl9yZXN1bHQuYm9udXNfc3BpbnNfYXdhcmRlZC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTEwCiAgICAvLyBqYWNrcG90X2hpdCA9IHNwaW5fcmVzdWx0LmphY2twb3RfaGl0Lm5hdGl2ZQogICAgZXh0cmFjdCAyNCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTExCiAgICAvLyBpc19raWNrZXJfYmV0ID0gYmV0LmlzX2tpY2tlcl9iZXQubmF0aXZlCiAgICBpbnQgMzIwCiAgICBnZXRiaXQKICAgIGJ5dGUgMHgwMAogICAgaW50IDAKICAgIHVuY292ZXIgMgogICAgc2V0Yml0CiAgICBpbnQgMAogICAgZ2V0Yml0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxMwogICAgLy8gaWYgaXNfa2lja2VyX2JldCBhbmQgYm9udXNfc3BpbnNfYXdhcmRlZCA+IDA6CiAgICBieiBfY2xhaW1fbmV0d29ya19hZnRlcl9pZl9lbHNlQDMKICAgIGZyYW1lX2RpZyA1CiAgICBieiBfY2xhaW1fbmV0d29ya19hZnRlcl9pZl9lbHNlQDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxNAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JvbnVzX3NwaW4oYmV0Lndoby5uYXRpdmUsIGJvbnVzX3NwaW5zX2F3YXJkZWQpCiAgICBmcmFtZV9kaWcgMwogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDUKICAgIGNhbGxzdWIgX2luY3JlbWVudF9ib251c19zcGluCgpfY2xhaW1fbmV0d29ya19hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MTcKICAgIC8vIHByb2dyZXNzaXZlX3BheW91dCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTE5CiAgICAvLyBpZiBwYXlvdXQgPiAwOgogICAgZnJhbWVfZGlnIDQKICAgIGJ6IF9jbGFpbV9uZXR3b3JrX2Vsc2VfYm9keUA5CiAgICBmcmFtZV9kaWcgMQogICAgZnJhbWVfYnVyeSAyCiAgICBmcmFtZV9kaWcgNAogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjAKICAgIC8vIGlmIGlzX2tpY2tlcl9iZXQgYW5kIGphY2twb3RfaGl0OgogICAgZnJhbWVfZGlnIDcKICAgIGJ6IF9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANwogICAgZnJhbWVfZGlnIDEKICAgIGZyYW1lX2J1cnkgMgogICAgZnJhbWVfZGlnIDQKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfZGlnIDYKICAgIGJ6IF9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTIxCiAgICAvLyBiYXNlX3BheW91dCArPSBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg4CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29ya19pbml0aWFsIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTIxCiAgICAvLyBiYXNlX3BheW91dCArPSBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrX2luaXRpYWwgZXhpc3RzCiAgICBmcmFtZV9kaWcgNAogICAgKwogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjIKICAgIC8vIHByb2dyZXNzaXZlX3BheW91dCA9IHNlbGYuX3Byb2dyZXNzaXZlX2phY2twb3RfY2xhaW1fbmV0d29yaygpCiAgICBjYWxsc3ViIF9wcm9ncmVzc2l2ZV9qYWNrcG90X2NsYWltX25ldHdvcmsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg4NwogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoKQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTIzCiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICBmcmFtZV9idXJ5IDIKCl9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANzoKICAgIGZyYW1lX2RpZyAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjUKICAgIC8vIHRvdGFsX3BheW91dCA9IGJhc2VfcGF5b3V0ICsgcHJvZ3Jlc3NpdmVfcGF5b3V0CiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgICsKICAgIGR1cAogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI3LTQ1MzAKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9dG90YWxfcGF5b3V0LAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI4CiAgICAvLyByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAzCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI3CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyNy00NTMwCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsCiAgICAvLyAgICAgYW1vdW50PXRvdGFsX3BheW91dCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzIKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShiYXNlX3BheW91dCkKICAgIGR1cAogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzMKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGJhc2VfcGF5b3V0KQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIGIgX2NsYWltX25ldHdvcmtfYWZ0ZXJfaWZfZWxzZUAxMAoKX2NsYWltX25ldHdvcmtfZWxzZV9ib2R5QDk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzUKICAgIC8vIHRvdGFsX3BheW91dCA9IFVJbnQ2NCgwKQogICAgaW50IDAKCl9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzcKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0MQogICAgLy8gd2hvPWJldC53aG8sCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDIKICAgIC8vIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0MwogICAgLy8gc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIGR1cAogICAgZXh0cmFjdCA0OSA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQ0CiAgICAvLyBtb2RlPWJldC5tb2RlLAogICAgZHVwCiAgICBleHRyYWN0IDU3IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDUKICAgIC8vIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIGV4dHJhY3QgNjUgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0NgogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KHRvdGFsX3BheW91dCksCiAgICBkaWcgNQogICAgaXRvYgogICAgY292ZXIgNQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQwLTQ1NDcKICAgIC8vIEJldENsYWltZWQoCiAgICAvLyAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCh0b3RhbF9wYXlvdXQpLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTM5LTQ1NDgKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCZXRDbGFpbWVkKAogICAgLy8gICAgICAgICB3aG89YmV0LndobywKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQodG90YWxfcGF5b3V0KSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldENsYWltZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTAKICAgIC8vIHJldHVybiB0b3RhbF9wYXlvdXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9ib251c19zcGluKGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luY3JlbWVudF9ib251c19zcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzExLTM3MTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9ib251c19zcGluKHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTMKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzE0CiAgICAvLyB1c2VyLmJvbnVzX3NwaW4gPSBhcmM0LlVJbnQ2NCh1c2VyLmJvbnVzX3NwaW4ubmF0aXZlICsgYW1vdW50KQogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIGl0b2IKICAgIHJlcGxhY2UyIDQwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTUKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbV90b2tlbihiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMjctNDIyOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fdG9rZW4oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjI5CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ3JhbnRfZnJlZV9zcGlucyhhZGRyZXNzOiBieXRlcywgY291bnQ6IGJ5dGVzKSAtPiB2b2lkOgpncmFudF9mcmVlX3NwaW5zOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDgxLTQwODIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdyYW50X2ZyZWVfc3BpbnMoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzLCBjb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4MwogICAgLy8gc2VsZi5fb25seV9yZXdhcmRfbWFuYWdlcigpCiAgICBjYWxsc3ViIF9vbmx5X3Jld2FyZF9tYW5hZ2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODQKICAgIC8vIHNlbGYuX2luY3JlbWVudF9ib251c19zcGluKGFkZHJlc3MubmF0aXZlLCBjb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JvbnVzX3NwaW4KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnBhdXNlKHBhdXNlOiBieXRlcykgLT4gdm9pZDoKcGF1c2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwOTAtNDA5MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcGF1c2Uoc2VsZiwgcGF1c2U6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwOTIKICAgIC8vIHNlbGYuX29ubHlfc3VwZXJfbWFuYWdlcigpCiAgICBjYWxsc3ViIF9vbmx5X3N1cGVyX21hbmFnZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5MwogICAgLy8gc2VsZi5wYXVzZWQgPSBVSW50NjQoMSkgaWYgcGF1c2UgPiBVSW50NjQoMCkgZWxzZSBVSW50NjQoMCkKICAgIGludCAwCiAgICBpdG9iCiAgICBmcmFtZV9kaWcgLTEKICAgIGI8CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MjQtMjkyNQogICAgLy8gIyBwYXVzaWJsZSBzdGF0ZQogICAgLy8gc2VsZi5wYXVzZWQgPSBVSW50NjQoKSAgIyAwID0gbm90IHBhdXNlZCAoZGVmYXVsdCksIDEgPSBwYXVzZWQKICAgIGJ5dGUgInBhdXNlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5MwogICAgLy8gc2VsZi5wYXVzZWQgPSBVSW50NjQoMSkgaWYgcGF1c2UgPiBVSW50NjQoMCkgZWxzZSBVSW50NjQoMCkKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5pc19wYXVzZWQoKSAtPiBieXRlczoKaXNfcGF1c2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDk1LTQwOTYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGlzX3BhdXNlZChzZWxmKSAtPiBhcmM0LkJvb2w6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5NwogICAgLy8gcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9pc19wYXVzZWQoKSkKICAgIGNhbGxzdWIgX2lzX3BhdXNlZAogICAgYnl0ZSAweDAwCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNldF9zdG9yYWdlX2FwcF9pZChhcHBfaWQ6IGJ5dGVzKSAtPiB2b2lkOgpzZXRfc3RvcmFnZV9hcHBfaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzUtNDIzNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3N0b3JhZ2VfYXBwX2lkKHNlbGYsIGFwcF9pZDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIzNwogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzgKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBhcHBfaWQubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNy0yOTE5CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjM4CiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gYXBwX2lkLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNldF9zYWZlX2phY2twb3RfYXBwX2lkKGFwcF9pZDogYnl0ZXMpIC0+IHZvaWQ6CnNldF9zYWZlX2phY2twb3RfYXBwX2lkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQwLTQyNDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9zYWZlX2phY2twb3RfYXBwX2lkKHNlbGYsIGFwcF9pZDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0MgogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDMKICAgIC8vIHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCA9IGFwcF9pZC5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI2LTI5MjcKICAgIC8vICMgc2FmZSBzdGF0ZQogICAgLy8gc2VsZi5zYWZlX2phY2twb3RfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInNhZmVfamFja3BvdF9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDMKICAgIC8vIHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCA9IGFwcF9pZC5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5zZXRfc2FmZV9mZWVfYXBwX2lkKGFwcF9pZDogYnl0ZXMpIC0+IHZvaWQ6CnNldF9zYWZlX2ZlZV9hcHBfaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDUtNDI0NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3NhZmVfZmVlX2FwcF9pZChzZWxmLCBhcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDcKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQ4CiAgICAvLyBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IGFwcF9pZC5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI4CiAgICAvLyBzZWxmLnNhZmVfZmVlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzYWZlX2ZlZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDgKICAgIC8vIHNlbGYuc2FmZV9mZWVfYXBwX2lkID0gYXBwX2lkLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5zZXRfdmVyc2lvbihjb250cmFjdF92ZXJzaW9uOiBieXRlcywgZGVwbG95bWVudF92ZXJzaW9uOiBieXRlcykgLT4gdm9pZDoKc2V0X3ZlcnNpb246CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMtODYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF92ZXJzaW9uKAogICAgLy8gICAgIHNlbGYsIGNvbnRyYWN0X3ZlcnNpb246IGFyYzQuVUludDY0LCBkZXBsb3ltZW50X3ZlcnNpb246IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBncmFkZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgdXBncmFkZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OAogICAgLy8gYXJjNC5lbWl0KFZlcnNpb25VcGRhdGVkKGNvbnRyYWN0X3ZlcnNpb24sIGRlcGxveW1lbnRfdmVyc2lvbikpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBtZXRob2QgIlZlcnNpb25VcGRhdGVkKHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMxCiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiY29udHJhY3RfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gZGVwbG95bWVudF92ZXJzaW9uLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzIKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImRlcGxveW1lbnRfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5MAogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBkZXBsb3ltZW50X3ZlcnNpb24ubmF0aXZlCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLmFwcHJvdmVfdXBkYXRlKGFwcHJvdmFsOiBieXRlcykgLT4gdm9pZDoKYXBwcm92ZV91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxLTEwMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYXBwcm92ZV91cGRhdGUoc2VsZiwgYXBwcm92YWw6IGFyYzQuQm9vbCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgb3duZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDQKICAgIC8vIGFyYzQuZW1pdChVcGRhdGVBcHByb3ZlZChhcmM0LkFkZHJlc3Moc2VsZi5vd25lciksIGFwcHJvdmFsKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA0CiAgICAvLyBhcmM0LmVtaXQoVXBkYXRlQXBwcm92ZWQoYXJjNC5BZGRyZXNzKHNlbGYub3duZXIpLCBhcHByb3ZhbCkpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgbWV0aG9kICJVcGRhdGVBcHByb3ZlZChhZGRyZXNzLGJvb2wpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDUKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYXBwcm92YWwubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBnZXRiaXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGFwcHJvdmFsLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5ncmFudF91cGdyYWRlcih1cGdyYWRlcjogYnl0ZXMpIC0+IHZvaWQ6CmdyYW50X3VwZ3JhZGVyOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNy0xMDgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdyYW50X3VwZ3JhZGVyKHNlbGYsIHVwZ3JhZGVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDkKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MsICJtdXN0IGJlIGNyZWF0b3IiCiAgICB0eG4gU2VuZGVyCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSBjcmVhdG9yCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBncmFkZXJHcmFudGVkKGFkZHJlc3MsYWRkcmVzcykiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMTEKICAgIC8vIHNlbGYudXBncmFkZXIgPSB1cGdyYWRlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5vbl91cGRhdGUoKSAtPiB2b2lkOgpvbl91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTItOTMKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICAvLyBkZWYgb25fdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5NC05NwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFdBUk5JTkc6IFRoaXMgYXBwIGNhbiBiZSB1cGRhdGVkIGJ5IHRoZSBjcmVhdG9yCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTQtOTcKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBXQVJOSU5HOiBUaGlzIGFwcCBjYW4gYmUgdXBkYXRlZCBieSB0aGUgY3JlYXRvcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLnVwZ3JhZGVyLCAibXVzdCBiZSB1cGdyYWRlciIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi51cGdyYWRlciBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSB1cGdyYWRlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk4CiAgICAvLyBhc3NlcnQgc2VsZi51cGRhdGFibGUgPT0gVUludDY0KDEpLCAibm90IGFwcHJvdmVkIgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTgKICAgIC8vIGFzc2VydCBzZWxmLnVwZGF0YWJsZSA9PSBVSW50NjQoMSksICJub3QgYXBwcm92ZWQiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBkYXRhYmxlIGV4aXN0cwogICAgaW50IDEKICAgID09CiAgICBhc3NlcnQgLy8gbm90IGFwcHJvdmVkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5Wb2lOZXR3b3JrU2xvdE1hY2hpbmUuX19pbml0X18oKSAtPiB2b2lkOgpfX2luaXRfXzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NgogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NwogICAgLy8gc3VwZXIoKS5fX2luaXRfXygpCiAgICBjYWxsc3ViIE5ldHdvcmtTbG90TWFjaGluZS5fX2luaXRfXwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkzCiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDgKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KE1PREVfTkVUV09SSykKICAgIGludCAyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTEzCiAgICAvLyBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDktNTI1MQogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEFjY291bnQoCiAgICAvLyAgICAgIjNaV1dONUJRSzZYR0xLS1NYWlpRSjZaRzVPRFBYNlZGU0VFS1pDUFdKTkw2V1JTR0RQVFJRS043WkUiCiAgICAvLyApCiAgICBhZGRyIDNaV1dONUJRSzZYR0xLS1NYWlpRSjZaRzVPRFBYNlZGU0VFS1pDUFdKTkw2V1JTR0RQVFJRS043WkUKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTQKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgYnl0ZSAiZmVlX21hcmtldGluZ19hZGRyZXNzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjUyLTUyNTQKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gQWNjb3VudCgKICAgIC8vICAgICAiQ0JSNUhDU1BHTlJLUEFZSTRHRk9JWEhDV01XWDZLQ01NMzVTUTRTSVNRUE9ONjU0NTNUM0tHQUdDVSIKICAgIC8vICkKICAgIGFkZHIgQ0JSNUhDU1BHTlJLUEFZSTRHRk9JWEhDV01XWDZLQ01NMzVTUTRTSVNRUE9ONjU0NTNUM0tHQUdDVQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk5ldHdvcmtTbG90TWFjaGluZS5fX2luaXRfXygpIC0+IHZvaWQ6Ck5ldHdvcmtTbG90TWFjaGluZS5fX2luaXRfXzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI2OQogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3MAogICAgLy8gc3VwZXIoKS5fX2luaXRfXygpCiAgICBjYWxsc3ViIFNsb3RNYWNoaW5lLl9faW5pdF9fCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNzEtNDI3MgogICAgLy8gIyBvd25hYmxlIHN0YXRlCiAgICAvLyBzZWxmLm93bmVyID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgZ2xvYmFsIENyZWF0b3JBZGRyZXNzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjczLTQyNzQKICAgIC8vICMgc3Rha2VhYmxlIHN0YXRlCiAgICAvLyBzZWxmLmRlbGVnYXRlID0gQWNjb3VudCgpCiAgICBieXRlICJkZWxlZ2F0ZSIKICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3NQogICAgLy8gc2VsZi5zdGFrZWFibGUgPSBib29sKDEpCiAgICBieXRlICJzdGFrZWFibGUiCiAgICBpbnQgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MwogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoKQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjc2LTQyNzcKICAgIC8vICMgc2xvdCBzdGF0ZQogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoTU9ERV9ORVRXT1JLKQogICAgaW50IDIKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTMKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJmZWVfdHJlYXN1cnlfYWRkcmVzcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3OAogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNAogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNzkKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgZ2xvYmFsIENyZWF0b3JBZGRyZXNzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX19pbml0X18oKSAtPiB2b2lkOgpTbG90TWFjaGluZS5fX2luaXRfXzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg3MgogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg3My0yODc0CiAgICAvLyAjIG93bmFibGUgc3RhdGUKICAgIC8vIHNlbGYub3duZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODc1LTI4NzYKICAgIC8vICMgdXBncmFkZWFibGUgc3RhdGUKICAgIC8vIHNlbGYudXBncmFkZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzEKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJjb250cmFjdF92ZXJzaW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODc3CiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4NzgKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4NzkKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYm9vbCgxKQogICAgaW50IDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODYKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4ODcKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KCkKICAgIGJ5dGUgImphY2twb3RfbmV0d29yayIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg4CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19pbml0aWFsID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29ya19pbml0aWFsIgogICAgaW50IDUwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODg5CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiIKICAgIGludCA2MDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkwCiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW4iCiAgICBieXRlIDB4MGJhNDNiNzQwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mjg5MQogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuX2luaXRpYWwgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF90b2tlbl9pbml0aWFsIgogICAgaW50IDUwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODkyCiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uIgogICAgaW50IDYwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI4OTMKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KCkKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyODk0LTI5MDMKICAgIC8vICMgMSA9IGNyZWRpdCwgMiA9IG5ldHdvcmssIDQgPSB0b2tlbgogICAgLy8gIyAwID0gZGlzYWJsZWQKICAgIC8vICMgMSA9IGNyZWRpdCBlbmFibGVkCiAgICAvLyAjIDIgPSBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICMgNCA9IHRva2VuIGVuYWJsZWQKICAgIC8vICMgMyA9IGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAjIDUgPSBjcmVkaXQgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICMgNiA9IG5ldHdvcmsgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICMgNyA9IGNyZWRpdCwgbmV0d29yaywgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vIHNlbGYuY3JlZGl0X2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpICAjIDQwICogMTAqKjYKICAgIGJ5dGUgImNyZWRpdF9iZXRfY29zdCIKICAgIGludCA0MDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwNAogICAgLy8gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgYnl0ZSAibmV0d29ya19iYXNlX2JldF9jb3N0IgogICAgaW50IDQwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTA1CiAgICAvLyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhID0gVUludDY0KDIwICogMTAqKjYpICAjIDIwICogMTAqKjYKICAgIGJ5dGUgIm5ldHdvcmtfa2lja2VyX2V4dHJhIgogICAgaW50IDIwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTA2CiAgICAvLyBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50ID0gVUludDY0KDEwMF8wMDAgKiAxMCoqNikgICMgMTAwICogMTAqKjYKICAgIGJ5dGUgIm5ldHdvcmtfbWluX2JhbmtfYW1vdW50IgogICAgaW50IDEwMDAwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwNwogICAgLy8gc2VsZi5uZXR3b3JrX3VuaXQgPSBVSW50NjQoMTAqKjYpCiAgICBieXRlICJuZXR3b3JrX3VuaXQiCiAgICBpbnQgMTAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkwOAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MDkKICAgIC8vIHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCA9IEJpZ1VJbnQoNDAgKiAxMCoqNikgICMgNDAgKiAxMCoqNgogICAgYnl0ZSAidG9rZW5fYmFzZV9iZXRfY29zdCIKICAgIGJ5dGUgMHgwMjYyNWEwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxMAogICAgLy8gc2VsZi50b2tlbl9raWNrZXJfZXh0cmEgPSBCaWdVSW50KDIwICogMTAqKjYpICAjIDIwICogMTAqKjYKICAgIGJ5dGUgInRva2VuX2tpY2tlcl9leHRyYSIKICAgIGJ5dGUgMHgwMTMxMmQwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxMQogICAgLy8gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQgPSBCaWdVSW50KDEwMF8wMDAgKiAxMCoqNikgICMgMTAwICogMTAqKjYKICAgIGJ5dGUgInRva2VuX21pbl9iYW5rX2Ftb3VudCIKICAgIGJ5dGUgMHgxNzQ4NzZlODAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTEyCiAgICAvLyBzZWxmLnRva2VuX3VuaXQgPSBCaWdVSW50KDEwKio2KQogICAgYnl0ZSAidG9rZW5fdW5pdCIKICAgIGJ5dGUgMHgwZjQyNDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTMKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJmZWVfdHJlYXN1cnlfYWRkcmVzcyIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkxNAogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2FkZHJlc3MiCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTUKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMzAsIDAuMyUKICAgIGJ5dGUgImZlZV90cmVhc3VyeV9icHMiCiAgICBpbnQgMzAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MTYKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19icHMgPSBVSW50NjQoMjApICAjIDIwLDAuMiUKICAgIGJ5dGUgImZlZV9tYXJrZXRpbmdfYnBzIgogICAgaW50IDIwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTE3LTI5MTkKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkyMC0yOTIxCiAgICAvLyAjIGJvbnVzOiBhZGRlZCB0byBhZGp1c3QgYm9udXMgc3BpbiBjb250cmlidXRpb24gdG8gb3ZlcmFsbCBydHAgd2l0aG91dCB1cGRhdGUKICAgIC8vIHNlbGYuYm9udXNfdHJpZ2dlcl9jb3VudCA9IFVJbnQ2NChCT05VU19UUklHR0VSX0NPVU5UKQogICAgYnl0ZSAiYm9udXNfdHJpZ2dlcl9jb3VudCIKICAgIGludCAyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTIyCiAgICAvLyBzZWxmLmJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoQk9OVVNfU1BJTlNfQVdBUkRFRCkKICAgIGJ5dGUgImJvbnVzX3NwaW5zX2F3YXJkZWQiCiAgICBpbnQgOAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkyMwogICAgLy8gc2VsZi5ib251c19saW5lX211bHQgPSBVSW50NjQoQk9OVVNfTElORV9NVUxUKQogICAgYnl0ZSAiYm9udXNfbGluZV9tdWx0IgogICAgaW50IDE3NTAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI0LTI5MjUKICAgIC8vICMgcGF1c2libGUgc3RhdGUKICAgIC8vIHNlbGYucGF1c2VkID0gVUludDY0KCkgICMgMCA9IG5vdCBwYXVzZWQgKGRlZmF1bHQpLCAxID0gcGF1c2VkCiAgICBieXRlICJwYXVzZWQiCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjkyNi0yOTI3CiAgICAvLyAjIHNhZmUgc3RhdGUKICAgIC8vIHNlbGYuc2FmZV9qYWNrcG90X2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzYWZlX2phY2twb3RfYXBwX2lkIgogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MjgKICAgIC8vIHNlbGYuc2FmZV9mZWVfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInNhZmVfZmVlX2FwcF9pZCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyOTI5LTI5MzAKICAgIC8vICMgYWNjZXNzIGNvbnRyb2wKICAgIC8vIHNlbGYuc3VwZXJfbWFuYWdlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGJ5dGUgInN1cGVyX21hbmFnZXIiCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI5MzEKICAgIC8vIHNlbGYucmV3YXJkX21hbmFnZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBieXRlICJyZXdhcmRfbWFuYWdlciIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1Ygo=",
    "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5Wb2lOZXR3b3JrU2xvdE1hY2hpbmUuY2xlYXJfc3RhdGVfcHJvZ3JhbToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0NQogICAgLy8gY2xhc3MgVm9pTmV0d29ya1Nsb3RNYWNoaW5lKE5ldHdvcmtTbG90TWFjaGluZSk6CiAgICBpbnQgMQogICAgcmV0dXJuCg=="
  },
  "state": {
    "global": {
      "num_byte_slices": 12,
      "num_uints": 26
    },
    "local": {
      "num_byte_slices": 0,
      "num_uints": 0
    }
  },
  "schema": {
    "global": {
      "declared": {
        "bonus_line_mult": {
          "type": "uint64",
          "key": "bonus_line_mult"
        },
        "bonus_spins_awarded": {
          "type": "uint64",
          "key": "bonus_spins_awarded"
        },
        "bonus_trigger_count": {
          "type": "uint64",
          "key": "bonus_trigger_count"
        },
        "contract_version": {
          "type": "uint64",
          "key": "contract_version"
        },
        "credit_bet_cost": {
          "type": "uint64",
          "key": "credit_bet_cost"
        },
        "delegate": {
          "type": "bytes",
          "key": "delegate"
        },
        "deployment_version": {
          "type": "uint64",
          "key": "deployment_version"
        },
        "fee_marketing_address": {
          "type": "bytes",
          "key": "fee_marketing_address"
        },
        "fee_marketing_bps": {
          "type": "uint64",
          "key": "fee_marketing_bps"
        },
        "fee_treasury_address": {
          "type": "bytes",
          "key": "fee_treasury_address"
        },
        "fee_treasury_bps": {
          "type": "uint64",
          "key": "fee_treasury_bps"
        },
        "jackpot_network": {
          "type": "uint64",
          "key": "jackpot_network"
        },
        "jackpot_network_contribution": {
          "type": "uint64",
          "key": "jackpot_network_contribution"
        },
        "jackpot_network_initial": {
          "type": "uint64",
          "key": "jackpot_network_initial"
        },
        "jackpot_token": {
          "type": "bytes",
          "key": "jackpot_token"
        },
        "jackpot_token_contribution": {
          "type": "uint64",
          "key": "jackpot_token_contribution"
        },
        "jackpot_token_initial": {
          "type": "uint64",
          "key": "jackpot_token_initial"
        },
        "mode_enabled": {
          "type": "uint64",
          "key": "mode_enabled"
        },
        "network_base_bet_cost": {
          "type": "uint64",
          "key": "network_base_bet_cost"
        },
        "network_kicker_extra": {
          "type": "uint64",
          "key": "network_kicker_extra"
        },
        "network_min_bank_amount": {
          "type": "uint64",
          "key": "network_min_bank_amount"
        },
        "network_unit": {
          "type": "uint64",
          "key": "network_unit"
        },
        "owner": {
          "type": "bytes",
          "key": "owner"
        },
        "paused": {
          "type": "uint64",
          "key": "paused"
        },
        "reward_manager": {
          "type": "bytes",
          "key": "reward_manager"
        },
        "safe_fee_app_id": {
          "type": "uint64",
          "key": "safe_fee_app_id"
        },
        "safe_jackpot_app_id": {
          "type": "uint64",
          "key": "safe_jackpot_app_id"
        },
        "spin_count": {
          "type": "uint64",
          "key": "spin_count"
        },
        "stakeable": {
          "type": "uint64",
          "key": "stakeable"
        },
        "storage_app_id": {
          "type": "uint64",
          "key": "storage_app_id"
        },
        "super_manager": {
          "type": "bytes",
          "key": "super_manager"
        },
        "token_app_id": {
          "type": "uint64",
          "key": "token_app_id"
        },
        "token_base_bet_cost": {
          "type": "bytes",
          "key": "token_base_bet_cost"
        },
        "token_kicker_extra": {
          "type": "bytes",
          "key": "token_kicker_extra"
        },
        "token_min_bank_amount": {
          "type": "bytes",
          "key": "token_min_bank_amount"
        },
        "token_unit": {
          "type": "bytes",
          "key": "token_unit"
        },
        "updatable": {
          "type": "uint64",
          "key": "updatable"
        },
        "upgrader": {
          "type": "bytes",
          "key": "upgrader"
        }
      },
      "reserved": {}
    },
    "local": {
      "declared": {},
      "reserved": {}
    }
  },
  "contract": {
    "name": "VoiNetworkSlotMachine",
    "methods": [
      {
        "name": "grant_delegate",
        "args": [
          {
            "type": "address",
            "name": "address"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "participate",
        "args": [
          {
            "type": "byte[32]",
            "name": "vote_k"
          },
          {
            "type": "byte[32]",
            "name": "sel_k"
          },
          {
            "type": "uint64",
            "name": "vote_fst"
          },
          {
            "type": "uint64",
            "name": "vote_lst"
          },
          {
            "type": "uint64",
            "name": "vote_kd"
          },
          {
            "type": "byte[64]",
            "name": "sp_key"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_owner",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "address"
        },
        "desc": "Get the owner of the contract"
      },
      {
        "name": "transfer_ownership",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer the ownership of the contract"
      },
      {
        "name": "get_cdf_grid_from_seed",
        "args": [
          {
            "type": "byte[32]",
            "name": "seed"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_grid_from_bet_key",
        "args": [
          {
            "type": "byte[56]",
            "name": "box_key"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_grid_from_seed_and_spin",
        "args": [
          {
            "type": "byte[32]",
            "name": "seed"
          },
          {
            "type": "uint64",
            "name": "spin_index"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_reel1",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "get_cdf_others",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "reel_has_symbol",
        "args": [
          {
            "type": "byte[15]",
            "name": "grid"
          },
          {
            "type": "uint64",
            "name": "reel"
          },
          {
            "type": "byte[1]",
            "name": "sym"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "bool"
        }
      },
      {
        "name": "calculate_grid_payout_with_bonus_and_jackpot",
        "args": [
          {
            "type": "byte[15]",
            "name": "grid"
          },
          {
            "type": "bool",
            "name": "is_bonus_spin"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "owner_deposit",
        "args": [
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
      },
      {
        "name": "deposit",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract"
      },
      {
        "name": "withdraw",
        "args": [
          {
            "type": "uint64",
            "name": "amount",
            "desc": "The amount of funds to withdraw in atomic units"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Withdraw funds from the contract\nOnly callable by contract owner"
      },
      {
        "name": "get_balances",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64,bool)"
        },
        "desc": "Get the balances"
      },
      {
        "name": "get_balance_available",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_balance_locked",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_balance_total",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "sync_balance",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Sync the balance of the contract"
      },
      {
        "name": "get_user",
        "args": [
          {
            "type": "address",
            "name": "address"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(address,uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "grant_reward_manager",
        "args": [
          {
            "type": "address",
            "name": "address"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "credit",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Credit the contract."
      },
      {
        "name": "get_bet",
        "args": [
          {
            "type": "byte[56]",
            "name": "bet_key"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(address,uint64,bool,uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "get_bet_key",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "spin",
        "args": [
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "claim",
        "args": [
          {
            "type": "byte[56]",
            "name": "bet_key"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Claim all bets"
      },
      {
        "name": "grant_free_spins",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "count"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "pause",
        "args": [
          {
            "type": "uint64",
            "name": "pause"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "is_paused",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "bool"
        }
      },
      {
        "name": "set_storage_app_id",
        "args": [
          {
            "type": "uint64",
            "name": "app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_safe_jackpot_app_id",
        "args": [
          {
            "type": "uint64",
            "name": "app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_safe_fee_app_id",
        "args": [
          {
            "type": "uint64",
            "name": "app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "nop",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "No operation"
      },
      {
        "name": "set_version",
        "args": [
          {
            "type": "uint64",
            "name": "contract_version"
          },
          {
            "type": "uint64",
            "name": "deployment_version"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "approve_update",
        "args": [
          {
            "type": "bool",
            "name": "approval"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "grant_upgrader",
        "args": [
          {
            "type": "address",
            "name": "upgrader"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "transfer",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event."
      }
    ],
    "networks": {}
  },
  "bare_call_config": {
    "update_application": "CALL",
    "no_op": "CREATE"
  }
}

/**
 * Defines an onCompletionAction of 'no_op'
 */
export type OnCompleteNoOp =  { onCompleteAction?: 'no_op' | OnApplicationComplete.NoOpOC }
/**
 * Defines an onCompletionAction of 'opt_in'
 */
export type OnCompleteOptIn =  { onCompleteAction: 'opt_in' | OnApplicationComplete.OptInOC }
/**
 * Defines an onCompletionAction of 'close_out'
 */
export type OnCompleteCloseOut =  { onCompleteAction: 'close_out' | OnApplicationComplete.CloseOutOC }
/**
 * Defines an onCompletionAction of 'delete_application'
 */
export type OnCompleteDelApp =  { onCompleteAction: 'delete_application' | OnApplicationComplete.DeleteApplicationOC }
/**
 * Defines an onCompletionAction of 'update_application'
 */
export type OnCompleteUpdApp =  { onCompleteAction: 'update_application' | OnApplicationComplete.UpdateApplicationOC }
/**
 * A state record containing a single unsigned integer
 */
export type IntegerState = {
  /**
   * Gets the state value as a BigInt.
   */
  asBigInt(): bigint
  /**
   * Gets the state value as a number.
   */
  asNumber(): number
}
/**
 * A state record containing binary data
 */
export type BinaryState = {
  /**
   * Gets the state value as a Uint8Array
   */
  asByteArray(): Uint8Array
  /**
   * Gets the state value as a string
   */
  asString(): string
}

export type AppCreateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult> & AppReference
export type AppUpdateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult>

export type AppClientComposeCallCoreParams = Omit<AppClientCallCoreParams, 'sendParams'> & {
  sendParams?: Omit<SendTransactionParams, 'skipSending' | 'atc' | 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources'>
}
export type AppClientComposeExecuteParams = Pick<SendTransactionParams, 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources' | 'suppressLog'>

/**
 * Defines the types of available calls and state of the VoiNetworkSlotMachine smart contract.
 */
export type VoiNetworkSlotMachine = {
  /**
   * Maps method signatures / names to their argument and return types.
   */
  methods:
    & Record<'grant_delegate(address)void' | 'grant_delegate', {
      argsObj: {
        address: string
      }
      argsTuple: [address: string]
      returns: void
    }>
    & Record<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void' | 'participate', {
      argsObj: {
        voteK: Uint8Array
        selK: Uint8Array
        voteFst: bigint | number
        voteLst: bigint | number
        voteKd: bigint | number
        spKey: Uint8Array
      }
      argsTuple: [voteK: Uint8Array, selK: Uint8Array, voteFst: bigint | number, voteLst: bigint | number, voteKd: bigint | number, spKey: Uint8Array]
      returns: void
    }>
    & Record<'get_owner()address' | 'get_owner', {
      argsObj: {
      }
      argsTuple: []
      returns: string
    }>
    & Record<'transfer_ownership(address)void' | 'transfer_ownership', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
    & Record<'get_cdf_grid_from_seed(byte[32])byte[15]' | 'get_cdf_grid_from_seed', {
      argsObj: {
        seed: Uint8Array
      }
      argsTuple: [seed: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_cdf_grid_from_bet_key(byte[56])byte[15]' | 'get_cdf_grid_from_bet_key', {
      argsObj: {
        boxKey: Uint8Array
      }
      argsTuple: [boxKey: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]' | 'get_cdf_grid_from_seed_and_spin', {
      argsObj: {
        seed: Uint8Array
        spinIndex: bigint | number
      }
      argsTuple: [seed: Uint8Array, spinIndex: bigint | number]
      returns: Uint8Array
    }>
    & Record<'get_cdf_reel1()uint64[16]' | 'get_cdf_reel1', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'get_cdf_others()uint64[16]' | 'get_cdf_others', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'reel_has_symbol(byte[15],uint64,byte[1])bool' | 'reel_has_symbol', {
      argsObj: {
        grid: Uint8Array
        reel: bigint | number
        sym: Uint8Array
      }
      argsTuple: [grid: Uint8Array, reel: bigint | number, sym: Uint8Array]
      returns: boolean
    }>
    & Record<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)' | 'calculate_grid_payout_with_bonus_and_jackpot', {
      argsObj: {
        grid: Uint8Array
        isBonusSpin: boolean
      }
      argsTuple: [grid: Uint8Array, isBonusSpin: boolean]
      returns: SpinResult
    }>
    & Record<'owner_deposit(uint64)void' | 'owner_deposit', {
      argsObj: {
        amount: bigint | number
      }
      argsTuple: [amount: bigint | number]
      returns: void
    }>
    & Record<'deposit()void' | 'deposit', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'withdraw(uint64)void' | 'withdraw', {
      argsObj: {
        /**
         * The amount of funds to withdraw in atomic units
         */
        amount: bigint | number
      }
      argsTuple: [amount: bigint | number]
      returns: void
    }>
    & Record<'get_balances()(uint64,uint64,uint64,bool)' | 'get_balances', {
      argsObj: {
      }
      argsTuple: []
      returns: BankBalances
    }>
    & Record<'get_balance_available()uint64' | 'get_balance_available', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_balance_locked()uint64' | 'get_balance_locked', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_balance_total()uint64' | 'get_balance_total', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'sync_balance()uint64' | 'sync_balance', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_user(address)(address,uint64,uint64,uint64,uint64)' | 'get_user', {
      argsObj: {
        address: string
      }
      argsTuple: [address: string]
      returns: UserData
    }>
    & Record<'grant_reward_manager(address)void' | 'grant_reward_manager', {
      argsObj: {
        address: string
      }
      argsTuple: [address: string]
      returns: void
    }>
    & Record<'credit(address,uint64)void' | 'credit', {
      argsObj: {
        address: string
        amount: bigint | number
      }
      argsTuple: [address: string, amount: bigint | number]
      returns: void
    }>
    & Record<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)' | 'get_bet', {
      argsObj: {
        betKey: Uint8Array
      }
      argsTuple: [betKey: Uint8Array]
      returns: Bet
    }>
    & Record<'get_bet_key(address,uint64,uint64,uint64)byte[56]' | 'get_bet_key', {
      argsObj: {
        address: string
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [address: string, betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'spin(uint64,uint64,uint64)byte[56]' | 'spin', {
      argsObj: {
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'claim(byte[56])uint64' | 'claim', {
      argsObj: {
        betKey: Uint8Array
      }
      argsTuple: [betKey: Uint8Array]
      returns: bigint
    }>
    & Record<'grant_free_spins(address,uint64)void' | 'grant_free_spins', {
      argsObj: {
        address: string
        count: bigint | number
      }
      argsTuple: [address: string, count: bigint | number]
      returns: void
    }>
    & Record<'pause(uint64)void' | 'pause', {
      argsObj: {
        pause: bigint | number
      }
      argsTuple: [pause: bigint | number]
      returns: void
    }>
    & Record<'is_paused()bool' | 'is_paused', {
      argsObj: {
      }
      argsTuple: []
      returns: boolean
    }>
    & Record<'set_storage_app_id(uint64)void' | 'set_storage_app_id', {
      argsObj: {
        appId: bigint | number
      }
      argsTuple: [appId: bigint | number]
      returns: void
    }>
    & Record<'set_safe_jackpot_app_id(uint64)void' | 'set_safe_jackpot_app_id', {
      argsObj: {
        appId: bigint | number
      }
      argsTuple: [appId: bigint | number]
      returns: void
    }>
    & Record<'set_safe_fee_app_id(uint64)void' | 'set_safe_fee_app_id', {
      argsObj: {
        appId: bigint | number
      }
      argsTuple: [appId: bigint | number]
      returns: void
    }>
    & Record<'nop()void' | 'nop', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'set_version(uint64,uint64)void' | 'set_version', {
      argsObj: {
        contractVersion: bigint | number
        deploymentVersion: bigint | number
      }
      argsTuple: [contractVersion: bigint | number, deploymentVersion: bigint | number]
      returns: void
    }>
    & Record<'approve_update(bool)void' | 'approve_update', {
      argsObj: {
        approval: boolean
      }
      argsTuple: [approval: boolean]
      returns: void
    }>
    & Record<'grant_upgrader(address)void' | 'grant_upgrader', {
      argsObj: {
        upgrader: string
      }
      argsTuple: [upgrader: string]
      returns: void
    }>
    & Record<'transfer(address)void' | 'transfer', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
  /**
   * Defines the shape of the global and local state of the application.
   */
  state: {
    global: {
      bonusLineMult?: IntegerState
      bonusSpinsAwarded?: IntegerState
      bonusTriggerCount?: IntegerState
      contractVersion?: IntegerState
      creditBetCost?: IntegerState
      delegate?: BinaryState
      deploymentVersion?: IntegerState
      feeMarketingAddress?: BinaryState
      feeMarketingBps?: IntegerState
      feeTreasuryAddress?: BinaryState
      feeTreasuryBps?: IntegerState
      jackpotNetwork?: IntegerState
      jackpotNetworkContribution?: IntegerState
      jackpotNetworkInitial?: IntegerState
      jackpotToken?: BinaryState
      jackpotTokenContribution?: IntegerState
      jackpotTokenInitial?: IntegerState
      modeEnabled?: IntegerState
      networkBaseBetCost?: IntegerState
      networkKickerExtra?: IntegerState
      networkMinBankAmount?: IntegerState
      networkUnit?: IntegerState
      owner?: BinaryState
      paused?: IntegerState
      rewardManager?: BinaryState
      safeFeeAppId?: IntegerState
      safeJackpotAppId?: IntegerState
      spinCount?: IntegerState
      stakeable?: IntegerState
      storageAppId?: IntegerState
      superManager?: BinaryState
      tokenAppId?: IntegerState
      tokenBaseBetCost?: BinaryState
      tokenKickerExtra?: BinaryState
      tokenMinBankAmount?: BinaryState
      tokenUnit?: BinaryState
      updatable?: IntegerState
      upgrader?: BinaryState
    }
  }
}
/**
 * Defines the possible abi call signatures
 */
export type VoiNetworkSlotMachineSig = keyof VoiNetworkSlotMachine['methods']
/**
 * Defines an object containing all relevant parameters for a single call to the contract. Where TSignature is undefined, a bare call is made
 */
export type TypedCallParams<TSignature extends VoiNetworkSlotMachineSig | undefined> = {
  method: TSignature
  methodArgs: TSignature extends undefined ? undefined : Array<ABIAppCallArg | undefined>
} & AppClientCallCoreParams & CoreAppCallArgs
/**
 * Defines the arguments required for a bare call
 */
export type BareCallArgs = Omit<RawAppCallArgs, keyof CoreAppCallArgs>
/**
 * Represents a SpinResult result as a struct
 */
export type SpinResult = {
  payout: bigint
  payoutMultiplier: bigint
  bonusSpinsAwarded: bigint
  jackpotHit: bigint
}
/**
 * Converts the tuple representation of a SpinResult to the struct representation
 */
export function SpinResult([payout, payoutMultiplier, bonusSpinsAwarded, jackpotHit]: [bigint, bigint, bigint, bigint] ) {
  return {
    payout,
    payoutMultiplier,
    bonusSpinsAwarded,
    jackpotHit,
  }
}
/**
 * Represents a BankBalances result as a struct
 */
export type BankBalances = {
  balanceAvailable: bigint
  balanceTotal: bigint
  balanceLocked: bigint
  balanceFuse: boolean
}
/**
 * Converts the tuple representation of a BankBalances to the struct representation
 */
export function BankBalances([balanceAvailable, balanceTotal, balanceLocked, balanceFuse]: [bigint, bigint, bigint, boolean] ) {
  return {
    balanceAvailable,
    balanceTotal,
    balanceLocked,
    balanceFuse,
  }
}
/**
 * Represents a UserData result as a struct
 */
export type UserData = {
  who: string
  credit: bigint
  bonusSpin: bigint
  spinCount: bigint
  lastSpinTimestamp: bigint
}
/**
 * Converts the tuple representation of a UserData to the struct representation
 */
export function UserData([who, credit, bonusSpin, spinCount, lastSpinTimestamp]: [string, bigint, bigint, bigint, bigint] ) {
  return {
    who,
    credit,
    bonusSpin,
    spinCount,
    lastSpinTimestamp,
  }
}
/**
 * Represents a Bet result as a struct
 */
export type Bet = {
  who: string
  betAmount: bigint
  isKickerBet: boolean
  netBetAmount: bigint
  spinIndex: bigint
  mode: bigint
  claimRound: bigint
}
/**
 * Converts the tuple representation of a Bet to the struct representation
 */
export function Bet([who, betAmount, isKickerBet, netBetAmount, spinIndex, mode, claimRound]: [string, bigint, boolean, bigint, bigint, bigint, bigint] ) {
  return {
    who,
    betAmount,
    isKickerBet,
    netBetAmount,
    spinIndex,
    mode,
    claimRound,
  }
}
/**
 * Maps a method signature from the VoiNetworkSlotMachine smart contract to the method's arguments in either tuple of struct form
 */
export type MethodArgs<TSignature extends VoiNetworkSlotMachineSig> = VoiNetworkSlotMachine['methods'][TSignature]['argsObj' | 'argsTuple']
/**
 * Maps a method signature from the VoiNetworkSlotMachine smart contract to the method's return type
 */
export type MethodReturn<TSignature extends VoiNetworkSlotMachineSig> = VoiNetworkSlotMachine['methods'][TSignature]['returns']

/**
 * A factory for available 'create' calls
 */
export type VoiNetworkSlotMachineCreateCalls = (typeof VoiNetworkSlotMachineCallFactory)['create']
/**
 * Defines supported create methods for this smart contract
 */
export type VoiNetworkSlotMachineCreateCallParams =
  | (TypedCallParams<undefined> & (OnCompleteNoOp))
/**
 * A factory for available 'update' calls
 */
export type VoiNetworkSlotMachineUpdateCalls = (typeof VoiNetworkSlotMachineCallFactory)['update']
/**
 * Defines supported update methods for this smart contract
 */
export type VoiNetworkSlotMachineUpdateCallParams =
  | TypedCallParams<undefined>
/**
 * Defines arguments required for the deploy method.
 */
export type VoiNetworkSlotMachineDeployArgs = {
  deployTimeParams?: TealTemplateParams
  /**
   * A delegate which takes a create call factory and returns the create call params for this smart contract
   */
  createCall?: (callFactory: VoiNetworkSlotMachineCreateCalls) => VoiNetworkSlotMachineCreateCallParams
  /**
   * A delegate which takes a update call factory and returns the update call params for this smart contract
   */
  updateCall?: (callFactory: VoiNetworkSlotMachineUpdateCalls) => VoiNetworkSlotMachineUpdateCallParams
}


/**
 * Exposes methods for constructing all available smart contract calls
 */
export abstract class VoiNetworkSlotMachineCallFactory {
  /**
   * Gets available create call factories
   */
  static get create() {
    return {
      /**
       * Constructs a create call for the VoiNetworkSlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams & (OnCompleteNoOp) = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Gets available update call factories
   */
  static get update() {
    return {
      /**
       * Constructs an update call for the VoiNetworkSlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Constructs a no op call for the grant_delegate(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantDelegate(args: MethodArgs<'grant_delegate(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_delegate(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static participate(args: MethodArgs<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.voteK, args.selK, args.voteFst, args.voteLst, args.voteKd, args.spKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_owner()address ABI method
   *
   * Get the owner of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_owner()address' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer_ownership(address)void ABI method
   *
   * Transfer the ownership of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer_ownership(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_seed(byte[32])byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_seed(byte[32])byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.seed],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_bet_key(byte[56])byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.boxKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.seed, args.spinIndex],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_reel1()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_reel1()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_others()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_others()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'reel_has_symbol(byte[15],uint64,byte[1])bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.grid, args.reel, args.sym],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.grid, args.isBonusSpin],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the owner_deposit(uint64)void ABI method
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'owner_deposit(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the deposit()void ABI method
   *
   * Deposit funds into the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static deposit(args: MethodArgs<'deposit()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'deposit()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the withdraw(uint64)void ABI method
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static withdraw(args: MethodArgs<'withdraw(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'withdraw(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balances()(uint64,uint64,uint64,bool) ABI method
   *
   * Get the balances
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balances()(uint64,uint64,uint64,bool)' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_available()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_available()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_locked()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_locked()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_total()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_total()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the sync_balance()uint64 ABI method
   *
   * Sync the balance of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'sync_balance()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_user(address)(address,uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.address],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_reward_manager(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantRewardManager(args: MethodArgs<'grant_reward_manager(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_reward_manager(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the credit(address,uint64)void ABI method
   *
   * Credit the contract.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'credit(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.betKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_bet_key(address,uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the spin(uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'spin(uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the claim(byte[56])uint64 ABI method
   *
   * Claim all bets
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'claim(byte[56])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.betKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_free_spins(address,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_free_spins(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.count],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the pause(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static pause(args: MethodArgs<'pause(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'pause(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.pause],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the is_paused()bool ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static isPaused(args: MethodArgs<'is_paused()bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'is_paused()bool' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_storage_app_id(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_storage_app_id(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.appId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_safe_jackpot_app_id(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setSafeJackpotAppId(args: MethodArgs<'set_safe_jackpot_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_safe_jackpot_app_id(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.appId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_safe_fee_app_id(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setSafeFeeAppId(args: MethodArgs<'set_safe_fee_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_safe_fee_app_id(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.appId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the nop()void ABI method
   *
   * No operation
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static nop(args: MethodArgs<'nop()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'nop()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_version(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_version(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.contractVersion, args.deploymentVersion],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the approve_update(bool)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'approve_update(bool)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.approval],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_upgrader(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_upgrader(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.upgrader],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer(address)void ABI method
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
}

/**
 * A client to make calls to the VoiNetworkSlotMachine smart contract
 */
export class VoiNetworkSlotMachineClient {
  /**
   * The underlying `ApplicationClient` for when you want to have more flexibility
   */
  public readonly appClient: ApplicationClient

  private readonly sender: SendTransactionFrom | undefined

  /**
   * Creates a new instance of `VoiNetworkSlotMachineClient`
   *
   * @param appDetails appDetails The details to identify the app to deploy
   * @param algod An algod client instance
   */
  constructor(appDetails: AppDetails, private algod: Algodv2) {
    this.sender = appDetails.sender
    this.appClient = algokit.getAppClient({
      ...appDetails,
      app: APP_SPEC
    }, algod)
  }

  /**
   * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
   *
   * @param result The AppCallTransactionResult to be mapped
   * @param returnValueFormatter An optional delegate to format the return value if required
   * @returns The smart contract response with an updated return value
   */
  protected mapReturnValue<TReturn, TResult extends AppCallTransactionResult = AppCallTransactionResult>(result: AppCallTransactionResult, returnValueFormatter?: (value: any) => TReturn): AppCallTransactionResultOfType<TReturn> & TResult {
    if(result.return?.decodeError) {
      throw result.return.decodeError
    }
    const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
      ? returnValueFormatter(result.return.returnValue)
      : result.return?.returnValue as TReturn | undefined
      return { ...result, return: returnValue } as AppCallTransactionResultOfType<TReturn> & TResult
  }

  /**
   * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
   *
   * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
   * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
   * @returns The result of the smart contract call
   */
  public async call<TSignature extends keyof VoiNetworkSlotMachine['methods']>(typedCallParams: TypedCallParams<TSignature>, returnValueFormatter?: (value: any) => MethodReturn<TSignature>) {
    return this.mapReturnValue<MethodReturn<TSignature>>(await this.appClient.call(typedCallParams), returnValueFormatter)
  }

  /**
   * Idempotently deploys the VoiNetworkSlotMachine smart contract.
   *
   * @param params The arguments for the contract calls and any additional parameters for the call
   * @returns The deployment result
   */
  public deploy(params: VoiNetworkSlotMachineDeployArgs & AppClientDeployCoreParams = {}): ReturnType<ApplicationClient['deploy']> {
    const createArgs = params.createCall?.(VoiNetworkSlotMachineCallFactory.create)
    const updateArgs = params.updateCall?.(VoiNetworkSlotMachineCallFactory.update)
    return this.appClient.deploy({
      ...params,
      updateArgs,
      createArgs,
      createOnCompleteAction: createArgs?.onCompleteAction,
    })
  }

  /**
   * Gets available create methods
   */
  public get create() {
    const $this = this
    return {
      /**
       * Creates a new instance of the VoiNetworkSlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The create result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs & (OnCompleteNoOp) = {}) {
        return $this.mapReturnValue<undefined, AppCreateCallTransactionResult>(await $this.appClient.create(args))
      },
    }
  }

  /**
   * Gets available update methods
   */
  public get update() {
    const $this = this
    return {
      /**
       * Updates an existing instance of the VoiNetworkSlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The update result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs = {}) {
        return $this.mapReturnValue<undefined, AppUpdateCallTransactionResult>(await $this.appClient.update(args))
      },
    }
  }

  /**
   * Makes a clear_state call to an existing instance of the VoiNetworkSlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The clear_state result
   */
  public clearState(args: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.appClient.clearState(args)
  }

  /**
   * Calls the grant_delegate(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantDelegate(args: MethodArgs<'grant_delegate(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.grantDelegate(args, params))
  }

  /**
   * Calls the participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public participate(args: MethodArgs<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.participate(args, params))
  }

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getOwner(args, params))
  }

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.transferOwnership(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_seed(byte[32])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getCdfGridFromSeed(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getCdfGridFromBetKey(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getCdfGridFromSeedAndSpin(args, params))
  }

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getCdfReel1(args, params))
  }

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getCdfOthers(args, params))
  }

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.reelHasSymbol(args, params))
  }

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.calculateGridPayoutWithBonusAndJackpot(args, params), SpinResult)
  }

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.ownerDeposit(args, params))
  }

  /**
   * Calls the deposit()void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public deposit(args: MethodArgs<'deposit()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.deposit(args, params))
  }

  /**
   * Calls the withdraw(uint64)void ABI method.
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public withdraw(args: MethodArgs<'withdraw(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.withdraw(args, params))
  }

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBalances(args, params), BankBalances)
  }

  /**
   * Calls the get_balance_available()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBalanceAvailable(args, params))
  }

  /**
   * Calls the get_balance_locked()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBalanceLocked(args, params))
  }

  /**
   * Calls the get_balance_total()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBalanceTotal(args, params))
  }

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.syncBalance(args, params))
  }

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getUser(args, params), UserData)
  }

  /**
   * Calls the grant_reward_manager(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantRewardManager(args: MethodArgs<'grant_reward_manager(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.grantRewardManager(args, params))
  }

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.credit(args, params))
  }

  /**
   * Calls the get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBet(args, params), Bet)
  }

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.getBetKey(args, params))
  }

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.spin(args, params))
  }

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.claim(args, params))
  }

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.grantFreeSpins(args, params))
  }

  /**
   * Calls the pause(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public pause(args: MethodArgs<'pause(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.pause(args, params))
  }

  /**
   * Calls the is_paused()bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public isPaused(args: MethodArgs<'is_paused()bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.isPaused(args, params))
  }

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.setStorageAppId(args, params))
  }

  /**
   * Calls the set_safe_jackpot_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setSafeJackpotAppId(args: MethodArgs<'set_safe_jackpot_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.setSafeJackpotAppId(args, params))
  }

  /**
   * Calls the set_safe_fee_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setSafeFeeAppId(args: MethodArgs<'set_safe_fee_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.setSafeFeeAppId(args, params))
  }

  /**
   * Calls the nop()void ABI method.
   *
   * No operation
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public nop(args: MethodArgs<'nop()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.nop(args, params))
  }

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.setVersion(args, params))
  }

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.approveUpdate(args, params))
  }

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.grantUpgrader(args, params))
  }

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(VoiNetworkSlotMachineCallFactory.transfer(args, params))
  }

  /**
   * Extracts a binary state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns A BinaryState instance containing the state value, or undefined if the key was not found
   */
  private static getBinaryState(state: AppState, key: string): BinaryState | undefined {
    const value = state[key]
    if (!value) return undefined
    if (!('valueRaw' in value))
      throw new Error(`Failed to parse state value for ${key}; received an int when expected a byte array`)
    return {
      asString(): string {
        return value.value
      },
      asByteArray(): Uint8Array {
        return value.valueRaw
      }
    }
  }

  /**
   * Extracts a integer state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns An IntegerState instance containing the state value, or undefined if the key was not found
   */
  private static getIntegerState(state: AppState, key: string): IntegerState | undefined {
    const value = state[key]
    if (!value) return undefined
    if ('valueRaw' in value)
      throw new Error(`Failed to parse state value for ${key}; received a byte array when expected a number`)
    return {
      asBigInt() {
        return typeof value.value === 'bigint' ? value.value : BigInt(value.value)
      },
      asNumber(): number {
        return typeof value.value === 'bigint' ? Number(value.value) : value.value
      },
    }
  }

  /**
   * Returns the smart contract's global state wrapped in a strongly typed accessor with options to format the stored value
   */
  public async getGlobalState(): Promise<VoiNetworkSlotMachine['state']['global']> {
    const state = await this.appClient.getGlobalState()
    return {
      get bonusLineMult() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'bonus_line_mult')
      },
      get bonusSpinsAwarded() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'bonus_spins_awarded')
      },
      get bonusTriggerCount() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'bonus_trigger_count')
      },
      get contractVersion() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'contract_version')
      },
      get creditBetCost() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'credit_bet_cost')
      },
      get delegate() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'delegate')
      },
      get deploymentVersion() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'deployment_version')
      },
      get feeMarketingAddress() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'fee_marketing_address')
      },
      get feeMarketingBps() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'fee_marketing_bps')
      },
      get feeTreasuryAddress() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'fee_treasury_address')
      },
      get feeTreasuryBps() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'fee_treasury_bps')
      },
      get jackpotNetwork() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'jackpot_network')
      },
      get jackpotNetworkContribution() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'jackpot_network_contribution')
      },
      get jackpotNetworkInitial() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'jackpot_network_initial')
      },
      get jackpotToken() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'jackpot_token')
      },
      get jackpotTokenContribution() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'jackpot_token_contribution')
      },
      get jackpotTokenInitial() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'jackpot_token_initial')
      },
      get modeEnabled() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'mode_enabled')
      },
      get networkBaseBetCost() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'network_base_bet_cost')
      },
      get networkKickerExtra() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'network_kicker_extra')
      },
      get networkMinBankAmount() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'network_min_bank_amount')
      },
      get networkUnit() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'network_unit')
      },
      get owner() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'owner')
      },
      get paused() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'paused')
      },
      get rewardManager() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'reward_manager')
      },
      get safeFeeAppId() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'safe_fee_app_id')
      },
      get safeJackpotAppId() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'safe_jackpot_app_id')
      },
      get spinCount() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'spin_count')
      },
      get stakeable() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'stakeable')
      },
      get storageAppId() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'storage_app_id')
      },
      get superManager() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'super_manager')
      },
      get tokenAppId() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'token_app_id')
      },
      get tokenBaseBetCost() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'token_base_bet_cost')
      },
      get tokenKickerExtra() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'token_kicker_extra')
      },
      get tokenMinBankAmount() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'token_min_bank_amount')
      },
      get tokenUnit() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'token_unit')
      },
      get updatable() {
        return VoiNetworkSlotMachineClient.getIntegerState(state, 'updatable')
      },
      get upgrader() {
        return VoiNetworkSlotMachineClient.getBinaryState(state, 'upgrader')
      },
    }
  }

  public compose(): VoiNetworkSlotMachineComposer {
    const client = this
    const atc = new AtomicTransactionComposer()
    let promiseChain:Promise<unknown> = Promise.resolve()
    const resultMappers: Array<undefined | ((x: any) => any)> = []
    return {
      grantDelegate(args: MethodArgs<'grant_delegate(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantDelegate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      participate(args: MethodArgs<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.participate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getOwner(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transferOwnership(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromSeed(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromBetKey(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromSeedAndSpin(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfReel1(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfOthers(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.reelHasSymbol(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculateGridPayoutWithBonusAndJackpot(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(SpinResult)
        return this
      },
      ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.ownerDeposit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      deposit(args: MethodArgs<'deposit()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.deposit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      withdraw(args: MethodArgs<'withdraw(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.withdraw(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalances(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(BankBalances)
        return this
      },
      getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceAvailable(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceLocked(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceTotal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.syncBalance(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getUser(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(UserData)
        return this
      },
      grantRewardManager(args: MethodArgs<'grant_reward_manager(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantRewardManager(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.credit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBet(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(Bet)
        return this
      },
      getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBetKey(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.spin(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.claim(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantFreeSpins(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      pause(args: MethodArgs<'pause(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.pause(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      isPaused(args: MethodArgs<'is_paused()bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.isPaused(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setStorageAppId(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setSafeJackpotAppId(args: MethodArgs<'set_safe_jackpot_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setSafeJackpotAppId(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setSafeFeeAppId(args: MethodArgs<'set_safe_fee_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setSafeFeeAppId(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      nop(args: MethodArgs<'nop()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.nop(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setVersion(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.approveUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantUpgrader(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transfer(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      get update() {
        const $this = this
        return {
          bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs) {
            promiseChain = promiseChain.then(() => client.update.bare({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
            resultMappers.push(undefined)
            return $this
          },
        }
      },
      clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.clearState({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom) {
        promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)))
        return this
      },
      async atc() {
        await promiseChain
        return atc
      },
      async simulate(options?: SimulateOptions) {
        await promiseChain
        const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }))
        return {
          ...result,
          returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      },
      async execute(sendParams?: AppClientComposeExecuteParams) {
        await promiseChain
        const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod)
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      }
    } as unknown as VoiNetworkSlotMachineComposer
  }
}
export type VoiNetworkSlotMachineComposer<TReturns extends [...any[]] = []> = {
  /**
   * Calls the grant_delegate(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantDelegate(args: MethodArgs<'grant_delegate(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'grant_delegate(address)void'>]>

  /**
   * Calls the participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  participate(args: MethodArgs<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'participate(byte[32],byte[32],uint64,uint64,uint64,byte[64])void'>]>

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_owner()address'>]>

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'transfer_ownership(address)void'>]>

  /**
   * Calls the get_cdf_grid_from_seed(byte[32])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_seed(byte[32])byte[15]'>]>

  /**
   * Calls the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>]>

  /**
   * Calls the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>]>

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_reel1()uint64[16]'>]>

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_others()uint64[16]'>]>

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'reel_has_symbol(byte[15],uint64,byte[1])bool'>]>

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'calculate_grid_payout_with_bonus_and_jackpot(byte[15],bool)(uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'owner_deposit(uint64)void'>]>

  /**
   * Calls the deposit()void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  deposit(args: MethodArgs<'deposit()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'deposit()void'>]>

  /**
   * Calls the withdraw(uint64)void ABI method.
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  withdraw(args: MethodArgs<'withdraw(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'withdraw(uint64)void'>]>

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_balances()(uint64,uint64,uint64,bool)'>]>

  /**
   * Calls the get_balance_available()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_balance_available()uint64'>]>

  /**
   * Calls the get_balance_locked()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_balance_locked()uint64'>]>

  /**
   * Calls the get_balance_total()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_balance_total()uint64'>]>

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'sync_balance()uint64'>]>

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_user(address)(address,uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the grant_reward_manager(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantRewardManager(args: MethodArgs<'grant_reward_manager(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'grant_reward_manager(address)void'>]>

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'credit(address,uint64)void'>]>

  /**
   * Calls the get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_bet(byte[56])(address,uint64,bool,uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'spin(uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'claim(byte[56])uint64'>]>

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'grant_free_spins(address,uint64)void'>]>

  /**
   * Calls the pause(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  pause(args: MethodArgs<'pause(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'pause(uint64)void'>]>

  /**
   * Calls the is_paused()bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  isPaused(args: MethodArgs<'is_paused()bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'is_paused()bool'>]>

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'set_storage_app_id(uint64)void'>]>

  /**
   * Calls the set_safe_jackpot_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setSafeJackpotAppId(args: MethodArgs<'set_safe_jackpot_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'set_safe_jackpot_app_id(uint64)void'>]>

  /**
   * Calls the set_safe_fee_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setSafeFeeAppId(args: MethodArgs<'set_safe_fee_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'set_safe_fee_app_id(uint64)void'>]>

  /**
   * Calls the nop()void ABI method.
   *
   * No operation
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  nop(args: MethodArgs<'nop()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'nop()void'>]>

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'set_version(uint64,uint64)void'>]>

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'approve_update(bool)void'>]>

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'grant_upgrader(address)void'>]>

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, MethodReturn<'transfer(address)void'>]>

  /**
   * Gets available update methods
   */
  readonly update: {
    /**
     * Updates an existing instance of the VoiNetworkSlotMachine smart contract using a bare call.
     *
     * @param args The arguments for the bare call
     * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
     */
    bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, undefined]>
  }

  /**
   * Makes a clear_state call to an existing instance of the VoiNetworkSlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs): VoiNetworkSlotMachineComposer<[...TReturns, undefined]>

  /**
   * Adds a transaction to the composer
   *
   * @param txn One of: A TransactionWithSigner object (returned as is), a TransactionToSign object (signer is obtained from the signer property), a Transaction object (signer is extracted from the defaultSender parameter), an async SendTransactionResult returned by one of algokit utils helpers (signer is obtained from the defaultSender parameter)
   * @param defaultSender The default sender to be used to obtain a signer where the object provided to the transaction parameter does not include a signer.
   */
  addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom): VoiNetworkSlotMachineComposer<TReturns>
  /**
   * Returns the underlying AtomicTransactionComposer instance
   */
  atc(): Promise<AtomicTransactionComposer>
  /**
   * Simulates the transaction group and returns the result
   */
  simulate(options?: SimulateOptions): Promise<VoiNetworkSlotMachineComposerSimulateResult<TReturns>>
  /**
   * Executes the transaction group and returns the results
   */
  execute(sendParams?: AppClientComposeExecuteParams): Promise<VoiNetworkSlotMachineComposerResults<TReturns>>
}
export type SimulateOptions = Omit<ConstructorParameters<typeof modelsv2.SimulateRequest>[0], 'txnGroups'>
export type VoiNetworkSlotMachineComposerSimulateResult<TReturns extends [...any[]]> = {
  returns: TReturns
  methodResults: ABIResult[]
  simulateResponse: modelsv2.SimulateResponse
}
export type VoiNetworkSlotMachineComposerResults<TReturns extends [...any[]]> = {
  returns: TReturns
  groupId: string
  txIds: string[]
  transactions: Transaction[]
}
