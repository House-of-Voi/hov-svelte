/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 */
import * as algokit from '@algorandfoundation/algokit-utils'
import type {
  ABIAppCallArg,
  AppCallTransactionResult,
  AppCallTransactionResultOfType,
  AppCompilationResult,
  AppReference,
  AppState,
  CoreAppCallArgs,
  RawAppCallArgs,
  TealTemplateParams,
} from '@algorandfoundation/algokit-utils/types/app'
import type {
  AppClientCallCoreParams,
  AppClientCompilationParams,
  AppClientDeployCoreParams,
  AppDetails,
  ApplicationClient,
} from '@algorandfoundation/algokit-utils/types/app-client'
import type { AppSpec } from '@algorandfoundation/algokit-utils/types/app-spec'
import type { SendTransactionResult, TransactionToSign, SendTransactionFrom, SendTransactionParams } from '@algorandfoundation/algokit-utils/types/transaction'
import type { ABIResult, TransactionWithSigner } from 'algosdk'
import { Algodv2, OnApplicationComplete, Transaction, AtomicTransactionComposer, modelsv2 } from 'algosdk'
export const APP_SPEC: AppSpec = {
  "hints": {
    "post_update()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "bootstrap()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "bootstrap_cost()uint64": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_owner()address": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer_ownership(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_seed(byte[32])byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_bet_key(byte[56])byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_reel1()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_others()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "reel_has_symbol(byte[15],uint64,byte[1])bool": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_grid_payout()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "SpinResult",
          "elements": [
            [
              "payout",
              "uint64"
            ],
            [
              "bonus_spins_awarded",
              "uint64"
            ],
            [
              "jackpot_hit",
              "uint64"
            ]
          ]
        }
      }
    },
    "initialize_token_bank_manager(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "owner_deposit_token(uint64,uint256)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "deposit_token(uint64,uint256)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "owner_deposit(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "deposit()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "withdraw(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balances()(uint64,uint64,uint64,bool)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "BankBalances",
          "elements": [
            [
              "balance_available",
              "uint64"
            ],
            [
              "balance_total",
              "uint64"
            ],
            [
              "balance_locked",
              "uint64"
            ],
            [
              "balance_fuse",
              "bool"
            ]
          ]
        }
      }
    },
    "get_balance_available()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balance_locked()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balance_total()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "sync_balance()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_user(address)(address,uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "UserData",
          "elements": [
            [
              "who",
              "address"
            ],
            [
              "credit",
              "uint64"
            ],
            [
              "bonus_spin",
              "uint64"
            ],
            [
              "spin_count",
              "uint64"
            ],
            [
              "last_spin_timestamp",
              "uint64"
            ]
          ]
        }
      }
    },
    "credit(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_bet(byte[56])(address,uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "Bet",
          "elements": [
            [
              "who",
              "address"
            ],
            [
              "bet_amount",
              "uint64"
            ],
            [
              "spin_index",
              "uint64"
            ],
            [
              "mode",
              "uint64"
            ],
            [
              "claim_round",
              "uint64"
            ]
          ]
        }
      }
    },
    "set_mode(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_bet_key(address,uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "spin(uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "claim(byte[56])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_free_spins(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_storage_app_id(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_version(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "approve_update(bool)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_upgrader(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    }
  },
  "source": {
    "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5hcHByb3ZhbF9wcm9ncmFtOgogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGJueiBtYWluX2VudHJ5cG9pbnRAMgogICAgY2FsbHN1YiBfX2luaXRfXwoKbWFpbl9lbnRyeXBvaW50QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuIE51bUFwcEFyZ3MKICAgIGJ6IG1haW5fYmFyZV9yb3V0aW5nQDQzCiAgICBtZXRob2QgInBvc3RfdXBkYXRlKCl2b2lkIgogICAgbWV0aG9kICJib290c3RyYXAoKXZvaWQiCiAgICBtZXRob2QgImJvb3RzdHJhcF9jb3N0KCl1aW50NjQiCiAgICBtZXRob2QgImdldF9vd25lcigpYWRkcmVzcyIKICAgIG1ldGhvZCAidHJhbnNmZXJfb3duZXJzaGlwKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZChieXRlWzMyXSlieXRlWzE1XSIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShieXRlWzU2XSlieXRlWzE1XSIKICAgIG1ldGhvZCAiZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbihieXRlWzMyXSx1aW50NjQpYnl0ZVsxNV0iCiAgICBtZXRob2QgImdldF9jZGZfcmVlbDEoKXVpbnQ2NFsxNl0iCiAgICBtZXRob2QgImdldF9jZGZfb3RoZXJzKCl1aW50NjRbMTZdIgogICAgbWV0aG9kICJyZWVsX2hhc19zeW1ib2woYnl0ZVsxNV0sdWludDY0LGJ5dGVbMV0pYm9vbCIKICAgIG1ldGhvZCAiY2FsY3VsYXRlX2dyaWRfcGF5b3V0KCl1aW50NjQiCiAgICBtZXRob2QgImNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KCkodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgbWV0aG9kICJpbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcih1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAib3duZXJfZGVwb3NpdF90b2tlbih1aW50NjQsdWludDI1Nil2b2lkIgogICAgbWV0aG9kICJkZXBvc2l0X3Rva2VuKHVpbnQ2NCx1aW50MjU2KXZvaWQiCiAgICBtZXRob2QgIm93bmVyX2RlcG9zaXQodWludDY0KXZvaWQiCiAgICBtZXRob2QgImRlcG9zaXQoKXZvaWQiCiAgICBtZXRob2QgIndpdGhkcmF3KHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJnZXRfYmFsYW5jZXMoKSh1aW50NjQsdWludDY0LHVpbnQ2NCxib29sKSIKICAgIG1ldGhvZCAiZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlX2xvY2tlZCgpdWludDY0IgogICAgbWV0aG9kICJnZXRfYmFsYW5jZV90b3RhbCgpdWludDY0IgogICAgbWV0aG9kICJzeW5jX2JhbGFuY2UoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3VzZXIoYWRkcmVzcykoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgbWV0aG9kICJjcmVkaXQoYWRkcmVzcyx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2JldChieXRlWzU2XSkoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgbWV0aG9kICJzZXRfbW9kZSh1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2JldF9rZXkoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NClieXRlWzU2XSIKICAgIG1ldGhvZCAic3Bpbih1aW50NjQsdWludDY0LHVpbnQ2NClieXRlWzU2XSIKICAgIG1ldGhvZCAiY2xhaW0oYnl0ZVs1Nl0pdWludDY0IgogICAgbWV0aG9kICJncmFudF9mcmVlX3NwaW5zKGFkZHJlc3MsdWludDY0KXZvaWQiCiAgICBtZXRob2QgInNldF9zdG9yYWdlX2FwcF9pZCh1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAic2V0X3ZlcnNpb24odWludDY0LHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJhcHByb3ZlX3VwZGF0ZShib29sKXZvaWQiCiAgICBtZXRob2QgImdyYW50X3VwZ3JhZGVyKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAidHJhbnNmZXIoYWRkcmVzcyl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9wb3N0X3VwZGF0ZV9yb3V0ZUA0IG1haW5fYm9vdHN0cmFwX3JvdXRlQDUgbWFpbl9ib290c3RyYXBfY29zdF9yb3V0ZUA2IG1haW5fZ2V0X293bmVyX3JvdXRlQDcgbWFpbl90cmFuc2Zlcl9vd25lcnNoaXBfcm91dGVAOCBtYWluX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfcm91dGVAOSBtYWluX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXlfcm91dGVAMTAgbWFpbl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluX3JvdXRlQDExIG1haW5fZ2V0X2NkZl9yZWVsMV9yb3V0ZUAxMiBtYWluX2dldF9jZGZfb3RoZXJzX3JvdXRlQDEzIG1haW5fcmVlbF9oYXNfc3ltYm9sX3JvdXRlQDE0IG1haW5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3JvdXRlQDE1IG1haW5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Rfcm91dGVAMTYgbWFpbl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9yb3V0ZUAxNyBtYWluX293bmVyX2RlcG9zaXRfdG9rZW5fcm91dGVAMTggbWFpbl9kZXBvc2l0X3Rva2VuX3JvdXRlQDE5IG1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUAyMCBtYWluX2RlcG9zaXRfcm91dGVAMjEgbWFpbl93aXRoZHJhd19yb3V0ZUAyMiBtYWluX2dldF9iYWxhbmNlc19yb3V0ZUAyMyBtYWluX2dldF9iYWxhbmNlX2F2YWlsYWJsZV9yb3V0ZUAyNCBtYWluX2dldF9iYWxhbmNlX2xvY2tlZF9yb3V0ZUAyNSBtYWluX2dldF9iYWxhbmNlX3RvdGFsX3JvdXRlQDI2IG1haW5fc3luY19iYWxhbmNlX3JvdXRlQDI3IG1haW5fZ2V0X3VzZXJfcm91dGVAMjggbWFpbl9jcmVkaXRfcm91dGVAMjkgbWFpbl9nZXRfYmV0X3JvdXRlQDMwIG1haW5fc2V0X21vZGVfcm91dGVAMzEgbWFpbl9nZXRfYmV0X2tleV9yb3V0ZUAzMiBtYWluX3NwaW5fcm91dGVAMzMgbWFpbl9jbGFpbV9yb3V0ZUAzNCBtYWluX2dyYW50X2ZyZWVfc3BpbnNfcm91dGVAMzUgbWFpbl9zZXRfc3RvcmFnZV9hcHBfaWRfcm91dGVAMzYgbWFpbl9zZXRfdmVyc2lvbl9yb3V0ZUAzNyBtYWluX2FwcHJvdmVfdXBkYXRlX3JvdXRlQDM4IG1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVAMzkgbWFpbl90cmFuc2Zlcl9yb3V0ZUA0MAogICAgZXJyIC8vIHJlamVjdCB0cmFuc2FjdGlvbgoKbWFpbl9wb3N0X3VwZGF0ZV9yb3V0ZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgcG9zdF91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYm9vdHN0cmFwX3JvdXRlQDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBib290c3RyYXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGJvb3RzdHJhcF9jb3N0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9vd25lcl9yb3V0ZUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjY5CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X293bmVyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3RyYW5zZmVyX293bmVyc2hpcF9yb3V0ZUA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjc2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiB0cmFuc2Zlcl9vd25lcnNoaXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9yb3V0ZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzEzCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfY2RmX2dyaWRfZnJvbV9zZWVkCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXlfcm91dGVAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcxOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3Bpbl9yb3V0ZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzI5CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbgogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfY2RmX3JlZWwxX3JvdXRlQDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY5CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2NkZl9yZWVsMQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfY2RmX290aGVyc19yb3V0ZUAxMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9jZGZfb3RoZXJzCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3JlZWxfaGFzX3N5bWJvbF9yb3V0ZUAxNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg5NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk3CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgcmVlbF9oYXNfc3ltYm9sCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9yb3V0ZUAxNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PUZhbHNlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Rfcm91dGVAMTY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwOTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9yb3V0ZUAxNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEwNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTA1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXIKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb3duZXJfZGVwb3NpdF90b2tlbl9yb3V0ZUAxODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEzMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTMxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgb3duZXJfZGVwb3NpdF90b2tlbgogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9kZXBvc2l0X3Rva2VuX3JvdXRlQDE5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBkZXBvc2l0X3Rva2VuCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX293bmVyX2RlcG9zaXRfcm91dGVAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIG93bmVyX2RlcG9zaXQKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZGVwb3NpdF9yb3V0ZUAyMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGRlcG9zaXQKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fd2l0aGRyYXdfcm91dGVAMjI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQzNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHdpdGhkcmF3CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlc19yb3V0ZUAyMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ3NC00NDc1CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2JhbGFuY2VzCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlX2F2YWlsYWJsZV9yb3V0ZUAyNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ4OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlX2F2YWlsYWJsZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZV9sb2NrZWRfcm91dGVAMjU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYmFsYW5jZV9sb2NrZWQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2JhbGFuY2VfdG90YWxfcm91dGVAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NzAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYmFsYW5jZV90b3RhbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zeW5jX2JhbGFuY2Vfcm91dGVAMjc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBzeW5jX2JhbGFuY2UKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3VzZXJfcm91dGVAMjg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NDAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY0MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF91c2VyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NyZWRpdF9yb3V0ZUAyOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY1NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjU3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY3JlZGl0CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iZXRfcm91dGVAMzA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9iZXQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc2V0X21vZGVfcm91dGVAMzE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDczNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNldF9tb2RlCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iZXRfa2V5X3JvdXRlQDMyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzQ2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NDYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfYmV0X2tleQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zcGluX3JvdXRlQDMzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODUxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBzcGluCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NsYWltX3JvdXRlQDM0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTE0LTUxMTUKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExNC01MTE1CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY2xhaW0KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ3JhbnRfZnJlZV9zcGluc19yb3V0ZUAzNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTUzNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTM1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ3JhbnRfZnJlZV9zcGlucwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfc3RvcmFnZV9hcHBfaWRfcm91dGVAMzY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1ODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU4MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNldF9zdG9yYWdlX2FwcF9pZAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfdmVyc2lvbl9yb3V0ZUAzNzoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzItMzU3OQogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3ZlcnNpb24KICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYXBwcm92ZV91cGRhdGVfcm91dGVAMzg6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgYXBwcm92ZV91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVAMzk6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ3JhbnRfdXBncmFkZXIKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fdHJhbnNmZXJfcm91dGVANDA6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2JhcmVfcm91dGluZ0A0MzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICBpbnQgMAogICAgaW50IDQKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIG1hdGNoIG1haW5fY3JlYXRlQDQ0IG1haW5fb25fdXBkYXRlQDQ1CiAgICBlcnIgLy8gcmVqZWN0IHRyYW5zYWN0aW9uCgptYWluX2NyZWF0ZUA0NDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3Mi0zNTc5CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgIQogICAgYXNzZXJ0IC8vIGlzIGNyZWF0aW5nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX29uX3VwZGF0ZUA0NToKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5MgogICAgLy8gQGFyYzQuYmFyZW1ldGhvZChhbGxvd19hY3Rpb25zPVsiVXBkYXRlQXBwbGljYXRpb24iXSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTItOTMKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICAvLyBkZWYgb25fdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICBjYWxsc3ViIG9uX3VwZGF0ZQogICAgaW50IDEKICAgIHJldHVybgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnBvc3RfdXBkYXRlKCkgLT4gdm9pZDoKcG9zdF91cGRhdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDAtMzY0MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcG9zdF91cGRhdGUoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMxCiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiY29udHJhY3RfdmVyc2lvbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY0MgogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KDApCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMgogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiZGVwbG95bWVudF92ZXJzaW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQzCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQ0CiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikgICMgbWludGFibGUgYXJjMjAwIGFwcCBpZCAoIlZPSSIpCiAgICBpbnQgNDY1MDQ0MzYKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDgKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDUtMzY0NgogICAgLy8gIyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgzKSAgIyBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNSkgICMgY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICBpbnQgNQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzNC0zNjM2CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQ3CiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KDQ3MDYwODAwKSAgIyBzbG90IG1hY2hpbmUgc3RvcmFnZSBhcHAgaWQKICAgIGludCA0NzA2MDgwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmJvb3RzdHJhcCgpIC0+IHZvaWQ6CmJvb3RzdHJhcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1MS0zNjUyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjUzCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9vbmx5X293bmVyKCkgLT4gdm9pZDoKX29ubHlfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODgtMzY4OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2OTMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYuX2dldF9vd25lcigpLCAib25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgX2dldF9vd25lcgogICAgPT0KICAgIGFzc2VydCAvLyBvbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X293bmVyKCkgLT4gYnl0ZXM6Cl9nZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2OTUtMzY5NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X293bmVyKHNlbGYpIC0+IEFjY291bnQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY5NwogICAgLy8gcmV0dXJuIHNlbGYub3duZXIKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2OTcKICAgIC8vIHJldHVybiBzZWxmLm93bmVyCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5ib290c3RyYXBfY29zdCgpIC0+IGJ5dGVzOgpib290c3RyYXBfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2MS0zNjYyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBib290c3RyYXBfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjYzCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoMV8wMDBfMDAwKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwZjQyNDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9vd25lcigpIC0+IGJ5dGVzOgpnZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjktMzY3MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjc0CiAgICAvLyByZXR1cm4gYXJjNC5BZGRyZXNzKHNlbGYuX2dldF9vd25lcigpKQogICAgY2FsbHN1YiBfZ2V0X293bmVyCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS50cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjc2LTM2NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjgxCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY4MgogICAgLy8gc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3RyYW5zZmVyX293bmVyc2hpcAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXI6IGJ5dGVzKSAtPiB2b2lkOgpfdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjk5LTM3MDAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3RyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwMQogICAgLy8gc2VsZi5vd25lciA9IG5ld19vd25lcgogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZChzZWVkOiBieXRlcykgLT4gYnl0ZXM6CmdldF9jZGZfZ3JpZF9mcm9tX3NlZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTMtMzcxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZChzZWxmLCBzZWVkOiBCeXRlczMyKSAtPiBCeXRlczE1OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTUKICAgIC8vIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIGludCAyODAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MTYKICAgIC8vIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIHJldHN1YgoKCi8vIGFsZ29weS5lbnN1cmVfYnVkZ2V0KHJlcXVpcmVkX2J1ZGdldDogdWludDY0LCBmZWVfc291cmNlOiB1aW50NjQpIC0+IHZvaWQ6CmVuc3VyZV9idWRnZXQ6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MTEtMTcKICAgIHByb3RvIDIgMAogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjE4CiAgICBmcmFtZV9kaWcgLTIKICAgIGludCAxMAogICAgKwoKZW5zdXJlX2J1ZGdldF93aGlsZV90b3BAMToKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToxOQogICAgZnJhbWVfZGlnIDAKICAgIGdsb2JhbCBPcGNvZGVCdWRnZXQKICAgID4KICAgIGJ6IGVuc3VyZV9idWRnZXRfYWZ0ZXJfd2hpbGVANwogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIwCiAgICBpdHhuX2JlZ2luCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjEKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjIKICAgIGludCBEZWxldGVBcHBsaWNhdGlvbgogICAgaXR4bl9maWVsZCBPbkNvbXBsZXRpb24KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyMwogICAgYnl0ZSAweDA2ODEwMQogICAgaXR4bl9maWVsZCBBcHByb3ZhbFByb2dyYW0KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNAogICAgYnl0ZSAweDA2ODEwMQogICAgaXR4bl9maWVsZCBDbGVhclN0YXRlUHJvZ3JhbQogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI1LTI5CiAgICBmcmFtZV9kaWcgLTEKICAgIHN3aXRjaCBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzBAMyBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzFANAogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANgoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8wQDM6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjcKICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANgoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8xQDQ6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjkKICAgIGdsb2JhbCBNaW5UeG5GZWUKICAgIGl0eG5fZmllbGQgRmVlCgplbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANjoKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weTozMAogICAgaXR4bl9zdWJtaXQKICAgIGIgZW5zdXJlX2J1ZGdldF93aGlsZV90b3BAMQoKZW5zdXJlX2J1ZGdldF9hZnRlcl93aGlsZUA3OgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9jZGZfZ3JpZChzZWVkOiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfY2RmX2dyaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODEtMzg4MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODgzCiAgICAvLyBjZGZfcmVlbDEgPSBzZWxmLl9nZXRfY2RmX3JlZWwxKCkKICAgIGNhbGxzdWIgX2dldF9jZGZfcmVlbDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg4NAogICAgLy8gY2RmX290aGVycyA9IHNlbGYuX2dldF9jZGZfb3RoZXJzKCkKICAgIGNhbGxzdWIgX2dldF9jZGZfb3RoZXJzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODUKICAgIC8vIGNvbDEgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfcmVlbDEsIFVJbnQ2NCgwKSkKICAgIGZyYW1lX2RpZyAtMQogICAgc3dhcAogICAgaW50IDAKICAgIGNhbGxzdWIgX2dldF9jb2xfc2VsZWN0aW9uCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODYKICAgIC8vIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGRpZyAxCiAgICBpbnQgMQogICAgY2FsbHN1YiBfZ2V0X2NvbF9zZWxlY3Rpb24KICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg4NwogICAgLy8gY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIGZyYW1lX2RpZyAtMQogICAgZGlnIDEKICAgIGludCAyCiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODg4CiAgICAvLyBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBkaWcgMQogICAgaW50IDMKICAgIGNhbGxzdWIgX2dldF9jb2xfc2VsZWN0aW9uCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODkKICAgIC8vIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGludCA0CiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODkwCiAgICAvLyByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKGNvbDEgKyBjb2wyICsgY29sMyArIGNvbDQgKyBjb2w1KS5ieXRlcwogICAgdW5jb3ZlciA0CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgdW5jb3ZlciAzCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX3JlZWwxKCkgLT4gYnl0ZXM6Cl9nZXRfY2RmX3JlZWwxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzU1LTM3NjIKICAgIC8vICMgQ0RGX1JFRUwxID0gWwogICAgLy8gIyAgICAgNDI3MDc2NjYsICAgODU0MTUzMzIsICAxNzA4MzA2NjQsICAyMzQ4OTIxNjMsCiAgICAvLyAjICAgICAyOTg5NTM2NjIsICAzODQzNjg5OTQsICA0Njk3ODQzMjYsICA1NTUxOTk2NTgsCiAgICAvLyAjICAgICA2ODMzMjI2NTYsICA4MzI3OTk0ODgsICA5ODIyNzYzMTksICA5ODIyNzYzMTksCiAgICAvLyAjICAgICA5ODIyNzYzMTksICA5ODIyNzYzMTksICA5ODM5ODQ2MjUsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBCeXRlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzYzLTM3NjYKICAgIC8vIGNkZl9yZWVsMSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX3JlZWwxX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY1CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjM0LTM2MzYKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NjUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zdG9yYWdlX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzYzLTM3NjYKICAgIC8vIGNkZl9yZWVsMSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX3JlZWwxX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJjZGZfcmVlbDFfZGVmYXVsdCgpdWludDY0WzE2XSIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBkdXAKICAgIGV4dHJhY3QgNCAwCiAgICBzd2FwCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NjcKICAgIC8vIHJldHVybiBjZGZfcmVlbDEuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX290aGVycygpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9vdGhlcnM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NzMtMzc4MAogICAgLy8gIyBDREZfT1RIRVJTID0gWwogICAgLy8gIyAgICAgNDA3NDk3OTYsICAgODE0OTk1OTMsICAxNjI5OTkxODUsICAyMjQxMjM4NzksCiAgICAvLyAjICAgICAyODUyNDg1NzQsICAzNjY3NDgxNjYsICA0NDgyNDc3NTksICA1Mjk3NDczNTEsCiAgICAvLyAjICAgICA2NTE5OTY3NDAsICA3OTQ2MjEwMjcsICAqOTM3MjQ1MzE0LCAgOTU3NjIwMjEyLAogICAgLy8gIyAgICAgOTcyOTAxMzg1LCAgOTgzMDg4ODM1KiwgIDk4NDcxODgyNiwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX290aGVycyhzZWxmKSAtPiBCeXRlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzgxLTM3ODQKICAgIC8vIGNkZl9vdGhlcnMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4MwogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzNC0zNjM2CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzgzCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4MS0zNzg0CiAgICAvLyBjZGZfb3RoZXJzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfb3RoZXJfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImNkZl9vdGhlcl9kZWZhdWx0KCl1aW50NjRbMTZdIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4NQogICAgLy8gcmV0dXJuIGNkZl9vdGhlcnMuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkOiBieXRlcywgY2RmOiBieXRlcywgY29sX2luZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2NvbF9zZWxlY3Rpb246CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzUtMzg3NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NvbF9zZWxlY3Rpb24oc2VsZiwgc2VlZDogQnl0ZXMsIGNkZjogQnl0ZXMsIGNvbF9pbmRleDogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODc3CiAgICAvLyBybmcgPSBzZWxmLl9nZXRfcm5nKHNlZWQsIGNvbF9pbmRleCkKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzgKICAgIC8vIGNvbF9zZWxlY3Rpb24gPSBzZWxmLl9nZXRfZHJhd19jb2xfbnVtYmEoY2RmLCBybmcpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNhbGxzdWIgX2dldF9kcmF3X2NvbF9udW1iYQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODc5CiAgICAvLyByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9ybmcoc2VlZDogYnl0ZXMsIGluZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X3JuZzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5OS0zODAwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm5nKHNlbGYsIHNlZWQ6IEJ5dGVzLCBpbmRleDogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA1LTM4MDYKICAgIC8vICMgQ29tYmluZSBzZWVkIHdpdGggc3Bpbl9jb3VudCBhcyBub25jZSBmb3IgdW5pcXVlbmVzcwogICAgLy8gY29sX2luZGV4X2J5dGVzID0gYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgwNwogICAgLy8gY29tYmluZWQgPSBzZWVkICsgY29sX2luZGV4X2J5dGVzCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA4CiAgICAvLyByZXR1cm4gb3Auc2hhMjU2KGNvbWJpbmVkKQogICAgc2hhMjU2CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2RyYXdfY29sX251bWJhKGNkZjogYnl0ZXMsIHJuZzogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X2RyYXdfY29sX251bWJhOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODY2LTM4NjgKICAgIC8vICMgVE9ETyBjb25zaWRlciByZW5hbWluZyB0byBfZ2V0X2RyYXdfY29sCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfZHJhd19jb2xfbnVtYmEoc2VsZiwgY2RmOiBCeXRlcywgcm5nOiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2OQogICAgLy8gY29sX3NlbGVjdGlvbnMgPSBVSW50NjRfMy5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmdfdHJpcGxlKHJuZykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9ybmdfdHJpcGxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzAKICAgIC8vIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9jZGZfZHJhdwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODcxCiAgICAvLyBkcmF3MiA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMV0ubmF0aXZlKQogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY2RmX2RyYXcKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3MgogICAgLy8gZHJhdzMgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzJdLm5hdGl2ZSkKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY2RmX2RyYXcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3MwogICAgLy8gcmV0dXJuIEJ5dGVzMy5mcm9tX2J5dGVzKGRyYXcxICsgZHJhdzIgKyBkcmF3MykuYnl0ZXMKICAgIGNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3JuZ190cmlwbGUoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X3JuZ190cmlwbGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTAtMzgxMQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZ190cmlwbGUoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTMKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxNAogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTMtMzgxNAogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgwKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTcKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAxCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxOAogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTctMzgxOAogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgxKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjEKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAyCiAgICBjYWxsc3ViIF9nZXRfcm5nCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgaW50IDAKICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgyMgogICAgLy8gJSBDREZfU0NBTEUKICAgIGludCAxMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjEtMzgyMgogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nKHNlZWQsIFVJbnQ2NCgyKSlbOjhdKS5uYXRpdmUKICAgIC8vICUgQ0RGX1NDQUxFCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjUKICAgIC8vIGFyYzQuVUludDY0KHJuZzEpLAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjYKICAgIC8vIGFyYzQuVUludDY0KHJuZzIpLAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjcKICAgIC8vIGFyYzQuVUludDY0KHJuZzMpLAogICAgc3dhcAogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODI0LTM4MjgKICAgIC8vIHJldHVybiBVSW50NjRfMygKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmcxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NChybmczKSwKICAgIC8vICkuYnl0ZXMKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jZGZfZHJhdyhjZGY6IGJ5dGVzLCBjb2xfc2VsZWN0aW9uOiB1aW50NjQpIC0+IGJ5dGVzOgpfY2RmX2RyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzAtMzgzMQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2RmX2RyYXcoc2VsZiwgY2RmOiBCeXRlcywgY29sX3NlbGVjdGlvbjogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODMzCiAgICAvLyBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGR1cAogICAgY292ZXIgMgogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgzNAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICBieXRlIDB4MzAKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODM1CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzFdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODM2CiAgICAvLyByZXR1cm4gQnl0ZXMoYiIxIikKICAgIGJ5dGUgMHgzMQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMl06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODM4CiAgICAvLyByZXR1cm4gQnl0ZXMoYiIyIikKICAgIGJ5dGUgMHgzMgogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzkKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbM106CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMjQgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiIzIikKICAgIGJ5dGUgMHgzMwogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NDEKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbNF06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0MgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICBieXRlIDB4MzQKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0MwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAxMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ0CiAgICAvLyByZXR1cm4gQnl0ZXMoYiI1IikKICAgIGJ5dGUgMHgzNQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ1CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzZdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDQ4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDE0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NDYKICAgIC8vIHJldHVybiBCeXRlcyhiIjYiKQogICAgYnl0ZSAweDM2CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMTQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NDcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbN106CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0OAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICBieXRlIDB4MzcKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0OQogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA2NCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAxOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODUwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiI4IikKICAgIGJ5dGUgMHgzOAogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODUxCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzldOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDcyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTIKICAgIC8vIHJldHVybiBCeXRlcyhiIjkiKQogICAgYnl0ZSAweDM5CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTMKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTBdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDgwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDIyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTQKICAgIC8vIHJldHVybiBCeXRlcyhiIkEiKQogICAgYnl0ZSAweDQxCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTUKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDg4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDI0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTYKICAgIC8vIHJldHVybiBCeXRlcyhiIkIiKQogICAgYnl0ZSAweDQyCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTcKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTJdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDk2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDI2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTgKICAgIC8vIHJldHVybiBCeXRlcyhiIkMiKQogICAgYnl0ZSAweDQzCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTkKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTNdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDEwNCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODYwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiJEIikKICAgIGJ5dGUgMHg0NAogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDI4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODYxCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzE0XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCAxMTIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMzAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2MgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiRSIpCiAgICBieXRlIDB4NDUKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAzMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2NAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiRiIpCiAgICBieXRlIDB4NDYKICAgIHN3YXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoYm94X2tleTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzE4LTM3MTkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzIwCiAgICAvLyBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjgwMAogICAgaW50IDAKICAgIGNhbGxzdWIgZW5zdXJlX2J1ZGdldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzIxCiAgICAvLyByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoYm94X2tleS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KGJveF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MjMtMzcyNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShzZWxmLCBib3hfa2V5OiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyNQogICAgLy8gYm94ID0gc2VsZi5fZ2V0X2JldChib3hfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MjYKICAgIC8vIGdyaWRfc2VlZCA9IG9wLnNoYTI1Nihib3hfa2V5ICsgYm94LnNwaW5faW5kZXguYnl0ZXMpCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MjcKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JldChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzE4LTQ3MTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzIwLTQ3MjkKICAgIC8vIHJldHVybiBzZWxmLmJldC5nZXQoCiAgICAvLyAgICAgYmV0X2tleSwKICAgIC8vICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2dldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzIyLTQ3MjgKICAgIC8vIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgYnl0ZSBiYXNlMzIgQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcyMC00NzI5CiAgICAvLyByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgIGJldF9rZXksCiAgICAvLyAgICAgZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oc2VlZDogYnl0ZXMsIHNwaW5faW5kZXg6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyOS0zNzMyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKAogICAgLy8gICAgIHNlbGYsIHNlZWQ6IEJ5dGVzMzIsIHNwaW5faW5kZXg6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IEJ5dGVzMTU6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczMwogICAgLy8gZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgaW50IDI4MDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczNQogICAgLy8gc2VsZi5fZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbihzZWVkLmJ5dGVzLCBzcGluX2luZGV4Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzQtMzczNgogICAgLy8gcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKHNlZWQuYnl0ZXMsIHNwaW5faW5kZXgubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oc2VlZDogYnl0ZXMsIHNwaW5faW5kZXg6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzM4LTM3NDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgc2VlZDogQnl0ZXMsIHNwaW5faW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQyCiAgICAvLyBpbmRleCA9IGFyYzQuVUludDY0KHNwaW5faW5kZXgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0MwogICAgLy8gZ3JpZF9zZWVkID0gb3Auc2hhMjU2KHNlZWQgKyBpbmRleC5ieXRlcykKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0NAogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9jZGZfZ3JpZChncmlkX3NlZWQpCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9jZGZfcmVlbDEoKSAtPiBieXRlczoKZ2V0X2NkZl9yZWVsMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc2OS0zNzcwCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX3JlZWwxKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzcxCiAgICAvLyByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9yZWVsMSgpKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9yZWVsMQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2NkZl9vdGhlcnMoKSAtPiBieXRlczoKZ2V0X2NkZl9vdGhlcnM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3ODctMzc4OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3ODkKICAgIC8vIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX290aGVycygpKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9vdGhlcnMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnJlZWxfaGFzX3N5bWJvbChncmlkOiBieXRlcywgcmVlbDogYnl0ZXMsIHN5bTogYnl0ZXMpIC0+IGJ5dGVzOgpyZWVsX2hhc19zeW1ib2w6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTctMzkwMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgcmVlbF9oYXNfc3ltYm9sKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHJlZWw6IGFyYzQuVUludDY0LCBzeW06IEJ5dGVzMQogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwMQogICAgLy8gcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZC5ieXRlcywgcmVlbC5uYXRpdmUsIHN5bS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMwogICAgc3dhcAogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9yZWVsX2hhc19zeW1ib2wKICAgIGJ5dGUgMHgwMAogICAgaW50IDAKICAgIHVuY292ZXIgMgogICAgc2V0Yml0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fcmVlbF9oYXNfc3ltYm9sKGdyaWQ6IGJ5dGVzLCByZWVsOiB1aW50NjQsIHN5bTogYnl0ZXMpIC0+IHVpbnQ2NDoKX3JlZWxfaGFzX3N5bWJvbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwMy0zOTA0CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWVsX2hhc19zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHJlZWw6IFVJbnQ2NCwgc3ltOiBCeXRlcykgLT4gYm9vbDoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA1CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBpbnQgMAoKX3JlZWxfaGFzX3N5bWJvbF9mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDUKICAgIC8vIGZvciByIGluIHVyYW5nZSgzKToKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgMwogICAgPAogICAgYnogX3JlZWxfaGFzX3N5bWJvbF9hZnRlcl9mb3JANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA2CiAgICAvLyBpZiBncmlkW3JlZWwgKiAzICsgcl0gPT0gc3ltOgogICAgZnJhbWVfZGlnIC0yCiAgICBpbnQgMwogICAgKgogICAgZnJhbWVfZGlnIDAKICAgICsKICAgIGR1cAogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2RpZyAtMwogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgZnJhbWVfZGlnIC0xCiAgICA9PQogICAgYnogX3JlZWxfaGFzX3N5bWJvbF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwNwogICAgLy8gcmV0dXJuIFRydWUKICAgIGludCAxCiAgICBzd2FwCiAgICByZXRzdWIKCl9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA1CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBmcmFtZV9kaWcgMAogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMAogICAgYiBfcmVlbF9oYXNfc3ltYm9sX2Zvcl9oZWFkZXJAMQoKX3JlZWxfaGFzX3N5bWJvbF9hZnRlcl9mb3JANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkwOAogICAgLy8gcmV0dXJuIEZhbHNlCiAgICBpbnQgMAogICAgc3dhcAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuY2FsY3VsYXRlX2dyaWRfcGF5b3V0KCkgLT4gYnl0ZXM6CmNhbGN1bGF0ZV9ncmlkX3BheW91dDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1Ni00MDU3CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9RmFsc2UpCiAgICAvLyBkZWYgY2FsY3VsYXRlX2dyaWRfcGF5b3V0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTgKICAgIC8vIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjAwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1OQogICAgLy8gZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKSkKICAgIGdsb2JhbCBSb3VuZAogICAgaW50IDIKICAgIC0KICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2MAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKSkKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9ncmlkX3BheW91dAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9ibG9ja19zZWVkKHJvdW5kOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2Jsb2NrX3NlZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDgtMzc0OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2Jsb2NrX3NlZWQoc2VsZiwgcm91bmQ6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc1MwogICAgLy8gcmV0dXJuIG9wLkJsb2NrLmJsa19zZWVkKHJvdW5kKVstMzI6XQogICAgZnJhbWVfZGlnIC0xCiAgICBibG9jayBCbGtTZWVkCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICBkaWcgMQogICAgPj0KICAgIGludCAzMgogICAgZGlnIDIKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBkaWcgMQogICAgc3dhcAogICAgLQogICAgc3dhcAogICAgc3Vic3RyaW5nMwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkOiBieXRlcykgLT4gdWludDY0OgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDc0LTQwNzgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGdyaWQ6IEJ5dGVzLAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4MwogICAgLy8gbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4NAogICAgLy8gbGluZV9zeW1ib2xzID0gc2VsZi5fZ2V0X2xpbmVfc3ltYm9scygpCiAgICBjYWxsc3ViIF9nZXRfbGluZV9zeW1ib2xzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODUKICAgIC8vIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgY2FsbHN1YiBfZ2V0X3BheV9kZW5zZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDg2CiAgICAvLyBmb3IgaWR4IGluIHVyYW5nZSgxNik6CiAgICBpbnQgMAoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODYKICAgIC8vIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMTYKICAgIDwKICAgIGJ6IF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfYWZ0ZXJfZm9yQDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4NwogICAgLy8gc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgMQogICAgdW5jb3ZlciAyCiAgICBkaWcgMgogICAgc3Vic3RyaW5nMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDg4CiAgICAvLyB3YXlzX3Jlc3VsdCA9IHNlbGYuX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKGdyaWQsIHN5bSwgcGF5X2RlbnNlKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBmcmFtZV9kaWcgMgogICAgY2FsbHN1YiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4OQogICAgLy8gbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICBmcmFtZV9idXJ5IDAKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X2Zvcl9oZWFkZXJAMQoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9hZnRlcl9mb3JANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5MQogICAgLy8gcmV0dXJuIGxpbmVfdG90YWwKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfbGluZV9zeW1ib2xzKCkgLT4gYnl0ZXM6Cl9nZXRfbGluZV9zeW1ib2xzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODkyLTM4OTMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9saW5lX3N5bWJvbHMoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg5NAogICAgLy8gbGluZV9zeW1ib2xzID0gQnl0ZXMoYiIwMTIzNDU2Nzg5QUJDREVGIikKICAgIGJ5dGUgMHgzMDMxMzIzMzM0MzUzNjM3MzgzOTQxNDI0MzQ0NDU0NgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk1CiAgICAvLyByZXR1cm4gbGluZV9zeW1ib2xzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3BheV9kZW5zZSgpIC0+IGJ5dGVzOgpfZ2V0X3BheV9kZW5zZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5MS0zNzkyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5X2RlbnNlKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTMtMzc5NgogICAgLy8gcGF5X2RlbnNlLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzQtMzYzNgogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5NQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTMtMzc5NgogICAgLy8gcGF5X2RlbnNlLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgInBheV9kZW5zZV9kZWZhdWx0KCl1aW50NjRbOTZdIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5NwogICAgLy8gcmV0dXJuIHBheV9kZW5zZS5ieXRlcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKGdyaWQ6IGJ5dGVzLCBzeW06IGJ5dGVzLCBwYXlfZGVuc2U6IGJ5dGVzKSAtPiBieXRlczoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg5LTM5OTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICBwcm90byAzIDEKICAgIGludCAwCiAgICBkdXAKICAgIGJ5dGUgIiIKICAgIGR1cG4gNQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTk2CiAgICAvLyBpZiBub3Qgc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQsIFVJbnQ2NCgwKSwgc3ltKToKICAgIGZyYW1lX2RpZyAtMwogICAgaW50IDAKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfcmVlbF9oYXNfc3ltYm9sCiAgICBibnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTk3LTQwMDMKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwNQogICAgLy8gcmVlbF9tYXRjaGVzID0gVUludDY0XzE2LmZyb21fYnl0ZXMoc2VsZi5fcmVlbF9tYXRjaGVzKCkpCiAgICBjYWxsc3ViIF9yZWVsX21hdGNoZXMKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDA2CiAgICAvLyBjb250cmliID0gVUludDY0XzE2LmZyb21fYnl0ZXMoc2VsZi5fcmVlbF9tYXRjaGVzKCkpCiAgICBjYWxsc3ViIF9yZWVsX21hdGNoZXMKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDA3CiAgICAvLyBuX2NvbnRyaWIgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwOAogICAgLy8gayA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgNAoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX3doaWxlX3RvcEAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDA5CiAgICAvLyB3aGlsZSBrIDwgVUludDY0KE5VTV9SRUVMUyk6CiAgICBmcmFtZV9kaWcgNAogICAgaW50IDUKICAgIDwKICAgIGJ6IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl93aGlsZUA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTAKICAgIC8vIG0gPSBzZWxmLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQsIGssIHN5bSkKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIDQKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZAogICAgZHVwCiAgICBmcmFtZV9idXJ5IDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxMQogICAgLy8gaWYgbSA9PSAwOgogICAgYnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX3doaWxlQDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxMwogICAgLy8gcmVlbF9tYXRjaGVzW2tdID0gYXJjNC5VSW50NjQobSkKICAgIGZyYW1lX2RpZyA1CiAgICBpdG9iCiAgICBmcmFtZV9kaWcgNAogICAgZHVwCiAgICBpbnQgMTYKICAgIDwKICAgIGFzc2VydCAvLyBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIDEKICAgIHN3YXAKICAgIHVuY292ZXIgMwogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDE0CiAgICAvLyBjb250cmliW25fY29udHJpYl0gPSBhcmM0LlVJbnQ2NChrKQogICAgZHVwCiAgICBpdG9iCiAgICBmcmFtZV9kaWcgNgogICAgZHVwCiAgICBpbnQgMTYKICAgIDwKICAgIGFzc2VydCAvLyBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIDAKICAgIHN3YXAKICAgIHVuY292ZXIgMwogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDE1CiAgICAvLyBuX2NvbnRyaWIgKz0gMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDE2CiAgICAvLyBrICs9IDEKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDQKICAgIGIgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX3doaWxlX3RvcEAzCgpfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfd2hpbGVANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxOQogICAgLy8gaWYgbWF0Y2hfbGVuIDwgMzoKICAgIGZyYW1lX2RpZyA0CiAgICBpbnQgMwogICAgPAogICAgYnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAOQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIyCiAgICAvLyBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIGZyYW1lX2RpZyA0CiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjEKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjAtNDAyNgogICAgLy8gcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIzCiAgICAvLyB3YXlzPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyMC00MDI2CiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gKQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjQKICAgIC8vIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIwLTQwMjYKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyApCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyNQogICAgLy8gbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDIwLTQwMjYKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyApCiAgICBjb25jYXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfaWZfZWxzZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI4CiAgICAvLyB3YXlzID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjkKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMwoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2Zvcl9oZWFkZXJAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjkKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgZnJhbWVfZGlnIDMKICAgIGZyYW1lX2RpZyA0CiAgICA8CiAgICBieiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfZm9yQDEzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzAKICAgIC8vIHdheXMgKj0gcmVlbF9tYXRjaGVzW2ldLm5hdGl2ZQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAxCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgNwogICAgKgogICAgZnJhbWVfYnVyeSA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjkKICAgIC8vIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfZm9yX2hlYWRlckAxMAoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2ZvckAxMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzMgogICAgLy8gYmFzZSA9IHBkW3NlbGYuX3N5bWJvbF90b19pbmRleChzeW0pICogNiArIG1hdGNoX2xlbl0ubmF0aXZlCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX3N5bWJvbF90b19pbmRleAogICAgaW50IDYKICAgICoKICAgIGZyYW1lX2RpZyA0CiAgICArCiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDMzCiAgICAvLyBpZiBiYXNlID09IDA6CiAgICBibnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAMTUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzNgogICAgLy8gbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICBmcmFtZV9kaWcgNAogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDM3CiAgICAvLyB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgZnJhbWVfZGlnIDcKICAgIGl0b2IKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzNQogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzNC00MDQwCiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIC8vICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gKQogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzOAogICAgLy8gYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzQtNDA0MAogICAgLy8gcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDM5CiAgICAvLyBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzQtNDA0MAogICAgLy8gcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDE1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQyLTQwNDQKICAgIC8vIGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2UgPSBzZWxmLl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKAogICAgLy8gICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gKQogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfZGlnIDYKICAgIGNhbGxzdWIgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA0NQogICAgLy8gbXVsdCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMF0ubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQ2CiAgICAvLyBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA0NwogICAgLy8gcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDcKICAgIGR1cAogICAgY292ZXIgMwogICAgKgogICAgZGlnIDEKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA0OQogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTAKICAgIC8vIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgZnJhbWVfZGlnIDQKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1MQogICAgLy8gd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIHVuY292ZXIgMwogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUyCiAgICAvLyBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KGFueV93aWxkKSwKICAgIHVuY292ZXIgNAogICAgaXRvYgogICAgY292ZXIgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUzCiAgICAvLyBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NChtdWx0KSwKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQ4LTQwNTQKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NChhbnlfd2lsZCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQobXVsdCksCiAgICAvLyApCiAgICB1bmNvdmVyIDMKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fcmVlbF9tYXRjaGVzKCkgLT4gYnl0ZXM6Cl9yZWVsX21hdGNoZXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NDUtMzk0NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9tYXRjaGVzKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NDctMzk1MAogICAgLy8gcmVlbF9tYXRjaGVzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5yZWVsX21hdGNoZXNfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NDkKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzQtMzYzNgogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0OQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnN0b3JhZ2VfYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NDctMzk1MAogICAgLy8gcmVlbF9tYXRjaGVzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5yZWVsX21hdGNoZXNfZGVmYXVsdCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgInJlZWxfbWF0Y2hlc19kZWZhdWx0KCl1aW50NjRbMTZdIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGR1cAogICAgZXh0cmFjdCA0IDAKICAgIHN3YXAKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1MQogICAgLy8gcmV0dXJuIHJlZWxfbWF0Y2hlcy5ieXRlcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQoZ3JpZDogYnl0ZXMsIHJlZWw6IHVpbnQ2NCwgc3ltOiBieXRlcykgLT4gdWludDY0OgpfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1My0zOTU2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMKICAgIC8vICkgLT4gVUludDY0OgogICAgcHJvdG8gMyAxCiAgICBpbnQgMAogICAgYnl0ZSAiIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTYwCiAgICAvLyBjbnQgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjEKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBkdXAKCl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2Zvcl9oZWFkZXJAMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2MQogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMwogICAgPAogICAgYnogX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfYWZ0ZXJfZm9yQDkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2MgogICAgLy8gdiA9IGdyaWRbcmVlbCAqIDMgKyByXQogICAgZnJhbWVfZGlnIC0yCiAgICBpbnQgMwogICAgKgogICAgZnJhbWVfZGlnIDMKICAgICsKICAgIGR1cAogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2RpZyAtMwogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2MwogICAgLy8gaWYgdiA9PSBzeW0gb3IgdiA9PSBXSUxEMSBvciB2ID09IFdJTEQyIG9yIHYgPT0gV0lMRDM6CiAgICBmcmFtZV9kaWcgLTEKICAgID09CiAgICBibnogX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfaWZfYm9keUA2CiAgICBmcmFtZV9kaWcgMAogICAgYnl0ZSAweDQyCiAgICA9PQogICAgYm56IF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2lmX2JvZHlANgogICAgZnJhbWVfZGlnIDAKICAgIGJ5dGUgMHg0MwogICAgPT0KICAgIGJueiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9pZl9ib2R5QDYKICAgIGZyYW1lX2RpZyAwCiAgICBieXRlIDB4NDQKICAgID09CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfYnVyeSAxCiAgICBieiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9hZnRlcl9pZl9lbHNlQDcKCl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2lmX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NAogICAgLy8gY250ICs9IFVJbnQ2NCgxKQogICAgZnJhbWVfZGlnIDIKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDEKCl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2FmdGVyX2lmX2Vsc2VANzoKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2MQogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAzCiAgICBiIF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2Zvcl9oZWFkZXJAMQoKX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfYWZ0ZXJfZm9yQDk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjUKICAgIC8vIHJldHVybiBjbnQKICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zeW1ib2xfdG9faW5kZXgoc3ltOiBieXRlcykgLT4gdWludDY0Ogpfc3ltYm9sX3RvX2luZGV4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTEwLTM5MTEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bWJvbF90b19pbmRleChzZWxmLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxMgogICAgLy8gaWYgc3ltID09IEJVRkZBTE86CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzMAogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxMwogICAgLy8gcmV0dXJuIFVJbnQ2NCgwKQogICAgaW50IDAKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxNAogICAgLy8gZWxpZiBzeW0gPT0gRUFHTEU6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzMQogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxNQogICAgLy8gcmV0dXJuIFVJbnQ2NCgxKQogICAgaW50IDEKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxNgogICAgLy8gZWxpZiBzeW0gPT0gQ09VR0FSOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzIKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTcKICAgIC8vIHJldHVybiBVSW50NjQoMikKICAgIGludCAyCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTgKICAgIC8vIGVsaWYgc3ltID09IEVMSzoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDMzCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTE5CiAgICAvLyByZXR1cm4gVUludDY0KDMpCiAgICBpbnQgMwogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTIwCiAgICAvLyBlbGlmIHN5bSA9PSBXT0xGOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzQKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTIxCiAgICAvLyByZXR1cm4gVUludDY0KDQpCiAgICBpbnQgNAogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyMgogICAgLy8gZWxpZiBzeW0gPT0gQToKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM1CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyMwogICAgLy8gcmV0dXJuIFVJbnQ2NCg1KQogICAgaW50IDUKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjQKICAgIC8vIGVsaWYgc3ltID09IEs6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzNgogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjUKICAgIC8vIHJldHVybiBVSW50NjQoNikKICAgIGludCA2CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTI2CiAgICAvLyBlbGlmIHN5bSA9PSBROgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzcKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTI3CiAgICAvLyByZXR1cm4gVUludDY0KDcpCiAgICBpbnQgNwogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyOAogICAgLy8gZWxpZiBzeW0gPT0gSjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM4CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyOQogICAgLy8gcmV0dXJuIFVJbnQ2NCg4KQogICAgaW50IDgKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzAKICAgIC8vIGVsaWYgc3ltID09IFRFTjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM5CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzMQogICAgLy8gcmV0dXJuIFVJbnQ2NCg5KQogICAgaW50IDkKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzIKICAgIC8vIGVsaWYgc3ltID09IE5JTkU6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHg0MQogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDIyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzMKICAgIC8vIHJldHVybiBVSW50NjQoMTApCiAgICBpbnQgMTAKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzQKICAgIC8vIGVsaWYgc3ltID09IFdJTEQxOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4NDIKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTM1CiAgICAvLyByZXR1cm4gVUludDY0KDExKQogICAgaW50IDExCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTM2CiAgICAvLyBlbGlmIHN5bSA9PSBXSUxEMjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDQzCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNwogICAgLy8gcmV0dXJuIFVJbnQ2NCgxMikKICAgIGludCAxMgogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzOAogICAgLy8gZWxpZiBzeW0gPT0gV0lMRDM6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHg0NAogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzkKICAgIC8vIHJldHVybiBVSW50NjQoMTMpCiAgICBpbnQgMTMKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NDAKICAgIC8vIGVsaWYgc3ltID09IEhPVjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDQ1CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMzAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0MQogICAgLy8gcmV0dXJuIFVJbnQ2NCgxNCkKICAgIGludCAxNAogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAzMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0MwogICAgLy8gcmV0dXJuIFVJbnQ2NCgxNSkKICAgIGludCAxNQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoZ3JpZDogYnl0ZXMsIGNvbnRyaWJfcmVlbHM6IGJ5dGVzLCBuX3JlZWxzOiB1aW50NjQpIC0+IGJ5dGVzOgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2Ny0zOTcwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBjb250cmliX3JlZWxzOiBCeXRlcywgbl9yZWVsczogVUludDY0CiAgICAvLyApIC0+IFVJbnQ2NF8yOgogICAgcHJvdG8gMyAxCiAgICBpbnQgMAogICAgYnl0ZSAiIgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzIKICAgIC8vIG11bHQgPSBVSW50NjQoMSkKICAgIGludCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzMKICAgIC8vIGFueV93aWxkID0gVUludDY0KDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc0CiAgICAvLyBmb3IgaSBpbiB1cmFuZ2Uobl9yZWVscyk6CiAgICBkdXAKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Zvcl9oZWFkZXJAMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3NAogICAgLy8gZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgZnJhbWVfZGlnIDUKICAgIGZyYW1lX2RpZyAtMQogICAgPAogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfZm9yQDE4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzUKICAgIC8vIHJpID0gY29udHJpYltpXS5uYXRpdmUKICAgIGZyYW1lX2RpZyA1CiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9idXJ5IDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3NgogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMQoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZm9yX2hlYWRlckAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc2CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBmcmFtZV9kaWcgMQogICAgaW50IDMKICAgIDwKICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2ZvckAxNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc3CiAgICAvLyB2ID0gZ3JpZFtyaSAqIDMgKyByXQogICAgZnJhbWVfZGlnIDIKICAgIGludCAzCiAgICAqCiAgICBmcmFtZV9kaWcgMQogICAgKwogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfZGlnIC0zCiAgICBjb3ZlciAyCiAgICBzdWJzdHJpbmczCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc4CiAgICAvLyBpZiB2ID09IFdJTEQzOgogICAgYnl0ZSAweDQ0CiAgICA9PQogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZWxzZV9ib2R5QDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4MAogICAgLy8gcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KDMpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMzAwMDAwMDAwMDAwMDAwMDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4MQogICAgLy8gZWxpZiB2ID09IFdJTEQyOgogICAgZnJhbWVfZGlnIDAKICAgIGJ5dGUgMHg0MwogICAgPT0KICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Vsc2VfYm9keUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTgyCiAgICAvLyBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIGZyYW1lX2J1cnkgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTgzCiAgICAvLyBpZiBtdWx0IDwgVUludDY0KDIpOgogICAgZnJhbWVfZGlnIDMKICAgIGludCAyCiAgICA8CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9pZl9lbHNlQDEzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5ODQKICAgIC8vIG11bHQgPSBVSW50NjQoMikKICAgIGludCAyCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfaWZfZWxzZUAxMwoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZWxzZV9ib2R5QDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg1CiAgICAvLyBlbGlmIHYgPT0gV0lMRDE6CiAgICBmcmFtZV9kaWcgMAogICAgYnl0ZSAweDQyCiAgICA9PQogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfaWZfZWxzZUAxMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg2CiAgICAvLyBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIGZyYW1lX2J1cnkgNAoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfaWZfZWxzZUAxMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3NgogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgZnJhbWVfZGlnIDEKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDEKICAgIGIgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZm9yX2hlYWRlckAzCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9mb3JAMTY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzQKICAgIC8vIGZvciBpIGluIHVyYW5nZShuX3JlZWxzKToKICAgIGZyYW1lX2RpZyA1CiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSA1CiAgICBiIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Zvcl9oZWFkZXJAMQoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfZm9yQDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg3CiAgICAvLyByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQobXVsdCksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIGZyYW1lX2RpZyAzCiAgICBpdG9iCiAgICBmcmFtZV9kaWcgNAogICAgaXRvYgogICAgY29uY2F0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KCkgLT4gYnl0ZXM6CmNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDkzLTQwOTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KHNlbGYpIC0+IFNwaW5SZXN1bHQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA5NQogICAgLy8gZW5zdXJlX2J1ZGdldCgyMDAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIGludCAyMDAwMAogICAgaW50IDAKICAgIGNhbGxzdWIgZW5zdXJlX2J1ZGdldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDk2CiAgICAvLyBncmlkID0gc2VsZi5fZ2V0X2NkZl9ncmlkKHNlbGYuX2dldF9ibG9ja19zZWVkKEdsb2JhbC5yb3VuZCAtIDIpKQogICAgZ2xvYmFsIFJvdW5kCiAgICBpbnQgMgogICAgLQogICAgY2FsbHN1YiBfZ2V0X2Jsb2NrX3NlZWQKICAgIGNhbGxzdWIgX2dldF9jZGZfZ3JpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDk4CiAgICAvLyBzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChncmlkLCBGYWxzZSwgVUludDY0KDApKSwKICAgIGludCAwCiAgICBkdXAKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwOTctNDA5OQogICAgLy8gcmV0dXJuIFNwaW5SZXN1bHQuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChncmlkLCBGYWxzZSwgVUludDY0KDApKSwKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChncmlkOiBieXRlcywgaXNfYm9udXNfc3BpbjogdWludDY0LCBqYWNrcG90X3ZhbHVlOiB1aW50NjQpIC0+IGJ5dGVzOgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Q6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1NDItNTU1MAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gIyAgIGNhbGN1bGF0ZSBncmlkIHBheW91dCBob29rCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGdyaWQ6IEJ5dGVzLAogICAgLy8gICAgIGlzX2JvbnVzX3NwaW46IGJvb2wsCiAgICAvLyAgICAgamFja3BvdF92YWx1ZTogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDMgMQogICAgYnl0ZSAiIgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1NTUKICAgIC8vIGxpbmVfdG90YWwgPSBzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoZ3JpZCkKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU1Ny01NTU4CiAgICAvLyAjIEFwcGx5IGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgc3BpbgogICAgLy8gaWYgaXNfYm9udXNfc3BpbjoKICAgIGZyYW1lX2RpZyAtMgogICAgYnogX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTU5CiAgICAvLyBsaW5lX3RvdGFsID0gKGxpbmVfdG90YWwgKiBCT05VU19MSU5FX01VTFQpIC8vIEJPTlVTX0xJTkVfTVVMVF9ESVZJU09SCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDE1MDAwCiAgICAqCiAgICBpbnQgMTAwMDAKICAgIC8KICAgIGZyYW1lX2J1cnkgMwoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VAMjoKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTYxLTU1NjIKICAgIC8vICMgQ2hlY2sgamFja3BvdCB0cmlnZ2VyIChIb1Ygc2NhdHRlcikKICAgIC8vIGphY2twb3RfaGl0ID0gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1NjMKICAgIC8vIGhvdl9jb3VudCA9IHNlbGYuX2NvdW50X3N5bWJvbChncmlkLCBCeXRlcyhIT1YpKQogICAgZnJhbWVfZGlnIC0zCiAgICBieXRlIDB4NDUKICAgIGNhbGxzdWIgX2NvdW50X3N5bWJvbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTY0CiAgICAvLyBpZiBob3ZfY291bnQgPj0gVUludDY0KEpBQ0tQT1RfVFJJR0dFUl9DT1VOVCk6CiAgICBpbnQgMwogICAgPj0KICAgIHN3YXAKICAgIGZyYW1lX2J1cnkgMwogICAgYnogX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTY1CiAgICAvLyBsaW5lX3RvdGFsICs9IGphY2twb3RfdmFsdWUKICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU2NgogICAgLy8gamFja3BvdF9oaXQgPSBVSW50NjQoMSkKICAgIGludCAxCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU2NwogICAgLy8gc2VsZi5qYWNrcG90ID0gVUludDY0KEpBQ0tQT1RfU1RBUlQpICAjIHJlc2V0IGphY2twb3QKICAgIGJ5dGUgImphY2twb3QiCiAgICBpbnQgNTAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICBmcmFtZV9idXJ5IDMKCl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDQ6CiAgICBmcmFtZV9kaWcgMwogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1NjktNTU3MAogICAgLy8gIyBDaGVjayBib251cyB0cmlnZ2VyIChCb251cyBzY2F0dGVyKQogICAgLy8gYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTcxCiAgICAvLyBib251c19jb3VudCA9IHNlbGYuX2NvdW50X3N5bWJvbChncmlkLCBCeXRlcyhCT05VUykpCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ5dGUgMHg0NgogICAgY2FsbHN1YiBfY291bnRfc3ltYm9sCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1NzIKICAgIC8vIGlmIGJvbnVzX2NvdW50ID49IFVJbnQ2NChCT05VU19UUklHR0VSX0NPVU5UKToKICAgIGludCAyCiAgICA+PQogICAgYnogX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTczCiAgICAvLyBib251c19zcGluc19hd2FyZGVkID0gVUludDY0KEJPTlVTX1NQSU5TX0FXQVJERUQpCiAgICBpbnQgOAogICAgZnJhbWVfYnVyeSAwCgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3RfYWZ0ZXJfaWZfZWxzZUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTc2CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQobGluZV90b3RhbCksCiAgICBmcmFtZV9kaWcgMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTc3CiAgICAvLyBib251c19zcGluc19hd2FyZGVkPWFyYzQuVUludDY0KGJvbnVzX3NwaW5zX2F3YXJkZWQpLAogICAgZnJhbWVfZGlnIDAKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU3OAogICAgLy8gamFja3BvdF9oaXQ9YXJjNC5VSW50NjQoamFja3BvdF9oaXQpLAogICAgZnJhbWVfZGlnIDEKICAgIGl0b2IKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU3NS01NTc5CiAgICAvLyByZXR1cm4gU3BpblJlc3VsdCgKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQobGluZV90b3RhbCksCiAgICAvLyAgICAgYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIC8vICAgICBqYWNrcG90X2hpdD1hcmM0LlVJbnQ2NChqYWNrcG90X2hpdCksCiAgICAvLyApLmJ5dGVzCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jb3VudF9zeW1ib2woZ3JpZDogYnl0ZXMsIHN5bTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NvdW50X3N5bWJvbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2Mi00MDYzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDIgMQogICAgYnl0ZSAiIgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNjcKICAgIC8vIGNudCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2OAogICAgLy8gZm9yIGMgaW4gdXJhbmdlKE5VTV9SRUVMUyk6CiAgICBkdXAKCl9jb3VudF9zeW1ib2xfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDY4CiAgICAvLyBmb3IgYyBpbiB1cmFuZ2UoTlVNX1JFRUxTKToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgNQogICAgPAogICAgYnogX2NvdW50X3N5bWJvbF9hZnRlcl9mb3JAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2OQogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDEKCl9jb3VudF9zeW1ib2xfZm9yX2hlYWRlckAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDY5CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgZnJhbWVfZGlnIDEKICAgIGludCAzCiAgICA8CiAgICBieiBfY291bnRfc3ltYm9sX2FmdGVyX2ZvckA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNzAKICAgIC8vIGlmIGdyaWRbYyAqIDMgKyByXSA9PSBzeW06CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDMKICAgICoKICAgIGZyYW1lX2RpZyAxCiAgICArCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTIKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9idXJ5IDAKICAgIGJ6IF9jb3VudF9zeW1ib2xfYWZ0ZXJfaWZfZWxzZUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNzEKICAgIC8vIGNudCArPSBVSW50NjQoMSkKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAwCgpfY291bnRfc3ltYm9sX2FmdGVyX2lmX2Vsc2VANjoKICAgIGZyYW1lX2RpZyAwCiAgICBmcmFtZV9idXJ5IDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2OQogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGZyYW1lX2RpZyAxCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAxCiAgICBiIF9jb3VudF9zeW1ib2xfZm9yX2hlYWRlckAzCgpfY291bnRfc3ltYm9sX2FmdGVyX2ZvckA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDY4CiAgICAvLyBmb3IgYyBpbiB1cmFuZ2UoTlVNX1JFRUxTKToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAzCiAgICBiIF9jb3VudF9zeW1ib2xfZm9yX2hlYWRlckAxCgpfY291bnRfc3ltYm9sX2FmdGVyX2ZvckAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA3MgogICAgLy8gcmV0dXJuIGNudAogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXIodG9rZW5fYXBwX2lkOiBieXRlcykgLT4gdm9pZDoKaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMDUtNDEwNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXIoc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTEwCiAgICAvLyBzZWxmLl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHRva2VuX2FwcF9pZC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2UKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHRva2VuX2FwcF9pZDogdWludDY0KSAtPiB2b2lkOgpfaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDExNi00MTE3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjEKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTIyCiAgICAvLyB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTI0CiAgICAvLyBub3QgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgZHVwCiAgICBpbnQgNzY4CiAgICBnZXRiaXQKICAgIGJ5dGUgMHgwMAogICAgaW50IDAKICAgIHVuY292ZXIgMgogICAgc2V0Yml0CiAgICBpbnQgMAogICAgZ2V0Yml0CiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMjMtNDEyNQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBub3QgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gKSwgImJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICBhc3NlcnQgLy8gYmFuayBiYWxhbmNlcyBtdXN0IG5vdCBiZSBpbml0aWFsaXplZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTI2CiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2Z1c2UgPSBhcmM0LkJvb2woVHJ1ZSkKICAgIGludCA3NjgKICAgIGludCAxCiAgICBzZXRiaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEyNwogICAgLy8gc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X3Rva2VuX2JhbGFuY2VzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjA3LTQyMDgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlcyhzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gVG9rZW5CYWxhbmNlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjA5LTQyMTcKICAgIC8vIHJldHVybiBzZWxmLnRva2VuX2JhbGFuY2VzLmdldCgKICAgIC8vICAgICB0b2tlbl9hcHBfaWQsCiAgICAvLyAgICAgZGVmYXVsdD1Ub2tlbkJhbGFuY2VzKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGJveF9nZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIxMS00MjE2CiAgICAvLyBkZWZhdWx0PVRva2VuQmFsYW5jZXMoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIwOS00MjE3CiAgICAvLyByZXR1cm4gc2VsZi50b2tlbl9iYWxhbmNlcy5nZXQoCiAgICAvLyAgICAgdG9rZW5fYXBwX2lkLAogICAgLy8gICAgIGRlZmF1bHQ9VG9rZW5CYWxhbmNlcygKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5vd25lcl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZDogYnl0ZXMsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cm93bmVyX2RlcG9zaXRfdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMzEtNDEzNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdF90b2tlbigKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0LCBhbW91bnQ6IGFyYzQuVUludDI1NgogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMzkKICAgIC8vIHNlbGYuX293bmVyX2RlcG9zaXRfdG9rZW4odG9rZW5fYXBwX2lkLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9vd25lcl9kZXBvc2l0X3Rva2VuCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fb3duZXJfZGVwb3NpdF90b2tlbih0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX293bmVyX2RlcG9zaXRfdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNDEtNDE0MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb3duZXJfZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNDcKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTQ4LTQxNTQKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTUxCiAgICAvLyBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTUwCiAgICAvLyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTIKICAgIC8vIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgZnJhbWVfZGlnIC0xCiAgICBifAogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE0OC00MTU0CiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiYXJjMjAwX3RyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1Nilib29sIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIHN3YXAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE1NQogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE1NgogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKHRva2VuX2FwcF9pZDogdWludDY0LCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMDUtNDMwOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMDkKICAgIC8vIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3Rva2VuX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTEKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTAtNDMxMgogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIHJlcGxhY2UyIDMyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTMKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE2CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzE3CiAgICAvLyBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTgKICAgIC8vIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMxNS00MzE5CiAgICAvLyBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMTQtNDMyMAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlRva2VuQmFsYW5jZXNVcGRhdGVkKHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZDogdWludDY0LCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjIzLTQyMjYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyNwogICAgLy8gdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyOQogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAtMQogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyOC00MjMwCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzEKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjM0CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjM1CiAgICAvLyBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzYKICAgIC8vIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIzMy00MjM3CiAgICAvLyBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMzItNDIzOAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlRva2VuQmFsYW5jZXNVcGRhdGVkKHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZDogYnl0ZXMsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6CmRlcG9zaXRfdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNTgtNDE1OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0LCBhbW91bnQ6IGFyYzQuVUludDI1NikgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTYzCiAgICAvLyBzZWxmLl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZC5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZGVwb3NpdF90b2tlbgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlcG9zaXRfdG9rZW4odG9rZW5fYXBwX2lkOiB1aW50NjQsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cl9kZXBvc2l0X3Rva2VuOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTY1LTQxNjYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTcwLTQxNzYKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTczCiAgICAvLyBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTcyCiAgICAvLyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNzQKICAgIC8vIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgZnJhbWVfZGlnIC0xCiAgICBifAogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE3MC00MTc2CiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiYXJjMjAwX3RyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1Nilib29sIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIHN3YXAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE3NwogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE3OAogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUub3duZXJfZGVwb3NpdChhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpvd25lcl9kZXBvc2l0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDEwLTQ0MTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIG93bmVyX2RlcG9zaXQoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE2CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxNwogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE4CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NzgtNDU3OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4MAogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTgyCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1ODEtNDU4MwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTg0CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4NwogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1ODgKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4OQogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4Ni00NTkwCiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTg1LTQ1OTEKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fYmFua19iYWxhbmNlcygpIC0+IGJ5dGVzOgpfYmFua19iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ4Mi00NDgzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDg1CiAgICAvLyBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfaW52YWxpZF9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDg0CiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ4NC00NDg2CiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyApCiAgICBib3hfZ2V0CiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbnZhbGlkX2JhbGFuY2VzKCkgLT4gYnl0ZXM6Cl9pbnZhbGlkX2JhbGFuY2VzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDY1LTQ0NjYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjctNDQ3MgogICAgLy8gcmV0dXJuIEJhbmtCYWxhbmNlcygKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDk2LTQ0OTcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDk4CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MDAKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0OTktNDUwMQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MDIKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA1CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUwNgogICAgLy8gYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA3CiAgICAvLyBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA0LTQ1MDgKICAgIC8vIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MDMtNDUwOQogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCYWxhbmNlc1VwZGF0ZWQodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmRlcG9zaXQoKSAtPiB2b2lkOgpkZXBvc2l0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDIwLTQ0MjEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGRlcG9zaXQoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDI1CiAgICAvLyBzZWxmLl9kZXBvc2l0KCkKICAgIGNhbGxzdWIgX2RlcG9zaXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZXBvc2l0KCkgLT4gdm9pZDoKX2RlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MjctNDQyOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzIKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzMKICAgIC8vIGFzc2VydCBwYXltZW50ID4gMCwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIGR1cAogICAgYXNzZXJ0IC8vIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDM0CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChwYXltZW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDM1CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUocGF5bWVudCkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS51dGlscy5hbGdvcmFuZC5yZXF1aXJlX3BheW1lbnQod2hvOiBieXRlcykgLT4gdWludDY0OgpyZXF1aXJlX3BheW1lbnQ6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjE1LTIzCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIGZ1bmN0aW9uOiByZXF1aXJlX3BheW1lbnQgKGludGVybmFsKQogICAgLy8gIyBhcmd1bWVudHM6IE5vbmUKICAgIC8vICMgcHVycG9zZTogY2hlY2sgcGF5bWVudAogICAgLy8gIyBwcmUtY29uZGl0aW9uczogTm9uZQogICAgLy8gIyBwb3N0LWNvbmRpdGlvbnM6IE5vbmUKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgcmVxdWlyZV9wYXltZW50KHdobzogQWNjb3VudCkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI0CiAgICAvLyByZWZfZ3JvdXBfaW5kZXggPSBUeG4uZ3JvdXBfaW5kZXgKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI1CiAgICAvLyBhc3NlcnQgcmVmX2dyb3VwX2luZGV4ID4gMCwgImdyb3VwIGluZGV4IGdyZWF0ZXIgdGhhbiB6ZXJvIgogICAgZHVwCiAgICBhc3NlcnQgLy8gZ3JvdXAgaW5kZXggZ3JlYXRlciB0aGFuIHplcm8KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjYKICAgIC8vIHBheW1lbnRfZ3JvdXBfaW5kZXggPSByZWZfZ3JvdXBfaW5kZXggLSAxCiAgICBpbnQgMQogICAgLQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyOAogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50IHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgZHVwCiAgICBndHhucyBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjctMjkKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgLy8gKSwgInBheW1lbnQgc2VuZGVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgc2VuZGVyIGFjY3VyYXRlCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMxCiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgZHVwCiAgICBndHhucyBSZWNlaXZlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMgogICAgLy8gPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzEtMzIKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnJlY2VpdmVyCiAgICAvLyA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICA9PQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMC0zMwogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgLy8gICAgID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIC8vICksICJwYXltZW50IHJlY2VpdmVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgcmVjZWl2ZXIgYWNjdXJhdGUKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzQKICAgIC8vIHJldHVybiBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5hbW91bnQKICAgIGd0eG5zIEFtb3VudAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUud2l0aGRyYXcoYW1vdW50OiBieXRlcykgLT4gdm9pZDoKd2l0aGRyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzctNDQzOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDQ2CiAgICAvLyBzZWxmLl93aXRoZHJhdyhhbW91bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF93aXRoZHJhdwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3dpdGhkcmF3KGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfd2l0aGRyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDgtNDQ0OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1NwogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTgKICAgIC8vIGFzc2VydCBhbW91bnQgPiBVSW50NjQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIGZyYW1lX2RpZyAtMQogICAgYXNzZXJ0IC8vIGFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTkKICAgIC8vIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIGNhbGxzdWIgX2dldF9iYWxhbmNlX2F2YWlsYWJsZQogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgYXNzZXJ0IC8vIGluc3VmZmljaWVudCBiYWxhbmNlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjAKICAgIC8vIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfdG90YWwKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBpbnN1ZmZpY2llbnQgYmFsYW5jZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDYxCiAgICAvLyBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIHR4biBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMQogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ2MgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NjMKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0OTItNDQ5MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDk0CiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JhbGFuY2VfdG90YWwoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3NC00NTc1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV90b3RhbChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3NgogICAgLy8gcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX3RvdGFsLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTExLTQ1MTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTEzCiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MTUKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTE0LTQ1MTYKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyApLCAiYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MTgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICBmcmFtZV9kaWcgLTEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxNy00NTE5CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyMAogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjMKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI0CiAgICAvLyBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjUKICAgIC8vIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjItNDUyNgogICAgLy8gQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyMS00NTI3CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJhbGFuY2VzVXBkYXRlZCh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1OTMtNDU5NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU5NQogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk3CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk2LTQ1OTgKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDAKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk5LTQ2MDEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYwMgogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDUKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjA2CiAgICAvLyBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDcKICAgIC8vIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDQtNDYwOAogICAgLy8gQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYwMy00NjA5CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJhbGFuY2VzVXBkYXRlZCh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2JhbGFuY2VzKCkgLT4gYnl0ZXM6CmdldF9iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ3NC00NDc2CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0ODAKICAgIC8vIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iYWxhbmNlX2F2YWlsYWJsZSgpIC0+IGJ5dGVzOgpnZXRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0ODgtNDQ4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0OTAKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSkKICAgIGNhbGxzdWIgX2dldF9iYWxhbmNlX2F2YWlsYWJsZQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2JhbGFuY2VfbG9ja2VkKCkgLT4gYnl0ZXM6CmdldF9iYWxhbmNlX2xvY2tlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyOS00NTMwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUzMQogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2xvY2tlZCgpKQogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfbG9ja2VkCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JhbGFuY2VfbG9ja2VkKCkgLT4gdWludDY0OgpfZ2V0X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTMzLTQ1MzQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUzNQogICAgLy8gcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2xvY2tlZC5uYXRpdmUKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iYWxhbmNlX3RvdGFsKCkgLT4gYnl0ZXM6CmdldF9iYWxhbmNlX3RvdGFsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTcwLTQ1NzEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NzIKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpKQogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfdG90YWwKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnN5bmNfYmFsYW5jZSgpIC0+IGJ5dGVzOgpzeW5jX2JhbGFuY2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MTEtNDYxMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3luY19iYWxhbmNlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MTYKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIGNhbGxzdWIgX3N5bmNfYmFsYW5jZQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3N5bmNfYmFsYW5jZSgpIC0+IHVpbnQ2NDoKX3N5bmNfYmFsYW5jZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYxOC00NjE5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zeW5jX2JhbGFuY2Uoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjAKICAgIC8vIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYyMQogICAgLy8gYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIGR1cAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjIKICAgIC8vIGFjY291bnQgPSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjIzCiAgICAvLyBhdmFpbGFibGVfYmFsYW5jZSA9IGFjY291bnQuYmFsYW5jZSAtIGFjY291bnQubWluX2JhbGFuY2UKICAgIGR1cAogICAgYWNjdF9wYXJhbXNfZ2V0IEFjY3RCYWxhbmNlCiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBhc3NlcnQgLy8gYWNjb3VudCBmdW5kZWQKICAgIGFjY3RfcGFyYW1zX2dldCBBY2N0TWluQmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgZnVuZGVkCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjQKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIGR1cAogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBkaWcgMQogICAgcmVwbGFjZTIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjI1CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIHN3YXAKICAgIHJlcGxhY2UyIDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYyNgogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjkKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjMwCiAgICAvLyBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MzEKICAgIC8vIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjgtNDYzMgogICAgLy8gQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYyNy00NjMzCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJhbGFuY2VzVXBkYXRlZCh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjM0CiAgICAvLyByZXR1cm4gYXZhaWxhYmxlX2JhbGFuY2UKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF91c2VyKGFkZHJlc3M6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3VzZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NDAtNDY0MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQyCiAgICAvLyByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3VzZXIoYWRkcmVzczogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X3VzZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NDQtNDY0NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogQWNjb3VudCkgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY0OC00NjU0CiAgICAvLyBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjUwCiAgICAvLyBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQ4LTQ2NTQKICAgIC8vIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTEKICAgIC8vIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQ4LTQ2NTQKICAgIC8vIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTIKICAgIC8vIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQ4LTQ2NTQKICAgIC8vIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTMKICAgIC8vIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQ4LTQ2NTQKICAgIC8vIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NDYtNDY1NQogICAgLy8gcmV0dXJuIHNlbGYudXNlci5nZXQoCiAgICAvLyAgICAgYWRkcmVzcywKICAgIC8vICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgICAgICBjcmVkaXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGxhc3Rfc3Bpbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKSwKICAgIC8vICkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2dldAogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5jcmVkaXQoYWRkcmVzczogYnl0ZXMsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6CmNyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY1Ny00NjU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjcmVkaXQoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NjIKICAgIC8vIHNlbGYuX2NyZWRpdChhZGRyZXNzLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9jcmVkaXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jcmVkaXQoYWRkcmVzczogYnl0ZXMsIGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjY0LTQ2NjUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjY2CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfY3JlZGl0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2NyZWRpdChhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjY4LTQ2NjkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY3MAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzEKICAgIC8vIHVzZXIuY3JlZGl0ID0gYXJjNC5VSW50NjQodXNlci5jcmVkaXQubmF0aXZlICsgYW1vdW50KQogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIGl0b2IKICAgIHJlcGxhY2UyIDMyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzIKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iZXQoYmV0X2tleTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzE0LTQ3MTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MTYKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNldF9tb2RlKG1vZGU6IGJ5dGVzKSAtPiB2b2lkOgpzZXRfbW9kZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDczNi00NzM3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzZXRfbW9kZShzZWxmLCBtb2RlOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzM4CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDczOQogICAgLy8gc2VsZi5fc2V0X21vZGUobW9kZS5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX3NldF9tb2RlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc2V0X21vZGUobW9kZTogdWludDY0KSAtPiB2b2lkOgpfc2V0X21vZGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NDEtNDc0MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc2V0X21vZGUoc2VsZiwgbW9kZTogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NDMKICAgIC8vIGFzc2VydCBtb2RlID4gVUludDY0KDApLCAibW9kZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZnJhbWVfZGlnIC0xCiAgICBhc3NlcnQgLy8gbW9kZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NDQKICAgIC8vIHNlbGYubW9kZSA9IG1vZGUKICAgIGJ5dGUgIm1vZGUiCiAgICBmcmFtZV9kaWcgLTEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfYmV0X2tleShhZGRyZXNzOiBieXRlcywgYmV0X2Ftb3VudDogYnl0ZXMsIGluZGV4OiBieXRlcywgbW9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfYmV0X2tleToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc0Ni00NzUzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICBwcm90byA0IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc1NwogICAgLy8gYmV0X2Ftb3VudC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc1OAogICAgLy8gaW5kZXgubmF0aXZlLAogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NTkKICAgIC8vIG1vZGUubmF0aXZlLAogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NTUtNDc2MAogICAgLy8gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgYWRkcmVzcy5uYXRpdmUsCiAgICAvLyAgICAgYmV0X2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgIG1vZGUubmF0aXZlLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBjb3ZlciAzCiAgICBjYWxsc3ViIF9nZXRfYmV0X2tleQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzU0LTQ3NjEKICAgIC8vIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIGFkZHJlc3MubmF0aXZlLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICBtb2RlLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JldF9rZXkoYWRkcmVzczogYnl0ZXMsIGJldF9hbW91bnQ6IHVpbnQ2NCwgaW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX2dldF9iZXRfa2V5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzYzLTQ3NzAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NzMKICAgIC8vICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzcyLTQ3NzMKICAgIC8vIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChiZXRfYW1vdW50KS5ieXRlcwogICAgZnJhbWVfZGlnIC00CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3NAogICAgLy8gKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzcyLTQ3NzQKICAgIC8vIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChiZXRfYW1vdW50KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzc1CiAgICAvLyArIGFyYzQuVUludDY0KG1vZGUpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3Mi00Nzc1CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KG1vZGUpLmJ5dGVzCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3MS00Nzc2CiAgICAvLyByZXR1cm4gKAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNwaW4oYmV0X2Ftb3VudDogYnl0ZXMsIGluZGV4OiBieXRlcywgbW9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpzcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODUxLTQ4NTcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNwaW4oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwgICMgYmV0IGFtb3VudCBpbiBjcmVkaXRzCiAgICAvLyAgICAgaW5kZXg6IGFyYzQuVUludDY0LCAgIyBlYWNoIHNwaW4gaGFzIGEgdW5pcXVlIGluZGV4CiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsICAjIDAgPSBib251cyBzcGluICwgMSA9IGNyZWRpdCBzcGluLCAyID0gbmV0d29yayBzcGluLCA0ID0gdG9rZW4gc3BpbgogICAgLy8gKSAtPiBCeXRlczU2OgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NjAKICAgIC8vIHNlbGYuX3NwaW4oVHhuLnNlbmRlciwgYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgbW9kZS5uYXRpdmUpCiAgICB0eG4gU2VuZGVyCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9zcGluCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NTgtNDg2MQogICAgLy8gIyBhc3NlcnQgbm90IHNlbGYuX2lzX3BhdXNlZCgpLCAiU3BpbnMgYXJlIHBhdXNlZCIKICAgIC8vIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fc3BpbihUeG4uc2VuZGVyLCBiZXRfYW1vdW50Lm5hdGl2ZSwgaW5kZXgubmF0aXZlLCBtb2RlLm5hdGl2ZSkKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluKHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX3NwaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NjMtNDg2NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3BpbigKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NzkKICAgIC8vIGNyZWRpdF9zcGluID0gbW9kZSA9PSBVSW50NjQoMSkKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDEKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODAKICAgIC8vIG5ldHdvcmtfc3BpbiA9IG1vZGUgPT0gVUludDY0KDIpCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAyCiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODgxCiAgICAvLyB0b2tlbl9zcGluID0gbW9kZSA9PSBVSW50NjQoNCkKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDQKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODIKICAgIC8vIGlmIGJvbnVzX3NwaW46CiAgICBmcmFtZV9kaWcgLTEKICAgIGJueiBfc3Bpbl9lbHNlX2JvZHlAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODgzCiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9ib251cyh1c2VyX2lkLCBVSW50NjQoMCksIHNwaW5faW5kZXgsIG1vZGUpCiAgICBmcmFtZV9kaWcgLTQKICAgIGludCAwCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc3Bpbl9ib251cwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9zcGluX2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODg0CiAgICAvLyBlbGlmIGNyZWRpdF9zcGluOgogICAgZnJhbWVfZGlnIDAKICAgIGJ6IF9zcGluX2Vsc2VfYm9keUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODUKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgxKSA9PSBVSW50NjQoMSksICJjcmVkaXQgbW9kZSBub3QgZW5hYmxlZCIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDgKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODUKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgxKSA9PSBVSW50NjQoMSksICJjcmVkaXQgbW9kZSBub3QgZW5hYmxlZCIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgMQogICAgJgogICAgaW50IDEKICAgID09CiAgICBhc3NlcnQgLy8gY3JlZGl0IG1vZGUgbm90IGVuYWJsZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg4NgogICAgLy8gcmV0dXJuIHNlbGYuX3NwaW5fY3JlZGl0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3NwaW5fY3JlZGl0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3NwaW5fZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODcKICAgIC8vIGVsaWYgbmV0d29ya19zcGluOgogICAgZnJhbWVfZGlnIDEKICAgIGJ6IF9zcGluX2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODgKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgyKSA9PSBVSW50NjQoCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA4CiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODg4CiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCAyCiAgICAmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4ODgtNDg5MAogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgKICAgIC8vICAgICAyCiAgICAvLyApLCAibmV0d29yayBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDIKICAgID09CiAgICBhc3NlcnQgLy8gbmV0d29yayBtb2RlIG5vdCBlbmFibGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4OTEKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX25ldHdvcmsodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc3Bpbl9uZXR3b3JrCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3NwaW5fZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4OTIKICAgIC8vIGVsaWYgdG9rZW5fc3BpbjoKICAgIGZyYW1lX2RpZyAyCiAgICBhc3NlcnQgLy8gaW52YWxpZCBtb2RlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4OTMKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCksICJ0b2tlbiBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwOAogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg5MwogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDQpID09IFVJbnQ2NCg0KSwgInRva2VuIG1vZGUgbm90IGVuYWJsZWQiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDQKICAgICYKICAgIGludCA0CiAgICA9PQogICAgYXNzZXJ0IC8vIHRva2VuIG1vZGUgbm90IGVuYWJsZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg5NAogICAgLy8gcmV0dXJuIHNlbGYuX3NwaW5fdG9rZW4odXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc3Bpbl90b2tlbgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3Bpbl9ib251cyh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluX2JvbnVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODk4LTQ5MDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fYm9udXMoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTAyLTQ5MDMKICAgIC8vICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTA0LTQ5MDUKICAgIC8vICMgKiBib251cyBzcGVjaWZpYyBhc3NlcnRpb25zICoKICAgIC8vIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID49IFVJbnQ2NCgxKSwgImJvbnVzIHNwaW4gaXMgbGVzcyB0aGFuIDEiCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMQogICAgPj0KICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIGxlc3MgdGhhbiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MDYtNDkwNwogICAgLy8gIyBwYXkgc3BpbiBjb3N0ICsgZXh0cmEgcGF5bWVudCBpZiBuZXR3b3JrCiAgICAvLyBzZWxmLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZCwgVUludDY0KDApKQogICAgZnJhbWVfZGlnIC00CiAgICBpbnQgMAogICAgY2FsbHN1YiBfZW5zdXJlX3NwaW5fY29zdF9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MDgtNDkxMQogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkxMAogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTEyLTQ5MTMKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkxMi00OTEzCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNwaW5fY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkxMi00OTEzCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkxNC00OTE1CiAgICAvLyAjIGNvbW1vbiB1c2VyIHVwZGF0ZXMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9zcGluX2NvdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MTYKICAgIC8vIHNlbGYuX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MTctNDkxOAogICAgLy8gIyAqIGJvbnVzIHNwZWNpZmljIHVzZXIgdXBkYXRlcyAqCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYm9udXNfc3Bpbih1c2VyX2lkLCBVSW50NjQoMSkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGludCAxCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYm9udXNfc3BpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTIxCiAgICAvLyB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkxOS00OTIyCiAgICAvLyAjIGVtaXQgYmV0IHBsYWNlZCBldmVudAogICAgLy8gc2VsZi5fZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciA0CiAgICBjYWxsc3ViIF9lbWl0X2JldF9wbGFjZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkyMy00OTI0CiAgICAvLyAjIHJldHVybiBiZXQga2V5CiAgICAvLyByZXR1cm4gYmV0X2tleV9pbmZvLmJldF9rZXkuYnl0ZXMKICAgIGV4dHJhY3QgMCA1NiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZDogYnl0ZXMsIGV4dHJhX3BheW1lbnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2Vuc3VyZV9zcGluX2Nvc3RfcGF5bWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc5NC00Nzk3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgZXh0cmFfcGF5bWVudDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc5OAogICAgLy8gcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIHJlcXVpcmVfcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzk5CiAgICAvLyBzcGluX2Nvc3QgPSBzZWxmLl9zcGluX2Nvc3QoKQogICAgY2FsbHN1YiBfc3Bpbl9jb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MDEKICAgIC8vIHBheW1lbnQgPj0gc3Bpbl9jb3N0ICsgZXh0cmFfcGF5bWVudAogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICBkaWcgMQogICAgPD0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwMC00ODAyCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHBheW1lbnQgPj0gc3Bpbl9jb3N0ICsgZXh0cmFfcGF5bWVudAogICAgLy8gKSwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gc3BpbiBjb3N0IgogICAgYXNzZXJ0IC8vIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gc3BpbiBjb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MDQKICAgIC8vIHBheW1lbnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgKyBleHRyYV9wYXltZW50CiAgICBjYWxsc3ViIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQKICAgIGZyYW1lX2RpZyAtMQogICAgKwogICAgPD0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwMy00ODA1CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHBheW1lbnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgKyBleHRyYV9wYXltZW50CiAgICAvLyApLCAicGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudCIKICAgIGFzc2VydCAvLyBwYXltZW50IG11c3QgYmUgbGVzcyB0aGFuIG1heCBleHRyYSBwYXltZW50CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3Bpbl9jb3N0KCkgLT4gdWludDY0Ogpfc3Bpbl9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzgwLTQ3ODEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc4MgogICAgLy8gcmV0dXJuIFVJbnQ2NCg1MDUwMCkKICAgIGludCA1MDUwMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9tYXhfZXh0cmFfcGF5bWVudCgpIC0+IHVpbnQ2NDoKX2dldF9tYXhfZXh0cmFfcGF5bWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc4NC00Nzg1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3ODYKICAgIC8vIHJldHVybiBVSW50NjQoMSAqIDEwKio2KQogICAgaW50IDEwMDAwMDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jcmVhdGVfYmV0KHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX2NyZWF0ZV9iZXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MjYtNDgyOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlYXRlX2JldCgKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzAKICAgIC8vIGNvbmZpcm1lZF9yb3VuZCA9IEdsb2JhbC5yb3VuZAogICAgZ2xvYmFsIFJvdW5kCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzEtNDgzNgogICAgLy8gYmV0X2tleSA9IHNlbGYuX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHVzZXJfaWQsCiAgICAvLyAgICAgYmV0X2Ftb3VudCwKICAgIC8vICAgICBzcGluX2luZGV4LAogICAgLy8gICAgIG1vZGUsCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXRfa2V5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTktNDgzNwogICAgLy8gICAgICMgc3BpbiBzdGF0ZQogICAgLy8gICAgIHNlbGYuYmV0ID0gQm94TWFwKEJ5dGVzLCBCZXQsIGtleV9wcmVmaXg9IiIpCiAgICAvLyAgICAgc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIC8vICAgICBzZWxmLmphY2twb3RfY3JlZGl0ID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuID0gQmlnVUludChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbiA9IEJpZ1VJbnQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICAvLyAgICAgIyAxID0gY3JlZGl0LCAyID0gbmV0d29yaywgNCA9IHRva2VuCiAgICAvLyAgICAgIyAwID0gZGlzYWJsZWQKICAgIC8vICAgICAjIDEgPSBjcmVkaXQgZW5hYmxlZAogICAgLy8gICAgICMgMiA9IG5ldHdvcmsgZW5hYmxlZAogICAgLy8gICAgICMgNCA9IHRva2VuIGVuYWJsZWQKICAgIC8vICAgICAjIDMgPSBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gICAgICMgNSA9IGNyZWRpdCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgNiA9IG5ldHdvcmsgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICAjIDcgPSBjcmVkaXQsIG5ldHdvcmssIGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgc2VsZi5jcmVkaXRfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgPSBVSW50NjQoMjAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50ID0gVUludDY0KDEwMCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCA9IEJpZ1VJbnQoNDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudCA9IEJpZ1VJbnQoMTAwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEFjY291bnQoCiAgICAvLyAgICAgICAgICJRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyA9IEFjY291bnQoCiAgICAvLyAgICAgICAgICJRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmZlZV90cmVhc3VyeV9icHMgPSBVSW50NjQoMzApICAjIDAuMyUKICAgIC8vICAgICBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzID0gVUludDY0KDIwKSAgIyAwLjIlCiAgICAvLyAgICAgIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICAgICAjIHN0b3JhZ2UKICAgIC8vICAgICBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIC8vIAogICAgLy8gIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHBvc3RfdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KDApCiAgICAvLyAgICAgc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBVSW50NjQoMSkKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikgICMgbWludGFibGUgYXJjMjAwIGFwcCBpZCAoIlZPSSIpCiAgICAvLyAgICAgIyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgzKSAgIyBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gICAgIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDUpICAjIGNyZWRpdCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoNDcwNjA4MDApICAjIHNsb3QgbWFjaGluZSBzdG9yYWdlIGFwcCBpZAogICAgLy8gCiAgICAvLyAjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5fYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIyBzZWxmLl9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKCkKICAgIC8vICAgICBwYXNzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGJvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCgxXzAwMF8wMDApCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBPd25hYmxlCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIG93bmVyIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkFkZHJlc3Moc2VsZi5fZ2V0X293bmVyKCkpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBUcmFuc2ZlciB0aGUgb3duZXJzaGlwIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXIubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vd25hYmxlX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIEJveChBY2NvdW50LCBrZXk9Im93bmVyIikudmFsdWUgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX29ubHlfb3duZXIoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBPbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5fZ2V0X293bmVyKCksICJvbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfb3duZXIoc2VsZikgLT4gQWNjb3VudDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5vd25lcgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF90cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYub3duZXIgPSBuZXdfb3duZXIKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIENERiBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gIyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICMgZGVmIGdldF9jZGZfZ3JpZChzZWxmKSAtPiBCeXRlczE1OgogICAgLy8gIyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gIyAgICAgc2VlZCA9IHNlbGYuX2dldF9ibG9ja19zZWVkKEdsb2JhbC5yb3VuZCAtIDIpCiAgICAvLyAjICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZChzZWVkKSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZChzZWxmLCBzZWVkOiBCeXRlczMyKSAtPiBCeXRlczE1OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZChzZWVkLmJ5dGVzKSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShzZWxmLCBib3hfa2V5OiBCeXRlczU2KSAtPiBCeXRlczE1OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjgwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoYm94X2tleS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfZ3JpZF9mcm9tX2JldF9rZXkoc2VsZiwgYm94X2tleTogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGJveCA9IHNlbGYuX2dldF9iZXQoYm94X2tleSkKICAgIC8vICAgICBncmlkX3NlZWQgPSBvcC5zaGEyNTYoYm94X2tleSArIGJveC5zcGluX2luZGV4LmJ5dGVzKQogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfY2RmX2dyaWQoZ3JpZF9zZWVkKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKAogICAgLy8gICAgIHNlbGYsIHNlZWQ6IEJ5dGVzMzIsIHNwaW5faW5kZXg6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oc2VlZC5ieXRlcywgc3Bpbl9pbmRleC5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWRfZnJvbV9zZWVkX2FuZF9zcGluKAogICAgLy8gICAgIHNlbGYsIHNlZWQ6IEJ5dGVzLCBzcGluX2luZGV4OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgaW5kZXggPSBhcmM0LlVJbnQ2NChzcGluX2luZGV4KQogICAgLy8gICAgIGdyaWRfc2VlZCA9IG9wLnNoYTI1NihzZWVkICsgaW5kZXguYnl0ZXMpCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9jZGZfZ3JpZChncmlkX3NlZWQpCiAgICAvLyAKICAgIC8vICMjIwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmxvY2tfc2VlZChzZWxmLCByb3VuZDogVUludDY0KSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJsb2NrIHNlZWQgZm9yIGEgc3BlY2lmaWMgcm91bmQKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gb3AuQmxvY2suYmxrX3NlZWQocm91bmQpWy0zMjpdCiAgICAvLyAKICAgIC8vICMgQ0RGX1JFRUwxID0gWwogICAgLy8gIyAgICAgNDI3MDc2NjYsICAgODU0MTUzMzIsICAxNzA4MzA2NjQsICAyMzQ4OTIxNjMsCiAgICAvLyAjICAgICAyOTg5NTM2NjIsICAzODQzNjg5OTQsICA0Njk3ODQzMjYsICA1NTUxOTk2NTgsCiAgICAvLyAjICAgICA2ODMzMjI2NTYsICA4MzI3OTk0ODgsICA5ODIyNzYzMTksICA5ODIyNzYzMTksCiAgICAvLyAjICAgICA5ODIyNzYzMTksICA5ODIyNzYzMTksICA5ODM5ODQ2MjUsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5jZGZfcmVlbDFfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfcmVlbDEoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX3JlZWwxKCkpCiAgICAvLyAKICAgIC8vICMgQ0RGX09USEVSUyA9IFsKICAgIC8vICMgICAgIDQwNzQ5Nzk2LCAgIDgxNDk5NTkzLCAgMTYyOTk5MTg1LCAgMjI0MTIzODc5LAogICAgLy8gIyAgICAgMjg1MjQ4NTc0LCAgMzY2NzQ4MTY2LCAgNDQ4MjQ3NzU5LCAgNTI5NzQ3MzUxLAogICAgLy8gIyAgICAgNjUxOTk2NzQwLCAgNzk0NjIxMDI3LCAgKjkzNzI0NTMxNCwgIDk1NzYyMDIxMiwKICAgIC8vICMgICAgIDk3MjkwMTM4NSwgIDk4MzA4ODgzNSosICA5ODQ3MTg4MjYsIDEwMDAwMDAwMDAKICAgIC8vICMgXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfb3RoZXJzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbjoKICAgIC8vICAgICByZXR1cm4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheV9kZW5zZShzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBwYXlfZGVuc2UsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5wYXlfZGVuc2VfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcGF5X2RlbnNlLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmcoc2VsZiwgc2VlZDogQnl0ZXMsIGluZGV4OiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdlbmVyYXRlIHJhbmRvbSBieXRlcyBmcm9tIHNlZWQgKyBnbG9iYWwgc3BpbiBjb3VudC4KICAgIC8vICAgICBUaGUgc3Bpbl9jb3VudCBlbnN1cmVzIGVhY2ggc3BpbiBnZXRzIGEgdW5pcXVlIHNlZWQgZXZlbiBpZiBvdGhlciBpbnB1dHMgYXJlIHRoZSBzYW1lLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgQ29tYmluZSBzZWVkIHdpdGggc3Bpbl9jb3VudCBhcyBub25jZSBmb3IgdW5pcXVlbmVzcwogICAgLy8gICAgIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgLy8gICAgIHJldHVybiBvcC5zaGEyNTYoY29tYmluZWQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmdfdHJpcGxlKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBybmcxID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDApKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmcyID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDEpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICBybmczID0gKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDIpKVs6OF0pLm5hdGl2ZQogICAgLy8gICAgICAgICAlIENERl9TQ0FMRQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmcyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMyksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jZGZfZHJhdyhzZWxmLCBjZGY6IEJ5dGVzLCBjb2xfc2VsZWN0aW9uOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9hcnJheSA9IEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKGNkZikKICAgIC8vICAgICBpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVswXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVszXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiMyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs0XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs1XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs2XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNiIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs3XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiNyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs4XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs5XToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiOSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkEiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJCIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEyXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQyIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxM106CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkQiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJFIikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJGIikKICAgIC8vIAogICAgLy8gIyBUT0RPIGNvbnNpZGVyIHJlbmFtaW5nIHRvIF9nZXRfZHJhd19jb2wKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9kcmF3X2NvbF9udW1iYShzZWxmLCBjZGY6IEJ5dGVzLCBybmc6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBjb2xfc2VsZWN0aW9ucyA9IFVJbnQ2NF8zLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZ190cmlwbGUocm5nKSkKICAgIC8vICAgICBkcmF3MSA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMF0ubmF0aXZlKQogICAgLy8gICAgIGRyYXcyID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1sxXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzMgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzJdLm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzLmZyb21fYnl0ZXMoZHJhdzEgKyBkcmF3MiArIGRyYXczKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY29sX3NlbGVjdGlvbihzZWxmLCBzZWVkOiBCeXRlcywgY2RmOiBCeXRlcywgY29sX2luZGV4OiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJuZyA9IHNlbGYuX2dldF9ybmcoc2VlZCwgY29sX2luZGV4KQogICAgLy8gICAgIGNvbF9zZWxlY3Rpb24gPSBzZWxmLl9nZXRfZHJhd19jb2xfbnVtYmEoY2RmLCBybmcpCiAgICAvLyAgICAgcmV0dXJuIGNvbF9zZWxlY3Rpb24KICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfcmVlbDEgPSBzZWxmLl9nZXRfY2RmX3JlZWwxKCkKICAgIC8vICAgICBjZGZfb3RoZXJzID0gc2VsZi5fZ2V0X2NkZl9vdGhlcnMoKQogICAgLy8gICAgIGNvbDEgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfcmVlbDEsIFVJbnQ2NCgwKSkKICAgIC8vICAgICBjb2wyID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDEpKQogICAgLy8gICAgIGNvbDMgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMikpCiAgICAvLyAgICAgY29sNCA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgzKSkKICAgIC8vICAgICBjb2w1ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDQpKQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoY29sMSArIGNvbDIgKyBjb2wzICsgY29sNCArIGNvbDUpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9saW5lX3N5bWJvbHMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgbGluZV9zeW1ib2xzID0gQnl0ZXMoYiIwMTIzNDU2Nzg5QUJDREVGIikKICAgIC8vICAgICByZXR1cm4gbGluZV9zeW1ib2xzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIHJlZWxfaGFzX3N5bWJvbCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCByZWVsOiBhcmM0LlVJbnQ2NCwgc3ltOiBCeXRlczEKICAgIC8vICkgLT4gYXJjNC5Cb29sOgogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2woc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQuYnl0ZXMsIHJlZWwubmF0aXZlLCBzeW0uYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWVsX2hhc19zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHJlZWw6IFVJbnQ2NCwgc3ltOiBCeXRlcykgLT4gYm9vbDoKICAgIC8vICAgICBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICAvLyAgICAgICAgIGlmIGdyaWRbcmVlbCAqIDMgKyByXSA9PSBzeW06CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgLy8gICAgIHJldHVybiBGYWxzZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zeW1ib2xfdG9faW5kZXgoc2VsZiwgc3ltOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgIGlmIHN5bSA9PSBCVUZGQUxPOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDApCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gRUFHTEU6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBDT1VHQVI6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBFTEs6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXT0xGOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDQpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gQToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg1KQogICAgLy8gICAgIGVsaWYgc3ltID09IEs6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBROgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDcpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg4KQogICAgLy8gICAgIGVsaWYgc3ltID09IFRFTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg5KQogICAgLy8gICAgIGVsaWYgc3ltID09IE5JTkU6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTApCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gV0lMRDE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTEpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gV0lMRDI6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTIpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gV0lMRDM6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTMpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSE9WOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDE0KQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfbWF0Y2hlcyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICByZWVsX21hdGNoZXMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIFNsb3RNYWNoaW5lU3RvcmFnZS5yZWVsX21hdGNoZXNfZGVmYXVsdCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcmVlbF9tYXRjaGVzLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIHJlZWw6IFVJbnQ2NCwgc3ltOiBCeXRlcwogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ291bnQgdGhlIG51bWJlciBvZiBtYXRjaGVzIG9mIHRoZSBzeW1ib2wgb3Igd2lsZCBvbiB0aGUgZ3JpZCBmb3IgYSBnaXZlbiByZWVsLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGNudCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICAvLyAgICAgICAgIHYgPSBncmlkW3JlZWwgKiAzICsgcl0KICAgIC8vICAgICAgICAgaWYgdiA9PSBzeW0gb3IgdiA9PSBXSUxEMSBvciB2ID09IFdJTEQyIG9yIHYgPT0gV0lMRDM6CiAgICAvLyAgICAgICAgICAgICBjbnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIGNudAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBjb250cmliX3JlZWxzOiBCeXRlcywgbl9yZWVsczogVUludDY0CiAgICAvLyApIC0+IFVJbnQ2NF8yOgogICAgLy8gICAgIGNvbnRyaWIgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhjb250cmliX3JlZWxzKQogICAgLy8gICAgIG11bHQgPSBVSW50NjQoMSkKICAgIC8vICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciBpIGluIHVyYW5nZShuX3JlZWxzKToKICAgIC8vICAgICAgICAgcmkgPSBjb250cmliW2ldLm5hdGl2ZQogICAgLy8gICAgICAgICBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICAvLyAgICAgICAgICAgICB2ID0gZ3JpZFtyaSAqIDMgKyByXQogICAgLy8gICAgICAgICAgICAgaWYgdiA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgICAgICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiBVSW50NjRfMihhcmM0LlVJbnQ2NCgzKSwgYXJjNC5VSW50NjQoYW55X3dpbGQpKQogICAgLy8gICAgICAgICAgICAgZWxpZiB2ID09IFdJTEQyOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICAgICAgaWYgbXVsdCA8IFVJbnQ2NCgyKToKICAgIC8vICAgICAgICAgICAgICAgICAgICAgbXVsdCA9IFVJbnQ2NCgyKQogICAgLy8gICAgICAgICAgICAgZWxpZiB2ID09IFdJTEQxOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KG11bHQpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzLCBwYXlfZGVuc2U6IEJ5dGVzCiAgICAvLyApIC0+IFdheXNXaXRoU3BpbkNhcERldGFpbHM6CiAgICAvLyAKICAgIC8vICAgICBwZCA9IFBheURlbnNlLmZyb21fYnl0ZXMocGF5X2RlbnNlKQogICAgLy8gCiAgICAvLyAgICAgaWYgbm90IHNlbGYuX3JlZWxfaGFzX3N5bWJvbChncmlkLCBVSW50NjQoMCksIHN5bSk6CiAgICAvLyAgICAgICAgIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcmVlbF9tYXRjaGVzID0gVUludDY0XzE2LmZyb21fYnl0ZXMoc2VsZi5fcmVlbF9tYXRjaGVzKCkpCiAgICAvLyAgICAgY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgLy8gICAgIG5fY29udHJpYiA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGsgPSBVSW50NjQoMCkKICAgIC8vICAgICB3aGlsZSBrIDwgVUludDY0KE5VTV9SRUVMUyk6CiAgICAvLyAgICAgICAgIG0gPSBzZWxmLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQsIGssIHN5bSkKICAgIC8vICAgICAgICAgaWYgbSA9PSAwOgogICAgLy8gICAgICAgICAgICAgYnJlYWsKICAgIC8vICAgICAgICAgcmVlbF9tYXRjaGVzW2tdID0gYXJjNC5VSW50NjQobSkKICAgIC8vICAgICAgICAgY29udHJpYltuX2NvbnRyaWJdID0gYXJjNC5VSW50NjQoaykKICAgIC8vICAgICAgICAgbl9jb250cmliICs9IDEKICAgIC8vICAgICAgICAgayArPSAxCiAgICAvLyAKICAgIC8vICAgICBtYXRjaF9sZW4gPSBrCiAgICAvLyAgICAgaWYgbWF0Y2hfbGVuIDwgMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICAgICAgICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHdheXMgPSBVSW50NjQoMSkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIC8vICAgICAgICAgd2F5cyAqPSByZWVsX21hdGNoZXNbaV0ubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBiYXNlID0gcGRbc2VsZi5fc3ltYm9sX3RvX2luZGV4KHN5bSkgKiA2ICsgbWF0Y2hfbGVuXS5uYXRpdmUKICAgIC8vICAgICBpZiBiYXNlID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgICAgICAgICB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgLy8gICAgICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlID0gc2VsZi5faGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZygKICAgIC8vICAgICAgICAgZ3JpZCwgY29udHJpYi5ieXRlcywgbl9jb250cmliCiAgICAvLyAgICAgKQogICAgLy8gICAgIG11bHQgPSBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlWzBdLm5hdGl2ZQogICAgLy8gICAgIGFueV93aWxkID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVsxXS5uYXRpdmUKICAgIC8vICAgICBwYXlvdXQgPSBiYXNlICogd2F5cyAqIG11bHQKICAgIC8vICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgICAgICB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgLy8gICAgICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KGFueV93aWxkKSwKICAgIC8vICAgICAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQobXVsdCksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9RmFsc2UpCiAgICAvLyBkZWYgY2FsY3VsYXRlX2dyaWRfcGF5b3V0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0KGdyaWQpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9zeW1ib2woc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCBhbGwgb2NjdXJyZW5jZXMgb2YgYSBzeW1ib2wgaW4gdGhlIGVudGlyZSBncmlkLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGNudCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICAgICAgaWYgZ3JpZFtjICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgICAgICBjbnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgcmV0dXJuIGNudAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFByb2Nlc3Mgb25lIHNwaW4gYW5kIHJldHVybiB0aGUgcGF5b3V0LgogICAgLy8gICAgIEluY2x1ZGVzIGxpbmUgcGF5cywgamFja3BvdCBjaGVjaywgYW5kIGJvbnVzIG11bHRpcGxpZXIgaWYgaW4gYm9udXMgcm91bmQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbGluZV90b3RhbCA9IFVJbnQ2NCgwKQogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IHNlbGYuX2dldF9saW5lX3N5bWJvbHMoKQogICAgLy8gICAgIHBheV9kZW5zZSA9IHNlbGYuX2dldF9wYXlfZGVuc2UoKQogICAgLy8gICAgIGZvciBpZHggaW4gdXJhbmdlKDE2KToKICAgIC8vICAgICAgICAgc3ltID0gbGluZV9zeW1ib2xzW2lkeF0KICAgIC8vICAgICAgICAgd2F5c19yZXN1bHQgPSBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkLCBzeW0sIHBheV9kZW5zZSkKICAgIC8vICAgICAgICAgbGluZV90b3RhbCArPSB3YXlzX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gbGluZV90b3RhbAogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChzZWxmKSAtPiBTcGluUmVzdWx0OgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKSkKICAgIC8vICAgICByZXR1cm4gU3BpblJlc3VsdC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChncmlkLCBGYWxzZSwgVUludDY0KDApKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBUb2tlbiBCYW5rIE1hbmFnZXIKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBpbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcihzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluaXRpYWxpemUgdGhlIHRva2VuIGJhbmsgbWFuYWdlcgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2UodG9rZW5fYXBwX2lkLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZV9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDE3MzAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluaXRpYWxpemUgc3RvcmFnZSBmb3IgYmFsYW5jZXMgYm94ZXMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgbm90IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfZnVzZS5uYXRpdmUKICAgIC8vICAgICApLCAiYmFuayBiYWxhbmNlcyBtdXN0IG5vdCBiZSBpbml0aWFsaXplZCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2Z1c2UgPSBhcmM0LkJvb2woVHJ1ZSkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vIAogICAgLy8gIyAtLS0gaW1wbGVtZW50YXRpb24gLS0tCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIG93bmVyX2RlcG9zaXRfdG9rZW4oCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCwgYW1vdW50OiBhcmM0LlVJbnQyNTYKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBEZXBvc2l0IGZ1bmRzIGludG8gdGhlIGNvbnRyYWN0IGFzIG93bmVyLiBUaGUgb3duZXIgaXMgZXhwZWN0ZWQgdG8KICAgIC8vICAgICBoYXZlIGFscmVhZHkgc3VibWl0dGVkIHRoZSBwYXltZW50LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX293bmVyX2RlcG9zaXRfdG9rZW4odG9rZW5fYXBwX2lkLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb3duZXJfZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBkZXBvc2l0X3Rva2VuKHNlbGYsIHRva2VuX2FwcF9pZDogYXJjNC5VSW50NjQsIGFtb3VudDogYXJjNC5VSW50MjU2KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZC5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBEZXBvc2l0IGZ1bmRzIGludG8gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93aXRoZHJhd190b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFdpdGhkcmF3IGZ1bmRzIGZyb20gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYW1vdW50OiBUaGUgYW1vdW50IG9mIGZ1bmRzIHRvIHdpdGhkcmF3IGluIGF0b21pYyB1bml0cwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPiBCaWdVSW50KDApLCAiYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZAogICAgLy8gICAgICksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgICAgICB0b2tlbl9hcHBfaWQKICAgIC8vICAgICApLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1NihhbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZXMoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IFRva2VuQmFsYW5jZXM6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudG9rZW5fYmFsYW5jZXMuZ2V0KAogICAgLy8gICAgICAgICB0b2tlbl9hcHBfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VG9rZW5CYWxhbmNlcygKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IGFyYzQuVUludDI1NjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkuYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJ0b2tlbiBiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlX2xvY2tlZChzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX2xvY2tlZAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IGFyYzQuVUludDI1NjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkuYmFsYW5jZV90b3RhbAogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJ0b2tlbiBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgVE9ETzogaW1wbGVtZW50IHRoaXMKICAgIC8vICMgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAjIGRlZiBzeW5jX3Rva2VuX2JhbGFuY2Uoc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gIyAgICAgIiIiCiAgICAvLyAjICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gIyAgICAgIiIiCiAgICAvLyAjICAgICByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYuX3N5bmNfdG9rZW5fYmFsYW5jZSh0b2tlbl9hcHBfaWQubmF0aXZlKSkKICAgIC8vIAogICAgLy8gIyBUT0RPOiBpbXBsZW1lbnQgdGhpcwogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX3N5bmNfdG9rZW5fYmFsYW5jZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gQmlnVUludDoKICAgIC8vICMgICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICMgICAgIGFzc2VydCB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgPT0gMAogICAgLy8gIyAgICAgYWNjb3VudCA9IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIC8vICMgICAgIGJhbGFuY2UgPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gIyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF9iYWxhbmNlT2YsCiAgICAvLyAjICAgICAgICAgYWNjb3VudCwKICAgIC8vICMgICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICMgICAgICkKICAgIC8vICMgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYmFsYW5jZQogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGJhbGFuY2UKICAgIC8vICMgICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gIyAgICAgYXJjNC5lbWl0KAogICAgLy8gIyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gIyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICMgICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gIyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICMgICAgICAgICApCiAgICAvLyAjICAgICApCiAgICAvLyAjICAgICByZXR1cm4gYmFsYW5jZS5uYXRpdmUKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIEJhbmsgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vICMgIyBvdmVycmlkZQogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gIyAgICAgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICMgIyBvdnJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gIyAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDE3NzAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSBzdG9yYWdlIGZvciBiYWxhbmNlcyBib3hlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9kZXBvc2l0KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHdpdGhkcmF3KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fd2l0aGRyYXcoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgcmV0dXJuIEJhbmtCYWxhbmNlcygKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2V0IHRoZSBiYWxhbmNlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICAvLyAgICAgcmV0dXJuIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLmdldCgKICAgIC8vICAgICAgICAgZGVmYXVsdD1zZWxmLl9pbnZhbGlkX2JhbGFuY2VzKCkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2xvY2tlZCgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9sb2NrZWQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGxvY2tlZCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkuYnl0ZXMpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgICAgICBiZXRfa2V5LAogICAgLy8gICAgICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfbW9kZShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgIGJldCA9IHNlbGYuX2dldF9iZXQoYmV0X2tleSkKICAgIC8vICAgICByZXR1cm4gYmV0Lm1vZGUubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9tb2RlKHNlbGYsIG1vZGU6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3NldF9tb2RlKG1vZGUubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zZXRfbW9kZShzZWxmLCBtb2RlOiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IG1vZGUgPiBVSW50NjQoMCksICJtb2RlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgc3BpbiBwYXJhbXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDUwNTAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMSAqIDEwKio2KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDIpCiAgICAvLyAKICAgIC8vICMgc3BpbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgZXh0cmFfcGF5bWVudDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudCh1c2VyX2lkKQogICAgLy8gICAgIHNwaW5fY29zdCA9IHNlbGYuX3NwaW5fY29zdCgpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcGF5bWVudCA+PSBzcGluX2Nvc3QgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gc3BpbiBjb3N0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBheW1lbnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJldFBsYWNlZCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NChzcGluX2luZGV4KSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWF0ZV9iZXQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGUsCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzcKICAgIC8vIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGFzc2VydCAvLyBiZXQgYWxyZWFkeSBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgzOAogICAgLy8gY2xhaW1fcm91bmQgPSBjb25maXJtZWRfcm91bmQgKyBzZWxmLl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKCkKICAgIGNhbGxzdWIgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEKICAgIHVuY292ZXIgMgogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODQxCiAgICAvLyBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NDIKICAgIC8vIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoc2VsZi5zcGluX2NvdW50KSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDEKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODQyCiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNlbGYuc3Bpbl9jb3VudCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3Bpbl9jb3VudCBleGlzdHMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg0MwogICAgLy8gbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODQ0CiAgICAvLyBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgzOS00ODQ1CiAgICAvLyBzZWxmLmJldFtiZXRfa2V5XSA9IEJldCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NChzZWxmLnNwaW5fY291bnQpLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGRpZyAyCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NDYtNDg0OQogICAgLy8gcmV0dXJuIEJldEtleUluZm8oCiAgICAvLyAgICAgYmV0X2tleT1CeXRlczU2LmZyb21fYnl0ZXMoYmV0X2tleSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKS5ieXRlcwogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YSgpIC0+IHVpbnQ2NDoKX2dldF9yb3VuZF9mdXR1cmVfZGVsdGE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3ODgtNDc4OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc5MAogICAgLy8gcmV0dXJuIFVJbnQ2NCgyKQogICAgaW50IDIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfc3Bpbl9jb3VudChhZGRyZXNzOiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF9zcGluX2NvdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njk0LTQ2OTUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9zcGluX2NvdW50KHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcwMAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDEKICAgIC8vIHVzZXIuc3Bpbl9jb3VudCA9IGFyYzQuVUludDY0KHVzZXIuc3Bpbl9jb3VudC5uYXRpdmUgKyBVSW50NjQoMSkpCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICBpdG9iCiAgICByZXBsYWNlMiA0OAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzAyCiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAoYWRkcmVzczogYnl0ZXMpIC0+IHZvaWQ6Cl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcwNC00NzA1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDYKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzA3CiAgICAvLyB1c2VyLmxhc3Rfc3Bpbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGl0b2IKICAgIHJlcGxhY2UyIDU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDgKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfYm9udXNfc3BpbihhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYm9udXNfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY4Ny00Njg4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njg5CiAgICAvLyB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5MAogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPj0gYW1vdW50LCAiYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5MQogICAgLy8gdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgaXRvYgogICAgcmVwbGFjZTIgNDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5MgogICAgLy8gc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2VtaXRfYmV0X3BsYWNlZCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCwgY2xhaW1fcm91bmQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2VtaXRfYmV0X3BsYWNlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwNy00ODE1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICB1c2VyX2lkOiBBY2NvdW50LAogICAgLy8gICAgIGJldF9hbW91bnQ6IFVJbnQ2NCwKICAgIC8vICAgICBzcGluX2luZGV4OiBVSW50NjQsCiAgICAvLyAgICAgbW9kZTogVUludDY0LAogICAgLy8gICAgIGNsYWltX3JvdW5kOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byA1IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgxOQogICAgLy8gYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAtNAogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODIwCiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MjEKICAgIC8vIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgyMgogICAgLy8gY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MTctNDgyMwogICAgLy8gQmV0UGxhY2VkKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC01CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgxNi00ODI0CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICBtb2RlPWFyYzQuVUludDY0KG1vZGUpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRQbGFjZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluX2NyZWRpdCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluX2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkyNi00OTMzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2NyZWRpdCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MzQtNDkzNQogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5MzYtNDkzNwogICAgLy8gIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIGR1cAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIGJvbnVzIHNwaW4gaXMgbm90IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDkzOC00OTM5CiAgICAvLyAjIGNyZWRpdCBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBhc3NlcnQgdXNlci5jcmVkaXQubmF0aXZlID49IGJldF9hbW91bnQsICJjcmVkaXQgaXMgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTMKICAgID49CiAgICBhc3NlcnQgLy8gY3JlZGl0IGlzIGxlc3MgdGhhbiBiZXQgYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NDAtNDk0MQogICAgLy8gIyBhc3NlcnQgYmV0X2Ftb3VudCA9PSBzZWxmLmNyZWRpdF9iZXRfY29zdCwgImJldCBhbW91bnQgaXMgY3JlZGl0IGJldCBjb3N0IgogICAgLy8gYXNzZXJ0IGJldF9hbW91bnQgPT0gVUludDY0KDQwKSwgImJldCBhbW91bnQgaXMgNDAiCiAgICBmcmFtZV9kaWcgLTMKICAgIGludCA0MAogICAgPT0KICAgIGFzc2VydCAvLyBiZXQgYW1vdW50IGlzIDQwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NDItNDk0MwogICAgLy8gIyBwYXkgc3BpbiBjb3N0ICsgZXh0cmEgcGF5bWVudCBpZiBuZXR3b3JrCiAgICAvLyBzZWxmLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZCwgVUludDY0KDApKQogICAgZnJhbWVfZGlnIC00CiAgICBpbnQgMAogICAgY2FsbHN1YiBfZW5zdXJlX3NwaW5fY29zdF9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NDQtNDk0NwogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk0NgogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTQ4LTQ5NDkKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk0OC00OTQ5CiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNwaW5fY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk0OC00OTQ5CiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk1MC00OTUxCiAgICAvLyAjIGNvbW1vbiB1c2VyIHVwZGF0ZXMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9zcGluX2NvdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTIKICAgIC8vIHNlbGYuX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTMtNDk1NAogICAgLy8gIyAqIGNyZWRpdCBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfY3JlZGl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTgKICAgIC8vIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTU1LTQ5NTkKICAgIC8vICMgc2VsZi5qYWNrcG90X2NyZWRpdCArPSBzZWxmLmphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbgogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjAtNDk2MQogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2NyZWRpdChhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njc0LTQ2NzUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY3NgogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzcKICAgIC8vIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgYXNzZXJ0IC8vIGNyZWRpdCBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzgKICAgIC8vIHVzZXIuY3JlZGl0ID0gYXJjNC5VSW50NjQodXNlci5jcmVkaXQubmF0aXZlIC0gYW1vdW50KQogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICBpdG9iCiAgICByZXBsYWNlMiAzMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njc5CiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3Bpbl9uZXR3b3JrKHVzZXJfaWQ6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIHNwaW5faW5kZXg6IHVpbnQ2NCwgbW9kZTogdWludDY0KSAtPiBieXRlczoKX3NwaW5fbmV0d29yazoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk2My00OTY2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX25ldHdvcmsoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgaW50IDAKICAgIGJ5dGUgIiIKICAgIGR1cG4gMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTY3LTQ5NjgKICAgIC8vICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTcwLTQ5NzEKICAgIC8vICMgbm9uLWJvbnVzIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID09IFVJbnQ2NCgwKSwgImJvbnVzIHNwaW4gaXMgbm90IDAiCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAhCiAgICBhc3NlcnQgLy8gYm9udXMgc3BpbiBpcyBub3QgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTczLTQ5NzQKICAgIC8vICMgbmV0d29yayBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBiYXNlX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MTkKICAgIC8vIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpCiAgICBieXRlICJuZXR3b3JrX2Jhc2VfYmV0X2Nvc3QiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NzMtNDk3NAogICAgLy8gIyBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vIGJhc2VfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3NQogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE5CiAgICAvLyBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgYnl0ZSAibmV0d29ya19iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTc1CiAgICAvLyBraWNrZXJfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCArIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgZXhpc3RzCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIwCiAgICAvLyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhID0gVUludDY0KDIwICogMTAqKjYpCiAgICBieXRlICJuZXR3b3JrX2tpY2tlcl9leHRyYSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3NQogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEgZXhpc3RzCiAgICArCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NzcKICAgIC8vIGJldF9hbW91bnQgPT0gYmFzZV9iZXRfY29zdCBvciBiZXRfYW1vdW50ID09IGtpY2tlcl9iZXRfY29zdAogICAgZnJhbWVfZGlnIC0zCiAgICA9PQogICAgYm56IF9zcGluX25ldHdvcmtfYm9vbF90cnVlQDIKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIDQKICAgID09CiAgICBieiBfc3Bpbl9uZXR3b3JrX2Jvb2xfZmFsc2VAMwoKX3NwaW5fbmV0d29ya19ib29sX3RydWVAMjoKICAgIGludCAxCiAgICBiIF9zcGluX25ldHdvcmtfYm9vbF9tZXJnZUA0Cgpfc3Bpbl9uZXR3b3JrX2Jvb2xfZmFsc2VAMzoKICAgIGludCAwCgpfc3Bpbl9uZXR3b3JrX2Jvb2xfbWVyZ2VANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3Ni00OTc4CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJldF9hbW91bnQgPT0gYmFzZV9iZXRfY29zdCBvciBiZXRfYW1vdW50ID09IGtpY2tlcl9iZXRfY29zdAogICAgLy8gKSwgImJldCBhbW91bnQgbXVzdCBiZSBiYXNlIGJldCBjb3N0IG9yIGtpY2tlciBiZXQgY29zdCIKICAgIGFzc2VydCAvLyBiZXQgYW1vdW50IG11c3QgYmUgYmFzZSBiZXQgY29zdCBvciBraWNrZXIgYmV0IGNvc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk4MQogICAgLy8gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50CiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV90b3RhbAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMQogICAgLy8gc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCA9IFVJbnQ2NCgxMDAgKiAxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfbWluX2JhbmtfYW1vdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTgxCiAgICAvLyBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpID49IHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCBleGlzdHMKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NzktNDk4MgogICAgLy8gIyBuZXR3b3JrIGFuZCB0b2tlbiBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkgPj0gc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudAogICAgLy8gKSwgImJhbGFuY2UgdG90YWwgbXVzdCBiZSBncmVhdGVyIHRoYW4gbWluIGJhbmsgYW1vdW50IgogICAgYXNzZXJ0IC8vIGJhbGFuY2UgdG90YWwgbXVzdCBiZSBncmVhdGVyIHRoYW4gbWluIGJhbmsgYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODMtNDk4NgogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk4NQogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTgzLTQ5ODYKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gKQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODctNDk4OAogICAgLy8gIyBjYWxjdWxhdGUgZmVlcwogICAgLy8gZmVlX3RyZWFzdXJ5ID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMyCiAgICAvLyBzZWxmLmZlZV90cmVhc3VyeV9icHMgPSBVSW50NjQoMzApICAjIDAuMyUKICAgIGJ5dGUgImZlZV90cmVhc3VyeV9icHMiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODctNDk4OAogICAgLy8gIyBjYWxjdWxhdGUgZmVlcwogICAgLy8gZmVlX3RyZWFzdXJ5ID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyBleGlzdHMKICAgIGZyYW1lX2RpZyAtMwogICAgKgogICAgaW50IDEwMDAwCiAgICAvCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTg5CiAgICAvLyBmZWVfbWFya2V0aW5nID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX21hcmtldGluZ19icHMgLy8gVUludDY0KDEwMDAwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMwogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2JwcyA9IFVJbnQ2NCgyMCkgICMgMC4yJQogICAgYnl0ZSAiZmVlX21hcmtldGluZ19icHMiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODkKICAgIC8vIGZlZV9tYXJrZXRpbmcgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfbWFya2V0aW5nX2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX21hcmtldGluZ19icHMgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTMKICAgICoKICAgIGludCAxMDAwMAogICAgLwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk5MC00OTkxCiAgICAvLyAjIGNhbGN1bGF0ZSB0b3RhbCBmZWVzCiAgICAvLyB0b3RhbF9mZWVzID0gZmVlX3RyZWFzdXJ5ICsgZmVlX21hcmtldGluZwogICAgZGlnIDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk5Mi00OTkzCiAgICAvLyAjIGNhbGN1bGF0ZSBuZXQgYmV0IGFtb3VudAogICAgLy8gYXNzZXJ0IHRvdGFsX2ZlZXMgPD0gYmV0X2Ftb3VudCwgInRvdGFsIGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gYmV0IGFtb3VudCIKICAgIGR1cAogICAgZnJhbWVfZGlnIC0zCiAgICA8PQogICAgYXNzZXJ0IC8vIHRvdGFsIGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gYmV0IGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk0CiAgICAvLyBuZXRfYmV0X2Ftb3VudCA9IGJldF9hbW91bnQgLSB0b3RhbF9mZWVzCiAgICBmcmFtZV9kaWcgLTMKICAgIHN3YXAKICAgIC0KICAgIGR1cAogICAgZnJhbWVfYnVyeSAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5OTUtNDk5OAogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBzd2FwCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk3CiAgICAvLyBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk1LTQ5OTgKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICkKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk5LTUwMDAKICAgIC8vICMgKiBuZXR3b3JrIHNwZWNpZmljIGZlZSBwYXlvdXQgKgogICAgLy8gaWYgZmVlX3RyZWFzdXJ5ID4gMDoKICAgIGJ6IF9zcGluX25ldHdvcmtfYWZ0ZXJfaWZfZWxzZUA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDEtNTAwNAogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPXNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MsCiAgICAvLyAgICAgYW1vdW50PWZlZV90cmVhc3VyeSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwMgogICAgLy8gcmVjZWl2ZXI9c2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcywKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjYKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDIKICAgIC8vIHJlY2VpdmVyPXNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgZXhpc3RzCiAgICBmcmFtZV9kaWcgMgogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwMQogICAgLy8gaXR4bi5QYXltZW50KAogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDEtNTAwNAogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPXNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MsCiAgICAvLyAgICAgYW1vdW50PWZlZV90cmVhc3VyeSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0Cgpfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwNQogICAgLy8gaWYgZmVlX21hcmtldGluZyA+IDA6CiAgICBmcmFtZV9kaWcgMQogICAgYnogX3NwaW5fbmV0d29ya19hZnRlcl9pZl9lbHNlQDEwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDYtNTAwOQogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPXNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzLAogICAgLy8gICAgIGFtb3VudD1mZWVfbWFya2V0aW5nLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDA3CiAgICAvLyByZWNlaXZlcj1zZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcywKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjkKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gQWNjb3VudCgKICAgIGJ5dGUgImZlZV9tYXJrZXRpbmdfYWRkcmVzcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwNwogICAgLy8gcmVjZWl2ZXI9c2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzIGV4aXN0cwogICAgZnJhbWVfZGlnIDEKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDYKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDA2LTUwMDkKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1zZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcywKICAgIC8vICAgICBhbW91bnQ9ZmVlX21hcmtldGluZywKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0Cgpfc3Bpbl9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTAtNTAxMQogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDEKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDEwLTUwMTEKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3Bpbl9jb3VudCBleGlzdHMKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDEKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDEwLTUwMTEKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDEyLTUwMTMKICAgIC8vICMgY29tbW9uIHVzZXIgdXBkYXRlcwogICAgLy8gc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIGZyYW1lX2RpZyAtNAogICAgY2FsbHN1YiBfaW5jcmVtZW50X3NwaW5fY291bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAxNC01MDE1CiAgICAvLyAjICogbmV0d29yayBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKG5ldF9iZXRfYW1vdW50KQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAxNgogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG5ldF9iZXRfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAxNy01MDE4CiAgICAvLyAjIGxvY2t1cF9hbW91bnQgPSBzZWxmLl9sb2NrdXBfYW1vdW50KG5ldF9iZXRfYW1vdW50KSArIHNlbGYuamFja3BvdF9uZXR3b3JrCiAgICAvLyBsb2NrdXBfYW1vdW50ID0gc2VsZi5fbG9ja3VwX2Ftb3VudChuZXRfYmV0X2Ftb3VudCkKICAgIGNhbGxzdWIgX2xvY2t1cF9hbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAxOQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGxvY2t1cF9hbW91bnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDIwCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUobG9ja3VwX2Ftb3VudCkKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDIxCiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayArPSBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24KICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDQKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29yayIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAyMQogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF9uZXR3b3JrIGV4aXN0cwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNQogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29ya19jb250cmlidXRpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMjEKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrICs9IHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gZXhpc3RzCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDQKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfbmV0d29yayIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAyMQogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDI0CiAgICAvLyB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMjItNTAyNQogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMjYtNTAyNwogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9sb2NrdXBfYW1vdW50KGJldF9hbW91bnQ6IHVpbnQ2NCkgLT4gdWludDY0OgpfbG9ja3VwX2Ftb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwNC01MTA1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrdXBfYW1vdW50KHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMDktNTExMAogICAgLy8gIyByZXR1cm4gYmV0X2Ftb3VudCAqIFVJbnQ2NCg5MDApCiAgICAvLyByZXR1cm4gYmV0X2Ftb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTM3LTQ1MzgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTM5CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQwLTQ1NDIKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0MwogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDYKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQ3CiAgICAvLyBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDgKICAgIC8vIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDUtNDU0OQogICAgLy8gQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0NC00NTUwCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJhbGFuY2VzVXBkYXRlZCh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3NwaW5fdG9rZW4odXNlcl9pZDogYnl0ZXMsIGJldF9hbW91bnQ6IHVpbnQ2NCwgc3Bpbl9pbmRleDogdWludDY0LCBtb2RlOiB1aW50NjQpIC0+IGJ5dGVzOgpfc3Bpbl90b2tlbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAyOS01MDMyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX3Rva2VuKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byA0IDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDMzLTUwMzQKICAgIC8vICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDM2LTUwMzcKICAgIC8vICMgbm9uLWJvbnVzIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID09IFVJbnQ2NCgwKSwgImJvbnVzIHNwaW4gaXMgbm90IDAiCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAhCiAgICBhc3NlcnQgLy8gYm9udXMgc3BpbiBpcyBub3QgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDM5LTUwNDAKICAgIC8vICMgdG9rZW4gYW5kIG5ldHdvcmsgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYmFzZV9iZXRfY29zdCA9IHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMwogICAgLy8gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ID0gQmlnVUludCg0MCAqIDEwKio2KQogICAgYnl0ZSAidG9rZW5fYmFzZV9iZXRfY29zdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAzOS01MDQwCiAgICAvLyAjIHRva2VuIGFuZCBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vIGJhc2VfYmV0X2Nvc3QgPSBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQxCiAgICAvLyBraWNrZXJfYmV0X2Nvc3QgPSBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLnRva2VuX2tpY2tlcl9leHRyYQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMwogICAgLy8gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ID0gQmlnVUludCg0MCAqIDEwKio2KQogICAgYnl0ZSAidG9rZW5fYmFzZV9iZXRfY29zdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA0MQogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ICsgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0IGV4aXN0cwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyNAogICAgLy8gc2VsZi50b2tlbl9raWNrZXJfZXh0cmEgPSBCaWdVSW50KDIwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9raWNrZXJfZXh0cmEiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNDEKICAgIC8vIGtpY2tlcl9iZXRfY29zdCA9IHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCArIHNlbGYudG9rZW5fa2lja2VyX2V4dHJhCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fa2lja2VyX2V4dHJhIGV4aXN0cwogICAgYisKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA0MwogICAgLy8gYmV0X2Ftb3VudCA9PSBiYXNlX2JldF9jb3N0IG9yIGJldF9hbW91bnQgPT0ga2lja2VyX2JldF9jb3N0CiAgICBmcmFtZV9kaWcgLTMKICAgIGl0b2IKICAgIGR1cAogICAgY292ZXIgMgogICAgYj09CiAgICBibnogX3NwaW5fdG9rZW5fYm9vbF90cnVlQDIKICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9kaWcgMwogICAgYj09CiAgICBieiBfc3Bpbl90b2tlbl9ib29sX2ZhbHNlQDMKCl9zcGluX3Rva2VuX2Jvb2xfdHJ1ZUAyOgogICAgaW50IDEKICAgIGIgX3NwaW5fdG9rZW5fYm9vbF9tZXJnZUA0Cgpfc3Bpbl90b2tlbl9ib29sX2ZhbHNlQDM6CiAgICBpbnQgMAoKX3NwaW5fdG9rZW5fYm9vbF9tZXJnZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQyLTUwNDQKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgYmV0X2Ftb3VudCA9PSBiYXNlX2JldF9jb3N0IG9yIGJldF9hbW91bnQgPT0ga2lja2VyX2JldF9jb3N0CiAgICAvLyApLCAiYmV0IGFtb3VudCBtdXN0IGJlIGJhc2UgYmV0IGNvc3Qgb3Iga2lja2VyIGJldCBjb3N0IgogICAgYXNzZXJ0IC8vIGJldCBhbW91bnQgbXVzdCBiZSBiYXNlIGJldCBjb3N0IG9yIGtpY2tlciBiZXQgY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQ3CiAgICAvLyBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQ3CiAgICAvLyBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQ4CiAgICAvLyA+PSBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyNQogICAgLy8gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQgPSBCaWdVSW50KDEwMCAqIDEwKio2KQogICAgYnl0ZSAidG9rZW5fbWluX2JhbmtfYW1vdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDQ4CiAgICAvLyA+PSBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudCBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA0Ny01MDQ4CiAgICAvLyBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCkKICAgIC8vID49IHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50CiAgICBiPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA0NS01MDQ5CiAgICAvLyAjICogdG9rZW4gc3BlY2lmaWMgYXNzZXJ0aW9ucyAqCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsKHNlbGYudG9rZW5fYXBwX2lkKQogICAgLy8gICAgID49IHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50CiAgICAvLyApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1MC01MDUzCiAgICAvLyAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDUyCiAgICAvLyBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICBjYWxsc3ViIF9jcmVhdGVfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNTAtNTA1MwogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1NC01MDU1CiAgICAvLyAjIGNhbGN1bGF0ZSBmZWVzCiAgICAvLyBmZWVfdHJlYXN1cnkgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfdHJlYXN1cnlfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzIKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMC4zJQogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2JwcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1NC01MDU1CiAgICAvLyAjIGNhbGN1bGF0ZSBmZWVzCiAgICAvLyBmZWVfdHJlYXN1cnkgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfdHJlYXN1cnlfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5mZWVfdHJlYXN1cnlfYnBzIGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICAqCiAgICBpbnQgMTAwMDAKICAgIC8KICAgIGR1cAogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNTYKICAgIC8vIGZlZV9tYXJrZXRpbmcgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfbWFya2V0aW5nX2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMzCiAgICAvLyBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzID0gVUludDY0KDIwKSAgIyAwLjIlCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2JwcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1NgogICAgLy8gZmVlX21hcmtldGluZyA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5mZWVfbWFya2V0aW5nX2JwcyBleGlzdHMKICAgIGZyYW1lX2RpZyAtMwogICAgKgogICAgaW50IDEwMDAwCiAgICAvCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1Ny01MDU4CiAgICAvLyAjICogdG9rZW4gc3BlY2lmaWMgZmVlIHBheW91dCAqCiAgICAvLyBpZiBmZWVfdHJlYXN1cnkgPiAwOgogICAgYnogX3NwaW5fdG9rZW5fYWZ0ZXJfaWZfZWxzZUA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNTktNTA2NAogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihmZWVfdHJlYXN1cnkpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNjEKICAgIC8vIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjYKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNjEKICAgIC8vIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2MgogICAgLy8gYXJjNC5VSW50MjU2KGZlZV90cmVhc3VyeSksCiAgICBmcmFtZV9kaWcgMQogICAgaXRvYgogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2MwogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDYzCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDU5LTUwNjQKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzKSwKICAgIC8vICAgICBhcmM0LlVJbnQyNTYoZmVlX3RyZWFzdXJ5KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgc3dhcAogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCgpfc3Bpbl90b2tlbl9hZnRlcl9pZl9lbHNlQDc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNjUKICAgIC8vIGlmIGZlZV9tYXJrZXRpbmcgPiAwOgogICAgZnJhbWVfZGlnIDAKICAgIGJ6IF9zcGluX3Rva2VuX2FmdGVyX2lmX2Vsc2VAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2Ni01MDcxCiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihmZWVfbWFya2V0aW5nKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDY4CiAgICAvLyBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyOQogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBBY2NvdW50KAogICAgYnl0ZSAiZmVlX21hcmtldGluZ19hZGRyZXNzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDY4CiAgICAvLyBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2OQogICAgLy8gYXJjNC5VSW50MjU2KGZlZV9tYXJrZXRpbmcpLAogICAgZnJhbWVfZGlnIDAKICAgIGl0b2IKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNzAKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA3MAogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2Ni01MDcxCiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihmZWVfbWFya2V0aW5nKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgc3dhcAogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCgpfc3Bpbl90b2tlbl9hZnRlcl9pZl9lbHNlQDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDcyLTUwNzMKICAgIC8vICMgY2FsY3VsYXRlIHRvdGFsIGZlZXMKICAgIC8vIHRvdGFsX2ZlZXMgPSBmZWVfdHJlYXN1cnkgKyBmZWVfbWFya2V0aW5nCiAgICBmcmFtZV9kaWcgMQogICAgZnJhbWVfZGlnIDAKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA3NC01MDc1CiAgICAvLyAjIGNhbGN1bGF0ZSBuZXQgYmV0IGFtb3VudAogICAgLy8gYXNzZXJ0IHRvdGFsX2ZlZXMgPD0gYmV0X2Ftb3VudCwgInRvdGFsIGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gYmV0IGFtb3VudCIKICAgIGR1cAogICAgZnJhbWVfZGlnIC0zCiAgICA8PQogICAgYXNzZXJ0IC8vIHRvdGFsIGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gYmV0IGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDc2CiAgICAvLyBuZXRfYmV0X2Ftb3VudCA9IGJldF9hbW91bnQgLSB0b3RhbF9mZWVzCiAgICBmcmFtZV9kaWcgLTMKICAgIHN3YXAKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA3Ny01MDgwCiAgICAvLyAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgbmV0X2JldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGRpZyAxCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDc5CiAgICAvLyBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDc3LTUwODAKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICkKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA4MS01MDgyCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwMQogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODEtNTA4MgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zcGluX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwMQogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODEtNTA4MgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODMtNTA4NAogICAgLy8gIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfc3Bpbl9jb3VudCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfc3Bpbl9jb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDg1LTUwODYKICAgIC8vICMgKiBuZXR3b3JrIHNwZWNpZmljIHVwZGF0ZXMgKgogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODUtNTA4NgogICAgLy8gIyAqIG5ldHdvcmsgc3BlY2lmaWMgdXBkYXRlcyAqCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgZGlnIDEKICAgIGl0b2IKICAgIGR1cAogICAgY292ZXIgMgogICAgY2FsbHN1YiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA4OAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA4OAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDg3LTUwODkKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICkKICAgIHN3YXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDkwLTUwOTEKICAgIC8vICMgbG9ja3VwX2Ftb3VudCA9IHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpICsgc2VsZi5qYWNrcG90X3Rva2VuCiAgICAvLyBsb2NrdXBfYW1vdW50ID0gc2VsZi5fbG9ja3VwX2Ftb3VudChuZXRfYmV0X2Ftb3VudCkKICAgIGR1cAogICAgY2FsbHN1YiBfbG9ja3VwX2Ftb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDkyCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQoc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobG9ja3VwX2Ftb3VudCkpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5MgogICAgLy8gc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkKHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KGxvY2t1cF9hbW91bnQpKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIHN3YXAKICAgIGl0b2IKICAgIGR1cAogICAgY292ZXIgMgogICAgY2FsbHN1YiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTQKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KGxvY2t1cF9hbW91bnQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5NAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobG9ja3VwX2Ftb3VudCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTMtNTA5NQogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KGxvY2t1cF9hbW91bnQpCiAgICAvLyApCiAgICBzd2FwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5NgogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuICs9IHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24KICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDYKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiA9IEJpZ1VJbnQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF90b2tlbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5NgogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuICs9IHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24KICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5qYWNrcG90X3Rva2VuIGV4aXN0cwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNwogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbiA9IEJpZ1VJbnQoNiAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF90b2tlbl9jb250cmlidXRpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTYKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiArPSBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gZXhpc3RzCiAgICBiKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA2CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW4iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTYKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiArPSBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDk5CiAgICAvLyB1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgZGlnIDEKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5Ny01MTAwCiAgICAvLyAjIGVtaXQgYmV0IHBsYWNlZCBldmVudAogICAgLy8gc2VsZi5fZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgIHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIHVuY292ZXIgMgogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMDEtNTEwMgogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMwMS00MzAyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMDMKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX3RvdGFsCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgZXh0cmFjdCAzMiAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQodG9rZW5fYXBwX2lkOiB1aW50NjQsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNjQtNDI2NwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjY4CiAgICAvLyB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjcwCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAtMQogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI2OS00MjcxCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiA2NAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjcyCiAgICAvLyBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3NQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3NgogICAgLy8gYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjc3CiAgICAvLyBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgNjQgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNzQtNDI3OAogICAgLy8gVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjczLTQyNzkKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJUb2tlbkJhbGFuY2VzVXBkYXRlZCh1aW50MjU2LHVpbnQyNTYsdWludDI1NikiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0MC00MjQzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDQKICAgIC8vIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3Rva2VuX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNDYKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSA+PSBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgIGI+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQ1LTQyNDcKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgInRva2VuIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gdG9rZW4gYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQ5CiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgYi0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI0OC00MjUwCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNTEKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjU0CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjU1CiAgICAvLyBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNTYKICAgIC8vIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI1My00MjU3CiAgICAvLyBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNTItNDI1OAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlRva2VuQmFsYW5jZXNVcGRhdGVkKHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5jbGFpbShiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6CmNsYWltOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTE0LTUxMTYKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMjAKICAgIC8vIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIGxvY2FsIHByb2dyYW0gY29zdCB3YXMgOTc4NwogICAgaW50IDIwMDAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMjEKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9jbGFpbShiZXRfa2V5LmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW0KICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbShiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMjMtNTEyNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5OS01MTI4CiAgICAvLyAgICAgIyBzcGluIHN0YXRlCiAgICAvLyAgICAgc2VsZi5iZXQgPSBCb3hNYXAoQnl0ZXMsIEJldCwga2V5X3ByZWZpeD0iIikKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgLy8gICAgIHNlbGYuamFja3BvdF9jcmVkaXQgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9jcmVkaXRfY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uID0gQmlnVUludCg2ICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIC8vICAgICAjIDEgPSBjcmVkaXQsIDIgPSBuZXR3b3JrLCA0ID0gdG9rZW4KICAgIC8vICAgICAjIDAgPSBkaXNhYmxlZAogICAgLy8gICAgICMgMSA9IGNyZWRpdCBlbmFibGVkCiAgICAvLyAgICAgIyAyID0gbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgMyA9IGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgIyA1ID0gY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgICMgNyA9IGNyZWRpdCwgbmV0d29yaywgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICBzZWxmLmNyZWRpdF9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2tpY2tlcl9leHRyYSA9IFVJbnQ2NCgyMCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgPSBVSW50NjQoMTAwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ID0gQmlnVUludCg0MCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fa2lja2VyX2V4dHJhID0gQmlnVUludCgyMCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50ID0gQmlnVUludCgxMDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gQWNjb3VudCgKICAgIC8vICAgICAgICAgIlFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkiCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gQWNjb3VudCgKICAgIC8vICAgICAgICAgIlFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkiCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMC4zJQogICAgLy8gICAgIHNlbGYuZmVlX21hcmtldGluZ19icHMgPSBVSW50NjQoMjApICAjIDAuMiUKICAgIC8vICAgICAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gICAgICMgc3RvcmFnZQogICAgLy8gICAgIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgLy8gCiAgICAvLyAjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcG9zdF91cGRhdGUoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoMCkKICAgIC8vICAgICBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgxKQogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KSAgIyBtaW50YWJsZSBhcmMyMDAgYXBwIGlkICgiVk9JIikKICAgIC8vICAgICAjIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDMpICAjIGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICAvLyAgICAgc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNSkgICMgY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCg0NzA2MDgwMCkgICMgc2xvdCBtYWNoaW5lIHN0b3JhZ2UgYXBwIGlkCiAgICAvLyAKICAgIC8vICMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBzZWxmLl9ib290c3RyYXAoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAjIHNlbGYuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKQogICAgLy8gICAgIHBhc3MKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KDFfMDAwXzAwMCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIE93bmFibGUKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfb3duZXIoc2VsZikgLT4gYXJjNC5BZGRyZXNzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgb3duZXIgb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQWRkcmVzcyhzZWxmLl9nZXRfb3duZXIoKSkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdHJhbnNmZXJfb3duZXJzaGlwKHNlbGYsIG5ld19vd25lcjogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFRyYW5zZmVyIHRoZSBvd25lcnNoaXAgb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX293bmFibGVfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgQm94KEFjY291bnQsIGtleT0ib3duZXIiKS52YWx1ZSA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIE9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLl9nZXRfb3duZXIoKSwgIm9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9vd25lcihzZWxmKSAtPiBBY2NvdW50OgogICAgLy8gICAgIHJldHVybiBzZWxmLm93bmVyCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3RyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5vd25lciA9IG5ld19vd25lcgogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgQ0RGIE1hbmFnZXIKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gCiAgICAvLyAjIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gIyBkZWYgZ2V0X2NkZl9ncmlkKHNlbGYpIC0+IEJ5dGVzMTU6CiAgICAvLyAjICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAjICAgICBzZWVkID0gc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikKICAgIC8vICMgICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQpKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX2dyaWRfZnJvbV9zZWVkKHNlbGYsIHNlZWQ6IEJ5dGVzMzIpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX2dyaWRfZnJvbV9iZXRfa2V5KHNlbGYsIGJveF9rZXk6IEJ5dGVzNTYpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShib3hfa2V5LmJ5dGVzKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2NkZl9ncmlkX2Zyb21fYmV0X2tleShzZWxmLCBib3hfa2V5OiBCeXRlcykgLT4gQnl0ZXM6CiAgICAvLyAgICAgYm94ID0gc2VsZi5fZ2V0X2JldChib3hfa2V5KQogICAgLy8gICAgIGdyaWRfc2VlZCA9IG9wLnNoYTI1Nihib3hfa2V5ICsgYm94LnNwaW5faW5kZXguYnl0ZXMpCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9jZGZfZ3JpZChncmlkX3NlZWQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgc2VlZDogQnl0ZXMzMiwgc3Bpbl9pbmRleDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gQnl0ZXMxNToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2NkZl9ncmlkX2Zyb21fc2VlZF9hbmRfc3BpbihzZWVkLmJ5dGVzLCBzcGluX2luZGV4Lm5hdGl2ZSkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfZ3JpZF9mcm9tX3NlZWRfYW5kX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgc2VlZDogQnl0ZXMsIHNwaW5faW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBpbmRleCA9IGFyYzQuVUludDY0KHNwaW5faW5kZXgpCiAgICAvLyAgICAgZ3JpZF9zZWVkID0gb3Auc2hhMjU2KHNlZWQgKyBpbmRleC5ieXRlcykKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X2NkZl9ncmlkKGdyaWRfc2VlZCkKICAgIC8vIAogICAgLy8gIyMjCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgYmxvY2sgc2VlZCBmb3IgYSBzcGVjaWZpYyByb3VuZAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIC8vIAogICAgLy8gIyBDREZfUkVFTDEgPSBbCiAgICAvLyAjICAgICA0MjcwNzY2NiwgICA4NTQxNTMzMiwgIDE3MDgzMDY2NCwgIDIzNDg5MjE2MywKICAgIC8vICMgICAgIDI5ODk1MzY2MiwgIDM4NDM2ODk5NCwgIDQ2OTc4NDMyNiwgIDU1NTE5OTY1OCwKICAgIC8vICMgICAgIDY4MzMyMjY1NiwgIDgzMjc5OTQ4OCwgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwKICAgIC8vICMgICAgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwgIDk4Mzk4NDYyNSwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX3JlZWwxKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfcmVlbDEuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb246CiAgICAvLyAgICAgcmV0dXJuIEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfcmVlbDEoKSkKICAgIC8vIAogICAgLy8gIyBDREZfT1RIRVJTID0gWwogICAgLy8gIyAgICAgNDA3NDk3OTYsICAgODE0OTk1OTMsICAxNjI5OTkxODUsICAyMjQxMjM4NzksCiAgICAvLyAjICAgICAyODUyNDg1NzQsICAzNjY3NDgxNjYsICA0NDgyNDc3NTksICA1Mjk3NDczNTEsCiAgICAvLyAjICAgICA2NTE5OTY3NDAsICA3OTQ2MjEwMjcsICAqOTM3MjQ1MzE0LCAgOTU3NjIwMjEyLAogICAgLy8gIyAgICAgOTcyOTAxMzg1LCAgOTgzMDg4ODM1KiwgIDk4NDcxODgyNiwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX290aGVycyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfb3RoZXJzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX290aGVyX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGNkZl9vdGhlcnMuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX290aGVycygpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5X2RlbnNlKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHBheV9kZW5zZSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnBheV9kZW5zZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwYXlfZGVuc2UuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZyhzZWxmLCBzZWVkOiBCeXRlcywgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2VuZXJhdGUgcmFuZG9tIGJ5dGVzIGZyb20gc2VlZCArIGdsb2JhbCBzcGluIGNvdW50LgogICAgLy8gICAgIFRoZSBzcGluX2NvdW50IGVuc3VyZXMgZWFjaCBzcGluIGdldHMgYSB1bmlxdWUgc2VlZCBldmVuIGlmIG90aGVyIGlucHV0cyBhcmUgdGhlIHNhbWUuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgIyBDb21iaW5lIHNlZWQgd2l0aCBzcGluX2NvdW50IGFzIG5vbmNlIGZvciB1bmlxdWVuZXNzCiAgICAvLyAgICAgY29sX2luZGV4X2J5dGVzID0gYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgY29tYmluZWQgPSBzZWVkICsgY29sX2luZGV4X2J5dGVzCiAgICAvLyAgICAgcmV0dXJuIG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZ190cmlwbGUoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJuZzEgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzIgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzMgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBVSW50NjRfMygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmczKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NkZl9kcmF3KHNlbGYsIGNkZjogQnl0ZXMsIGNvbF9zZWxlY3Rpb246IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX2FycmF5ID0gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoY2RmKQogICAgLy8gICAgIGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzBdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIwIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIxIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIyIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzNdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIzIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI0IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzVdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI1IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzZdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI2IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzddOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI3IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzhdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI4IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzldOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI5IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEwXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMV06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkIiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJDIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEzXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiRCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxNF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkUiKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkYiKQogICAgLy8gCiAgICAvLyAjIFRPRE8gY29uc2lkZXIgcmVuYW1pbmcgdG8gX2dldF9kcmF3X2NvbAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xpbmVfc3ltYm9scyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBCeXRlcyhiIjAxMjM0NTY3ODlBQkNERUYiKQogICAgLy8gICAgIHJldHVybiBsaW5lX3N5bWJvbHMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgcmVlbF9oYXNfc3ltYm9sKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHJlZWw6IGFyYzQuVUludDY0LCBzeW06IEJ5dGVzMQogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZC5ieXRlcywgcmVlbC5uYXRpdmUsIHN5bS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfaGFzX3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzKSAtPiBib29sOgogICAgLy8gICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAvLyAgICAgcmV0dXJuIEZhbHNlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3N5bWJvbF90b19pbmRleChzZWxmLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgaWYgc3ltID09IEJVRkZBTE86CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBFQUdMRToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxKQogICAgLy8gICAgIGVsaWYgc3ltID09IENPVUdBUjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgyKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVMSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgzKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdPTEY6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBBOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDUpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gSzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg2KQogICAgLy8gICAgIGVsaWYgc3ltID09IFE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBKOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDgpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gVEVOOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDkpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gTklORToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMikKICAgIC8vICAgICBlbGlmIHN5bSA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMykKICAgIC8vICAgICBlbGlmIHN5bSA9PSBIT1Y6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9tYXRjaGVzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnJlZWxfbWF0Y2hlc19kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiByZWVsX21hdGNoZXMuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDb3VudCB0aGUgbnVtYmVyIG9mIG1hdGNoZXMgb2YgdGhlIHN5bWJvbCBvciB3aWxkIG9uIHRoZSBncmlkIGZvciBhIGdpdmVuIHJlZWwuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgY250ID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgdiA9IGdyaWRbcmVlbCAqIDMgKyByXQogICAgLy8gICAgICAgICBpZiB2ID09IHN5bSBvciB2ID09IFdJTEQxIG9yIHYgPT0gV0lMRDIgb3IgdiA9PSBXSUxEMzoKICAgIC8vICAgICAgICAgICAgIGNudCArPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gY250CiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIGNvbnRyaWJfcmVlbHM6IEJ5dGVzLCBuX3JlZWxzOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0XzI6CiAgICAvLyAgICAgY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKGNvbnRyaWJfcmVlbHMpCiAgICAvLyAgICAgbXVsdCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIGFueV93aWxkID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgLy8gICAgICAgICByaSA9IGNvbnRyaWJbaV0ubmF0aXZlCiAgICAvLyAgICAgICAgIGZvciByIGluIHVyYW5nZSgzKToKICAgIC8vICAgICAgICAgICAgIHYgPSBncmlkW3JpICogMyArIHJdCiAgICAvLyAgICAgICAgICAgICBpZiB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgICAgIGFueV93aWxkID0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KDMpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDI6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICBpZiBtdWx0IDwgVUludDY0KDIpOgogICAgLy8gICAgICAgICAgICAgICAgICAgICBtdWx0ID0gVUludDY0KDIpCiAgICAvLyAgICAgICAgICAgICBlbGlmIHYgPT0gV0lMRDE6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQobXVsdCksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMoCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMsIHN5bTogQnl0ZXMsIHBheV9kZW5zZTogQnl0ZXMKICAgIC8vICkgLT4gV2F5c1dpdGhTcGluQ2FwRGV0YWlsczoKICAgIC8vIAogICAgLy8gICAgIHBkID0gUGF5RGVuc2UuZnJvbV9ieXRlcyhwYXlfZGVuc2UpCiAgICAvLyAKICAgIC8vICAgICBpZiBub3Qgc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQsIFVJbnQ2NCgwKSwgc3ltKToKICAgIC8vICAgICAgICAgcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICByZWVsX21hdGNoZXMgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBjb250cmliID0gVUludDY0XzE2LmZyb21fYnl0ZXMoc2VsZi5fcmVlbF9tYXRjaGVzKCkpCiAgICAvLyAgICAgbl9jb250cmliID0gVUludDY0KDApCiAgICAvLyAgICAgayA9IFVJbnQ2NCgwKQogICAgLy8gICAgIHdoaWxlIGsgPCBVSW50NjQoTlVNX1JFRUxTKToKICAgIC8vICAgICAgICAgbSA9IHNlbGYuX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQoZ3JpZCwgaywgc3ltKQogICAgLy8gICAgICAgICBpZiBtID09IDA6CiAgICAvLyAgICAgICAgICAgICBicmVhawogICAgLy8gICAgICAgICByZWVsX21hdGNoZXNba10gPSBhcmM0LlVJbnQ2NChtKQogICAgLy8gICAgICAgICBjb250cmliW25fY29udHJpYl0gPSBhcmM0LlVJbnQ2NChrKQogICAgLy8gICAgICAgICBuX2NvbnRyaWIgKz0gMQogICAgLy8gICAgICAgICBrICs9IDEKICAgIC8vIAogICAgLy8gICAgIG1hdGNoX2xlbiA9IGsKICAgIC8vICAgICBpZiBtYXRjaF9sZW4gPCAzOgogICAgLy8gICAgICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgd2F5cyA9IFVJbnQ2NCgxKQogICAgLy8gICAgIGZvciBpIGluIHVyYW5nZShtYXRjaF9sZW4pOgogICAgLy8gICAgICAgICB3YXlzICo9IHJlZWxfbWF0Y2hlc1tpXS5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGJhc2UgPSBwZFtzZWxmLl9zeW1ib2xfdG9faW5kZXgoc3ltKSAqIDYgKyBtYXRjaF9sZW5dLm5hdGl2ZQogICAgLy8gICAgIGlmIGJhc2UgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICAgICAgICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgICAgICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2UgPSBzZWxmLl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKAogICAgLy8gICAgICAgICBncmlkLCBjb250cmliLmJ5dGVzLCBuX2NvbnRyaWIKICAgIC8vICAgICApCiAgICAvLyAgICAgbXVsdCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMF0ubmF0aXZlCiAgICAvLyAgICAgYW55X3dpbGQgPSBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlWzFdLm5hdGl2ZQogICAgLy8gICAgIHBheW91dCA9IGJhc2UgKiB3YXlzICogbXVsdAogICAgLy8gICAgIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIC8vICAgICAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoYW55X3dpbGQpLAogICAgLy8gICAgICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NChtdWx0KSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1GYWxzZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyMDAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICBncmlkID0gc2VsZi5fZ2V0X2NkZl9ncmlkKHNlbGYuX2dldF9ibG9ja19zZWVkKEdsb2JhbC5yb3VuZCAtIDIpKQogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoZ3JpZCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NvdW50X3N5bWJvbChzZWxmLCBncmlkOiBCeXRlcywgc3ltOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENvdW50IGFsbCBvY2N1cnJlbmNlcyBvZiBhIHN5bWJvbCBpbiB0aGUgZW50aXJlIGdyaWQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgY250ID0gVUludDY0KDApCiAgICAvLyAgICAgZm9yIGMgaW4gdXJhbmdlKE5VTV9SRUVMUyk6CiAgICAvLyAgICAgICAgIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICAvLyAgICAgICAgICAgICBpZiBncmlkW2MgKiAzICsgcl0gPT0gc3ltOgogICAgLy8gICAgICAgICAgICAgICAgIGNudCArPSBVSW50NjQoMSkKICAgIC8vICAgICByZXR1cm4gY250CiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9ncmlkX3BheW91dCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGdyaWQ6IEJ5dGVzLAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgUHJvY2VzcyBvbmUgc3BpbiBhbmQgcmV0dXJuIHRoZSBwYXlvdXQuCiAgICAvLyAgICAgSW5jbHVkZXMgbGluZSBwYXlzLCBqYWNrcG90IGNoZWNrLCBhbmQgYm9udXMgbXVsdGlwbGllciBpZiBpbiBib251cyByb3VuZC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBsaW5lX3RvdGFsID0gVUludDY0KDApCiAgICAvLyAgICAgbGluZV9zeW1ib2xzID0gc2VsZi5fZ2V0X2xpbmVfc3ltYm9scygpCiAgICAvLyAgICAgcGF5X2RlbnNlID0gc2VsZi5fZ2V0X3BheV9kZW5zZSgpCiAgICAvLyAgICAgZm9yIGlkeCBpbiB1cmFuZ2UoMTYpOgogICAgLy8gICAgICAgICBzeW0gPSBsaW5lX3N5bWJvbHNbaWR4XQogICAgLy8gICAgICAgICB3YXlzX3Jlc3VsdCA9IHNlbGYuX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzKGdyaWQsIHN5bSwgcGF5X2RlbnNlKQogICAgLy8gICAgICAgICBsaW5lX3RvdGFsICs9IHdheXNfcmVzdWx0LnBheW91dC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIHJldHVybiBsaW5lX3RvdGFsCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KHNlbGYpIC0+IFNwaW5SZXN1bHQ6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyMDAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkKICAgIC8vICAgICBncmlkID0gc2VsZi5fZ2V0X2NkZl9ncmlkKHNlbGYuX2dldF9ibG9ja19zZWVkKEdsb2JhbC5yb3VuZCAtIDIpKQogICAgLy8gICAgIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KGdyaWQsIEZhbHNlLCBVSW50NjQoMCkpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFRva2VuIEJhbmsgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyKHNlbGYsIHRva2VuX2FwcF9pZDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSB0aGUgdG9rZW4gYmFuayBtYW5hZ2VyCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5faW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZSh0b2tlbl9hcHBfaWQubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMTczMDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2Uoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5pdGlhbGl6ZSBzdG9yYWdlIGZvciBiYWxhbmNlcyBib3hlcwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBub3QgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfZnVzZSA9IGFyYzQuQm9vbChUcnVlKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdF90b2tlbigKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0LCBhbW91bnQ6IGFyYzQuVUludDI1NgogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb3duZXJfZGVwb3NpdF90b2tlbih0b2tlbl9hcHBfaWQubmF0aXZlLCBhbW91bnQubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vd25lcl9kZXBvc2l0X3Rva2VuKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdCBhcyBvd25lci4gVGhlIG93bmVyIGlzIGV4cGVjdGVkIHRvCiAgICAvLyAgICAgaGF2ZSBhbHJlYWR5IHN1Ym1pdHRlZCB0aGUgcGF5bWVudC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGRlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCwgYW1vdW50OiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX2RlcG9zaXRfdG9rZW4odG9rZW5fYXBwX2lkLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3X3Rva2VuKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IEJpZ1VJbnQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICAgICAgdG9rZW5fYXBwX2lkCiAgICAvLyAgICAgKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZAogICAgLy8gICAgICksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlcyhzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gVG9rZW5CYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gc2VsZi50b2tlbl9iYWxhbmNlcy5nZXQoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Ub2tlbkJhbGFuY2VzKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Rva2VuX2JhbGFuY2VfbG9ja2VkKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpLmJhbGFuY2VfbG9ja2VkCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAidG9rZW4gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX3RvdGFsCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBUT0RPOiBpbXBsZW1lbnQgdGhpcwogICAgLy8gIyBAYXJjNC5hYmltZXRob2QKICAgIC8vICMgZGVmIHN5bmNfdG9rZW5fYmFsYW5jZShzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIFN5bmMgdGhlIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fc3luY190b2tlbl9iYWxhbmNlKHRva2VuX2FwcF9pZC5uYXRpdmUpKQogICAgLy8gCiAgICAvLyAjIFRPRE86IGltcGxlbWVudCB0aGlzCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfc3luY190b2tlbl9iYWxhbmNlKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBCaWdVSW50OgogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gIyAgICAgYXNzZXJ0IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA9PSAwCiAgICAvLyAjICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gIyAgICAgYmFsYW5jZSA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAjICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX2JhbGFuY2VPZiwKICAgIC8vICMgICAgICAgICBhY2NvdW50LAogICAgLy8gIyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gIyAgICAgKQogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBiYWxhbmNlCiAgICAvLyAjICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYmFsYW5jZQogICAgLy8gIyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAjICAgICBhcmM0LmVtaXQoCiAgICAvLyAjICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gIyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gIyAgICAgICAgICkKICAgIC8vICMgICAgICkKICAgIC8vICMgICAgIHJldHVybiBiYWxhbmNlLm5hdGl2ZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgQmFuayBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gIyAjIG92ZXJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gIyAjIG92cnJpZGUKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAjICAgICByZXR1cm4gR2xvYmFsLm1pbl9iYWxhbmNlICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vIAogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICMgICAgIHNlbGYuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMTc3MDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2Uoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHN0b3JhZ2UgZm9yIGJhbGFuY2VzIGJveGVzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgIyBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgbm90IHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2Z1c2UubmF0aXZlCiAgICAvLyAgICAgKSwgImJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2Z1c2UgPSBhcmM0LkJvb2woVHJ1ZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAKICAgIC8vICMgLS0tIGltcGxlbWVudGF0aW9uIC0tLQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBvd25lcl9kZXBvc2l0KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdCBhcyBvd25lci4gVGhlIG93bmVyIGlzIGV4cGVjdGVkIHRvCiAgICAvLyAgICAgaGF2ZSBhbHJlYWR5IHN1Ym1pdHRlZCB0aGUgcGF5bWVudC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQubmF0aXZlKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQubmF0aXZlKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBkZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX2RlcG9zaXQoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgcGF5bWVudCA+IDAsICJwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwocGF5bWVudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUocGF5bWVudCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgd2l0aGRyYXcoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBXaXRoZHJhdyBmdW5kcyBmcm9tIHRoZSBjb250cmFjdAogICAgLy8gICAgIE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGFtb3VudDogVGhlIGFtb3VudCBvZiBmdW5kcyB0byB3aXRoZHJhdyBpbiBhdG9taWMgdW5pdHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl93aXRoZHJhdyhhbW91bnQubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93aXRoZHJhdyhzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBXaXRoZHJhdyBmdW5kcyBmcm9tIHRoZSBjb250cmFjdAogICAgLy8gICAgIE9ubHkgY2FsbGFibGUgYnkgY29udHJhY3Qgb3duZXIKICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGFtb3VudDogVGhlIGFtb3VudCBvZiBmdW5kcyB0byB3aXRoZHJhdyBpbiBhdG9taWMgdW5pdHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBhc3NlcnQgYW1vdW50ID4gVUludDY0KDApLCAiYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGl0eG4uUGF5bWVudChyZWNlaXZlcj1UeG4uc2VuZGVyLCBhbW91bnQ9YW1vdW50KS5zdWJtaXQoKQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbnZhbGlkX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gQmFua0JhbGFuY2VzKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBHZXQgdGhlIGJhbGFuY2VzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfbG9ja2VkKCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2xvY2tlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV90b3RhbChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV90b3RhbC5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3luY19iYWxhbmNlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFN5bmMgdGhlIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX3N5bmNfYmFsYW5jZSgpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zeW5jX2JhbGFuY2Uoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBhc3NlcnQgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgPT0gMAogICAgLy8gICAgIGFjY291bnQgPSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICAvLyAgICAgYXZhaWxhYmxlX2JhbGFuY2UgPSBhY2NvdW50LmJhbGFuY2UgLSBhY2NvdW50Lm1pbl9iYWxhbmNlCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KGF2YWlsYWJsZV9iYWxhbmNlKQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KGF2YWlsYWJsZV9iYWxhbmNlKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGF2YWlsYWJsZV9iYWxhbmNlCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBVc2VyIE1hbmFnZXIKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfdXNlcihzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MpIC0+IFVzZXJEYXRhOgogICAgLy8gICAgIHJldHVybiBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MubmF0aXZlKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogQWNjb3VudCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudXNlci5nZXQoCiAgICAvLyAgICAgICAgIGFkZHJlc3MsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VXNlckRhdGEoCiAgICAvLyAgICAgICAgICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgYm9udXNfc3Bpbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY3JlZGl0KHNlbGYsIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBDcmVkaXQgdGhlIGNvbnRyYWN0LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX2NyZWRpdChhZGRyZXNzLm5hdGl2ZSwgYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9jcmVkaXQoYWRkcmVzcywgYW1vdW50KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIHVzZXIuY3JlZGl0ID0gYXJjNC5VSW50NjQodXNlci5jcmVkaXQubmF0aXZlICsgYW1vdW50KQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgYXNzZXJ0IHVzZXIuY3JlZGl0Lm5hdGl2ZSA+PSBhbW91bnQsICJjcmVkaXQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmJvbnVzX3NwaW4gPSBhcmM0LlVJbnQ2NCh1c2VyLmJvbnVzX3NwaW4ubmF0aXZlICsgYW1vdW50KQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9ib251c19zcGluKHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID49IGFtb3VudCwgImJvbnVzIHNwaW4gaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB1c2VyLmJvbnVzX3NwaW4gPSBhcmM0LlVJbnQ2NCh1c2VyLmJvbnVzX3NwaW4ubmF0aXZlIC0gYW1vdW50KQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9zcGluX2NvdW50KHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgSW5jcmVtZW50IHVzZXIncyBzcGluIGNvdW50IGJ5IDEuCiAgICAvLyAgICAgQ2FsbGVkIGFmdGVyIGVhY2ggc3BpbiB0byB0cmFjayB1c2VyIGFjdGl2aXR5LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIHVzZXIuc3Bpbl9jb3VudCA9IGFyYzQuVUludDY0KHVzZXIuc3Bpbl9jb3VudC5uYXRpdmUgKyBVSW50NjQoMSkpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAoc2VsZiwgYWRkcmVzczogQWNjb3VudCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmxhc3Rfc3Bpbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgU3BpbiBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JldChzZWxmLCBiZXRfa2V5OiBCeXRlczU2KSAtPiBCZXQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9iZXQoYmV0X2tleS5ieXRlcykKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLmJldC5nZXQoCiAgICAvLyAgICAgICAgIGJldF9rZXksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9tb2RlKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgLy8gICAgIHJldHVybiBiZXQubW9kZS5uYXRpdmUKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X21vZGUoc2VsZiwgbW9kZTogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5fc2V0X21vZGUobW9kZS5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NldF9tb2RlKHNlbGYsIG1vZGU6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgbW9kZSA+IFVJbnQ2NCgwKSwgIm1vZGUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBzZWxmLm1vZGUgPSBtb2RlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogYXJjNC5BZGRyZXNzLAogICAgLy8gICAgIGJldF9hbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICAgICAgICAgIGFkZHJlc3MubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgYmV0X2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgICAgICBpbmRleC5uYXRpdmUsCiAgICAvLyAgICAgICAgICAgICBtb2RlLm5hdGl2ZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBhZGRyZXNzOiBBY2NvdW50LAogICAgLy8gICAgIGJldF9hbW91bnQ6IFVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChtb2RlKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBzcGluIHBhcmFtcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoNTA1MDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfZXh0cmFfcGF5bWVudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgxICogMTAqKjYpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMikKICAgIC8vIAogICAgLy8gIyBzcGluCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Vuc3VyZV9zcGluX2Nvc3RfcGF5bWVudCgKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBleHRyYV9wYXltZW50OiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KHVzZXJfaWQpCiAgICAvLyAgICAgc3Bpbl9jb3N0ID0gc2VsZi5fc3Bpbl9jb3N0KCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwYXltZW50ID49IHNwaW5fY29zdCArIGV4dHJhX3BheW1lbnQKICAgIC8vICAgICApLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBzcGluIGNvc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcGF5bWVudCA8PSBzZWxmLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKSArIGV4dHJhX3BheW1lbnQKICAgIC8vICAgICApLCAicGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudCIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgdXNlcl9pZDogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICAgICBjbGFpbV9yb3VuZDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyh1c2VyX2lkKSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIC8vICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY3JlYXRlX2JldCgKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbmZpcm1lZF9yb3VuZCA9IEdsb2JhbC5yb3VuZAogICAgLy8gICAgIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICAgICAgdXNlcl9pZCwKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudCwKICAgIC8vICAgICAgICAgc3Bpbl9pbmRleCwKICAgIC8vICAgICAgICAgbW9kZSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIGNsYWltX3JvdW5kID0gY29uZmlybWVkX3JvdW5kICsgc2VsZi5fZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YSgpCiAgICAvLyAgICAgc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoc2VsZi5zcGluX2NvdW50KSwKICAgIC8vICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gQmV0S2V5SW5mbygKICAgIC8vICAgICAgICAgYmV0X2tleT1CeXRlczU2LmZyb21fYnl0ZXMoYmV0X2tleSksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNwaW4oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwgICMgYmV0IGFtb3VudCBpbiBjcmVkaXRzCiAgICAvLyAgICAgaW5kZXg6IGFyYzQuVUludDY0LCAgIyBlYWNoIHNwaW4gaGFzIGEgdW5pcXVlIGluZGV4CiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsICAjIDAgPSBib251cyBzcGluICwgMSA9IGNyZWRpdCBzcGluLCAyID0gbmV0d29yayBzcGluLCA0ID0gdG9rZW4gc3BpbgogICAgLy8gKSAtPiBCeXRlczU2OgogICAgLy8gICAgICMgYXNzZXJ0IG5vdCBzZWxmLl9pc19wYXVzZWQoKSwgIlNwaW5zIGFyZSBwYXVzZWQiCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fc3BpbihUeG4uc2VuZGVyLCBiZXRfYW1vdW50Lm5hdGl2ZSwgaW5kZXgubmF0aXZlLCBtb2RlLm5hdGl2ZSkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTcGluIHRoZSBzbG90IG1hY2hpbmUuIE91dGNvbWUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgc2VlZAogICAgLy8gICAgIG9mIGZ1dHVyZSByb3VuZC4KICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGJldCAodWludCk6IFRoZSBwbGF5ZXIncyB3YWdlci4KICAgIC8vICAgICAgICAgaW5kZXggKHVpbnQpOiBQbGF5ZXIncyBjaG9pY2Ugb2YgaW5kZXguCiAgICAvLyAKICAgIC8vICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICByICh1aW50KTogVGhlIHJvdW5kIG51bWJlciBvZiB0aGUgc3Bpbi4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBib251c19zcGluID0gbW9kZSA9PSBVSW50NjQoMCkKICAgIC8vICAgICBjcmVkaXRfc3BpbiA9IG1vZGUgPT0gVUludDY0KDEpCiAgICAvLyAgICAgbmV0d29ya19zcGluID0gbW9kZSA9PSBVSW50NjQoMikKICAgIC8vICAgICB0b2tlbl9zcGluID0gbW9kZSA9PSBVSW50NjQoNCkKICAgIC8vICAgICBpZiBib251c19zcGluOgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9ib251cyh1c2VyX2lkLCBVSW50NjQoMCksIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgZWxpZiBjcmVkaXRfc3BpbjoKICAgIC8vICAgICAgICAgYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDEpID09IFVJbnQ2NCgxKSwgImNyZWRpdCBtb2RlIG5vdCBlbmFibGVkIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICBlbGlmIG5ldHdvcmtfc3BpbjoKICAgIC8vICAgICAgICAgYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIDIKICAgIC8vICAgICAgICAgKSwgIm5ldHdvcmsgbW9kZSBub3QgZW5hYmxlZCIKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fbmV0d29yayh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gICAgIGVsaWYgdG9rZW5fc3BpbjoKICAgIC8vICAgICAgICAgYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDQpID09IFVJbnQ2NCg0KSwgInRva2VuIG1vZGUgbm90IGVuYWJsZWQiCiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9zcGluX3Rva2VuKHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgYXNzZXJ0IEZhbHNlLCAiaW52YWxpZCBtb2RlIgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2JvbnVzKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgLy8gICAgICMgKiBib251cyBzcGVjaWZpYyBhc3NlcnRpb25zICoKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBVSW50NjQoMSksICJib251cyBzcGluIGlzIGxlc3MgdGhhbiAxIgogICAgLy8gICAgICMgcGF5IHNwaW4gY29zdCArIGV4dHJhIHBheW1lbnQgaWYgbmV0d29yawogICAgLy8gICAgIHNlbGYuX2Vuc3VyZV9zcGluX2Nvc3RfcGF5bWVudCh1c2VyX2lkLCBVSW50NjQoMCkpCiAgICAvLyAgICAgIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vICAgICBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIC8vICAgICBzZWxmLl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcCh1c2VyX2lkKQogICAgLy8gICAgICMgKiBib251cyBzcGVjaWZpYyB1c2VyIHVwZGF0ZXMgKgogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9ib251c19zcGluKHVzZXJfaWQsIFVJbnQ2NCgxKSkKICAgIC8vICAgICAjIGVtaXQgYmV0IHBsYWNlZCBldmVudAogICAgLy8gICAgIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICAgICAgdXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICAjIHJldHVybiBiZXQga2V5CiAgICAvLyAgICAgcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fY3JlZGl0KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgdXNlcl9pZDogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgc3Bpbl9pbmRleDogVUludDY0LAogICAgLy8gICAgIG1vZGU6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgLy8gICAgICMgbm9uLWJvbnVzIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA9PSBVSW50NjQoMCksICJib251cyBzcGluIGlzIG5vdCAwIgogICAgLy8gICAgICMgY3JlZGl0IHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBhc3NlcnQgdXNlci5jcmVkaXQubmF0aXZlID49IGJldF9hbW91bnQsICJjcmVkaXQgaXMgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICAvLyAgICAgIyBhc3NlcnQgYmV0X2Ftb3VudCA9PSBzZWxmLmNyZWRpdF9iZXRfY29zdCwgImJldCBhbW91bnQgaXMgY3JlZGl0IGJldCBjb3N0IgogICAgLy8gICAgIGFzc2VydCBiZXRfYW1vdW50ID09IFVJbnQ2NCg0MCksICJiZXQgYW1vdW50IGlzIDQwIgogICAgLy8gICAgICMgcGF5IHNwaW4gY29zdCArIGV4dHJhIHBheW1lbnQgaWYgbmV0d29yawogICAgLy8gICAgIHNlbGYuX2Vuc3VyZV9zcGluX2Nvc3RfcGF5bWVudCh1c2VyX2lkLCBVSW50NjQoMCkpCiAgICAvLyAgICAgIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vICAgICBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIC8vICAgICBzZWxmLl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcCh1c2VyX2lkKQogICAgLy8gICAgICMgKiBjcmVkaXQgc3BlY2lmaWMgdXBkYXRlcyAqCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2NyZWRpdCh1c2VyX2lkLCBiZXRfYW1vdW50KQogICAgLy8gICAgICMgc2VsZi5qYWNrcG90X2NyZWRpdCArPSBzZWxmLmphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbgogICAgLy8gICAgICMgZW1pdCBiZXQgcGxhY2VkIGV2ZW50CiAgICAvLyAgICAgc2VsZi5fZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgcmV0dXJuIGJldCBrZXkKICAgIC8vICAgICByZXR1cm4gYmV0X2tleV9pbmZvLmJldF9rZXkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9uZXR3b3JrKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgLy8gCiAgICAvLyAgICAgIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gICAgIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID09IFVJbnQ2NCgwKSwgImJvbnVzIHNwaW4gaXMgbm90IDAiCiAgICAvLyAKICAgIC8vICAgICAjIG5ldHdvcmsgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gICAgIGJhc2VfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdAogICAgLy8gICAgIGtpY2tlcl9iZXRfY29zdCA9IHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0ICsgc2VsZi5uZXR3b3JrX2tpY2tlcl9leHRyYQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQgPT0gYmFzZV9iZXRfY29zdCBvciBiZXRfYW1vdW50ID09IGtpY2tlcl9iZXRfY29zdAogICAgLy8gICAgICksICJiZXQgYW1vdW50IG11c3QgYmUgYmFzZSBiZXQgY29zdCBvciBraWNrZXIgYmV0IGNvc3QiCiAgICAvLyAgICAgIyBuZXR3b3JrIGFuZCB0b2tlbiBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLm5ldHdvcmtfbWluX2JhbmtfYW1vdW50CiAgICAvLyAgICAgKSwgImJhbGFuY2UgdG90YWwgbXVzdCBiZSBncmVhdGVyIHRoYW4gbWluIGJhbmsgYW1vdW50IgogICAgLy8gICAgICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyAgICAgYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgY2FsY3VsYXRlIGZlZXMKICAgIC8vICAgICBmZWVfdHJlYXN1cnkgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfdHJlYXN1cnlfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIC8vICAgICBmZWVfbWFya2V0aW5nID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX21hcmtldGluZ19icHMgLy8gVUludDY0KDEwMDAwKQogICAgLy8gICAgICMgY2FsY3VsYXRlIHRvdGFsIGZlZXMKICAgIC8vICAgICB0b3RhbF9mZWVzID0gZmVlX3RyZWFzdXJ5ICsgZmVlX21hcmtldGluZwogICAgLy8gICAgICMgY2FsY3VsYXRlIG5ldCBiZXQgYW1vdW50CiAgICAvLyAgICAgYXNzZXJ0IHRvdGFsX2ZlZXMgPD0gYmV0X2Ftb3VudCwgInRvdGFsIGZlZXMgbXVzdCBiZSBsZXNzIHRoYW4gYmV0IGFtb3VudCIKICAgIC8vICAgICBuZXRfYmV0X2Ftb3VudCA9IGJldF9hbW91bnQgLSB0b3RhbF9mZWVzCiAgICAvLyAgICAgIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vICAgICBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgbmV0X2JldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgKiBuZXR3b3JrIHNwZWNpZmljIGZlZSBwYXlvdXQgKgogICAgLy8gICAgIGlmIGZlZV90cmVhc3VyeSA+IDA6CiAgICAvLyAgICAgICAgIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICAgICAgICAgIHJlY2VpdmVyPXNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MsCiAgICAvLyAgICAgICAgICAgICBhbW91bnQ9ZmVlX3RyZWFzdXJ5LAogICAgLy8gICAgICAgICApLnN1Ym1pdCgpCiAgICAvLyAgICAgaWYgZmVlX21hcmtldGluZyA+IDA6CiAgICAvLyAgICAgICAgIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICAgICAgICAgIHJlY2VpdmVyPXNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzLAogICAgLy8gICAgICAgICAgICAgYW1vdW50PWZlZV9tYXJrZXRpbmcsCiAgICAvLyAgICAgICAgICkuc3VibWl0KCkKICAgIC8vICAgICAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIC8vICAgICAjIGNvbW1vbiB1c2VyIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfc3Bpbl9jb3VudCh1c2VyX2lkKQogICAgLy8gICAgICMgKiBuZXR3b3JrIHNwZWNpZmljIHVwZGF0ZXMgKgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKG5ldF9iZXRfYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShuZXRfYmV0X2Ftb3VudCkKICAgIC8vICAgICAjIGxvY2t1cF9hbW91bnQgPSBzZWxmLl9sb2NrdXBfYW1vdW50KG5ldF9iZXRfYW1vdW50KSArIHNlbGYuamFja3BvdF9uZXR3b3JrCiAgICAvLyAgICAgbG9ja3VwX2Ftb3VudCA9IHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGxvY2t1cF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGxvY2t1cF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uCiAgICAvLyAgICAgIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vICAgICBzZWxmLl9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgIyByZXR1cm4gYmV0IGtleQogICAgLy8gICAgIHJldHVybiBiZXRfa2V5X2luZm8uYmV0X2tleS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX3Rva2VuKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgLy8gCiAgICAvLyAgICAgIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gICAgIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID09IFVJbnQ2NCgwKSwgImJvbnVzIHNwaW4gaXMgbm90IDAiCiAgICAvLyAKICAgIC8vICAgICAjIHRva2VuIGFuZCBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBiYXNlX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0CiAgICAvLyAgICAga2lja2VyX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ICsgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiZXRfYW1vdW50ID09IGJhc2VfYmV0X2Nvc3Qgb3IgYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIC8vICAgICApLCAiYmV0IGFtb3VudCBtdXN0IGJlIGJhc2UgYmV0IGNvc3Qgb3Iga2lja2VyIGJldCBjb3N0IgogICAgLy8gICAgICMgKiB0b2tlbiBzcGVjaWZpYyBhc3NlcnRpb25zICoKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCkKICAgIC8vICAgICAgICAgPj0gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICAvLyAgICAgIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vICAgICBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgZmVlcwogICAgLy8gICAgIGZlZV90cmVhc3VyeSA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV90cmVhc3VyeV9icHMgLy8gVUludDY0KDEwMDAwKQogICAgLy8gICAgIGZlZV9tYXJrZXRpbmcgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfbWFya2V0aW5nX2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICAvLyAgICAgIyAqIHRva2VuIHNwZWNpZmljIGZlZSBwYXlvdXQgKgogICAgLy8gICAgIGlmIGZlZV90cmVhc3VyeSA+IDA6CiAgICAvLyAgICAgICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgICAgICBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQyNTYoZmVlX3RyZWFzdXJ5KSwKICAgIC8vICAgICAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICBpZiBmZWVfbWFya2V0aW5nID4gMDoKICAgIC8vICAgICAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgICAgIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQyNTYoZmVlX21hcmtldGluZyksCiAgICAvLyAgICAgICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgdG90YWwgZmVlcwogICAgLy8gICAgIHRvdGFsX2ZlZXMgPSBmZWVfdHJlYXN1cnkgKyBmZWVfbWFya2V0aW5nCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgbmV0IGJldCBhbW91bnQKICAgIC8vICAgICBhc3NlcnQgdG90YWxfZmVlcyA8PSBiZXRfYW1vdW50LCAidG90YWwgZmVlcyBtdXN0IGJlIGxlc3MgdGhhbiBiZXQgYW1vdW50IgogICAgLy8gICAgIG5ldF9iZXRfYW1vdW50ID0gYmV0X2Ftb3VudCAtIHRvdGFsX2ZlZXMKICAgIC8vICAgICAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gICAgIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIC8vICAgICAjICogbmV0d29yayBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBsb2NrdXBfYW1vdW50ID0gc2VsZi5fbG9ja3VwX2Ftb3VudChuZXRfYmV0X2Ftb3VudCkgKyBzZWxmLmphY2twb3RfdG9rZW4KICAgIC8vICAgICBsb2NrdXBfYW1vdW50ID0gc2VsZi5fbG9ja3VwX2Ftb3VudChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQoc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobG9ja3VwX2Ftb3VudCkpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChsb2NrdXBfYW1vdW50KQogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmphY2twb3RfdG9rZW4gKz0gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbgogICAgLy8gICAgICMgZW1pdCBiZXQgcGxhY2VkIGV2ZW50CiAgICAvLyAgICAgc2VsZi5fZW1pdF9iZXRfcGxhY2VkKAogICAgLy8gICAgICAgICB1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICAjIHJldHVybiBiZXQga2V5CiAgICAvLyAgICAgcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2t1cF9hbW91bnQoc2VsZiwgYmV0X2Ftb3VudDogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgTG9ja3VwIGFtb3VudCBpcyB0aGUgYmV0IGFtb3VudCBtdWx0aXBsaWVkIGJ5IHRoZSBtYXggcGF5b3V0IG11bHRpcGxpZXIgZXhjbHVkaW5nIHRoZSBqYWNrcG90LgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgcmV0dXJuIGJldF9hbW91bnQgKiBVSW50NjQoOTAwKQogICAgLy8gICAgIHJldHVybiBiZXRfYW1vdW50CiAgICAvLyAKICAgIC8vICMgY2xhaW0KICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2xhaW0gYWxsIGJldHMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KSAgIyBsb2NhbCBwcm9ncmFtIGNvc3Qgd2FzIDk3ODcKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fY2xhaW0oYmV0X2tleS5ieXRlcykpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ2xhaW0gYmV0CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEyOAogICAgLy8gYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgYXNzZXJ0IC8vIGJldCBub3QgZm91bmQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzMAogICAgLy8gYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzMQogICAgLy8gbW9kZSA9IGJldC5tb2RlLm5hdGl2ZQogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzMwogICAgLy8gaWYgbW9kZSA9PSBVSW50NjQoMik6ICAjIG5ldHdvcmsKICAgIGludCAyCiAgICA9PQogICAgZHVwCiAgICBieiBfY2xhaW1fZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzNAogICAgLy8gbG9ja3VwX3JlbGVhc2UgPSBzZWxmLl9sb2NrdXBfYW1vdW50KGJldC5iZXRfYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAxCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBjYWxsc3ViIF9sb2NrdXBfYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzUKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChsb2NrdXBfcmVsZWFzZSkKICAgIGR1cAogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzYKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShsb2NrdXBfcmVsZWFzZSkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgYiBfY2xhaW1fYWZ0ZXJfaWZfZWxzZUA1CgpfY2xhaW1fZWxzZV9ib2R5QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzcKICAgIC8vIGVsaWYgbW9kZSA9PSBVSW50NjQoNCk6ICAjIHRva2VuCiAgICBmcmFtZV9kaWcgMwogICAgaW50IDQKICAgID09CiAgICBieiBfY2xhaW1fYWZ0ZXJfaWZfZWxzZUA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzgKICAgIC8vIGxvY2t1cF9yZWxlYXNlID0gc2VsZi5fbG9ja3VwX2Ftb3VudChiZXQuYmV0X2Ftb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgMQogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY2FsbHN1YiBfbG9ja3VwX2Ftb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTQwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChsb2NrdXBfcmVsZWFzZSkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTQwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChsb2NrdXBfcmVsZWFzZSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICBzd2FwCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzktNTE0MQogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkKAogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KGxvY2t1cF9yZWxlYXNlKQogICAgLy8gKQogICAgZHVwCiAgICBjb3ZlciAyCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0MwogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobG9ja3VwX3JlbGVhc2UpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0MwogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobG9ja3VwX3JlbGVhc2UpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTQyLTUxNDQKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChsb2NrdXBfcmVsZWFzZSkKICAgIC8vICkKICAgIHN3YXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQoKX2NsYWltX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0Ni01MTQ5CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIC8vICAgICBhbW91bnQ9c2VsZi5fc3Bpbl9jb3N0KCksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNDcKICAgIC8vIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNDgKICAgIC8vIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSwKICAgIGNhbGxzdWIgX3NwaW5fY29zdAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0NgogICAgLy8gaXR4bi5QYXltZW50KAogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNDYtNTE0OQogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50PXNlbGYuX3NwaW5fY29zdCgpLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1MQogICAgLy8gaWYgR2xvYmFsLnJvdW5kID4gYmV0LmNsYWltX3JvdW5kLm5hdGl2ZSArIFVJbnQ2NChNQVhfQ0xBSU1fUk9VTkRfREVMVEEpOgogICAgZ2xvYmFsIFJvdW5kCiAgICBmcmFtZV9kaWcgMQogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIGJ0b2kKICAgIGludCAxMDAwCiAgICArCiAgICA+CiAgICBieiBfY2xhaW1fYWZ0ZXJfaWZfZWxzZUA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTMKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1NgogICAgLy8gd2hvPWJldC53aG8sCiAgICBmcmFtZV9kaWcgMQogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTcKICAgIC8vIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1OAogICAgLy8gc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1NS01MTYyCiAgICAvLyBCZXRDbGFpbWVkKAogICAgLy8gICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgMgogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgMAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjEKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTUtNTE2MgogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gKQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTQtNTE2MwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldENsYWltZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjQKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2FmdGVyX2lmX2Vsc2VAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2NgogICAgLy8gaWYgbW9kZSA9PSBVSW50NjQoMCk6ICAjIGJvbnVzCiAgICBmcmFtZV9kaWcgMwogICAgYm56IF9jbGFpbV9lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2NwogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX2JvbnVzKGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2NsYWltX2JvbnVzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2OAogICAgLy8gZWxpZiBtb2RlID09IFVJbnQ2NCgxKTogICMgY3JlZGl0CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDEKICAgID09CiAgICBieiBfY2xhaW1fZWxzZV9ib2R5QDEyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjkKICAgIC8vIHJldHVybiBzZWxmLl9jbGFpbV9jcmVkaXQoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW1fY3JlZGl0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUAxMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE3MAogICAgLy8gZWxpZiBtb2RlID09IFVJbnQ2NCgyKTogICMgbmV0d29yawogICAgZnJhbWVfZGlnIDQKICAgIGJ6IF9jbGFpbV9lbHNlX2JvZHlAMTQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE3MQogICAgLy8gcmV0dXJuIHNlbGYuX2NsYWltX25ldHdvcmsoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW1fbmV0d29yawogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9lbHNlX2JvZHlAMTQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzIKICAgIC8vIGVsaWYgbW9kZSA9PSBVSW50NjQoNCk6ICAjIHRva2VuCiAgICBmcmFtZV9kaWcgMwogICAgaW50IDQKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBtb2RlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzMKICAgIC8vIHJldHVybiBzZWxmLl9jbGFpbV90b2tlbihiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbV90b2tlbgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTUyLTQ1NTMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTU0CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTYKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU1NS00NTU3CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTU5CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTgtNDU2MAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAxNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTYxCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2NAogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NjUKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2NgogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2My00NTY3CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTYyLTQ1NjgKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkKHRva2VuX2FwcF9pZDogdWludDY0LCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjgxLTQyODQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4NQogICAgLy8gdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4NwogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDY0IDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgIGI+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjg2LTQyODgKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgInRva2VuIGJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gdG9rZW4gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjkwCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgYi0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4OS00MjkxCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiA2NAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjkyCiAgICAvLyBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI5NQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI5NgogICAgLy8gYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjk3CiAgICAvLyBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgNjQgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyOTQtNDI5OAogICAgLy8gVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjkzLTQyOTkKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJUb2tlbkJhbGFuY2VzVXBkYXRlZCh1aW50MjU2LHVpbnQyNTYsdWludDI1NikiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2NsYWltX2JvbnVzKGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbV9ib251czoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE3Ny01MTc4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbV9ib251cyhzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICBpbnQgMAogICAgZHVwCiAgICBieXRlICIiCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4MgogICAgLy8gYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxODQKICAgIC8vIHNwaW5fcmVzdWx0X2J5dGVzID0gc2VsZi5fZ2V0X3NwaW5fcmVzdWx0cyhiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfc3Bpbl9yZXN1bHRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxODcKICAgIC8vIHBheW91dCA9IHNwaW5fcmVzdWx0LnBheW91dC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxODgKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzcGluX3Jlc3VsdC5ib251c19zcGluc19hd2FyZGVkLm5hdGl2ZQogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE5MAogICAgLy8gaWYgYm9udXNfc3BpbnNfYXdhcmRlZCA+IDA6CiAgICBieiBfY2xhaW1fYm9udXNfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTEKICAgIC8vIHNlbGYuX2luY3JlbWVudF9ib251c19zcGluKGJldC53aG8ubmF0aXZlLCBib251c19zcGluc19hd2FyZGVkKQogICAgZnJhbWVfZGlnIDQKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyA2CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYm9udXNfc3BpbgoKX2NsYWltX2JvbnVzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE5NAogICAgLy8gcGF5b3V0X2Ftb3VudCA9IHBheW91dCAqIHBheW91dF9tdWx0aXBsaWVyIC8vIFVJbnQ2NCgxMDApCiAgICBmcmFtZV9kaWcgNQogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTMKICAgIC8vIHBheW91dF9tdWx0aXBsaWVyID0gVUludDY0KDE3NSkgICMgZXF1aXZhbGVudCB0byAxLjc1eCAoMTc1IC8gMTAwKQogICAgaW50IDE3NQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTk0CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KDEwMCkKICAgICoKICAgIGludCAxMDAKICAgIC8KICAgIGR1cAogICAgZnJhbWVfYnVyeSAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTYKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIwMAogICAgLy8gd2hvPWJldC53aG8sCiAgICBmcmFtZV9kaWcgNAogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjAxCiAgICAvLyBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMDIKICAgIC8vIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICBkdXAKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIwMwogICAgLy8gbW9kZT1iZXQubW9kZSwKICAgIGR1cAogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjA0CiAgICAvLyBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMDUKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXRfYW1vdW50KSwKICAgIHVuY292ZXIgNQogICAgaXRvYgogICAgZHVwCiAgICBjb3ZlciA2CiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE5OS01MjA2CiAgICAvLyBCZXRDbGFpbWVkKAogICAgLy8gICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0X2Ftb3VudCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTgtNTIwNwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXRfYW1vdW50KSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldENsYWltZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMDkKICAgIC8vIGlmIHBheW91dCA+IDA6CiAgICBieiBfY2xhaW1fYm9udXNfYWZ0ZXJfaWZfZWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjEwCiAgICAvLyB0b2tlbl9lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoNCkgPT0gVUludDY0KDQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA4CiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjEwCiAgICAvLyB0b2tlbl9lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoNCkgPT0gVUludDY0KDQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDQKICAgICYKICAgIGludCA0CiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjExCiAgICAvLyBuZXR3b3JrX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgyKSA9PSBVSW50NjQoMikKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDgKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTEKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgyKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCAyCiAgICAmCiAgICBpbnQgMgogICAgPT0KICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjEyCiAgICAvLyBpZiB0b2tlbl9lbmFibGVkOgogICAgYnogX2NsYWltX2JvbnVzX2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTMKICAgIC8vIHBheW91dF90b2tlbiA9IHBheW91dF9hbW91bnQgKiBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjMKICAgIC8vIHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCA9IEJpZ1VJbnQoNDAgKiAxMCoqNikKICAgIGJ5dGUgInRva2VuX2Jhc2VfYmV0X2Nvc3QiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTMKICAgIC8vIHBheW91dF90b2tlbiA9IHBheW91dF9hbW91bnQgKiBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0IGV4aXN0cwogICAgZnJhbWVfZGlnIDEKICAgIGIqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTQtNTIxOQogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjE3CiAgICAvLyBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGRpZyAxCiAgICBifAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjE4CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTgKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMTQtNTIxOQogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgZnJhbWVfZGlnIDAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBkdXAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMjAKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMjAKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGRpZyAyCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIyMQogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZi50b2tlbl9hcHBfaWQsIHBheW91dF90b2tlbikKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjIxCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIHVuY292ZXIgMgogICAgY2FsbHN1YiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIyMwogICAgLy8gYXJjNC5VSW50MjU2KHBheW91dF90b2tlbikuYnl0ZXNbLTg6XQogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGRpZyAxCiAgICBzd2FwCiAgICAtCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMjItNTIyNAogICAgLy8gc21hbGxfcGF5b3V0X3Rva2VuID0gYXJjNC5VSW50NjQuZnJvbV9ieXRlcygKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKS5ieXRlc1stODpdCiAgICAvLyApLm5hdGl2ZQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjI1CiAgICAvLyByZXR1cm4gc21hbGxfcGF5b3V0X3Rva2VuCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2JvbnVzX2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjI2CiAgICAvLyBlbGlmIG5ldHdvcmtfZW5hYmxlZDoKICAgIGZyYW1lX2RpZyAyCiAgICBieiBfY2xhaW1fYm9udXNfYWZ0ZXJfaWZfZWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjI3CiAgICAvLyBwYXlvdXRfbmV0d29yayA9IHBheW91dF9hbW91bnQgKiBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxOQogICAgLy8gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfYmFzZV9iZXRfY29zdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIyNwogICAgLy8gcGF5b3V0X25ldHdvcmsgPSBwYXlvdXRfYW1vdW50ICogc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgZXhpc3RzCiAgICBmcmFtZV9kaWcgMwogICAgKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjI4LTUyMzEKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9cGF5b3V0X25ldHdvcmssCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICBkdXAKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBmcmFtZV9kaWcgMAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjI4CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIyOC01MjMxCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsCiAgICAvLyAgICAgYW1vdW50PXBheW91dF9uZXR3b3JrLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIzMgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW91dF9uZXR3b3JrKQogICAgZHVwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIzMwogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwocGF5b3V0X25ldHdvcmspCiAgICBkdXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMzQKICAgIC8vIHJldHVybiBwYXlvdXRfbmV0d29yawogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9jbGFpbV9ib251c19hZnRlcl9pZl9lbHNlQDExOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjM2CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3NwaW5fcmVzdWx0cyhiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfc3Bpbl9yZXN1bHRzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzkwLTUzOTEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9zcGluX3Jlc3VsdHMoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzOTIKICAgIC8vIGJldCA9IHNlbGYuYmV0W2JldF9rZXldLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZ2V0CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iZXQgZW50cnkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzOTMKICAgIC8vIHNlZWQgPSBzZWxmLl9nZXRfYmxvY2tfc2VlZChiZXQuY2xhaW1fcm91bmQubmF0aXZlKSAgIyBibG9jayBzZWVkCiAgICBkdXAKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzOTQKICAgIC8vIGdyaWRfc2VlZCA9IG9wLnNoYTI1NihzZWVkICsgYmV0LnNwaW5faW5kZXguYnl0ZXMpICAjIGJsb2NrIHNlZWQgKyBzcGluIGluZGV4CiAgICBkaWcgMQogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM5NQogICAgLy8gYm9udXNfc3BpbiA9IGJldC5tb2RlLm5hdGl2ZSA9PSBVSW50NjQoMCkKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICEKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM5NgogICAgLy8gZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChncmlkX3NlZWQpCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQwMAogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmssCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA0CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmsiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0MDAKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3RfbmV0d29yayBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM5Ny01NDAxCiAgICAvLyByZXR1cm4gc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoCiAgICAvLyAgICAgZ3JpZCwKICAgIC8vICAgICBib251c19zcGluLAogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrLAogICAgLy8gKQogICAgc3dhcAogICAgY292ZXIgMgogICAgY2FsbHN1YiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfYm9udXNfc3BpbihhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfYm9udXNfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY4MS00NjgyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjgzCiAgICAvLyB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY4NAogICAgLy8gdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIGR1cAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICBpdG9iCiAgICByZXBsYWNlMiA0MAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njg1CiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkOiB1aW50NjQsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyMi00MzI1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyNgogICAgLy8gdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMyOAogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgYj49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMjctNDMyOQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJ0b2tlbiBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gdG9rZW4gYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzEKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICBmcmFtZV9kaWcgLTEKICAgIGItCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzAtNDMzMgogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIHJlcGxhY2UyIDMyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzMKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzM2CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzM3CiAgICAvLyBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzgKICAgIC8vIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDMzNS00MzM5CiAgICAvLyBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQzMzQtNDM0MAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlRva2VuQmFsYW5jZXNVcGRhdGVkKHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW1fY3JlZGl0KGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbV9jcmVkaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMzgtNTIzOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fY3JlZGl0KHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIGludCAwCiAgICBieXRlICIiCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI0MwogICAgLy8gYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDUKICAgIC8vIHNwaW5fcmVzdWx0X2J5dGVzID0gc2VsZi5fZ2V0X3NwaW5fcmVzdWx0cyhiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfc3Bpbl9yZXN1bHRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDgKICAgIC8vIHBheW91dCA9IHNwaW5fcmVzdWx0LnBheW91dC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNDkKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzcGluX3Jlc3VsdC5ib251c19zcGluc19hd2FyZGVkLm5hdGl2ZQogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI1MQogICAgLy8gaWYgYm9udXNfc3BpbnNfYXdhcmRlZCA+IDA6CiAgICBieiBfY2xhaW1fY3JlZGl0X2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjUyCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYm9udXNfc3BpbihiZXQud2hvLm5hdGl2ZSwgYm9udXNfc3BpbnNfYXdhcmRlZCkKICAgIGZyYW1lX2RpZyAzCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgNQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JvbnVzX3NwaW4KCl9jbGFpbV9jcmVkaXRfYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjU1CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KDEwMCkKICAgIGZyYW1lX2RpZyA0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI1NAogICAgLy8gcGF5b3V0X211bHRpcGxpZXIgPSBVSW50NjQoMTAwKSAgIyBlcXVpdmFsZW50IHRvIDF4ICgxMDAgLyAxMDApCiAgICBpbnQgMTAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNTUKICAgIC8vIHBheW91dF9hbW91bnQgPSBwYXlvdXQgKiBwYXlvdXRfbXVsdGlwbGllciAvLyBVSW50NjQoMTAwKQogICAgKgogICAgaW50IDEwMAogICAgLwogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNTcKICAgIC8vIGRlbCBzZWxmLmJldFtiZXRfa2V5XQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI2MQogICAgLy8gd2hvPWJldC53aG8sCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjYyCiAgICAvLyBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNjMKICAgIC8vIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICBkdXAKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI2NAogICAgLy8gbW9kZT1iZXQubW9kZSwKICAgIGR1cAogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjY1CiAgICAvLyBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNjYKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgZGlnIDUKICAgIGl0b2IKICAgIGNvdmVyIDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI2MC01MjY3CiAgICAvLyBCZXRDbGFpbWVkKAogICAgLy8gICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI1OS01MjY4CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0Q2xhaW1lZCgKICAgIC8vICAgICAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRDbGFpbWVkKGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjcwCiAgICAvLyBpZiBwYXlvdXQgPiAwOgogICAgYnogX2NsYWltX2NyZWRpdF9hZnRlcl9pZl9lbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzEKICAgIC8vIHRva2VuX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDgKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzEKICAgIC8vIHRva2VuX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgNAogICAgJgogICAgaW50IDQKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzIKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgyKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwOAogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI3MgogICAgLy8gbmV0d29ya19lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KDIpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDIKICAgICYKICAgIGludCAyCiAgICA9PQogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzMKICAgIC8vIGlmIHRva2VuX2VuYWJsZWQ6CiAgICBieiBfY2xhaW1fY3JlZGl0X2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzQKICAgIC8vIHBheW91dF90b2tlbiA9IHBheW91dF9hbW91bnQgKiBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QKICAgIGZyYW1lX2RpZyAyCiAgICBpdG9iCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIzCiAgICAvLyBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjc0CiAgICAvLyBwYXlvdXRfdG9rZW4gPSBwYXlvdXRfYW1vdW50ICogc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCBleGlzdHMKICAgIGIqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzUtNTI4MAogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjc4CiAgICAvLyBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGRpZyAxCiAgICBifAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjc5CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzkKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzUtNTI4MAogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgZnJhbWVfZGlnIDAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBkdXAKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODEKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODEKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGRpZyAyCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI4MgogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZi50b2tlbl9hcHBfaWQsIHBheW91dF90b2tlbikKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjgyCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCwgcGF5b3V0X3Rva2VuKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIHVuY292ZXIgMgogICAgY2FsbHN1YiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI4NAogICAgLy8gYXJjNC5VSW50MjU2KHBheW91dF90b2tlbikuYnl0ZXNbLTg6XQogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGRpZyAxCiAgICBzd2FwCiAgICAtCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODMtNTI4NQogICAgLy8gc21hbGxfcGF5b3V0X3Rva2VuID0gYXJjNC5VSW50NjQuZnJvbV9ieXRlcygKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X3Rva2VuKS5ieXRlc1stODpdCiAgICAvLyApLm5hdGl2ZQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg2CiAgICAvLyByZXR1cm4gc21hbGxfcGF5b3V0X3Rva2VuCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2NyZWRpdF9lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI4OAogICAgLy8gZWxpZiBuZXR3b3JrX2VuYWJsZWQ6CiAgICBmcmFtZV9kaWcgMQogICAgYnogX2NsYWltX2NyZWRpdF9hZnRlcl9pZl9lbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODkKICAgIC8vIHBheW91dF9uZXR3b3JrID0gcGF5b3V0X2Ftb3VudCAqIHNlbGYubmV0d29ya19iYXNlX2JldF9jb3N0CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE5CiAgICAvLyBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgYnl0ZSAibmV0d29ya19iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg5CiAgICAvLyBwYXlvdXRfbmV0d29yayA9IHBheW91dF9hbW91bnQgKiBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCBleGlzdHMKICAgIGZyYW1lX2RpZyAyCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOTAtNTI5MwogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWJldC53aG8ubmF0aXZlLAogICAgLy8gICAgIGFtb3VudD1wYXlvdXRfbmV0d29yaywKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIGR1cAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGZyYW1lX2RpZyAwCiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOTAKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjkwLTUyOTMKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9cGF5b3V0X25ldHdvcmssCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjk0CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUocGF5b3V0X25ldHdvcmspCiAgICBkdXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjk1CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChwYXlvdXRfbmV0d29yaykKICAgIGR1cAogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI5NgogICAgLy8gcmV0dXJuIHBheW91dF9uZXR3b3JrCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2NyZWRpdF9hZnRlcl9pZl9lbHNlQDExOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjk4CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW1fbmV0d29yayhiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fbmV0d29yazoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwMC01MzAxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbV9uZXR3b3JrKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIGJ5dGUgIiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwNQogICAgLy8gYmV0ID0gc2VsZi5fZ2V0X2JldChiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwNwogICAgLy8gc3Bpbl9yZXN1bHRfYnl0ZXMgPSBzZWxmLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9zcGluX3Jlc3VsdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxMAogICAgLy8gcGF5b3V0ID0gc3Bpbl9yZXN1bHQucGF5b3V0Lm5hdGl2ZSAqIGJldC5iZXRfYW1vdW50Lm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHVuY292ZXIgMgogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBjb3ZlciAzCiAgICBidG9pCiAgICAqCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMTEKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzcGluX3Jlc3VsdC5ib251c19zcGluc19hd2FyZGVkLm5hdGl2ZQogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxMwogICAgLy8gaWYgYm9udXNfc3BpbnNfYXdhcmRlZCA+IDA6CiAgICBieiBfY2xhaW1fbmV0d29ya19hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxNAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JvbnVzX3NwaW4oYmV0Lndoby5uYXRpdmUsIGJvbnVzX3NwaW5zX2F3YXJkZWQpCiAgICBmcmFtZV9kaWcgMQogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9ib251c19zcGluCgpfY2xhaW1fbmV0d29ya19hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMTcKICAgIC8vIHBheW91dF9hbW91bnQgPSBwYXlvdXQgKiBwYXlvdXRfbXVsdGlwbGllciAvLyBVSW50NjQoMTAwKQogICAgZnJhbWVfZGlnIDMKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzE2CiAgICAvLyBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NCgxMDApICAjIGVxdWl2YWxlbnQgdG8gMXggKDEwMCAvIDEwMCkKICAgIGludCAxMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxNwogICAgLy8gcGF5b3V0X2Ftb3VudCA9IHBheW91dCAqIHBheW91dF9tdWx0aXBsaWVyIC8vIFVJbnQ2NCgxMDApCiAgICAqCiAgICBpbnQgMTAwCiAgICAvCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxOQogICAgLy8gaWYgcGF5b3V0ID4gMDoKICAgIGJ6IF9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzIwLTUzMjMKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9cGF5b3V0X2Ftb3VudCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMyMQogICAgLy8gcmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsCiAgICBmcmFtZV9kaWcgMQogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGR1cAogICAgY292ZXIgMgogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMyMAogICAgLy8gaXR4bi5QYXltZW50KAogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMjAtNTMyMwogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWJldC53aG8ubmF0aXZlLAogICAgLy8gICAgIGFtb3VudD1wYXlvdXRfYW1vdW50LAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMyNAogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW91dF9hbW91bnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzI1CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChwYXlvdXRfYW1vdW50KQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKCl9jbGFpbV9uZXR3b3JrX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMyNwogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzMxCiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMzMwogICAgLy8gc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIGR1cAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzM0CiAgICAvLyBtb2RlPWJldC5tb2RlLAogICAgZHVwCiAgICBleHRyYWN0IDQ4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMzUKICAgIC8vIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMzNgogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICBmcmFtZV9kaWcgMwogICAgaXRvYgogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzMwLTUzMzcKICAgIC8vIEJldENsYWltZWQoCiAgICAvLyAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMjktNTMzOAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmV0Q2xhaW1lZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM0MAogICAgLy8gcmV0dXJuIHBheW91dF9hbW91bnQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbV90b2tlbihiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNDItNTM0MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fdG9rZW4oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgYnl0ZSAiIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzQ3CiAgICAvLyBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM0OQogICAgLy8gc3Bpbl9yZXN1bHRfYnl0ZXMgPSBzZWxmLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9zcGluX3Jlc3VsdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM1MgogICAgLy8gcGF5b3V0ID0gc3Bpbl9yZXN1bHQucGF5b3V0Lm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM1MwogICAgLy8gYm9udXNfc3BpbnNfYXdhcmRlZCA9IHNwaW5fcmVzdWx0LmJvbnVzX3NwaW5zX2F3YXJkZWQubmF0aXZlCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzU1CiAgICAvLyBpZiBib251c19zcGluc19hd2FyZGVkID4gMDoKICAgIGJ6IF9jbGFpbV90b2tlbl9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM1NgogICAgLy8gc2VsZi5faW5jcmVtZW50X2JvbnVzX3NwaW4oYmV0Lndoby5uYXRpdmUsIGJvbnVzX3NwaW5zX2F3YXJkZWQpCiAgICBmcmFtZV9kaWcgMQogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDMKICAgIGNhbGxzdWIgX2luY3JlbWVudF9ib251c19zcGluCgpfY2xhaW1fdG9rZW5fYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzU5CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KDEwMCkKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM1OAogICAgLy8gcGF5b3V0X211bHRpcGxpZXIgPSBVSW50NjQoMTAwKSAgIyBlcXVpdmFsZW50IHRvIDF4ICgxMDAgLyAxMDApCiAgICBpbnQgMTAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNTkKICAgIC8vIHBheW91dF9hbW91bnQgPSBwYXlvdXQgKiBwYXlvdXRfbXVsdGlwbGllciAvLyBVSW50NjQoMTAwKQogICAgKgogICAgaW50IDEwMAogICAgLwogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNjEKICAgIC8vIGlmIHBheW91dCA+IDA6CiAgICBieiBfY2xhaW1fdG9rZW5fYWZ0ZXJfaWZfZWxzZUA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNjItNTM2NwogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X2Ftb3VudCksCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM2NAogICAgLy8gYmV0LndobywKICAgIGZyYW1lX2RpZyAxCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNjUKICAgIC8vIGFyYzQuVUludDI1NihwYXlvdXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAwCiAgICBpdG9iCiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBkaWcgMQogICAgYnwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM2NgogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzY2CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzYyLTUzNjcKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGJldC53aG8sCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KHBheW91dF9hbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImFyYzIwMF90cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpYm9vbCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzY5CiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNjkKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzY4LTUzNzAKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgLy8gKQogICAgZGlnIDEKICAgIGNhbGxzdWIgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzcyCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMgogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNzIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzcxLTUzNzMKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICAvLyApCiAgICBzd2FwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbAoKX2NsYWltX3Rva2VuX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM3NQogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mzc5CiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM4MAogICAgLy8gYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzgxCiAgICAvLyBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzODIKICAgIC8vIG1vZGU9YmV0Lm1vZGUsCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM4MwogICAgLy8gY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mzg0CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIGZyYW1lX2RpZyAyCiAgICBpdG9iCiAgICBjb3ZlciA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNzgtNTM4NQogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzNzctNTM4NgogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmV0Q2xhaW1lZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTM4OAogICAgLy8gcmV0dXJuIHBheW91dF9hbW91bnQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdyYW50X2ZyZWVfc3BpbnMoYWRkcmVzczogYnl0ZXMsIGNvdW50OiBieXRlcykgLT4gdm9pZDoKZ3JhbnRfZnJlZV9zcGluczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTUzNS01NTM2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBncmFudF9mcmVlX3NwaW5zKHNlbGYsIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywgY291bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1MzcKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTM4CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYm9udXNfc3BpbihhZGRyZXNzLm5hdGl2ZSwgY291bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9ib251c19zcGluCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5zZXRfc3RvcmFnZV9hcHBfaWQoYXBwX2lkOiBieXRlcykgLT4gdm9pZDoKc2V0X3N0b3JhZ2VfYXBwX2lkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTgxLTU1ODIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9zdG9yYWdlX2FwcF9pZChzZWxmLCBhcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU1ODMKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NTg0CiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gYXBwX2lkLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzQtMzYzNgogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTU4NAogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IGFwcF9pZC5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLmNvbnRyYWN0cy51cGRhdGUuVXBncmFkZWFibGUuY29udHJhY3QuVXBncmFkZWFibGUuc2V0X3ZlcnNpb24oY29udHJhY3RfdmVyc2lvbjogYnl0ZXMsIGRlcGxveW1lbnRfdmVyc2lvbjogYnl0ZXMpIC0+IHZvaWQ6CnNldF92ZXJzaW9uOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzLTg2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzZXRfdmVyc2lvbigKICAgIC8vICAgICBzZWxmLCBjb250cmFjdF92ZXJzaW9uOiBhcmM0LlVJbnQ2NCwgZGVwbG95bWVudF92ZXJzaW9uOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODcKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODcKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIHVwZ3JhZGVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODgKICAgIC8vIGFyYzQuZW1pdChWZXJzaW9uVXBkYXRlZChjb250cmFjdF92ZXJzaW9uLCBkZXBsb3ltZW50X3ZlcnNpb24pKQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgbWV0aG9kICJWZXJzaW9uVXBkYXRlZCh1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODkKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IGNvbnRyYWN0X3ZlcnNpb24ubmF0aXZlCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImNvbnRyYWN0X3ZlcnNpb24iCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODkKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IGNvbnRyYWN0X3ZlcnNpb24ubmF0aXZlCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkwCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IGRlcGxveW1lbnRfdmVyc2lvbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gZGVwbG95bWVudF92ZXJzaW9uLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5hcHByb3ZlX3VwZGF0ZShhcHByb3ZhbDogYnl0ZXMpIC0+IHZvaWQ6CmFwcHJvdmVfdXBkYXRlOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMS0xMDIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFwcHJvdmVfdXBkYXRlKHNlbGYsIGFwcHJvdmFsOiBhcmM0LkJvb2wpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYub3duZXIsICJtdXN0IGJlIG93bmVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYub3duZXIsICJtdXN0IGJlIG93bmVyIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm93bmVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIG93bmVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA0CiAgICAvLyBhcmM0LmVtaXQoVXBkYXRlQXBwcm92ZWQoYXJjNC5BZGRyZXNzKHNlbGYub3duZXIpLCBhcHByb3ZhbCkpCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNAogICAgLy8gYXJjNC5lbWl0KFVwZGF0ZUFwcHJvdmVkKGFyYzQuQWRkcmVzcyhzZWxmLm93bmVyKSwgYXBwcm92YWwpKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm93bmVyIGV4aXN0cwogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBkYXRlQXBwcm92ZWQoYWRkcmVzcyxib29sKSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGFwcHJvdmFsLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMAogICAgZ2V0Yml0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzMKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYm9vbCgxKQogICAgYnl0ZSAidXBkYXRhYmxlIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNQogICAgLy8gc2VsZi51cGRhdGFibGUgPSBhcHByb3ZhbC5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLmNvbnRyYWN0cy51cGRhdGUuVXBncmFkZWFibGUuY29udHJhY3QuVXBncmFkZWFibGUuZ3JhbnRfdXBncmFkZXIodXBncmFkZXI6IGJ5dGVzKSAtPiB2b2lkOgpncmFudF91cGdyYWRlcjoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDctMTA4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBncmFudF91cGdyYWRlcihzZWxmLCB1cGdyYWRlcjogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA5CiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzLCAibXVzdCBiZSBjcmVhdG9yIgogICAgdHhuIFNlbmRlcgogICAgZ2xvYmFsIENyZWF0b3JBZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgY3JlYXRvcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjExMAogICAgLy8gYXJjNC5lbWl0KFVwZ3JhZGVyR3JhbnRlZChhcmM0LkFkZHJlc3Moc2VsZi51cGdyYWRlciksIHVwZ3JhZGVyKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjExMAogICAgLy8gYXJjNC5lbWl0KFVwZ3JhZGVyR3JhbnRlZChhcmM0LkFkZHJlc3Moc2VsZi51cGdyYWRlciksIHVwZ3JhZGVyKSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi51cGdyYWRlciBleGlzdHMKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBtZXRob2QgIlVwZ3JhZGVyR3JhbnRlZChhZGRyZXNzLGFkZHJlc3MpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTExCiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gdXBncmFkZXIubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLmNvbnRyYWN0cy51cGRhdGUuVXBncmFkZWFibGUuY29udHJhY3QuVXBncmFkZWFibGUub25fdXBkYXRlKCkgLT4gdm9pZDoKb25fdXBkYXRlOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkyLTkzCiAgICAvLyBAYXJjNC5iYXJlbWV0aG9kKGFsbG93X2FjdGlvbnM9WyJVcGRhdGVBcHBsaWNhdGlvbiJdKQogICAgLy8gZGVmIG9uX3VwZGF0ZShzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTQtOTcKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBXQVJOSU5HOiBUaGlzIGFwcCBjYW4gYmUgdXBkYXRlZCBieSB0aGUgY3JlYXRvcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLnVwZ3JhZGVyLCAibXVzdCBiZSB1cGdyYWRlciIKICAgIHR4biBTZW5kZXIKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk0LTk3CiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgV0FSTklORzogVGhpcyBhcHAgY2FuIGJlIHVwZGF0ZWQgYnkgdGhlIGNyZWF0b3IKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBncmFkZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgdXBncmFkZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5OAogICAgLy8gYXNzZXJ0IHNlbGYudXBkYXRhYmxlID09IFVJbnQ2NCgxKSwgIm5vdCBhcHByb3ZlZCIKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzMKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYm9vbCgxKQogICAgYnl0ZSAidXBkYXRhYmxlIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk4CiAgICAvLyBhc3NlcnQgc2VsZi51cGRhdGFibGUgPT0gVUludDY0KDEpLCAibm90IGFwcHJvdmVkIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZGF0YWJsZSBleGlzdHMKICAgIGludCAxCiAgICA9PQogICAgYXNzZXJ0IC8vIG5vdCBhcHByb3ZlZAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX19pbml0X18oKSAtPiB2b2lkOgpfX2luaXRfXzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4NAogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4NS0zNTg2CiAgICAvLyAjIG93bmFibGUgc3RhdGUKICAgIC8vIHNlbGYub3duZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTg3LTM1ODgKICAgIC8vICMgdXBncmFkZWFibGUgc3RhdGUKICAgIC8vIHNlbGYudXBncmFkZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzEKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJjb250cmFjdF92ZXJzaW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTg5CiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTEKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYm9vbCgxKQogICAgaW50IDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTItMzU5MwogICAgLy8gIyBzdGFrZWFibGUgc3RhdGUKICAgIC8vIHNlbGYuZGVsZWdhdGUgPSBBY2NvdW50KCkKICAgIGJ5dGUgImRlbGVnYXRlIgogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk0CiAgICAvLyBzZWxmLnN0YWtlYWJsZSA9IGJvb2woMSkKICAgIGJ5dGUgInN0YWtlYWJsZSIKICAgIGludCAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAxCiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAyCiAgICAvLyBzZWxmLmphY2twb3RfY3JlZGl0ID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfY3JlZGl0IgogICAgaW50IDUwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAzCiAgICAvLyBzZWxmLmphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X2NyZWRpdF9jb250cmlidXRpb24iCiAgICBpbnQgNjAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNAogICAgLy8gc2VsZi5qYWNrcG90X25ldHdvcmsgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrIgogICAgaW50IDUwMDAwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA1CiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiIKICAgIGludCA2MDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA2CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW4iCiAgICBieXRlIDB4MGJhNDNiNzQwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNwogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbiA9IEJpZ1VJbnQoNiAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF90b2tlbl9jb250cmlidXRpb24iCiAgICBieXRlIDB4NWI4ZDgwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA4CiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgaW50IDcKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDktMzYxOAogICAgLy8gIyAxID0gY3JlZGl0LCAyID0gbmV0d29yaywgNCA9IHRva2VuCiAgICAvLyAjIDAgPSBkaXNhYmxlZAogICAgLy8gIyAxID0gY3JlZGl0IGVuYWJsZWQKICAgIC8vICMgMiA9IG5ldHdvcmsgZW5hYmxlZAogICAgLy8gIyA0ID0gdG9rZW4gZW5hYmxlZAogICAgLy8gIyAzID0gY3JlZGl0IGFuZCBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICMgNSA9IGNyZWRpdCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gIyA2ID0gbmV0d29yayBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gIyA3ID0gY3JlZGl0LCBuZXR3b3JrLCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gc2VsZi5jcmVkaXRfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIGJ5dGUgImNyZWRpdF9iZXRfY29zdCIKICAgIGludCA0MDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxOQogICAgLy8gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfYmFzZV9iZXRfY29zdCIKICAgIGludCA0MDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi5uZXR3b3JrX2tpY2tlcl9leHRyYSA9IFVJbnQ2NCgyMCAqIDEwKio2KQogICAgYnl0ZSAibmV0d29ya19raWNrZXJfZXh0cmEiCiAgICBpbnQgMjAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjEKICAgIC8vIHNlbGYubmV0d29ya19taW5fYmFua19hbW91bnQgPSBVSW50NjQoMTAwICogMTAqKjYpCiAgICBieXRlICJuZXR3b3JrX21pbl9iYW5rX2Ftb3VudCIKICAgIGludCAxMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgaW50IDQ2NTA0NDM2CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIzCiAgICAvLyBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9iYXNlX2JldF9jb3N0IgogICAgYnl0ZSAweDAyNjI1YTAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjI0CiAgICAvLyBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikKICAgIGJ5dGUgInRva2VuX2tpY2tlcl9leHRyYSIKICAgIGJ5dGUgMHgwMTMxMmQwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyNQogICAgLy8gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQgPSBCaWdVSW50KDEwMCAqIDEwKio2KQogICAgYnl0ZSAidG9rZW5fbWluX2JhbmtfYW1vdW50IgogICAgYnl0ZSAweDA1ZjVlMTAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjI2CiAgICAvLyBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzID0gQWNjb3VudCgKICAgIGJ5dGUgImZlZV90cmVhc3VyeV9hZGRyZXNzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjI2LTM2MjgKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICJRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJIgogICAgLy8gKQogICAgYWRkciBRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjI5CiAgICAvLyBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyA9IEFjY291bnQoCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjktMzYzMQogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICJRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJIgogICAgLy8gKQogICAgYWRkciBRR1dGU1dET0xQNlpFWU02WkZBSE9LRFRBUE5aMjNINVlEN0lJNlBBWlZQQkdLRE03REtFQkRSNlFJCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMyCiAgICAvLyBzZWxmLmZlZV90cmVhc3VyeV9icHMgPSBVSW50NjQoMzApICAjIDAuMyUKICAgIGJ5dGUgImZlZV90cmVhc3VyeV9icHMiCiAgICBpbnQgMzAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzMKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19icHMgPSBVSW50NjQoMjApICAjIDAuMiUKICAgIGJ5dGUgImZlZV9tYXJrZXRpbmdfYnBzIgogICAgaW50IDIwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjM0LTM2MzYKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1Ygo=",
    "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5jbGVhcl9zdGF0ZV9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcyLTM1NzkKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIGludCAxCiAgICByZXR1cm4K"
  },
  "state": {
    "global": {
      "num_byte_slices": 10,
      "num_uints": 20
    },
    "local": {
      "num_byte_slices": 0,
      "num_uints": 0
    }
  },
  "schema": {
    "global": {
      "declared": {
        "contract_version": {
          "type": "uint64",
          "key": "contract_version"
        },
        "credit_bet_cost": {
          "type": "uint64",
          "key": "credit_bet_cost"
        },
        "delegate": {
          "type": "bytes",
          "key": "delegate"
        },
        "deployment_version": {
          "type": "uint64",
          "key": "deployment_version"
        },
        "fee_marketing_address": {
          "type": "bytes",
          "key": "fee_marketing_address"
        },
        "fee_marketing_bps": {
          "type": "uint64",
          "key": "fee_marketing_bps"
        },
        "fee_treasury_address": {
          "type": "bytes",
          "key": "fee_treasury_address"
        },
        "fee_treasury_bps": {
          "type": "uint64",
          "key": "fee_treasury_bps"
        },
        "jackpot": {
          "type": "uint64",
          "key": "jackpot"
        },
        "jackpot_credit": {
          "type": "uint64",
          "key": "jackpot_credit"
        },
        "jackpot_credit_contribution": {
          "type": "uint64",
          "key": "jackpot_credit_contribution"
        },
        "jackpot_network": {
          "type": "uint64",
          "key": "jackpot_network"
        },
        "jackpot_network_contribution": {
          "type": "uint64",
          "key": "jackpot_network_contribution"
        },
        "jackpot_token": {
          "type": "bytes",
          "key": "jackpot_token"
        },
        "jackpot_token_contribution": {
          "type": "bytes",
          "key": "jackpot_token_contribution"
        },
        "mode": {
          "type": "uint64",
          "key": "mode"
        },
        "mode_enabled": {
          "type": "uint64",
          "key": "mode_enabled"
        },
        "network_base_bet_cost": {
          "type": "uint64",
          "key": "network_base_bet_cost"
        },
        "network_kicker_extra": {
          "type": "uint64",
          "key": "network_kicker_extra"
        },
        "network_min_bank_amount": {
          "type": "uint64",
          "key": "network_min_bank_amount"
        },
        "owner": {
          "type": "bytes",
          "key": "owner"
        },
        "spin_count": {
          "type": "uint64",
          "key": "spin_count"
        },
        "stakeable": {
          "type": "uint64",
          "key": "stakeable"
        },
        "storage_app_id": {
          "type": "uint64",
          "key": "storage_app_id"
        },
        "token_app_id": {
          "type": "uint64",
          "key": "token_app_id"
        },
        "token_base_bet_cost": {
          "type": "bytes",
          "key": "token_base_bet_cost"
        },
        "token_kicker_extra": {
          "type": "bytes",
          "key": "token_kicker_extra"
        },
        "token_min_bank_amount": {
          "type": "bytes",
          "key": "token_min_bank_amount"
        },
        "updatable": {
          "type": "uint64",
          "key": "updatable"
        },
        "upgrader": {
          "type": "bytes",
          "key": "upgrader"
        }
      },
      "reserved": {}
    },
    "local": {
      "declared": {},
      "reserved": {}
    }
  },
  "contract": {
    "name": "SlotMachine",
    "desc": "\n    A simple slot machine smart contract\n    ",
    "methods": [
      {
        "name": "post_update",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "bootstrap",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "bootstrap_cost",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_owner",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "address"
        },
        "desc": "Get the owner of the contract"
      },
      {
        "name": "transfer_ownership",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer the ownership of the contract"
      },
      {
        "name": "get_cdf_grid_from_seed",
        "args": [
          {
            "type": "byte[32]",
            "name": "seed"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_grid_from_bet_key",
        "args": [
          {
            "type": "byte[56]",
            "name": "box_key"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_grid_from_seed_and_spin",
        "args": [
          {
            "type": "byte[32]",
            "name": "seed"
          },
          {
            "type": "uint64",
            "name": "spin_index"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "get_cdf_reel1",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "get_cdf_others",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "reel_has_symbol",
        "args": [
          {
            "type": "byte[15]",
            "name": "grid"
          },
          {
            "type": "uint64",
            "name": "reel"
          },
          {
            "type": "byte[1]",
            "name": "sym"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "bool"
        }
      },
      {
        "name": "calculate_grid_payout",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "calculate_grid_payout_with_bonus_and_jackpot",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64)"
        }
      },
      {
        "name": "initialize_token_bank_manager",
        "args": [
          {
            "type": "uint64",
            "name": "token_app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Initialize the token bank manager"
      },
      {
        "name": "owner_deposit_token",
        "args": [
          {
            "type": "uint64",
            "name": "token_app_id"
          },
          {
            "type": "uint256",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
      },
      {
        "name": "deposit_token",
        "args": [
          {
            "type": "uint64",
            "name": "token_app_id"
          },
          {
            "type": "uint256",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract"
      },
      {
        "name": "owner_deposit",
        "args": [
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
      },
      {
        "name": "deposit",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract"
      },
      {
        "name": "withdraw",
        "args": [
          {
            "type": "uint64",
            "name": "amount",
            "desc": "The amount of funds to withdraw in atomic units"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Withdraw funds from the contract\nOnly callable by contract owner"
      },
      {
        "name": "get_balances",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64,bool)"
        },
        "desc": "Get the balances"
      },
      {
        "name": "get_balance_available",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_balance_locked",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_balance_total",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "sync_balance",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Sync the balance of the contract"
      },
      {
        "name": "get_user",
        "args": [
          {
            "type": "address",
            "name": "address"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(address,uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "credit",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Credit the contract."
      },
      {
        "name": "get_bet",
        "args": [
          {
            "type": "byte[56]",
            "name": "bet_key"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(address,uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "set_mode",
        "args": [
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_bet_key",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "spin",
        "args": [
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "claim",
        "args": [
          {
            "type": "byte[56]",
            "name": "bet_key"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Claim all bets"
      },
      {
        "name": "grant_free_spins",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "count"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_storage_app_id",
        "args": [
          {
            "type": "uint64",
            "name": "app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_version",
        "args": [
          {
            "type": "uint64",
            "name": "contract_version"
          },
          {
            "type": "uint64",
            "name": "deployment_version"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "approve_update",
        "args": [
          {
            "type": "bool",
            "name": "approval"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "grant_upgrader",
        "args": [
          {
            "type": "address",
            "name": "upgrader"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "transfer",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event."
      }
    ],
    "networks": {}
  },
  "bare_call_config": {
    "update_application": "CALL",
    "no_op": "CREATE"
  }
}

/**
 * Defines an onCompletionAction of 'no_op'
 */
export type OnCompleteNoOp =  { onCompleteAction?: 'no_op' | OnApplicationComplete.NoOpOC }
/**
 * Defines an onCompletionAction of 'opt_in'
 */
export type OnCompleteOptIn =  { onCompleteAction: 'opt_in' | OnApplicationComplete.OptInOC }
/**
 * Defines an onCompletionAction of 'close_out'
 */
export type OnCompleteCloseOut =  { onCompleteAction: 'close_out' | OnApplicationComplete.CloseOutOC }
/**
 * Defines an onCompletionAction of 'delete_application'
 */
export type OnCompleteDelApp =  { onCompleteAction: 'delete_application' | OnApplicationComplete.DeleteApplicationOC }
/**
 * Defines an onCompletionAction of 'update_application'
 */
export type OnCompleteUpdApp =  { onCompleteAction: 'update_application' | OnApplicationComplete.UpdateApplicationOC }
/**
 * A state record containing a single unsigned integer
 */
export type IntegerState = {
  /**
   * Gets the state value as a BigInt.
   */
  asBigInt(): bigint
  /**
   * Gets the state value as a number.
   */
  asNumber(): number
}
/**
 * A state record containing binary data
 */
export type BinaryState = {
  /**
   * Gets the state value as a Uint8Array
   */
  asByteArray(): Uint8Array
  /**
   * Gets the state value as a string
   */
  asString(): string
}

export type AppCreateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult> & AppReference
export type AppUpdateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult>

export type AppClientComposeCallCoreParams = Omit<AppClientCallCoreParams, 'sendParams'> & {
  sendParams?: Omit<SendTransactionParams, 'skipSending' | 'atc' | 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources'>
}
export type AppClientComposeExecuteParams = Pick<SendTransactionParams, 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources' | 'suppressLog'>

/**
 * Defines the types of available calls and state of the SlotMachine smart contract.
 */
export type SlotMachine = {
  /**
   * Maps method signatures / names to their argument and return types.
   */
  methods:
    & Record<'post_update()void' | 'post_update', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'bootstrap()void' | 'bootstrap', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'bootstrap_cost()uint64' | 'bootstrap_cost', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_owner()address' | 'get_owner', {
      argsObj: {
      }
      argsTuple: []
      returns: string
    }>
    & Record<'transfer_ownership(address)void' | 'transfer_ownership', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
    & Record<'get_cdf_grid_from_seed(byte[32])byte[15]' | 'get_cdf_grid_from_seed', {
      argsObj: {
        seed: Uint8Array
      }
      argsTuple: [seed: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_cdf_grid_from_bet_key(byte[56])byte[15]' | 'get_cdf_grid_from_bet_key', {
      argsObj: {
        boxKey: Uint8Array
      }
      argsTuple: [boxKey: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]' | 'get_cdf_grid_from_seed_and_spin', {
      argsObj: {
        seed: Uint8Array
        spinIndex: bigint | number
      }
      argsTuple: [seed: Uint8Array, spinIndex: bigint | number]
      returns: Uint8Array
    }>
    & Record<'get_cdf_reel1()uint64[16]' | 'get_cdf_reel1', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'get_cdf_others()uint64[16]' | 'get_cdf_others', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'reel_has_symbol(byte[15],uint64,byte[1])bool' | 'reel_has_symbol', {
      argsObj: {
        grid: Uint8Array
        reel: bigint | number
        sym: Uint8Array
      }
      argsTuple: [grid: Uint8Array, reel: bigint | number, sym: Uint8Array]
      returns: boolean
    }>
    & Record<'calculate_grid_payout()uint64' | 'calculate_grid_payout', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)' | 'calculate_grid_payout_with_bonus_and_jackpot', {
      argsObj: {
      }
      argsTuple: []
      returns: SpinResult
    }>
    & Record<'initialize_token_bank_manager(uint64)void' | 'initialize_token_bank_manager', {
      argsObj: {
        tokenAppId: bigint | number
      }
      argsTuple: [tokenAppId: bigint | number]
      returns: void
    }>
    & Record<'owner_deposit_token(uint64,uint256)void' | 'owner_deposit_token', {
      argsObj: {
        tokenAppId: bigint | number
        amount: bigint | number
      }
      argsTuple: [tokenAppId: bigint | number, amount: bigint | number]
      returns: void
    }>
    & Record<'deposit_token(uint64,uint256)void' | 'deposit_token', {
      argsObj: {
        tokenAppId: bigint | number
        amount: bigint | number
      }
      argsTuple: [tokenAppId: bigint | number, amount: bigint | number]
      returns: void
    }>
    & Record<'owner_deposit(uint64)void' | 'owner_deposit', {
      argsObj: {
        amount: bigint | number
      }
      argsTuple: [amount: bigint | number]
      returns: void
    }>
    & Record<'deposit()void' | 'deposit', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'withdraw(uint64)void' | 'withdraw', {
      argsObj: {
        /**
         * The amount of funds to withdraw in atomic units
         */
        amount: bigint | number
      }
      argsTuple: [amount: bigint | number]
      returns: void
    }>
    & Record<'get_balances()(uint64,uint64,uint64,bool)' | 'get_balances', {
      argsObj: {
      }
      argsTuple: []
      returns: BankBalances
    }>
    & Record<'get_balance_available()uint64' | 'get_balance_available', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_balance_locked()uint64' | 'get_balance_locked', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_balance_total()uint64' | 'get_balance_total', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'sync_balance()uint64' | 'sync_balance', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_user(address)(address,uint64,uint64,uint64,uint64)' | 'get_user', {
      argsObj: {
        address: string
      }
      argsTuple: [address: string]
      returns: UserData
    }>
    & Record<'credit(address,uint64)void' | 'credit', {
      argsObj: {
        address: string
        amount: bigint | number
      }
      argsTuple: [address: string, amount: bigint | number]
      returns: void
    }>
    & Record<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)' | 'get_bet', {
      argsObj: {
        betKey: Uint8Array
      }
      argsTuple: [betKey: Uint8Array]
      returns: Bet
    }>
    & Record<'set_mode(uint64)void' | 'set_mode', {
      argsObj: {
        mode: bigint | number
      }
      argsTuple: [mode: bigint | number]
      returns: void
    }>
    & Record<'get_bet_key(address,uint64,uint64,uint64)byte[56]' | 'get_bet_key', {
      argsObj: {
        address: string
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [address: string, betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'spin(uint64,uint64,uint64)byte[56]' | 'spin', {
      argsObj: {
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'claim(byte[56])uint64' | 'claim', {
      argsObj: {
        betKey: Uint8Array
      }
      argsTuple: [betKey: Uint8Array]
      returns: bigint
    }>
    & Record<'grant_free_spins(address,uint64)void' | 'grant_free_spins', {
      argsObj: {
        address: string
        count: bigint | number
      }
      argsTuple: [address: string, count: bigint | number]
      returns: void
    }>
    & Record<'set_storage_app_id(uint64)void' | 'set_storage_app_id', {
      argsObj: {
        appId: bigint | number
      }
      argsTuple: [appId: bigint | number]
      returns: void
    }>
    & Record<'set_version(uint64,uint64)void' | 'set_version', {
      argsObj: {
        contractVersion: bigint | number
        deploymentVersion: bigint | number
      }
      argsTuple: [contractVersion: bigint | number, deploymentVersion: bigint | number]
      returns: void
    }>
    & Record<'approve_update(bool)void' | 'approve_update', {
      argsObj: {
        approval: boolean
      }
      argsTuple: [approval: boolean]
      returns: void
    }>
    & Record<'grant_upgrader(address)void' | 'grant_upgrader', {
      argsObj: {
        upgrader: string
      }
      argsTuple: [upgrader: string]
      returns: void
    }>
    & Record<'transfer(address)void' | 'transfer', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
  /**
   * Defines the shape of the global and local state of the application.
   */
  state: {
    global: {
      contractVersion?: IntegerState
      creditBetCost?: IntegerState
      delegate?: BinaryState
      deploymentVersion?: IntegerState
      feeMarketingAddress?: BinaryState
      feeMarketingBps?: IntegerState
      feeTreasuryAddress?: BinaryState
      feeTreasuryBps?: IntegerState
      jackpot?: IntegerState
      jackpotCredit?: IntegerState
      jackpotCreditContribution?: IntegerState
      jackpotNetwork?: IntegerState
      jackpotNetworkContribution?: IntegerState
      jackpotToken?: BinaryState
      jackpotTokenContribution?: BinaryState
      mode?: IntegerState
      modeEnabled?: IntegerState
      networkBaseBetCost?: IntegerState
      networkKickerExtra?: IntegerState
      networkMinBankAmount?: IntegerState
      owner?: BinaryState
      spinCount?: IntegerState
      stakeable?: IntegerState
      storageAppId?: IntegerState
      tokenAppId?: IntegerState
      tokenBaseBetCost?: BinaryState
      tokenKickerExtra?: BinaryState
      tokenMinBankAmount?: BinaryState
      updatable?: IntegerState
      upgrader?: BinaryState
    }
  }
}
/**
 * Defines the possible abi call signatures
 */
export type SlotMachineSig = keyof SlotMachine['methods']
/**
 * Defines an object containing all relevant parameters for a single call to the contract. Where TSignature is undefined, a bare call is made
 */
export type TypedCallParams<TSignature extends SlotMachineSig | undefined> = {
  method: TSignature
  methodArgs: TSignature extends undefined ? undefined : Array<ABIAppCallArg | undefined>
} & AppClientCallCoreParams & CoreAppCallArgs
/**
 * Defines the arguments required for a bare call
 */
export type BareCallArgs = Omit<RawAppCallArgs, keyof CoreAppCallArgs>
/**
 * Represents a SpinResult result as a struct
 */
export type SpinResult = {
  payout: bigint
  bonusSpinsAwarded: bigint
  jackpotHit: bigint
}
/**
 * Converts the tuple representation of a SpinResult to the struct representation
 */
export function SpinResult([payout, bonusSpinsAwarded, jackpotHit]: [bigint, bigint, bigint] ) {
  return {
    payout,
    bonusSpinsAwarded,
    jackpotHit,
  }
}
/**
 * Represents a BankBalances result as a struct
 */
export type BankBalances = {
  balanceAvailable: bigint
  balanceTotal: bigint
  balanceLocked: bigint
  balanceFuse: boolean
}
/**
 * Converts the tuple representation of a BankBalances to the struct representation
 */
export function BankBalances([balanceAvailable, balanceTotal, balanceLocked, balanceFuse]: [bigint, bigint, bigint, boolean] ) {
  return {
    balanceAvailable,
    balanceTotal,
    balanceLocked,
    balanceFuse,
  }
}
/**
 * Represents a UserData result as a struct
 */
export type UserData = {
  who: string
  credit: bigint
  bonusSpin: bigint
  spinCount: bigint
  lastSpinTimestamp: bigint
}
/**
 * Converts the tuple representation of a UserData to the struct representation
 */
export function UserData([who, credit, bonusSpin, spinCount, lastSpinTimestamp]: [string, bigint, bigint, bigint, bigint] ) {
  return {
    who,
    credit,
    bonusSpin,
    spinCount,
    lastSpinTimestamp,
  }
}
/**
 * Represents a Bet result as a struct
 */
export type Bet = {
  who: string
  betAmount: bigint
  spinIndex: bigint
  mode: bigint
  claimRound: bigint
}
/**
 * Converts the tuple representation of a Bet to the struct representation
 */
export function Bet([who, betAmount, spinIndex, mode, claimRound]: [string, bigint, bigint, bigint, bigint] ) {
  return {
    who,
    betAmount,
    spinIndex,
    mode,
    claimRound,
  }
}
/**
 * Maps a method signature from the SlotMachine smart contract to the method's arguments in either tuple of struct form
 */
export type MethodArgs<TSignature extends SlotMachineSig> = SlotMachine['methods'][TSignature]['argsObj' | 'argsTuple']
/**
 * Maps a method signature from the SlotMachine smart contract to the method's return type
 */
export type MethodReturn<TSignature extends SlotMachineSig> = SlotMachine['methods'][TSignature]['returns']

/**
 * A factory for available 'create' calls
 */
export type SlotMachineCreateCalls = (typeof SlotMachineCallFactory)['create']
/**
 * Defines supported create methods for this smart contract
 */
export type SlotMachineCreateCallParams =
  | (TypedCallParams<undefined> & (OnCompleteNoOp))
/**
 * A factory for available 'update' calls
 */
export type SlotMachineUpdateCalls = (typeof SlotMachineCallFactory)['update']
/**
 * Defines supported update methods for this smart contract
 */
export type SlotMachineUpdateCallParams =
  | TypedCallParams<undefined>
/**
 * Defines arguments required for the deploy method.
 */
export type SlotMachineDeployArgs = {
  deployTimeParams?: TealTemplateParams
  /**
   * A delegate which takes a create call factory and returns the create call params for this smart contract
   */
  createCall?: (callFactory: SlotMachineCreateCalls) => SlotMachineCreateCallParams
  /**
   * A delegate which takes a update call factory and returns the update call params for this smart contract
   */
  updateCall?: (callFactory: SlotMachineUpdateCalls) => SlotMachineUpdateCallParams
}


/**
 * Exposes methods for constructing all available smart contract calls
 */
export abstract class SlotMachineCallFactory {
  /**
   * Gets available create call factories
   */
  static get create() {
    return {
      /**
       * Constructs a create call for the SlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams & (OnCompleteNoOp) = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Gets available update call factories
   */
  static get update() {
    return {
      /**
       * Constructs an update call for the SlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Constructs a no op call for the post_update()void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static postUpdate(args: MethodArgs<'post_update()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'post_update()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the bootstrap()void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'bootstrap()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the bootstrap_cost()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'bootstrap_cost()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_owner()address ABI method
   *
   * Get the owner of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_owner()address' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer_ownership(address)void ABI method
   *
   * Transfer the ownership of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer_ownership(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_seed(byte[32])byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_seed(byte[32])byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.seed],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_bet_key(byte[56])byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.boxKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [args.seed, args.spinIndex],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_reel1()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_reel1()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_others()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_others()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'reel_has_symbol(byte[15],uint64,byte[1])bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.grid, args.reel, args.sym],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_grid_payout()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_grid_payout()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the initialize_token_bank_manager(uint64)void ABI method
   *
   * Initialize the token bank manager
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'initialize_token_bank_manager(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.tokenAppId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the owner_deposit_token(uint64,uint256)void ABI method
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'owner_deposit_token(uint64,uint256)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.tokenAppId, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the deposit_token(uint64,uint256)void ABI method
   *
   * Deposit funds into the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static depositToken(args: MethodArgs<'deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'deposit_token(uint64,uint256)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.tokenAppId, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the owner_deposit(uint64)void ABI method
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'owner_deposit(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the deposit()void ABI method
   *
   * Deposit funds into the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static deposit(args: MethodArgs<'deposit()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'deposit()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the withdraw(uint64)void ABI method
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static withdraw(args: MethodArgs<'withdraw(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'withdraw(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balances()(uint64,uint64,uint64,bool) ABI method
   *
   * Get the balances
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balances()(uint64,uint64,uint64,bool)' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_available()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_available()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_locked()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_locked()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balance_total()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balance_total()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the sync_balance()uint64 ABI method
   *
   * Sync the balance of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'sync_balance()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_user(address)(address,uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.address],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the credit(address,uint64)void ABI method
   *
   * Credit the contract.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'credit(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_bet(byte[56])(address,uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.betKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_mode(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setMode(args: MethodArgs<'set_mode(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_mode(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_bet_key(address,uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the spin(uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'spin(uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the claim(byte[56])uint64 ABI method
   *
   * Claim all bets
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'claim(byte[56])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.betKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_free_spins(address,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_free_spins(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.count],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_storage_app_id(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_storage_app_id(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.appId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_version(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_version(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.contractVersion, args.deploymentVersion],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the approve_update(bool)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'approve_update(bool)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.approval],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_upgrader(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_upgrader(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.upgrader],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer(address)void ABI method
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
}

/**
 * A client to make calls to the SlotMachine smart contract
 */
export class SlotMachineClient {
  /**
   * The underlying `ApplicationClient` for when you want to have more flexibility
   */
  public readonly appClient: ApplicationClient

  private readonly sender: SendTransactionFrom | undefined

  /**
   * Creates a new instance of `SlotMachineClient`
   *
   * @param appDetails appDetails The details to identify the app to deploy
   * @param algod An algod client instance
   */
  constructor(appDetails: AppDetails, private algod: Algodv2) {
    this.sender = appDetails.sender
    this.appClient = algokit.getAppClient({
      ...appDetails,
      app: APP_SPEC
    }, algod)
  }

  /**
   * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
   *
   * @param result The AppCallTransactionResult to be mapped
   * @param returnValueFormatter An optional delegate to format the return value if required
   * @returns The smart contract response with an updated return value
   */
  protected mapReturnValue<TReturn, TResult extends AppCallTransactionResult = AppCallTransactionResult>(result: AppCallTransactionResult, returnValueFormatter?: (value: any) => TReturn): AppCallTransactionResultOfType<TReturn> & TResult {
    if(result.return?.decodeError) {
      throw result.return.decodeError
    }
    const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
      ? returnValueFormatter(result.return.returnValue)
      : result.return?.returnValue as TReturn | undefined
      return { ...result, return: returnValue } as AppCallTransactionResultOfType<TReturn> & TResult
  }

  /**
   * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
   *
   * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
   * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
   * @returns The result of the smart contract call
   */
  public async call<TSignature extends keyof SlotMachine['methods']>(typedCallParams: TypedCallParams<TSignature>, returnValueFormatter?: (value: any) => MethodReturn<TSignature>) {
    return this.mapReturnValue<MethodReturn<TSignature>>(await this.appClient.call(typedCallParams), returnValueFormatter)
  }

  /**
   * Idempotently deploys the SlotMachine smart contract.
   *
   * @param params The arguments for the contract calls and any additional parameters for the call
   * @returns The deployment result
   */
  public deploy(params: SlotMachineDeployArgs & AppClientDeployCoreParams = {}): ReturnType<ApplicationClient['deploy']> {
    const createArgs = params.createCall?.(SlotMachineCallFactory.create)
    const updateArgs = params.updateCall?.(SlotMachineCallFactory.update)
    return this.appClient.deploy({
      ...params,
      updateArgs,
      createArgs,
      createOnCompleteAction: createArgs?.onCompleteAction,
    })
  }

  /**
   * Gets available create methods
   */
  public get create() {
    const $this = this
    return {
      /**
       * Creates a new instance of the SlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The create result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs & (OnCompleteNoOp) = {}) {
        return $this.mapReturnValue<undefined, AppCreateCallTransactionResult>(await $this.appClient.create(args))
      },
    }
  }

  /**
   * Gets available update methods
   */
  public get update() {
    const $this = this
    return {
      /**
       * Updates an existing instance of the SlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The update result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs = {}) {
        return $this.mapReturnValue<undefined, AppUpdateCallTransactionResult>(await $this.appClient.update(args))
      },
    }
  }

  /**
   * Makes a clear_state call to an existing instance of the SlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The clear_state result
   */
  public clearState(args: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.appClient.clearState(args)
  }

  /**
   * Calls the post_update()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public postUpdate(args: MethodArgs<'post_update()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.postUpdate(args, params))
  }

  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.bootstrap(args, params))
  }

  /**
   * Calls the bootstrap_cost()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.bootstrapCost(args, params))
  }

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getOwner(args, params))
  }

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.transferOwnership(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_seed(byte[32])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfGridFromSeed(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfGridFromBetKey(args, params))
  }

  /**
   * Calls the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfGridFromSeedAndSpin(args, params))
  }

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfReel1(args, params))
  }

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfOthers(args, params))
  }

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.reelHasSymbol(args, params))
  }

  /**
   * Calls the calculate_grid_payout()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.calculateGridPayout(args, params))
  }

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.calculateGridPayoutWithBonusAndJackpot(args, params), SpinResult)
  }

  /**
   * Calls the initialize_token_bank_manager(uint64)void ABI method.
   *
   * Initialize the token bank manager
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.initializeTokenBankManager(args, params))
  }

  /**
   * Calls the owner_deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.ownerDepositToken(args, params))
  }

  /**
   * Calls the deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public depositToken(args: MethodArgs<'deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.depositToken(args, params))
  }

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.ownerDeposit(args, params))
  }

  /**
   * Calls the deposit()void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public deposit(args: MethodArgs<'deposit()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.deposit(args, params))
  }

  /**
   * Calls the withdraw(uint64)void ABI method.
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public withdraw(args: MethodArgs<'withdraw(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.withdraw(args, params))
  }

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBalances(args, params), BankBalances)
  }

  /**
   * Calls the get_balance_available()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBalanceAvailable(args, params))
  }

  /**
   * Calls the get_balance_locked()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBalanceLocked(args, params))
  }

  /**
   * Calls the get_balance_total()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBalanceTotal(args, params))
  }

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.syncBalance(args, params))
  }

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getUser(args, params), UserData)
  }

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.credit(args, params))
  }

  /**
   * Calls the get_bet(byte[56])(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBet(args, params), Bet)
  }

  /**
   * Calls the set_mode(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setMode(args: MethodArgs<'set_mode(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setMode(args, params))
  }

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBetKey(args, params))
  }

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.spin(args, params))
  }

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.claim(args, params))
  }

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.grantFreeSpins(args, params))
  }

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setStorageAppId(args, params))
  }

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setVersion(args, params))
  }

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.approveUpdate(args, params))
  }

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.grantUpgrader(args, params))
  }

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.transfer(args, params))
  }

  /**
   * Extracts a binary state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns A BinaryState instance containing the state value, or undefined if the key was not found
   */
  private static getBinaryState(state: AppState, key: string): BinaryState | undefined {
    const value = state[key]
    if (!value) return undefined
    if (!('valueRaw' in value))
      throw new Error(`Failed to parse state value for ${key}; received an int when expected a byte array`)
    return {
      asString(): string {
        return value.value
      },
      asByteArray(): Uint8Array {
        return value.valueRaw
      }
    }
  }

  /**
   * Extracts a integer state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns An IntegerState instance containing the state value, or undefined if the key was not found
   */
  private static getIntegerState(state: AppState, key: string): IntegerState | undefined {
    const value = state[key]
    if (!value) return undefined
    if ('valueRaw' in value)
      throw new Error(`Failed to parse state value for ${key}; received a byte array when expected a number`)
    return {
      asBigInt() {
        return typeof value.value === 'bigint' ? value.value : BigInt(value.value)
      },
      asNumber(): number {
        return typeof value.value === 'bigint' ? Number(value.value) : value.value
      },
    }
  }

  /**
   * Returns the smart contract's global state wrapped in a strongly typed accessor with options to format the stored value
   */
  public async getGlobalState(): Promise<SlotMachine['state']['global']> {
    const state = await this.appClient.getGlobalState()
    return {
      get contractVersion() {
        return SlotMachineClient.getIntegerState(state, 'contract_version')
      },
      get creditBetCost() {
        return SlotMachineClient.getIntegerState(state, 'credit_bet_cost')
      },
      get delegate() {
        return SlotMachineClient.getBinaryState(state, 'delegate')
      },
      get deploymentVersion() {
        return SlotMachineClient.getIntegerState(state, 'deployment_version')
      },
      get feeMarketingAddress() {
        return SlotMachineClient.getBinaryState(state, 'fee_marketing_address')
      },
      get feeMarketingBps() {
        return SlotMachineClient.getIntegerState(state, 'fee_marketing_bps')
      },
      get feeTreasuryAddress() {
        return SlotMachineClient.getBinaryState(state, 'fee_treasury_address')
      },
      get feeTreasuryBps() {
        return SlotMachineClient.getIntegerState(state, 'fee_treasury_bps')
      },
      get jackpot() {
        return SlotMachineClient.getIntegerState(state, 'jackpot')
      },
      get jackpotCredit() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_credit')
      },
      get jackpotCreditContribution() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_credit_contribution')
      },
      get jackpotNetwork() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_network')
      },
      get jackpotNetworkContribution() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_network_contribution')
      },
      get jackpotToken() {
        return SlotMachineClient.getBinaryState(state, 'jackpot_token')
      },
      get jackpotTokenContribution() {
        return SlotMachineClient.getBinaryState(state, 'jackpot_token_contribution')
      },
      get mode() {
        return SlotMachineClient.getIntegerState(state, 'mode')
      },
      get modeEnabled() {
        return SlotMachineClient.getIntegerState(state, 'mode_enabled')
      },
      get networkBaseBetCost() {
        return SlotMachineClient.getIntegerState(state, 'network_base_bet_cost')
      },
      get networkKickerExtra() {
        return SlotMachineClient.getIntegerState(state, 'network_kicker_extra')
      },
      get networkMinBankAmount() {
        return SlotMachineClient.getIntegerState(state, 'network_min_bank_amount')
      },
      get owner() {
        return SlotMachineClient.getBinaryState(state, 'owner')
      },
      get spinCount() {
        return SlotMachineClient.getIntegerState(state, 'spin_count')
      },
      get stakeable() {
        return SlotMachineClient.getIntegerState(state, 'stakeable')
      },
      get storageAppId() {
        return SlotMachineClient.getIntegerState(state, 'storage_app_id')
      },
      get tokenAppId() {
        return SlotMachineClient.getIntegerState(state, 'token_app_id')
      },
      get tokenBaseBetCost() {
        return SlotMachineClient.getBinaryState(state, 'token_base_bet_cost')
      },
      get tokenKickerExtra() {
        return SlotMachineClient.getBinaryState(state, 'token_kicker_extra')
      },
      get tokenMinBankAmount() {
        return SlotMachineClient.getBinaryState(state, 'token_min_bank_amount')
      },
      get updatable() {
        return SlotMachineClient.getIntegerState(state, 'updatable')
      },
      get upgrader() {
        return SlotMachineClient.getBinaryState(state, 'upgrader')
      },
    }
  }

  public compose(): SlotMachineComposer {
    const client = this
    const atc = new AtomicTransactionComposer()
    let promiseChain:Promise<unknown> = Promise.resolve()
    const resultMappers: Array<undefined | ((x: any) => any)> = []
    return {
      postUpdate(args: MethodArgs<'post_update()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.postUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.bootstrap(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.bootstrapCost(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getOwner(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transferOwnership(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromSeed(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromBetKey(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGridFromSeedAndSpin(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfReel1(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfOthers(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.reelHasSymbol(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculateGridPayout(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculateGridPayoutWithBonusAndJackpot(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(SpinResult)
        return this
      },
      initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.initializeTokenBankManager(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.ownerDepositToken(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      depositToken(args: MethodArgs<'deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.depositToken(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.ownerDeposit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      deposit(args: MethodArgs<'deposit()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.deposit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      withdraw(args: MethodArgs<'withdraw(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.withdraw(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalances(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(BankBalances)
        return this
      },
      getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceAvailable(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceLocked(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalanceTotal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.syncBalance(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getUser(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(UserData)
        return this
      },
      credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.credit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBet(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(Bet)
        return this
      },
      setMode(args: MethodArgs<'set_mode(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setMode(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBetKey(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.spin(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.claim(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantFreeSpins(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setStorageAppId(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setVersion(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.approveUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantUpgrader(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transfer(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      get update() {
        const $this = this
        return {
          bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs) {
            promiseChain = promiseChain.then(() => client.update.bare({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
            resultMappers.push(undefined)
            return $this
          },
        }
      },
      clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.clearState({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom) {
        promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)))
        return this
      },
      async atc() {
        await promiseChain
        return atc
      },
      async simulate(options?: SimulateOptions) {
        await promiseChain
        const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }))
        return {
          ...result,
          returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      },
      async execute(sendParams?: AppClientComposeExecuteParams) {
        await promiseChain
        const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod)
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      }
    } as unknown as SlotMachineComposer
  }
}
export type SlotMachineComposer<TReturns extends [...any[]] = []> = {
  /**
   * Calls the post_update()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  postUpdate(args: MethodArgs<'post_update()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'post_update()void'>]>

  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'bootstrap()void'>]>

  /**
   * Calls the bootstrap_cost()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'bootstrap_cost()uint64'>]>

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_owner()address'>]>

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'transfer_ownership(address)void'>]>

  /**
   * Calls the get_cdf_grid_from_seed(byte[32])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromSeed(args: MethodArgs<'get_cdf_grid_from_seed(byte[32])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_seed(byte[32])byte[15]'>]>

  /**
   * Calls the get_cdf_grid_from_bet_key(byte[56])byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromBetKey(args: MethodArgs<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_bet_key(byte[56])byte[15]'>]>

  /**
   * Calls the get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGridFromSeedAndSpin(args: MethodArgs<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid_from_seed_and_spin(byte[32],uint64)byte[15]'>]>

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_reel1()uint64[16]'>]>

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_others()uint64[16]'>]>

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'reel_has_symbol(byte[15],uint64,byte[1])bool'>]>

  /**
   * Calls the calculate_grid_payout()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'calculate_grid_payout()uint64'>]>

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>]>

  /**
   * Calls the initialize_token_bank_manager(uint64)void ABI method.
   *
   * Initialize the token bank manager
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'initialize_token_bank_manager(uint64)void'>]>

  /**
   * Calls the owner_deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'owner_deposit_token(uint64,uint256)void'>]>

  /**
   * Calls the deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  depositToken(args: MethodArgs<'deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'deposit_token(uint64,uint256)void'>]>

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'owner_deposit(uint64)void'>]>

  /**
   * Calls the deposit()void ABI method.
   *
   * Deposit funds into the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  deposit(args: MethodArgs<'deposit()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'deposit()void'>]>

  /**
   * Calls the withdraw(uint64)void ABI method.
   *
   * Withdraw funds from the contract
Only callable by contract owner
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  withdraw(args: MethodArgs<'withdraw(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'withdraw(uint64)void'>]>

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_balances()(uint64,uint64,uint64,bool)'>]>

  /**
   * Calls the get_balance_available()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceAvailable(args: MethodArgs<'get_balance_available()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_balance_available()uint64'>]>

  /**
   * Calls the get_balance_locked()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceLocked(args: MethodArgs<'get_balance_locked()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_balance_locked()uint64'>]>

  /**
   * Calls the get_balance_total()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalanceTotal(args: MethodArgs<'get_balance_total()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_balance_total()uint64'>]>

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'sync_balance()uint64'>]>

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_user(address)(address,uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'credit(address,uint64)void'>]>

  /**
   * Calls the get_bet(byte[56])(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBet(args: MethodArgs<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_bet(byte[56])(address,uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the set_mode(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setMode(args: MethodArgs<'set_mode(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_mode(uint64)void'>]>

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'spin(uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'claim(byte[56])uint64'>]>

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'grant_free_spins(address,uint64)void'>]>

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_storage_app_id(uint64)void'>]>

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_version(uint64,uint64)void'>]>

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'approve_update(bool)void'>]>

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'grant_upgrader(address)void'>]>

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'transfer(address)void'>]>

  /**
   * Gets available update methods
   */
  readonly update: {
    /**
     * Updates an existing instance of the SlotMachine smart contract using a bare call.
     *
     * @param args The arguments for the bare call
     * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
     */
    bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, undefined]>
  }

  /**
   * Makes a clear_state call to an existing instance of the SlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, undefined]>

  /**
   * Adds a transaction to the composer
   *
   * @param txn One of: A TransactionWithSigner object (returned as is), a TransactionToSign object (signer is obtained from the signer property), a Transaction object (signer is extracted from the defaultSender parameter), an async SendTransactionResult returned by one of algokit utils helpers (signer is obtained from the defaultSender parameter)
   * @param defaultSender The default sender to be used to obtain a signer where the object provided to the transaction parameter does not include a signer.
   */
  addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom): SlotMachineComposer<TReturns>
  /**
   * Returns the underlying AtomicTransactionComposer instance
   */
  atc(): Promise<AtomicTransactionComposer>
  /**
   * Simulates the transaction group and returns the result
   */
  simulate(options?: SimulateOptions): Promise<SlotMachineComposerSimulateResult<TReturns>>
  /**
   * Executes the transaction group and returns the results
   */
  execute(sendParams?: AppClientComposeExecuteParams): Promise<SlotMachineComposerResults<TReturns>>
}
export type SimulateOptions = Omit<ConstructorParameters<typeof modelsv2.SimulateRequest>[0], 'txnGroups'>
export type SlotMachineComposerSimulateResult<TReturns extends [...any[]]> = {
  returns: TReturns
  methodResults: ABIResult[]
  simulateResponse: modelsv2.SimulateResponse
}
export type SlotMachineComposerResults<TReturns extends [...any[]]> = {
  returns: TReturns
  groupId: string
  txIds: string[]
  transactions: Transaction[]
}
