/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 * 
 * Note: Buffer is made available globally via src/lib/shims/buffer.ts
 */
import * as algokit from '@algorandfoundation/algokit-utils'
import type {
  ABIAppCallArg,
  AppCallTransactionResult,
  AppCallTransactionResultOfType,
  AppCompilationResult,
  AppReference,
  AppState,
  CoreAppCallArgs,
  RawAppCallArgs,
  TealTemplateParams,
} from '@algorandfoundation/algokit-utils/types/app'
import type {
  AppClientCallCoreParams,
  AppClientCompilationParams,
  AppClientDeployCoreParams,
  AppDetails,
  ApplicationClient,
} from '@algorandfoundation/algokit-utils/types/app-client'
import type { AppSpec } from '@algorandfoundation/algokit-utils/types/app-spec'
import type { SendTransactionResult, TransactionToSign, SendTransactionFrom, SendTransactionParams } from '@algorandfoundation/algokit-utils/types/transaction'
import type { ABIResult, TransactionWithSigner } from 'algosdk'
import { Algodv2, OnApplicationComplete, Transaction, AtomicTransactionComposer, modelsv2 } from 'algosdk'
export const APP_SPEC: AppSpec = {
  "hints": {
    "post_update()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "bootstrap()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "bootstrap_cost()uint64": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_owner()address": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer_ownership(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_reel1()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_others()uint64[16]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_cdf_grid()byte[15]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "reel_has_symbol(byte[15],uint64,byte[1])bool": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_grid_payout()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "SpinResult",
          "elements": [
            [
              "payout",
              "uint64"
            ],
            [
              "bonus_spins_awarded",
              "uint64"
            ],
            [
              "jackpot_hit",
              "uint64"
            ]
          ]
        }
      }
    },
    "initialize_token_bank_manager(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "owner_deposit_token(uint64,uint256)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "owner_deposit(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_balances()(uint64,uint64,uint64,bool)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "BankBalances",
          "elements": [
            [
              "balance_available",
              "uint64"
            ],
            [
              "balance_total",
              "uint64"
            ],
            [
              "balance_locked",
              "uint64"
            ],
            [
              "balance_fuse",
              "bool"
            ]
          ]
        }
      }
    },
    "sync_balance()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_user(address)(address,uint64,uint64,uint64,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "UserData",
          "elements": [
            [
              "who",
              "address"
            ],
            [
              "credit",
              "uint64"
            ],
            [
              "bonus_spin",
              "uint64"
            ],
            [
              "spin_count",
              "uint64"
            ],
            [
              "last_spin_timestamp",
              "uint64"
            ]
          ]
        }
      }
    },
    "credit(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_mode(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_bet_key(address,uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "spin(uint64,uint64,uint64)byte[56]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "claim(byte[56])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_free_spins(address,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_storage_app_id(uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_version(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "approve_update(bool)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_upgrader(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    }
  },
  "source": {
    "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5hcHByb3ZhbF9wcm9ncmFtOgogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGJueiBtYWluX2VudHJ5cG9pbnRAMgogICAgY2FsbHN1YiBfX2luaXRfXwoKbWFpbl9lbnRyeXBvaW50QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuIE51bUFwcEFyZ3MKICAgIGJ6IG1haW5fYmFyZV9yb3V0aW5nQDM0CiAgICBtZXRob2QgInBvc3RfdXBkYXRlKCl2b2lkIgogICAgbWV0aG9kICJib290c3RyYXAoKXZvaWQiCiAgICBtZXRob2QgImJvb3RzdHJhcF9jb3N0KCl1aW50NjQiCiAgICBtZXRob2QgImdldF9vd25lcigpYWRkcmVzcyIKICAgIG1ldGhvZCAidHJhbnNmZXJfb3duZXJzaGlwKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2NkZl9yZWVsMSgpdWludDY0WzE2XSIKICAgIG1ldGhvZCAiZ2V0X2NkZl9vdGhlcnMoKXVpbnQ2NFsxNl0iCiAgICBtZXRob2QgImdldF9jZGZfZ3JpZCgpYnl0ZVsxNV0iCiAgICBtZXRob2QgInJlZWxfaGFzX3N5bWJvbChieXRlWzE1XSx1aW50NjQsYnl0ZVsxXSlib29sIgogICAgbWV0aG9kICJjYWxjdWxhdGVfZ3JpZF9wYXlvdXQoKXVpbnQ2NCIKICAgIG1ldGhvZCAiY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoKSh1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBtZXRob2QgImluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyKHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJvd25lcl9kZXBvc2l0X3Rva2VuKHVpbnQ2NCx1aW50MjU2KXZvaWQiCiAgICBtZXRob2QgIm93bmVyX2RlcG9zaXQodWludDY0KXZvaWQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlcygpKHVpbnQ2NCx1aW50NjQsdWludDY0LGJvb2wpIgogICAgbWV0aG9kICJzeW5jX2JhbGFuY2UoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3VzZXIoYWRkcmVzcykoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgbWV0aG9kICJjcmVkaXQoYWRkcmVzcyx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAic2V0X21vZGUodWludDY0KXZvaWQiCiAgICBtZXRob2QgImdldF9iZXRfa2V5KGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQpYnl0ZVs1Nl0iCiAgICBtZXRob2QgInNwaW4odWludDY0LHVpbnQ2NCx1aW50NjQpYnl0ZVs1Nl0iCiAgICBtZXRob2QgImNsYWltKGJ5dGVbNTZdKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ3JhbnRfZnJlZV9zcGlucyhhZGRyZXNzLHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJzZXRfc3RvcmFnZV9hcHBfaWQodWludDY0KXZvaWQiCiAgICBtZXRob2QgInNldF92ZXJzaW9uKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiYXBwcm92ZV91cGRhdGUoYm9vbCl2b2lkIgogICAgbWV0aG9kICJncmFudF91cGdyYWRlcihhZGRyZXNzKXZvaWQiCiAgICBtZXRob2QgInRyYW5zZmVyKGFkZHJlc3Mpdm9pZCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIG1haW5fcG9zdF91cGRhdGVfcm91dGVANCBtYWluX2Jvb3RzdHJhcF9yb3V0ZUA1IG1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVANiBtYWluX2dldF9vd25lcl9yb3V0ZUA3IG1haW5fdHJhbnNmZXJfb3duZXJzaGlwX3JvdXRlQDggbWFpbl9nZXRfY2RmX3JlZWwxX3JvdXRlQDkgbWFpbl9nZXRfY2RmX290aGVyc19yb3V0ZUAxMCBtYWluX2dldF9jZGZfZ3JpZF9yb3V0ZUAxMSBtYWluX3JlZWxfaGFzX3N5bWJvbF9yb3V0ZUAxMiBtYWluX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9yb3V0ZUAxMyBtYWluX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X3JvdXRlQDE0IG1haW5faW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfcm91dGVAMTUgbWFpbl9vd25lcl9kZXBvc2l0X3Rva2VuX3JvdXRlQDE2IG1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUAxNyBtYWluX2dldF9iYWxhbmNlc19yb3V0ZUAxOCBtYWluX3N5bmNfYmFsYW5jZV9yb3V0ZUAxOSBtYWluX2dldF91c2VyX3JvdXRlQDIwIG1haW5fY3JlZGl0X3JvdXRlQDIxIG1haW5fc2V0X21vZGVfcm91dGVAMjIgbWFpbl9nZXRfYmV0X2tleV9yb3V0ZUAyMyBtYWluX3NwaW5fcm91dGVAMjQgbWFpbl9jbGFpbV9yb3V0ZUAyNSBtYWluX2dyYW50X2ZyZWVfc3BpbnNfcm91dGVAMjYgbWFpbl9zZXRfc3RvcmFnZV9hcHBfaWRfcm91dGVAMjcgbWFpbl9zZXRfdmVyc2lvbl9yb3V0ZUAyOCBtYWluX2FwcHJvdmVfdXBkYXRlX3JvdXRlQDI5IG1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVAMzAgbWFpbl90cmFuc2Zlcl9yb3V0ZUAzMQogICAgZXJyIC8vIHJlamVjdCB0cmFuc2FjdGlvbgoKbWFpbl9wb3N0X3VwZGF0ZV9yb3V0ZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjM4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgcG9zdF91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYm9vdHN0cmFwX3JvdXRlQDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBib290c3RyYXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGJvb3RzdHJhcF9jb3N0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9vd25lcl9yb3V0ZUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjYyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X293bmVyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3RyYW5zZmVyX293bmVyc2hpcF9yb3V0ZUA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjY5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3MC0zNTc3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiB0cmFuc2Zlcl9vd25lcnNoaXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2NkZl9yZWVsMV9yb3V0ZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzIxCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2NkZl9yZWVsMQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfY2RmX290aGVyc19yb3V0ZUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9jZGZfb3RoZXJzCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9jZGZfZ3JpZF9yb3V0ZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9jZGZfZ3JpZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9yZWVsX2hhc19zeW1ib2xfcm91dGVAMTI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIHJlZWxfaGFzX3N5bWJvbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfcm91dGVAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1GYWxzZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgY2FsY3VsYXRlX2dyaWRfcGF5b3V0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X3JvdXRlQDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUxCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5faW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfcm91dGVAMTU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX293bmVyX2RlcG9zaXRfdG9rZW5fcm91dGVAMTY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIG93bmVyX2RlcG9zaXRfdG9rZW4KICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUAxNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM2MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzYyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgb3duZXJfZGVwb3NpdAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZXNfcm91dGVAMTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTAtNDQxMQogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlcwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zeW5jX2JhbGFuY2Vfcm91dGVAMTk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBzeW5jX2JhbGFuY2UKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3VzZXJfcm91dGVAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF91c2VyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NyZWRpdF9yb3V0ZUAyMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTgxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY3JlZGl0CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3NldF9tb2RlX3JvdXRlQDIyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjU2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3MC0zNTc3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBzZXRfbW9kZQogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmV0X2tleV9yb3V0ZUAyMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY2NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjY2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X2JldF9rZXkKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9yb3V0ZUAyNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcxNC00NzE1CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3MC0zNTc3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MTQtNDcxNQogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNwaW4KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fY2xhaW1fcm91dGVAMjU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMzQtNTAzNQogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDM0LTUwMzUKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBjbGFpbQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9ncmFudF9mcmVlX3NwaW5zX3JvdXRlQDI2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDQ5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3MC0zNTc3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0NDkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBncmFudF9mcmVlX3NwaW5zCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3NldF9zdG9yYWdlX2FwcF9pZF9yb3V0ZUAyNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ5NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1NzAtMzU3NwogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoCiAgICAvLyAgICAgIyBVc2VyTWFuYWdlciwKICAgIC8vICAgICAjIEJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgVG9rZW5CYW5rTWFuYWdlciwKICAgIC8vICAgICAjIENERk1hbmFnZXIsCiAgICAvLyAgICAgIyBPd25hYmxlLAogICAgLy8gICAgIFVwZ3JhZGVhYmxlCiAgICAvLyApOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDk1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgc2V0X3N0b3JhZ2VfYXBwX2lkCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3NldF92ZXJzaW9uX3JvdXRlQDI4OgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU3MC0zNTc3CiAgICAvLyBjbGFzcyBTbG90TWFjaGluZSgKICAgIC8vICAgICAjIFVzZXJNYW5hZ2VyLAogICAgLy8gICAgICMgQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBUb2tlbkJhbmtNYW5hZ2VyLAogICAgLy8gICAgICMgQ0RGTWFuYWdlciwKICAgIC8vICAgICAjIE93bmFibGUsCiAgICAvLyAgICAgVXBncmFkZWFibGUKICAgIC8vICk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBzZXRfdmVyc2lvbgogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9hcHByb3ZlX3VwZGF0ZV9yb3V0ZUAyOToKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBhcHByb3ZlX3VwZGF0ZQogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9ncmFudF91cGdyYWRlcl9yb3V0ZUAzMDoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBncmFudF91cGdyYWRlcgogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl90cmFuc2Zlcl9yb3V0ZUAzMToKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYmFyZV9yb3V0aW5nQDM0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIGludCAwCiAgICBpbnQgNAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgbWF0Y2ggbWFpbl9jcmVhdGVAMzUgbWFpbl9vbl91cGRhdGVAMzYKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCm1haW5fY3JlYXRlQDM1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAhCiAgICBhc3NlcnQgLy8gaXMgY3JlYXRpbmcKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb25fdXBkYXRlQDM2OgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkyCiAgICAvLyBAYXJjNC5iYXJlbWV0aG9kKGFsbG93X2FjdGlvbnM9WyJVcGRhdGVBcHBsaWNhdGlvbiJdKQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5Mi05MwogICAgLy8gQGFyYzQuYmFyZW1ldGhvZChhbGxvd19hY3Rpb25zPVsiVXBkYXRlQXBwbGljYXRpb24iXSkKICAgIC8vIGRlZiBvbl91cGRhdGUoc2VsZikgLT4gTm9uZToKICAgIGNhbGxzdWIgb25fdXBkYXRlCiAgICBpbnQgMQogICAgcmV0dXJuCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUucG9zdF91cGRhdGUoKSAtPiB2b2lkOgpwb3N0X3VwZGF0ZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzOC0zNjM5CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwb3N0X3VwZGF0ZShzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikgICMgbWludGFibGUgYXJjMjAwIGFwcCBpZCAoIlZPSSIpCiAgICBpbnQgNDY1MDQ0MzYKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDYKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NDEKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDMpICAjIGNyZWRpdCBhbmQgbmV0d29yayBlbmFibGVkCiAgICBpbnQgMwogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmJvb3RzdHJhcCgpIC0+IHZvaWQ6CmJvb3RzdHJhcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY0NS0zNjQ2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQ3CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9vbmx5X293bmVyKCkgLT4gdm9pZDoKX29ubHlfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODEtMzY4MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODYKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYuX2dldF9vd25lcigpLCAib25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgX2dldF9vd25lcgogICAgPT0KICAgIGFzc2VydCAvLyBvbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X293bmVyKCkgLT4gYnl0ZXM6Cl9nZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2ODgtMzY4OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X293bmVyKHNlbGYpIC0+IEFjY291bnQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY5MAogICAgLy8gcmV0dXJuIHNlbGYub3duZXIKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2OTAKICAgIC8vIHJldHVybiBzZWxmLm93bmVyCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5ib290c3RyYXBfY29zdCgpIC0+IGJ5dGVzOgpib290c3RyYXBfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY1NC0zNjU1CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBib290c3RyYXBfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjU2CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoMV8wMDBfMDAwKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwZjQyNDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9vd25lcigpIC0+IGJ5dGVzOgpnZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2NjItMzY2MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjY3CiAgICAvLyByZXR1cm4gYXJjNC5BZGRyZXNzKHNlbGYuX2dldF9vd25lcigpKQogICAgY2FsbHN1YiBfZ2V0X293bmVyCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS50cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjY5LTM2NzAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjc0CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY3NQogICAgLy8gc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3RyYW5zZmVyX293bmVyc2hpcAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3RyYW5zZmVyX293bmVyc2hpcChuZXdfb3duZXI6IGJ5dGVzKSAtPiB2b2lkOgpfdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjkyLTM2OTMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3RyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY5NAogICAgLy8gc2VsZi5vd25lciA9IG5ld19vd25lcgogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2NkZl9yZWVsMSgpIC0+IGJ5dGVzOgpnZXRfY2RmX3JlZWwxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzIxLTM3MjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9jZGZfcmVlbDEoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MjMKICAgIC8vIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX3JlZWwxKCkpCiAgICBjYWxsc3ViIF9nZXRfY2RmX3JlZWwxCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2NkZl9yZWVsMSgpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9yZWVsMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwNy0zNzE0CiAgICAvLyAjIENERl9SRUVMMSA9IFsKICAgIC8vICMgICAgIDQyNzA3NjY2LCAgIDg1NDE1MzMyLCAgMTcwODMwNjY0LCAgMjM0ODkyMTYzLAogICAgLy8gIyAgICAgMjk4OTUzNjYyLCAgMzg0MzY4OTk0LCAgNDY5Nzg0MzI2LCAgNTU1MTk5NjU4LAogICAgLy8gIyAgICAgNjgzMzIyNjU2LCAgODMyNzk5NDg4LCAgOTgyMjc2MzE5LCAgOTgyMjc2MzE5LAogICAgLy8gIyAgICAgOTgyMjc2MzE5LCAgOTgyMjc2MzE5LCAgOTgzOTg0NjI1LCAxMDAwMDAwMDAwCiAgICAvLyAjIF0KICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfcmVlbDEoc2VsZikgLT4gQnl0ZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcxNS0zNzE4CiAgICAvLyBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcxNwogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMi0zNjM0CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzE3CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3RvcmFnZV9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcxNS0zNzE4CiAgICAvLyBjZGZfcmVlbDEsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiY2RmX3JlZWwxX2RlZmF1bHQoKXVpbnQ2NFsxNl0iCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzE5CiAgICAvLyByZXR1cm4gY2RmX3JlZWwxLmJ5dGVzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfY2RmX290aGVycygpIC0+IGJ5dGVzOgpnZXRfY2RmX290aGVyczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzczOS0zNzQwCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX290aGVycyhzZWxmKSAtPiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb246CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0MQogICAgLy8gcmV0dXJuIEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfb3RoZXJzKCkpCiAgICBjYWxsc3ViIF9nZXRfY2RmX290aGVycwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9jZGZfb3RoZXJzKCkgLT4gYnl0ZXM6Cl9nZXRfY2RmX290aGVyczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcyNS0zNzMyCiAgICAvLyAjIENERl9PVEhFUlMgPSBbCiAgICAvLyAjICAgICA0MDc0OTc5NiwgICA4MTQ5OTU5MywgIDE2Mjk5OTE4NSwgIDIyNDEyMzg3OSwKICAgIC8vICMgICAgIDI4NTI0ODU3NCwgIDM2Njc0ODE2NiwgIDQ0ODI0Nzc1OSwgIDUyOTc0NzM1MSwKICAgIC8vICMgICAgIDY1MTk5Njc0MCwgIDc5NDYyMTAyNywgICo5MzcyNDUzMTQsICA5NTc2MjAyMTIsCiAgICAvLyAjICAgICA5NzI5MDEzODUsICA5ODMwODg4MzUqLCAgOTg0NzE4ODI2LCAxMDAwMDAwMDAwCiAgICAvLyAjIF0KICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfb3RoZXJzKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzMtMzczNgogICAgLy8gY2RmX290aGVycywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX290aGVyX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzM1CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMyLTM2MzQKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MzUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zdG9yYWdlX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzMzLTM3MzYKICAgIC8vIGNkZl9vdGhlcnMsIHR4biA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9vdGhlcl9kZWZhdWx0LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiY2RmX290aGVyX2RlZmF1bHQoKXVpbnQ2NFsxNl0iCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZHVwCiAgICBleHRyYWN0IDQgMAogICAgc3dhcAogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzM3CiAgICAvLyByZXR1cm4gY2RmX290aGVycy5ieXRlcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2NkZl9ncmlkKCkgLT4gYnl0ZXM6CmdldF9jZGZfZ3JpZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0NC0zODQ1CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfY2RmX2dyaWQoc2VsZikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ2CiAgICAvLyBlbnN1cmVfYnVkZ2V0KDI4MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjgwMAogICAgaW50IDAKICAgIGNhbGxzdWIgZW5zdXJlX2J1ZGdldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQ3CiAgICAvLyBzZWVkID0gc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikKICAgIGdsb2JhbCBSb3VuZAogICAgaW50IDIKICAgIC0KICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NDgKICAgIC8vIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQpKQogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICByZXRzdWIKCgovLyBhbGdvcHkuZW5zdXJlX2J1ZGdldChyZXF1aXJlZF9idWRnZXQ6IHVpbnQ2NCwgZmVlX3NvdXJjZTogdWludDY0KSAtPiB2b2lkOgplbnN1cmVfYnVkZ2V0OgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjExLTE3CiAgICBwcm90byAyIDAKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToxOAogICAgZnJhbWVfZGlnIC0yCiAgICBpbnQgMTAKICAgICsKCmVuc3VyZV9idWRnZXRfd2hpbGVfdG9wQDE6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MTkKICAgIGZyYW1lX2RpZyAwCiAgICBnbG9iYWwgT3Bjb2RlQnVkZ2V0CiAgICA+CiAgICBieiBlbnN1cmVfYnVkZ2V0X2FmdGVyX3doaWxlQDcKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyMAogICAgaXR4bl9iZWdpbgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIxCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIyCiAgICBpbnQgRGVsZXRlQXBwbGljYXRpb24KICAgIGl0eG5fZmllbGQgT25Db21wbGV0aW9uCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjMKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQXBwcm92YWxQcm9ncmFtCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjQKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQ2xlYXJTdGF0ZVByb2dyYW0KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNS0yOQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2l0Y2ggZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8wQDMgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8xQDQKICAgIGIgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDYKCmVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfMEAzOgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI3CiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGIgZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDYKCmVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfMUA0OgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI5CiAgICBnbG9iYWwgTWluVHhuRmVlCiAgICBpdHhuX2ZpZWxkIEZlZQoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV9uZXh0QDY6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MzAKICAgIGl0eG5fc3VibWl0CiAgICBiIGVuc3VyZV9idWRnZXRfd2hpbGVfdG9wQDEKCmVuc3VyZV9idWRnZXRfYWZ0ZXJfd2hpbGVANzoKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmxvY2tfc2VlZChyb3VuZDogdWludDY0KSAtPiBieXRlczoKX2dldF9ibG9ja19zZWVkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzAwLTM3MDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MDUKICAgIC8vIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIGZyYW1lX2RpZyAtMQogICAgYmxvY2sgQmxrU2VlZAogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgZGlnIDEKICAgID49CiAgICBpbnQgMzIKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgZGlnIDEKICAgIHN3YXAKICAgIC0KICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfY2RmX2dyaWQoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X2NkZl9ncmlkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODMzLTM4MzQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jZGZfZ3JpZChzZWxmLCBzZWVkOiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgzNQogICAgLy8gY2RmX3JlZWwxID0gc2VsZi5fZ2V0X2NkZl9yZWVsMSgpCiAgICBjYWxsc3ViIF9nZXRfY2RmX3JlZWwxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzYKICAgIC8vIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICBjYWxsc3ViIF9nZXRfY2RmX290aGVycwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODM3CiAgICAvLyBjb2wxID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX3JlZWwxLCBVSW50NjQoMCkpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGludCAwCiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODM4CiAgICAvLyBjb2wyID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDEpKQogICAgZnJhbWVfZGlnIC0xCiAgICBkaWcgMQogICAgaW50IDEKICAgIGNhbGxzdWIgX2dldF9jb2xfc2VsZWN0aW9uCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MzkKICAgIC8vIGNvbDMgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMikpCiAgICBmcmFtZV9kaWcgLTEKICAgIGRpZyAxCiAgICBpbnQgMgogICAgY2FsbHN1YiBfZ2V0X2NvbF9zZWxlY3Rpb24KICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0MAogICAgLy8gY29sNCA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgZGlnIDEKICAgIGludCAzCiAgICBjYWxsc3ViIF9nZXRfY29sX3NlbGVjdGlvbgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODQxCiAgICAvLyBjb2w1ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDQpKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBpbnQgNAogICAgY2FsbHN1YiBfZ2V0X2NvbF9zZWxlY3Rpb24KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg0MgogICAgLy8gcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIHVuY292ZXIgNAogICAgdW5jb3ZlciA0CiAgICBjb25jYXQKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZDogYnl0ZXMsIGNkZjogYnl0ZXMsIGNvbF9pbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9jb2xfc2VsZWN0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODI3LTM4MjgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgyOQogICAgLy8gcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3JuZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODMwCiAgICAvLyBjb2xfc2VsZWN0aW9uID0gc2VsZi5fZ2V0X2RyYXdfY29sX251bWJhKGNkZiwgcm5nKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9nZXRfZHJhd19jb2xfbnVtYmEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgzMQogICAgLy8gcmV0dXJuIGNvbF9zZWxlY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfcm5nKHNlZWQ6IGJ5dGVzLCBpbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9ybmc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NTEtMzc1MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZyhzZWxmLCBzZWVkOiBCeXRlcywgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc1Ny0zNzU4CiAgICAvLyAjIENvbWJpbmUgc2VlZCB3aXRoIHNwaW5fY291bnQgYXMgbm9uY2UgZm9yIHVuaXF1ZW5lc3MKICAgIC8vIGNvbF9pbmRleF9ieXRlcyA9IGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NTkKICAgIC8vIGNvbWJpbmVkID0gc2VlZCArIGNvbF9pbmRleF9ieXRlcwogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc2MAogICAgLy8gcmV0dXJuIG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIHNoYTI1NgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9kcmF3X2NvbF9udW1iYShjZGY6IGJ5dGVzLCBybmc6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9kcmF3X2NvbF9udW1iYToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxOC0zODIwCiAgICAvLyAjIFRPRE8gY29uc2lkZXIgcmVuYW1pbmcgdG8gX2dldF9kcmF3X2NvbAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjEKICAgIC8vIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcm5nX3RyaXBsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODIyCiAgICAvLyBkcmF3MSA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMF0ubmF0aXZlKQogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY2RmX2RyYXcKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgyMwogICAgLy8gZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNhbGxzdWIgX2NkZl9kcmF3CiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjQKICAgIC8vIGRyYXczID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1syXS5uYXRpdmUpCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGNhbGxzdWIgX2NkZl9kcmF3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MjUKICAgIC8vIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICBjb3ZlciAyCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9ybmdfdHJpcGxlKHNlZWQ6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9ybmdfdHJpcGxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzYyLTM3NjMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ybmdfdHJpcGxlKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY1CiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDApKVs6OF0pLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMAogICAgY2FsbHN1YiBfZ2V0X3JuZwogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGludCAwCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NjYKICAgIC8vICUgQ0RGX1NDQUxFCiAgICBpbnQgMTAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY1LTM3NjYKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICAvLyAlIENERl9TQ0FMRQogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY5CiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDEpKVs6OF0pLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgY2FsbHN1YiBfZ2V0X3JuZwogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGludCAwCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NzAKICAgIC8vICUgQ0RGX1NDQUxFCiAgICBpbnQgMTAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzY5LTM3NzAKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICAvLyAlIENERl9TQ0FMRQogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzczCiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKHNlbGYuX2dldF9ybmcoc2VlZCwgVUludDY0KDIpKVs6OF0pLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMgogICAgY2FsbHN1YiBfZ2V0X3JuZwogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGludCAwCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NzQKICAgIC8vICUgQ0RGX1NDQUxFCiAgICBpbnQgMTAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzczLTM3NzQKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICAvLyAlIENERl9TQ0FMRQogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzc3CiAgICAvLyBhcmM0LlVJbnQ2NChybmcxKSwKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzc4CiAgICAvLyBhcmM0LlVJbnQ2NChybmcyKSwKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzc5CiAgICAvLyBhcmM0LlVJbnQ2NChybmczKSwKICAgIHN3YXAKICAgIGl0b2IKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc3Ni0zNzgwCiAgICAvLyByZXR1cm4gVUludDY0XzMoCiAgICAvLyAgICAgYXJjNC5VSW50NjQocm5nMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQocm5nMiksCiAgICAvLyAgICAgYXJjNC5VSW50NjQocm5nMyksCiAgICAvLyApLmJ5dGVzCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2RmX2RyYXcoY2RmOiBieXRlcywgY29sX3NlbGVjdGlvbjogdWludDY0KSAtPiBieXRlczoKX2NkZl9kcmF3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzgyLTM3ODMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NkZl9kcmF3KHNlbGYsIGNkZjogQnl0ZXMsIGNvbF9zZWxlY3Rpb246IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4NQogICAgLy8gaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMF06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3ODYKICAgIC8vIHJldHVybiBCeXRlcyhiIjAiKQogICAgYnl0ZSAweDMwCiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4NwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc4OAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiMSIpCiAgICBieXRlIDB4MzEKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzg5CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzJdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5MAogICAgLy8gcmV0dXJuIEJ5dGVzKGIiMiIpCiAgICBieXRlIDB4MzIKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzkxCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzNdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDI0IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5MgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiMyIpCiAgICBieXRlIDB4MzMKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzkzCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzRdOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDEwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTQKICAgIC8vIHJldHVybiBCeXRlcyhiIjQiKQogICAgYnl0ZSAweDM0CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3OTUKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbNV06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5NgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiNSIpCiAgICBieXRlIDB4MzUKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc5NwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs2XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAxNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzk4CiAgICAvLyByZXR1cm4gQnl0ZXMoYiI2IikKICAgIGJ5dGUgMHgzNgogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzk5CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzddOgogICAgZnJhbWVfZGlnIC0yCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MDAKICAgIC8vIHJldHVybiBCeXRlcyhiIjciKQogICAgYnl0ZSAweDM3CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMTY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MDEKICAgIC8vIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbOF06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgNjQgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMTgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgwMgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiOCIpCiAgICBieXRlIDB4MzgKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAxODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgwMwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVs5XToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA3MiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA0CiAgICAvLyByZXR1cm4gQnl0ZXMoYiI5IikKICAgIGJ5dGUgMHgzOQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDIwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA1CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEwXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA4MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA2CiAgICAvLyByZXR1cm4gQnl0ZXMoYiJBIikKICAgIGJ5dGUgMHg0MQogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDIyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA3CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzExXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA4OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA4CiAgICAvLyByZXR1cm4gQnl0ZXMoYiJCIikKICAgIGJ5dGUgMHg0MgogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDI0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODA5CiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEyXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCA5NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDAKICAgIGI+PQogICAgYnogX2NkZl9kcmF3X2Vsc2VfYm9keUAyNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODEwCiAgICAvLyByZXR1cm4gQnl0ZXMoYiJDIikKICAgIGJ5dGUgMHg0MwogICAgc3dhcAogICAgcmV0c3ViCgpfY2RmX2RyYXdfZWxzZV9ib2R5QDI2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODExCiAgICAvLyBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEzXToKICAgIGZyYW1lX2RpZyAtMgogICAgZXh0cmFjdCAxMDQgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAwCiAgICBiPj0KICAgIGJ6IF9jZGZfZHJhd19lbHNlX2JvZHlAMjgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxMgogICAgLy8gcmV0dXJuIEJ5dGVzKGIiRCIpCiAgICBieXRlIDB4NDQKICAgIHN3YXAKICAgIHJldHN1YgoKX2NkZl9kcmF3X2Vsc2VfYm9keUAyODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzgxMwogICAgLy8gZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxNF06CiAgICBmcmFtZV9kaWcgLTIKICAgIGV4dHJhY3QgMTEyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgYj49CiAgICBieiBfY2RmX2RyYXdfZWxzZV9ib2R5QDMwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTQKICAgIC8vIHJldHVybiBCeXRlcyhiIkUiKQogICAgYnl0ZSAweDQ1CiAgICBzd2FwCiAgICByZXRzdWIKCl9jZGZfZHJhd19lbHNlX2JvZHlAMzA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4MTYKICAgIC8vIHJldHVybiBCeXRlcyhiIkYiKQogICAgYnl0ZSAweDQ2CiAgICBzd2FwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5yZWVsX2hhc19zeW1ib2woZ3JpZDogYnl0ZXMsIHJlZWw6IGJ5dGVzLCBzeW06IGJ5dGVzKSAtPiBieXRlczoKcmVlbF9oYXNfc3ltYm9sOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODU1LTM4NTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIHJlZWxfaGFzX3N5bWJvbCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlczE1LCByZWVsOiBhcmM0LlVJbnQ2NCwgc3ltOiBCeXRlczEKICAgIC8vICkgLT4gYXJjNC5Cb29sOgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTkKICAgIC8vIHJldHVybiBhcmM0LkJvb2woc2VsZi5fcmVlbF9oYXNfc3ltYm9sKGdyaWQuYnl0ZXMsIHJlZWwubmF0aXZlLCBzeW0uYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTMKICAgIHN3YXAKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfcmVlbF9oYXNfc3ltYm9sCiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3JlZWxfaGFzX3N5bWJvbChncmlkOiBieXRlcywgcmVlbDogdWludDY0LCBzeW06IGJ5dGVzKSAtPiB1aW50NjQ6Cl9yZWVsX2hhc19zeW1ib2w6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjEtMzg2MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9oYXNfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMpIC0+IGJvb2w6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2MwogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgaW50IDAKCl9yZWVsX2hhc19zeW1ib2xfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODYzCiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoMyk6CiAgICBmcmFtZV9kaWcgMAogICAgaW50IDMKICAgIDwKICAgIGJ6IF9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfZm9yQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2NAogICAgLy8gaWYgZ3JpZFtyZWVsICogMyArIHJdID09IHN5bToKICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDMKICAgICoKICAgIGZyYW1lX2RpZyAwCiAgICArCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTMKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIGJ6IF9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjUKICAgIC8vIHJldHVybiBUcnVlCiAgICBpbnQgMQogICAgc3dhcAogICAgcmV0c3ViCgpfcmVlbF9oYXNfc3ltYm9sX2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2MwogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgZnJhbWVfZGlnIDAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDAKICAgIGIgX3JlZWxfaGFzX3N5bWJvbF9mb3JfaGVhZGVyQDEKCl9yZWVsX2hhc19zeW1ib2xfYWZ0ZXJfZm9yQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NjYKICAgIC8vIHJldHVybiBGYWxzZQogICAgaW50IDAKICAgIHN3YXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmNhbGN1bGF0ZV9ncmlkX3BheW91dCgpIC0+IGJ5dGVzOgpjYWxjdWxhdGVfZ3JpZF9wYXlvdXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTQtNDAxNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PUZhbHNlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDE2CiAgICAvLyBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgaW50IDIwMDAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTcKICAgIC8vIGdyaWQgPSBzZWxmLl9nZXRfY2RmX2dyaWQoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikpCiAgICBnbG9iYWwgUm91bmQKICAgIGludCAyCiAgICAtCiAgICBjYWxsc3ViIF9nZXRfYmxvY2tfc2VlZAogICAgY2FsbHN1YiBfZ2V0X2NkZl9ncmlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMTgKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoZ3JpZCkpCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoZ3JpZDogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAzMi00MDM2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNDEKICAgIC8vIGxpbmVfdG90YWwgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNDIKICAgIC8vIGxpbmVfc3ltYm9scyA9IHNlbGYuX2dldF9saW5lX3N5bWJvbHMoKQogICAgY2FsbHN1YiBfZ2V0X2xpbmVfc3ltYm9scwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQzCiAgICAvLyBwYXlfZGVuc2UgPSBzZWxmLl9nZXRfcGF5X2RlbnNlKCkKICAgIGNhbGxzdWIgX2dldF9wYXlfZGVuc2UKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA0NAogICAgLy8gZm9yIGlkeCBpbiB1cmFuZ2UoMTYpOgogICAgaW50IDAKCl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfZm9yX2hlYWRlckAxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDQ0CiAgICAvLyBmb3IgaWR4IGluIHVyYW5nZSgxNik6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDE2CiAgICA8CiAgICBieiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X2FmdGVyX2ZvckA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNDUKICAgIC8vIHN5bSA9IGxpbmVfc3ltYm9sc1tpZHhdCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfZGlnIDEKICAgIHVuY292ZXIgMgogICAgZGlnIDIKICAgIHN1YnN0cmluZzMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA0NgogICAgLy8gd2F5c19yZXN1bHQgPSBzZWxmLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkLCBzeW0sIHBheV9kZW5zZSkKICAgIGZyYW1lX2RpZyAtMQogICAgc3dhcAogICAgZnJhbWVfZGlnIDIKICAgIGNhbGxzdWIgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNDcKICAgIC8vIGxpbmVfdG90YWwgKz0gd2F5c19yZXN1bHQucGF5b3V0Lm5hdGl2ZQogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgMAogICAgKwogICAgZnJhbWVfYnVyeSAwCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgX2NhbGN1bGF0ZV9ncmlkX3BheW91dF9mb3JfaGVhZGVyQDEKCl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfYWZ0ZXJfZm9yQDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNDkKICAgIC8vIHJldHVybiBsaW5lX3RvdGFsCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2xpbmVfc3ltYm9scygpIC0+IGJ5dGVzOgpfZ2V0X2xpbmVfc3ltYm9sczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1MC0zODUxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbGluZV9zeW1ib2xzKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NTIKICAgIC8vIGxpbmVfc3ltYm9scyA9IEJ5dGVzKGIiMDEyMzQ1Njc4OUFCQ0RFRiIpCiAgICBieXRlIDB4MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MTQyNDM0NDQ1NDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1MwogICAgLy8gcmV0dXJuIGxpbmVfc3ltYm9scwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9wYXlfZGVuc2UoKSAtPiBieXRlczoKX2dldF9wYXlfZGVuc2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDMtMzc0NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheV9kZW5zZShzZWxmKSAtPiBCeXRlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQ1LTM3NDgKICAgIC8vIHBheV9kZW5zZSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UucGF5X2RlbnNlX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQ3CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMyLTM2MzQKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDcKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zdG9yYWdlX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQ1LTM3NDgKICAgIC8vIHBheV9kZW5zZSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UucGF5X2RlbnNlX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJwYXlfZGVuc2VfZGVmYXVsdCgpdWludDY0Wzk2XSIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBkdXAKICAgIGV4dHJhY3QgNCAwCiAgICBzd2FwCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3NDkKICAgIC8vIHJldHVybiBwYXlfZGVuc2UuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscyhncmlkOiBieXRlcywgc3ltOiBieXRlcywgcGF5X2RlbnNlOiBieXRlcykgLT4gYnl0ZXM6Cl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0Ny0zOTUwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgc3ltOiBCeXRlcywgcGF5X2RlbnNlOiBCeXRlcwogICAgLy8gKSAtPiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzOgogICAgcHJvdG8gMyAxCiAgICBpbnQgMAogICAgZHVwCiAgICBieXRlICIiCiAgICBkdXBuIDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1NAogICAgLy8gaWYgbm90IHNlbGYuX3JlZWxfaGFzX3N5bWJvbChncmlkLCBVSW50NjQoMCksIHN5bSk6CiAgICBmcmFtZV9kaWcgLTMKICAgIGludCAwCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX3JlZWxfaGFzX3N5bWJvbAogICAgYm56IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk1NS0zOTYxCiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjMKICAgIC8vIHJlZWxfbWF0Y2hlcyA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgY2FsbHN1YiBfcmVlbF9tYXRjaGVzCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NAogICAgLy8gY29udHJpYiA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgY2FsbHN1YiBfcmVlbF9tYXRjaGVzCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NQogICAgLy8gbl9jb250cmliID0gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjYKICAgIC8vIGsgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDQKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc193aGlsZV90b3BAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk2NwogICAgLy8gd2hpbGUgayA8IFVJbnQ2NChOVU1fUkVFTFMpOgogICAgZnJhbWVfZGlnIDQKICAgIGludCA1CiAgICA8CiAgICBieiBfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfd2hpbGVANwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTY4CiAgICAvLyBtID0gc2VsZi5fY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZChncmlkLCBrLCBzeW0pCiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyA0CiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQKICAgIGR1cAogICAgZnJhbWVfYnVyeSA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NjkKICAgIC8vIGlmIG0gPT0gMDoKICAgIGJ6IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl93aGlsZUA3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzEKICAgIC8vIHJlZWxfbWF0Y2hlc1trXSA9IGFyYzQuVUludDY0KG0pCiAgICBmcmFtZV9kaWcgNQogICAgaXRvYgogICAgZnJhbWVfZGlnIDQKICAgIGR1cAogICAgaW50IDE2CiAgICA8CiAgICBhc3NlcnQgLy8gSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAxCiAgICBzd2FwCiAgICB1bmNvdmVyIDMKICAgIHJlcGxhY2UzCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3MgogICAgLy8gY29udHJpYltuX2NvbnRyaWJdID0gYXJjNC5VSW50NjQoaykKICAgIGR1cAogICAgaXRvYgogICAgZnJhbWVfZGlnIDYKICAgIGR1cAogICAgaW50IDE2CiAgICA8CiAgICBhc3NlcnQgLy8gSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAwCiAgICBzd2FwCiAgICB1bmNvdmVyIDMKICAgIHJlcGxhY2UzCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3MwogICAgLy8gbl9jb250cmliICs9IDEKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3NAogICAgLy8gayArPSAxCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSA0CiAgICBiIF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc193aGlsZV90b3BAMwoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX3doaWxlQDc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzcKICAgIC8vIGlmIG1hdGNoX2xlbiA8IDM6CiAgICBmcmFtZV9kaWcgNAogICAgaW50IDMKICAgIDwKICAgIGJ6IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4MAogICAgLy8gbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICBmcmFtZV9kaWcgNAogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc5CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTc4LTM5ODQKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyApCiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4MQogICAgLy8gd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NzgtMzk4NAogICAgLy8gcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTgyCiAgICAvLyBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3OC0zOTg0CiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gKQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5ODMKICAgIC8vIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3OC0zOTg0CiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgd2F5cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gKQogICAgY29uY2F0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2lmX2Vsc2VAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk4NgogICAgLy8gd2F5cyA9IFVJbnQ2NCgxKQogICAgaW50IDEKICAgIGZyYW1lX2J1cnkgNwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg3CiAgICAvLyBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDMKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19mb3JfaGVhZGVyQDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg3CiAgICAvLyBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIGZyYW1lX2RpZyAzCiAgICBmcmFtZV9kaWcgNAogICAgPAogICAgYnogX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2FmdGVyX2ZvckAxMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg4CiAgICAvLyB3YXlzICo9IHJlZWxfbWF0Y2hlc1tpXS5uYXRpdmUKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGludCA4CiAgICAqCiAgICBmcmFtZV9kaWcgMQogICAgc3dhcAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIDcKICAgICoKICAgIGZyYW1lX2J1cnkgNwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTg3CiAgICAvLyBmb3IgaSBpbiB1cmFuZ2UobWF0Y2hfbGVuKToKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgX3dheXNfd2l0aF9zcGluX2NhcF9kZXRhaWxzX2Zvcl9oZWFkZXJAMTAKCl93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9mb3JAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTAKICAgIC8vIGJhc2UgPSBwZFtzZWxmLl9zeW1ib2xfdG9faW5kZXgoc3ltKSAqIDYgKyBtYXRjaF9sZW5dLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9zeW1ib2xfdG9faW5kZXgKICAgIGludCA2CiAgICAqCiAgICBmcmFtZV9kaWcgNAogICAgKwogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAtMQogICAgc3dhcAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9idXJ5IDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5MQogICAgLy8gaWYgYmFzZSA9PSAwOgogICAgYm56IF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlsc19hZnRlcl9pZl9lbHNlQDE1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTQKICAgIC8vIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgZnJhbWVfZGlnIDQKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5NQogICAgLy8gd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIGZyYW1lX2RpZyA3CiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTMKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTItMzk5OAogICAgLy8gcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICAvLyAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICkKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5OTYKICAgIC8vIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTkyLTM5OTgKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyApCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk5NwogICAgLy8gbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTkyLTM5OTgKICAgIC8vIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyApCiAgICBjb25jYXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHNfYWZ0ZXJfaWZfZWxzZUAxNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwMC00MDAyCiAgICAvLyBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlID0gc2VsZi5faGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZygKICAgIC8vICAgICBncmlkLCBjb250cmliLmJ5dGVzLCBuX2NvbnRyaWIKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIDAKICAgIGZyYW1lX2RpZyA2CiAgICBjYWxsc3ViIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDMKICAgIC8vIG11bHQgPSBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlWzBdLm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwNAogICAgLy8gYW55X3dpbGQgPSBoaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX3Jlc3BvbnNlWzFdLm5hdGl2ZQogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDUKICAgIC8vIHBheW91dCA9IGJhc2UgKiB3YXlzICogbXVsdAogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2RpZyA3CiAgICBkdXAKICAgIGNvdmVyIDMKICAgICoKICAgIGRpZyAxCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDcKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDA4CiAgICAvLyBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIGZyYW1lX2RpZyA0CiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMDkKICAgIC8vIHdheXM9YXJjNC5VSW50NjQod2F5cyksCiAgICB1bmNvdmVyIDMKICAgIGl0b2IKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxMAogICAgLy8gYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NChhbnlfd2lsZCksCiAgICB1bmNvdmVyIDQKICAgIGl0b2IKICAgIGNvdmVyIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAxMQogICAgLy8gbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQobXVsdCksCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAwNi00MDEyCiAgICAvLyByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIC8vICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICB3YXlzPWFyYzQuVUludDY0KHdheXMpLAogICAgLy8gICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoYW55X3dpbGQpLAogICAgLy8gICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KG11bHQpLAogICAgLy8gKQogICAgdW5jb3ZlciAzCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3JlZWxfbWF0Y2hlcygpIC0+IGJ5dGVzOgpfcmVlbF9tYXRjaGVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTAzLTM5MDQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlZWxfbWF0Y2hlcyhzZWxmKSAtPiBCeXRlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA1LTM5MDgKICAgIC8vIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UucmVlbF9tYXRjaGVzX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA3CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMyLTM2MzQKICAgIC8vICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAjIHN0b3JhZ2UKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAic3RvcmFnZV9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDcKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zdG9yYWdlX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTA1LTM5MDgKICAgIC8vIHJlZWxfbWF0Y2hlcywgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBTbG90TWFjaGluZVN0b3JhZ2UucmVlbF9tYXRjaGVzX2RlZmF1bHQsCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYuc3RvcmFnZV9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJyZWVsX21hdGNoZXNfZGVmYXVsdCgpdWludDY0WzE2XSIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBkdXAKICAgIGV4dHJhY3QgNCAwCiAgICBzd2FwCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDkKICAgIC8vIHJldHVybiByZWVsX21hdGNoZXMuYnl0ZXMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKGdyaWQ6IGJ5dGVzLCByZWVsOiB1aW50NjQsIHN5bTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTEtMzkxNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZCgKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgcmVlbDogVUludDY0LCBzeW06IEJ5dGVzCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIHByb3RvIDMgMQogICAgaW50IDAKICAgIGJ5dGUgIiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkxOAogICAgLy8gY250ID0gVUludDY0KDApCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTE5CiAgICAvLyBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgZHVwCgpfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTkKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDMKICAgIDwKICAgIGJ6IF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2FmdGVyX2ZvckA5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjAKICAgIC8vIHYgPSBncmlkW3JlZWwgKiAzICsgcl0KICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDMKICAgICoKICAgIGZyYW1lX2RpZyAzCiAgICArCiAgICBkdXAKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTMKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjEKICAgIC8vIGlmIHYgPT0gc3ltIG9yIHYgPT0gV0lMRDEgb3IgdiA9PSBXSUxEMiBvciB2ID09IFdJTEQzOgogICAgZnJhbWVfZGlnIC0xCiAgICA9PQogICAgYm56IF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2lmX2JvZHlANgogICAgZnJhbWVfZGlnIDAKICAgIGJ5dGUgMHg0MgogICAgPT0KICAgIGJueiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9pZl9ib2R5QDYKICAgIGZyYW1lX2RpZyAwCiAgICBieXRlIDB4NDMKICAgID09CiAgICBibnogX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfaWZfYm9keUA2CiAgICBmcmFtZV9kaWcgMAogICAgYnl0ZSAweDQ0CiAgICA9PQogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2J1cnkgMQogICAgYnogX2NvdW50X21hdGNoZXNfc3ltYm9sX29yX3dpbGRfYWZ0ZXJfaWZfZWxzZUA3CgpfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9pZl9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjIKICAgIC8vIGNudCArPSBVSW50NjQoMSkKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAxCgpfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9hZnRlcl9pZl9lbHNlQDc6CiAgICBmcmFtZV9kaWcgMQogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MTkKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZF9mb3JfaGVhZGVyQDEKCl9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkX2FmdGVyX2ZvckA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTIzCiAgICAvLyByZXR1cm4gY250CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3ltYm9sX3RvX2luZGV4KHN5bTogYnl0ZXMpIC0+IHVpbnQ2NDoKX3N5bWJvbF90b19pbmRleDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg2OC0zODY5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zeW1ib2xfdG9faW5kZXgoc2VsZiwgc3ltOiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzAKICAgIC8vIGlmIHN5bSA9PSBCVUZGQUxPOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzAKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzEKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzIKICAgIC8vIGVsaWYgc3ltID09IEVBR0xFOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzEKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzMKICAgIC8vIHJldHVybiBVSW50NjQoMSkKICAgIGludCAxCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4NzQKICAgIC8vIGVsaWYgc3ltID09IENPVUdBUjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDMyCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODc1CiAgICAvLyByZXR1cm4gVUludDY0KDIpCiAgICBpbnQgMgogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODc2CiAgICAvLyBlbGlmIHN5bSA9PSBFTEs6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzMwogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3NwogICAgLy8gcmV0dXJuIFVJbnQ2NCgzKQogICAgaW50IDMKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3OAogICAgLy8gZWxpZiBzeW0gPT0gV09MRjoKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM0CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg3OQogICAgLy8gcmV0dXJuIFVJbnQ2NCg0KQogICAgaW50IDQKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODAKICAgIC8vIGVsaWYgc3ltID09IEE6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzNQogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDEyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODEKICAgIC8vIHJldHVybiBVSW50NjQoNSkKICAgIGludCA1CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODgyCiAgICAvLyBlbGlmIHN5bSA9PSBLOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzYKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODgzCiAgICAvLyByZXR1cm4gVUludDY0KDYpCiAgICBpbnQgNgogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAxNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg4NAogICAgLy8gZWxpZiBzeW0gPT0gUToKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM3CiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg4NQogICAgLy8gcmV0dXJuIFVJbnQ2NCg3KQogICAgaW50IDcKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMTY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODYKICAgIC8vIGVsaWYgc3ltID09IEo6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzOAogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODcKICAgIC8vIHJldHVybiBVSW50NjQoOCkKICAgIGludCA4CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODg4CiAgICAvLyBlbGlmIHN5bSA9PSBURU46CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzOQogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDIwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4ODkKICAgIC8vIHJldHVybiBVSW50NjQoOSkKICAgIGludCA5CiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDIwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODkwCiAgICAvLyBlbGlmIHN5bSA9PSBOSU5FOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4NDEKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODkxCiAgICAvLyByZXR1cm4gVUludDY0KDEwKQogICAgaW50IDEwCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDIyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODkyCiAgICAvLyBlbGlmIHN5bSA9PSBXSUxEMToKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDQyCiAgICA9PQogICAgYnogX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg5MwogICAgLy8gcmV0dXJuIFVJbnQ2NCgxMSkKICAgIGludCAxMQogICAgcmV0c3ViCgpfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg5NAogICAgLy8gZWxpZiBzeW0gPT0gV0lMRDI6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHg0MwogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTUKICAgIC8vIHJldHVybiBVSW50NjQoMTIpCiAgICBpbnQgMTIKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTYKICAgIC8vIGVsaWYgc3ltID09IFdJTEQzOgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4NDQKICAgID09CiAgICBieiBfc3ltYm9sX3RvX2luZGV4X2Vsc2VfYm9keUAyOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk3CiAgICAvLyByZXR1cm4gVUludDY0KDEzKQogICAgaW50IDEzCiAgICByZXRzdWIKCl9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDI4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODk4CiAgICAvLyBlbGlmIHN5bSA9PSBIT1Y6CiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHg0NQogICAgPT0KICAgIGJ6IF9zeW1ib2xfdG9faW5kZXhfZWxzZV9ib2R5QDMwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM4OTkKICAgIC8vIHJldHVybiBVSW50NjQoMTQpCiAgICBpbnQgMTQKICAgIHJldHN1YgoKX3N5bWJvbF90b19pbmRleF9lbHNlX2JvZHlAMzA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MDEKICAgIC8vIHJldHVybiBVSW50NjQoMTUpCiAgICBpbnQgMTUKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nKGdyaWQ6IGJ5dGVzLCBjb250cmliX3JlZWxzOiBieXRlcywgbl9yZWVsczogdWludDY0KSAtPiBieXRlczoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MjUtMzkyOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgY29udHJpYl9yZWVsczogQnl0ZXMsIG5fcmVlbHM6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjRfMjoKICAgIHByb3RvIDMgMQogICAgaW50IDAKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTMwCiAgICAvLyBtdWx0ID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTMxCiAgICAvLyBhbnlfd2lsZCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzMgogICAgLy8gZm9yIGkgaW4gdXJhbmdlKG5fcmVlbHMpOgogICAgZHVwCgpfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19mb3JfaGVhZGVyQDE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzIKICAgIC8vIGZvciBpIGluIHVyYW5nZShuX3JlZWxzKToKICAgIGZyYW1lX2RpZyA1CiAgICBmcmFtZV9kaWcgLTEKICAgIDwKICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2ZvckAxOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTMzCiAgICAvLyByaSA9IGNvbnRyaWJbaV0ubmF0aXZlCiAgICBmcmFtZV9kaWcgNQogICAgaW50IDgKICAgICoKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzQKICAgIC8vIGZvciByIGluIHVyYW5nZSgzKToKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDEKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Zvcl9oZWFkZXJAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNAogICAgLy8gZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgZnJhbWVfZGlnIDEKICAgIGludCAzCiAgICA8CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19hZnRlcl9mb3JAMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNQogICAgLy8gdiA9IGdyaWRbcmkgKiAzICsgcl0KICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgMwogICAgKgogICAgZnJhbWVfZGlnIDEKICAgICsKICAgIGR1cAogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2RpZyAtMwogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkzNgogICAgLy8gaWYgdiA9PSBXSUxEMzoKICAgIGJ5dGUgMHg0NAogICAgPT0KICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzgKICAgIC8vIHJldHVybiBVSW50NjRfMihhcmM0LlVJbnQ2NCgzKSwgYXJjNC5VSW50NjQoYW55X3dpbGQpKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDMwMDAwMDAwMDAwMDAwMDAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzkKICAgIC8vIGVsaWYgdiA9PSBXSUxEMjoKICAgIGZyYW1lX2RpZyAwCiAgICBieXRlIDB4NDMKICAgID09CiAgICBieiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0MAogICAgLy8gYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIGludCAxCiAgICBmcmFtZV9idXJ5IDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0MQogICAgLy8gaWYgbXVsdCA8IFVJbnQ2NCgyKToKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMgogICAgPAogICAgYnogX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfaWZfZWxzZUAxMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTQyCiAgICAvLyBtdWx0ID0gVUludDY0KDIpCiAgICBpbnQgMgogICAgZnJhbWVfYnVyeSAzCiAgICBiIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2lmX2Vsc2VAMTMKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0MwogICAgLy8gZWxpZiB2ID09IFdJTEQxOgogICAgZnJhbWVfZGlnIDAKICAgIGJ5dGUgMHg0MgogICAgPT0KICAgIGJ6IF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2lmX2Vsc2VAMTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0NAogICAgLy8gYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIGludCAxCiAgICBmcmFtZV9idXJ5IDQKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2lmX2Vsc2VAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5MzQKICAgIC8vIGZvciByIGluIHVyYW5nZSgzKToKICAgIGZyYW1lX2RpZyAxCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAxCiAgICBiIF9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2Zvcl9oZWFkZXJAMwoKX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfYWZ0ZXJfZm9yQDE2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTMyCiAgICAvLyBmb3IgaSBpbiB1cmFuZ2Uobl9yZWVscyk6CiAgICBmcmFtZV9kaWcgNQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgNQogICAgYiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19mb3JfaGVhZGVyQDEKCl9oaWdoZXN0X3dpbGRfb25fY29udHJpYnV0aW5nX2FmdGVyX2ZvckAxODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk0NQogICAgLy8gcmV0dXJuIFVJbnQ2NF8yKGFyYzQuVUludDY0KG11bHQpLCBhcmM0LlVJbnQ2NChhbnlfd2lsZCkpCiAgICBmcmFtZV9kaWcgMwogICAgaXRvYgogICAgZnJhbWVfZGlnIDQKICAgIGl0b2IKICAgIGNvbmNhdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdCgpIC0+IGJ5dGVzOgpjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1MS00MDUyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBjYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdChzZWxmKSAtPiBTcGluUmVzdWx0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNTMKICAgIC8vIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMjAwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1NAogICAgLy8gZ3JpZCA9IHNlbGYuX2dldF9jZGZfZ3JpZChzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKSkKICAgIGdsb2JhbCBSb3VuZAogICAgaW50IDIKICAgIC0KICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICBjYWxsc3ViIF9nZXRfY2RmX2dyaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA1NgogICAgLy8gc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoZ3JpZCwgRmFsc2UsIFVJbnQ2NCgwKSksCiAgICBpbnQgMAogICAgZHVwCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDU1LTQwNTcKICAgIC8vIHJldHVybiBTcGluUmVzdWx0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoZ3JpZCwgRmFsc2UsIFVJbnQ2NCgwKSksCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoZ3JpZDogYnl0ZXMsIGlzX2JvbnVzX3NwaW46IHVpbnQ2NCwgamFja3BvdF92YWx1ZTogdWludDY0KSAtPiBieXRlczoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDU2LTU0NjQKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vICMgICBjYWxjdWxhdGUgZ3JpZCBwYXlvdXQgaG9vawogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBncmlkOiBCeXRlcywKICAgIC8vICAgICBpc19ib251c19zcGluOiBib29sLAogICAgLy8gICAgIGphY2twb3RfdmFsdWU6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byAzIDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDY5CiAgICAvLyBsaW5lX3RvdGFsID0gc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0KGdyaWQpCiAgICBmcmFtZV9kaWcgLTMKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9ncmlkX3BheW91dAogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0NzEtNTQ3MgogICAgLy8gIyBBcHBseSBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHNwaW4KICAgIC8vIGlmIGlzX2JvbnVzX3NwaW46CiAgICBmcmFtZV9kaWcgLTIKICAgIGJ6IF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ3MwogICAgLy8gbGluZV90b3RhbCA9IChsaW5lX3RvdGFsICogQk9OVVNfTElORV9NVUxUKSAvLyBCT05VU19MSU5FX01VTFRfRElWSVNPUgogICAgZnJhbWVfZGlnIDIKICAgIGludCAxNTAwMAogICAgKgogICAgaW50IDEwMDAwCiAgICAvCiAgICBmcmFtZV9idXJ5IDMKCl9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDI6CiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ3NS01NDc2CiAgICAvLyAjIENoZWNrIGphY2twb3QgdHJpZ2dlciAoSG9WIHNjYXR0ZXIpCiAgICAvLyBqYWNrcG90X2hpdCA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDc3CiAgICAvLyBob3ZfY291bnQgPSBzZWxmLl9jb3VudF9zeW1ib2woZ3JpZCwgQnl0ZXMoSE9WKSkKICAgIGZyYW1lX2RpZyAtMwogICAgYnl0ZSAweDQ1CiAgICBjYWxsc3ViIF9jb3VudF9zeW1ib2wKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ3OAogICAgLy8gaWYgaG92X2NvdW50ID49IFVJbnQ2NChKQUNLUE9UX1RSSUdHRVJfQ09VTlQpOgogICAgaW50IDMKICAgID49CiAgICBzd2FwCiAgICBmcmFtZV9idXJ5IDMKICAgIGJ6IF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ3OQogICAgLy8gbGluZV90b3RhbCArPSBqYWNrcG90X3ZhbHVlCiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0ODAKICAgIC8vIGphY2twb3RfaGl0ID0gVUludDY0KDEpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0ODEKICAgIC8vIHNlbGYuamFja3BvdCA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUKSAgIyByZXNldCBqYWNrcG90CiAgICBieXRlICJqYWNrcG90IgogICAgaW50IDUwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgZnJhbWVfYnVyeSAzCgpfY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3RfYWZ0ZXJfaWZfZWxzZUA0OgogICAgZnJhbWVfZGlnIDMKICAgIGZyYW1lX2J1cnkgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDgzLTU0ODQKICAgIC8vICMgQ2hlY2sgYm9udXMgdHJpZ2dlciAoQm9udXMgc2NhdHRlcikKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ4NQogICAgLy8gYm9udXNfY291bnQgPSBzZWxmLl9jb3VudF9zeW1ib2woZ3JpZCwgQnl0ZXMoQk9OVVMpKQogICAgZnJhbWVfZGlnIC0zCiAgICBieXRlIDB4NDYKICAgIGNhbGxzdWIgX2NvdW50X3N5bWJvbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDg2CiAgICAvLyBpZiBib251c19jb3VudCA+PSBVSW50NjQoQk9OVVNfVFJJR0dFUl9DT1VOVCk6CiAgICBpbnQgMgogICAgPj0KICAgIGJ6IF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdF9hZnRlcl9pZl9lbHNlQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ4NwogICAgLy8gYm9udXNfc3BpbnNfYXdhcmRlZCA9IFVJbnQ2NChCT05VU19TUElOU19BV0FSREVEKQogICAgaW50IDgKICAgIGZyYW1lX2J1cnkgMAoKX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90X2FmdGVyX2lmX2Vsc2VANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ5MAogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KGxpbmVfdG90YWwpLAogICAgZnJhbWVfZGlnIDIKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ5MQogICAgLy8gYm9udXNfc3BpbnNfYXdhcmRlZD1hcmM0LlVJbnQ2NChib251c19zcGluc19hd2FyZGVkKSwKICAgIGZyYW1lX2RpZyAwCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0OTIKICAgIC8vIGphY2twb3RfaGl0PWFyYzQuVUludDY0KGphY2twb3RfaGl0KSwKICAgIGZyYW1lX2RpZyAxCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0ODktNTQ5MwogICAgLy8gcmV0dXJuIFNwaW5SZXN1bHQoCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KGxpbmVfdG90YWwpLAogICAgLy8gICAgIGJvbnVzX3NwaW5zX2F3YXJkZWQ9YXJjNC5VSW50NjQoYm9udXNfc3BpbnNfYXdhcmRlZCksCiAgICAvLyAgICAgamFja3BvdF9oaXQ9YXJjNC5VSW50NjQoamFja3BvdF9oaXQpLAogICAgLy8gKS5ieXRlcwogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY291bnRfc3ltYm9sKGdyaWQ6IGJ5dGVzLCBzeW06IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jb3VudF9zeW1ib2w6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjAtNDAyMQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAyIDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI1CiAgICAvLyBjbnQgPSBVSW50NjQoMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjYKICAgIC8vIGZvciBjIGluIHVyYW5nZShOVU1fUkVFTFMpOgogICAgZHVwCgpfY291bnRfc3ltYm9sX2Zvcl9oZWFkZXJAMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyNgogICAgLy8gZm9yIGMgaW4gdXJhbmdlKE5VTV9SRUVMUyk6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDUKICAgIDwKICAgIGJ6IF9jb3VudF9zeW1ib2xfYWZ0ZXJfZm9yQDEwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjcKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBpbnQgMAogICAgZnJhbWVfYnVyeSAxCgpfY291bnRfc3ltYm9sX2Zvcl9oZWFkZXJAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyNwogICAgLy8gZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIGZyYW1lX2RpZyAxCiAgICBpbnQgMwogICAgPAogICAgYnogX2NvdW50X3N5bWJvbF9hZnRlcl9mb3JAOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI4CiAgICAvLyBpZiBncmlkW2MgKiAzICsgcl0gPT0gc3ltOgogICAgZnJhbWVfZGlnIDMKICAgIGludCAzCiAgICAqCiAgICBmcmFtZV9kaWcgMQogICAgKwogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfZGlnIC0yCiAgICBjb3ZlciAyCiAgICBzdWJzdHJpbmczCiAgICBmcmFtZV9kaWcgLTEKICAgID09CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfYnVyeSAwCiAgICBieiBfY291bnRfc3ltYm9sX2FmdGVyX2lmX2Vsc2VANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDI5CiAgICAvLyBjbnQgKz0gVUludDY0KDEpCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMAoKX2NvdW50X3N5bWJvbF9hZnRlcl9pZl9lbHNlQDY6CiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMjcKICAgIC8vIGZvciByIGluIHVyYW5nZShOVU1fUk9XUyk6CiAgICBmcmFtZV9kaWcgMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMQogICAgYiBfY291bnRfc3ltYm9sX2Zvcl9oZWFkZXJAMwoKX2NvdW50X3N5bWJvbF9hZnRlcl9mb3JAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDAyNgogICAgLy8gZm9yIGMgaW4gdXJhbmdlKE5VTV9SRUVMUyk6CiAgICBmcmFtZV9kaWcgMwogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMwogICAgYiBfY291bnRfc3ltYm9sX2Zvcl9oZWFkZXJAMQoKX2NvdW50X3N5bWJvbF9hZnRlcl9mb3JAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMzAKICAgIC8vIHJldHVybiBjbnQKICAgIGZyYW1lX2RpZyAyCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyKHRva2VuX2FwcF9pZDogYnl0ZXMpIC0+IHZvaWQ6CmluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDYzLTQwNjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGluaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyKHNlbGYsIHRva2VuX2FwcF9pZDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2OAogICAgLy8gc2VsZi5faW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZSh0b2tlbl9hcHBfaWQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZSh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNzQtNDA3NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDc5CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4MAogICAgLy8gdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4MgogICAgLy8gbm90IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfZnVzZS5uYXRpdmUKICAgIGR1cAogICAgaW50IDc2OAogICAgZ2V0Yml0CiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgaW50IDAKICAgIGdldGJpdAogICAgIQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDgxLTQwODMKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgbm90IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfZnVzZS5uYXRpdmUKICAgIC8vICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgYXNzZXJ0IC8vIGJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA4NAogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICBpbnQgNzY4CiAgICBpbnQgMQogICAgc2V0Yml0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwODUKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZDogdWludDY0KSAtPiBieXRlczoKX2dldF90b2tlbl9iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE1OS00MTYwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZXMoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IFRva2VuQmFsYW5jZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE2MS00MTY5CiAgICAvLyByZXR1cm4gc2VsZi50b2tlbl9iYWxhbmNlcy5nZXQoCiAgICAvLyAgICAgdG9rZW5fYXBwX2lkLAogICAgLy8gICAgIGRlZmF1bHQ9VG9rZW5CYWxhbmNlcygKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBib3hfZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNjMtNDE2OAogICAgLy8gZGVmYXVsdD1Ub2tlbkJhbGFuY2VzKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgYmFsYW5jZV9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNjEtNDE2OQogICAgLy8gcmV0dXJuIHNlbGYudG9rZW5fYmFsYW5jZXMuZ2V0KAogICAgLy8gICAgIHRva2VuX2FwcF9pZCwKICAgIC8vICAgICBkZWZhdWx0PVRva2VuQmFsYW5jZXMoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUub3duZXJfZGVwb3NpdF90b2tlbih0b2tlbl9hcHBfaWQ6IGJ5dGVzLCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpvd25lcl9kZXBvc2l0X3Rva2VuOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDg5LTQwOTIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIG93bmVyX2RlcG9zaXRfdG9rZW4oCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCwgYW1vdW50OiBhcmM0LlVJbnQyNTYKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDk3CiAgICAvLyBzZWxmLl9vd25lcl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZC5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfb3duZXJfZGVwb3NpdF90b2tlbgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX293bmVyX2RlcG9zaXRfdG9rZW4odG9rZW5fYXBwX2lkOiB1aW50NjQsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cl9vd25lcl9kZXBvc2l0X3Rva2VuOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDk5LTQxMDAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX293bmVyX2RlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTA1CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEwNi00MTEyCiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24odG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEwOQogICAgLy8gYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDEwOAogICAgLy8gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgdHhuIFNlbmRlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTEwCiAgICAvLyBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIGZyYW1lX2RpZyAtMQogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGZyYW1lX2RpZyAtMQogICAgYnwKICAgIGZyYW1lX2RpZyAtMgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMDYtNDExMgogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImFyYzIwMF90cmFuc2ZlckZyb20oYWRkcmVzcyxhZGRyZXNzLHVpbnQyNTYpYm9vbCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgc3dhcAogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMTMKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxMTQKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjU3LTQyNjAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjYxCiAgICAvLyB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjYzCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIC0xCiAgICBiKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjYyLTQyNjQKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiAzMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjY1CiAgICAvLyBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI2OAogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI2OQogICAgLy8gYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjcwCiAgICAvLyBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgNjQgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNjctNDI3MQogICAgLy8gVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjY2LTQyNzIKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJUb2tlbkJhbGFuY2VzVXBkYXRlZCh1aW50MjU2LHVpbnQyNTYsdWludDI1NikiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE3NS00MTc4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNzkKICAgIC8vIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3Rva2VuX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxODEKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSArIGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgLTEKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxODAtNDE4MgogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgcmVwbGFjZTIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTgzCiAgICAvLyBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE4NgogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE4NwogICAgLy8gYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTg4CiAgICAvLyBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgNjQgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxODUtNDE4OQogICAgLy8gVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTg0LTQxOTAKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJUb2tlbkJhbGFuY2VzVXBkYXRlZCh1aW50MjU2LHVpbnQyNTYsdWludDI1NikiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUub3duZXJfZGVwb3NpdChhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpvd25lcl9kZXBvc2l0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzYyLTQzNjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIG93bmVyX2RlcG9zaXQoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzY4CiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDM2OQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzcwCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MDItNDUwMwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUwNAogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA2CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MDUtNDUwNwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA4CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxMQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MTIKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxMwogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxMC00NTE0CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTA5LTQ1MTUKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fYmFua19iYWxhbmNlcygpIC0+IGJ5dGVzOgpfYmFua19iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxOC00NDE5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDIxCiAgICAvLyBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfaW52YWxpZF9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDIwCiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQyMC00NDIyCiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyApCiAgICBib3hfZ2V0CiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbnZhbGlkX2JhbGFuY2VzKCkgLT4gYnl0ZXM6Cl9pbnZhbGlkX2JhbGFuY2VzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDAxLTQ0MDIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MDMtNDQwOAogICAgLy8gcmV0dXJuIEJhbmtCYWxhbmNlcygKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDI4LTQ0MjkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDMwCiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzIKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzEtNDQzMwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzQKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDM3CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQzOAogICAgLy8gYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDM5CiAgICAvLyBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDM2LTQ0NDAKICAgIC8vIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MzUtNDQ0MQogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCYWxhbmNlc1VwZGF0ZWQodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iYWxhbmNlcygpIC0+IGJ5dGVzOgpnZXRfYmFsYW5jZXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0MTAtNDQxMgogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VzKHNlbGYpIC0+IEJhbmtCYWxhbmNlczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDE2CiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5zeW5jX2JhbGFuY2UoKSAtPiBieXRlczoKc3luY19iYWxhbmNlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTM1LTQ1MzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3luY19iYWxhbmNlKCkpCiAgICBjYWxsc3ViIF9zeW5jX2JhbGFuY2UKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zeW5jX2JhbGFuY2UoKSAtPiB1aW50NjQ6Cl9zeW5jX2JhbGFuY2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDItNDU0MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQ0CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NDUKICAgIC8vIGFzc2VydCBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA9PSAwCiAgICBkdXAKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICEKICAgIGFzc2VydAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQ2CiAgICAvLyBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0NwogICAgLy8gYXZhaWxhYmxlX2JhbGFuY2UgPSBhY2NvdW50LmJhbGFuY2UgLSBhY2NvdW50Lm1pbl9iYWxhbmNlCiAgICBkdXAKICAgIGFjY3RfcGFyYW1zX2dldCBBY2N0QmFsYW5jZQogICAgc3dhcAogICAgY292ZXIgMgogICAgYXNzZXJ0IC8vIGFjY291bnQgZnVuZGVkCiAgICBhY2N0X3BhcmFtc19nZXQgQWNjdE1pbkJhbGFuY2UKICAgIGFzc2VydCAvLyBhY2NvdW50IGZ1bmRlZAogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTQ4CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlID0gYXJjNC5VSW50NjQoYXZhaWxhYmxlX2JhbGFuY2UpCiAgICBkdXAKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgZGlnIDEKICAgIHJlcGxhY2UyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU0OQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoYXZhaWxhYmxlX2JhbGFuY2UpCiAgICBzd2FwCiAgICByZXBsYWNlMiA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTAKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTUzCiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU1NAogICAgLy8gYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTU1CiAgICAvLyBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTUyLTQ1NTYKICAgIC8vIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NTEtNDU1NwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCYWxhbmNlc1VwZGF0ZWQodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU1OAogICAgLy8gcmV0dXJuIGF2YWlsYWJsZV9iYWxhbmNlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfdXNlcihhZGRyZXNzOiBieXRlcykgLT4gYnl0ZXM6CmdldF91c2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTY0LTQ1NjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF91c2VyKHNlbGYsIGFkZHJlc3M6IGFyYzQuQWRkcmVzcykgLT4gVXNlckRhdGE6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU2NgogICAgLy8gcmV0dXJuIFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcy5uYXRpdmUpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF91c2VyKGFkZHJlc3M6IGJ5dGVzKSAtPiBieXRlczoKX2dldF91c2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTY4LTQ1NjkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1NzItNDU3OAogICAgLy8gZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKGFkZHJlc3MpLAogICAgLy8gICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3NAogICAgLy8gY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3Mi00NTc4CiAgICAvLyBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTc1CiAgICAvLyBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3Mi00NTc4CiAgICAvLyBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTc2CiAgICAvLyBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3Mi00NTc4CiAgICAvLyBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTc3CiAgICAvLyBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU3Mi00NTc4CiAgICAvLyBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoYWRkcmVzcyksCiAgICAvLyAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgc3Bpbl9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTcwLTQ1NzkKICAgIC8vIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgIGFkZHJlc3MsCiAgICAvLyAgICAgZGVmYXVsdD1Vc2VyRGF0YSgKICAgIC8vICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgY3JlZGl0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBib251c19zcGluPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBsYXN0X3NwaW5fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9nZXQKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuY3JlZGl0KGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IGJ5dGVzKSAtPiB2b2lkOgpjcmVkaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1ODEtNDU4MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY3JlZGl0KHNlbGYsIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTg2CiAgICAvLyBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfY3JlZGl0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY3JlZGl0KGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU4OC00NTg5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU5MAogICAgLy8gc2VsZi5faW5jcmVtZW50X2NyZWRpdChhZGRyZXNzLCBhbW91bnQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2NyZWRpdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9jcmVkaXQoYWRkcmVzczogYnl0ZXMsIGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDU5Mi00NTkzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1OTQKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk1CiAgICAvLyB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICBpdG9iCiAgICByZXBsYWNlMiAzMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk2CiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5zZXRfbW9kZShtb2RlOiBieXRlcykgLT4gdm9pZDoKc2V0X21vZGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTYtNDY1NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X21vZGUoc2VsZiwgbW9kZTogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY1OAogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NTkKICAgIC8vIHNlbGYuX3NldF9tb2RlKG1vZGUubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9zZXRfbW9kZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3NldF9tb2RlKG1vZGU6IHVpbnQ2NCkgLT4gdm9pZDoKX3NldF9tb2RlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjYxLTQ2NjIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NldF9tb2RlKHNlbGYsIG1vZGU6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjYzCiAgICAvLyBhc3NlcnQgbW9kZSA+IFVJbnQ2NCgwKSwgIm1vZGUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIGZyYW1lX2RpZyAtMQogICAgYXNzZXJ0IC8vIG1vZGUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjY0CiAgICAvLyBzZWxmLm1vZGUgPSBtb2RlCiAgICBieXRlICJtb2RlIgogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X2JldF9rZXkoYWRkcmVzczogYnl0ZXMsIGJldF9hbW91bnQ6IGJ5dGVzLCBpbmRleDogYnl0ZXMsIG1vZGU6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NjYtNDY3MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IGFyYzQuVUludDY0LAogICAgLy8gICAgIG1vZGU6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczU2OgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzcKICAgIC8vIGJldF9hbW91bnQubmF0aXZlLAogICAgZnJhbWVfZGlnIC0zCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2NzgKICAgIC8vIGluZGV4Lm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njc5CiAgICAvLyBtb2RlLm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Njc1LTQ2ODAKICAgIC8vIHNlbGYuX2dldF9iZXRfa2V5KAogICAgLy8gICAgIGFkZHJlc3MubmF0aXZlLAogICAgLy8gICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgIGluZGV4Lm5hdGl2ZSwKICAgIC8vICAgICBtb2RlLm5hdGl2ZSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgY292ZXIgMwogICAgY2FsbHN1YiBfZ2V0X2JldF9rZXkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY3NC00NjgxCiAgICAvLyByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2dldF9iZXRfa2V5KAogICAgLy8gICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIGluZGV4Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9iZXRfa2V5KGFkZHJlc3M6IGJ5dGVzLCBiZXRfYW1vdW50OiB1aW50NjQsIGluZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9nZXRfYmV0X2tleToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY4My00NjkwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIGluZGV4OiBVSW50NjQsCiAgICAvLyAgICAgbW9kZTogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjkzCiAgICAvLyArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5Mi00NjkzCiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtNAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2OTQKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5Mi00Njk0CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYmV0X2Ftb3VudCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY5NQogICAgLy8gKyBhcmM0LlVJbnQ2NChtb2RlKS5ieXRlcwogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2OTItNDY5NQogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChtb2RlKS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2OTEtNDY5NgogICAgLy8gcmV0dXJuICgKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KG1vZGUpLmJ5dGVzCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5zcGluKGJldF9hbW91bnQ6IGJ5dGVzLCBpbmRleDogYnl0ZXMsIG1vZGU6IGJ5dGVzKSAtPiBieXRlczoKc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcxNC00NzIxCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsICAjIGJldCBhbW91bnQgaW4gY3JlZGl0cwogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwgICMgZWFjaCBzcGluIGhhcyBhIHVuaXF1ZSBpbmRleAogICAgLy8gICAgIG1vZGU6IGFyYzQuVUludDY0LCAgIyAwID0gYm9udXMgc3BpbiAsIDEgPSBjcmVkaXQgc3BpbiwgMiA9IG5ldHdvcmsgc3BpbiwgNCA9IHRva2VuIHNwaW4KICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzI0CiAgICAvLyBzZWxmLl9zcGluKFR4bi5zZW5kZXIsIGJldF9hbW91bnQubmF0aXZlLCBpbmRleC5uYXRpdmUsIG1vZGUubmF0aXZlKQogICAgdHhuIFNlbmRlcgogICAgZnJhbWVfZGlnIC0zCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfc3BpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzIyLTQ3MjUKICAgIC8vICMgYXNzZXJ0IG5vdCBzZWxmLl9pc19wYXVzZWQoKSwgIlNwaW5zIGFyZSBwYXVzZWQiCiAgICAvLyByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX3NwaW4oVHhuLnNlbmRlciwgYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgbW9kZS5uYXRpdmUpCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3Bpbih1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzg0LTQ3ODcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODAwCiAgICAvLyBjcmVkaXRfc3BpbiA9IG1vZGUgPT0gVUludDY0KDEpCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAxCiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODAxLTQ4MDIKICAgIC8vICMgbmV0d29ya19zcGluID0gbW9kZSA9PSBVSW50NjQoMikKICAgIC8vIHRva2VuX3NwaW4gPSBtb2RlID09IFVJbnQ2NCg0KQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgNAogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwMwogICAgLy8gaWYgYm9udXNfc3BpbjoKICAgIGZyYW1lX2RpZyAtMQogICAgYm56IF9zcGluX2Vsc2VfYm9keUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MDQKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX2JvbnVzKHVzZXJfaWQsIFVJbnQ2NCgwKSwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgaW50IDAKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9zcGluX2JvbnVzCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX3NwaW5fZWxzZV9ib2R5QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MDUKICAgIC8vIGVsaWYgY3JlZGl0X3NwaW46CiAgICBmcmFtZV9kaWcgMAogICAgYnogX3NwaW5fZWxzZV9ib2R5QDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwNgogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDEpID09IFVJbnQ2NCgxKSwgImNyZWRpdCBtb2RlIG5vdCBlbmFibGVkIgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNgogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwNgogICAgLy8gYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDEpID09IFVJbnQ2NCgxKSwgImNyZWRpdCBtb2RlIG5vdCBlbmFibGVkIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCAxCiAgICAmCiAgICBpbnQgMQogICAgPT0KICAgIGFzc2VydCAvLyBjcmVkaXQgbW9kZSBub3QgZW5hYmxlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODA3CiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc3Bpbl9jcmVkaXQKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfc3Bpbl9lbHNlX2JvZHlANDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgwOC00ODExCiAgICAvLyAjIGVsaWYgbmV0d29ya19zcGluOgogICAgLy8gIyAgICAgYXNzZXJ0IG1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgyKSA9PSBVSW50NjQoMiksICJuZXR3b3JrIG1vZGUgbm90IGVuYWJsZWQiCiAgICAvLyAjICAgICByZXR1cm4gc2VsZi5fc3Bpbl9uZXR3b3JrKHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyBlbGlmIHRva2VuX3NwaW46CiAgICBmcmFtZV9kaWcgMQogICAgYXNzZXJ0IC8vIGludmFsaWQgbW9kZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODEyCiAgICAvLyBhc3NlcnQgc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoNCkgPT0gVUludDY0KDQpLCAidG9rZW4gbW9kZSBub3QgZW5hYmxlZCIKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDYKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MTIKICAgIC8vIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCksICJ0b2tlbiBtb2RlIG5vdCBlbmFibGVkIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCA0CiAgICAmCiAgICBpbnQgNAogICAgPT0KICAgIGFzc2VydCAvLyB0b2tlbiBtb2RlIG5vdCBlbmFibGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MTMKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX3Rva2VuKHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3NwaW5fdG9rZW4KICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3NwaW5fYm9udXModXNlcl9pZDogYnl0ZXMsIGJldF9hbW91bnQ6IHVpbnQ2NCwgc3Bpbl9pbmRleDogdWludDY0LCBtb2RlOiB1aW50NjQpIC0+IGJ5dGVzOgpfc3Bpbl9ib251czoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgxNy00ODIwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2JvbnVzKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICBwcm90byA0IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgyMS00ODIyCiAgICAvLyAjIGNvbW1vbiB1c2VyIHNldHVwCiAgICAvLyB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcih1c2VyX2lkKSkKICAgIGZyYW1lX2RpZyAtNAogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgyMy00ODI0CiAgICAvLyAjICogYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucyAqCiAgICAvLyBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBVSW50NjQoMSksICJib251cyBzcGluIGlzIGxlc3MgdGhhbiAxIgogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDEKICAgID49CiAgICBhc3NlcnQgLy8gYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODI1LTQ4MjYKICAgIC8vICMgcGF5IHNwaW4gY29zdCArIGV4dHJhIHBheW1lbnQgaWYgbmV0d29yawogICAgLy8gc2VsZi5fZW5zdXJlX3NwaW5fY29zdF9wYXltZW50KHVzZXJfaWQsIFVJbnQ2NCgwKSkKICAgIGZyYW1lX2RpZyAtNAogICAgaW50IDAKICAgIGNhbGxzdWIgX2Vuc3VyZV9zcGluX2Nvc3RfcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODI3LTQ4MzAKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MjkKICAgIC8vIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGNhbGxzdWIgX2NyZWF0ZV9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDgzMS00ODMyCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5OQogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzEtNDgzMgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5zcGluX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5OQogICAgLy8gc2VsZi5zcGluX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInNwaW5fY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzEtNDgzMgogICAgLy8gIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCArPSBVSW50NjQoMSkKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzMtNDgzNAogICAgLy8gIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfc3Bpbl9jb3VudCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfc3Bpbl9jb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODM1CiAgICAvLyBzZWxmLl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcCh1c2VyX2lkKQogICAgZnJhbWVfZGlnIC00CiAgICBjYWxsc3ViIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODM2LTQ4MzcKICAgIC8vICMgKiBib251cyBzcGVjaWZpYyB1c2VyIHVwZGF0ZXMgKgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JvbnVzX3NwaW4odXNlcl9pZCwgVUludDY0KDEpKQogICAgZnJhbWVfZGlnIC00CiAgICBpbnQgMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JvbnVzX3NwaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg0MAogICAgLy8gdXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgZHVwCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4MzgtNDg0MQogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NDItNDg0MwogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZW5zdXJlX3NwaW5fY29zdF9wYXltZW50KHVzZXJfaWQ6IGJ5dGVzLCBleHRyYV9wYXltZW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MjctNDczMAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW5zdXJlX3NwaW5fY29zdF9wYXltZW50KAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGV4dHJhX3BheW1lbnQ6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MzEKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQodXNlcl9pZCkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiByZXF1aXJlX3BheW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDczMgogICAgLy8gc3Bpbl9jb3N0ID0gc2VsZi5fc3Bpbl9jb3N0KCkKICAgIGNhbGxzdWIgX3NwaW5fY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzM0CiAgICAvLyBwYXltZW50ID49IHNwaW5fY29zdCArIGV4dHJhX3BheW1lbnQKICAgIGZyYW1lX2RpZyAtMQogICAgKwogICAgZGlnIDEKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MzMtNDczNQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwYXltZW50ID49IHNwaW5fY29zdCArIGV4dHJhX3BheW1lbnQKICAgIC8vICksICJwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIHNwaW4gY29zdCIKICAgIGFzc2VydCAvLyBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIHNwaW4gY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzM3CiAgICAvLyBwYXltZW50IDw9IHNlbGYuX2dldF9tYXhfZXh0cmFfcGF5bWVudCgpICsgZXh0cmFfcGF5bWVudAogICAgY2FsbHN1YiBfZ2V0X21heF9leHRyYV9wYXltZW50CiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MzYtNDczOAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwYXltZW50IDw9IHNlbGYuX2dldF9tYXhfZXh0cmFfcGF5bWVudCgpICsgZXh0cmFfcGF5bWVudAogICAgLy8gKSwgInBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICBhc3NlcnQgLy8gcGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS51dGlscy5hbGdvcmFuZC5yZXF1aXJlX3BheW1lbnQod2hvOiBieXRlcykgLT4gdWludDY0OgpyZXF1aXJlX3BheW1lbnQ6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjE1LTIzCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIGZ1bmN0aW9uOiByZXF1aXJlX3BheW1lbnQgKGludGVybmFsKQogICAgLy8gIyBhcmd1bWVudHM6IE5vbmUKICAgIC8vICMgcHVycG9zZTogY2hlY2sgcGF5bWVudAogICAgLy8gIyBwcmUtY29uZGl0aW9uczogTm9uZQogICAgLy8gIyBwb3N0LWNvbmRpdGlvbnM6IE5vbmUKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgcmVxdWlyZV9wYXltZW50KHdobzogQWNjb3VudCkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI0CiAgICAvLyByZWZfZ3JvdXBfaW5kZXggPSBUeG4uZ3JvdXBfaW5kZXgKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI1CiAgICAvLyBhc3NlcnQgcmVmX2dyb3VwX2luZGV4ID4gMCwgImdyb3VwIGluZGV4IGdyZWF0ZXIgdGhhbiB6ZXJvIgogICAgZHVwCiAgICBhc3NlcnQgLy8gZ3JvdXAgaW5kZXggZ3JlYXRlciB0aGFuIHplcm8KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjYKICAgIC8vIHBheW1lbnRfZ3JvdXBfaW5kZXggPSByZWZfZ3JvdXBfaW5kZXggLSAxCiAgICBpbnQgMQogICAgLQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyOAogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50IHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgZHVwCiAgICBndHhucyBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjctMjkKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgLy8gKSwgInBheW1lbnQgc2VuZGVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgc2VuZGVyIGFjY3VyYXRlCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMxCiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgZHVwCiAgICBndHhucyBSZWNlaXZlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMgogICAgLy8gPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzEtMzIKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnJlY2VpdmVyCiAgICAvLyA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICA9PQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMC0zMwogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgLy8gICAgID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIC8vICksICJwYXltZW50IHJlY2VpdmVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgcmVjZWl2ZXIgYWNjdXJhdGUKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzQKICAgIC8vIHJldHVybiBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5hbW91bnQKICAgIGd0eG5zIEFtb3VudAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX3NwaW5fY29zdCgpIC0+IHVpbnQ2NDoKX3NwaW5fY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcwMC00NzAxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDIKICAgIC8vIHJldHVybiBVSW50NjQoNTA1MDApCiAgICBpbnQgNTA1MDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKSAtPiB1aW50NjQ6Cl9nZXRfbWF4X2V4dHJhX3BheW1lbnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDQtNDcwNQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9leHRyYV9wYXltZW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzA2CiAgICAvLyByZXR1cm4gVUludDY0KDEgKiAxMCoqNikKICAgIGludCAxMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY3JlYXRlX2JldCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9jcmVhdGVfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzU5LTQ3NjIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWF0ZV9iZXQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzYzCiAgICAvLyBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIGdsb2JhbCBSb3VuZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzY0LTQ3NjkKICAgIC8vIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleSgKICAgIC8vICAgICB1c2VyX2lkLAogICAgLy8gICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0X2tleQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk3LTQ3NzAKICAgIC8vICAgICAjIHNwaW4gc3RhdGUKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X2NyZWRpdCA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X2NyZWRpdF9jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbiA9IEJpZ1VJbnQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBCaWdVSW50KDYgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgLy8gICAgICMgMSA9IGNyZWRpdCwgMiA9IG5ldHdvcmssIDQgPSB0b2tlbgogICAgLy8gICAgICMgMCA9IGRpc2FibGVkCiAgICAvLyAgICAgIyAxID0gY3JlZGl0IGVuYWJsZWQKICAgIC8vICAgICAjIDIgPSBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICAgICAjIDQgPSB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyAzID0gY3JlZGl0IGFuZCBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICAgICAjIDUgPSBjcmVkaXQgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICAjIDYgPSBuZXR3b3JrIGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA3ID0gY3JlZGl0LCBuZXR3b3JrLCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgIHNlbGYuY3JlZGl0X2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhID0gVUludDY0KDIwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCA9IFVJbnQ2NCgxMDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIC8vICAgICBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEgPSBCaWdVSW50KDIwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQgPSBCaWdVSW50KDEwMCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICAgICAiUUdXRlNXRE9MUDZaRVlNNlpGQUhPS0RUQVBOWjIzSDVZRDdJSTZQQVpWUEJHS0RNN0RLRUJEUjZRSSIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICAgICAiUUdXRlNXRE9MUDZaRVlNNlpGQUhPS0RUQVBOWjIzSDVZRDdJSTZQQVpWUEJHS0RNN0RLRUJEUjZRSSIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5mZWVfdHJlYXN1cnlfYnBzID0gVUludDY0KDMwKSAgIyAwLjMlCiAgICAvLyAgICAgc2VsZi5mZWVfbWFya2V0aW5nX2JwcyA9IFVJbnQ2NCgyMCkgICMgMC4yJQogICAgLy8gICAgICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAgICAgIyBzdG9yYWdlCiAgICAvLyAgICAgc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICAvLyAKICAgIC8vICMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwb3N0X3VwZGF0ZShzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KSAgIyBtaW50YWJsZSBhcmMyMDAgYXBwIGlkICgiVk9JIikKICAgIC8vICAgICBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgzKSAgIyBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gCiAgICAvLyAjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5fYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgcGFzcwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBib290c3RyYXBfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoMV8wMDBfMDAwKQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgT3duYWJsZQogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9vd25lcihzZWxmKSAtPiBhcmM0LkFkZHJlc3M6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2V0IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5BZGRyZXNzKHNlbGYuX2dldF9vd25lcigpKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB0cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgVHJhbnNmZXIgdGhlIG93bmVyc2hpcCBvZiB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBzZWxmLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb3duYWJsZV9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBCb3goQWNjb3VudCwga2V5PSJvd25lciIpLnZhbHVlID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgT25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYuX2dldF9vd25lcigpLCAib25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X293bmVyKHNlbGYpIC0+IEFjY291bnQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYub3duZXIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdHJhbnNmZXJfb3duZXJzaGlwKHNlbGYsIG5ld19vd25lcjogQWNjb3VudCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLm93bmVyID0gbmV3X293bmVyCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBDREYgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgYmxvY2sgc2VlZCBmb3IgYSBzcGVjaWZpYyByb3VuZAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIC8vIAogICAgLy8gIyBDREZfUkVFTDEgPSBbCiAgICAvLyAjICAgICA0MjcwNzY2NiwgICA4NTQxNTMzMiwgIDE3MDgzMDY2NCwgIDIzNDg5MjE2MywKICAgIC8vICMgICAgIDI5ODk1MzY2MiwgIDM4NDM2ODk5NCwgIDQ2OTc4NDMyNiwgIDU1NTE5OTY1OCwKICAgIC8vICMgICAgIDY4MzMyMjY1NiwgIDgzMjc5OTQ4OCwgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwKICAgIC8vICMgICAgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwgIDk4Mzk4NDYyNSwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX3JlZWwxKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfcmVlbDEuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb246CiAgICAvLyAgICAgcmV0dXJuIEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfcmVlbDEoKSkKICAgIC8vIAogICAgLy8gIyBDREZfT1RIRVJTID0gWwogICAgLy8gIyAgICAgNDA3NDk3OTYsICAgODE0OTk1OTMsICAxNjI5OTkxODUsICAyMjQxMjM4NzksCiAgICAvLyAjICAgICAyODUyNDg1NzQsICAzNjY3NDgxNjYsICA0NDgyNDc3NTksICA1Mjk3NDczNTEsCiAgICAvLyAjICAgICA2NTE5OTY3NDAsICA3OTQ2MjEwMjcsICAqOTM3MjQ1MzE0LCAgOTU3NjIwMjEyLAogICAgLy8gIyAgICAgOTcyOTAxMzg1LCAgOTgzMDg4ODM1KiwgIDk4NDcxODgyNiwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX290aGVycyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfb3RoZXJzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX290aGVyX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGNkZl9vdGhlcnMuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX290aGVycygpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5X2RlbnNlKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHBheV9kZW5zZSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnBheV9kZW5zZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwYXlfZGVuc2UuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZyhzZWxmLCBzZWVkOiBCeXRlcywgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2VuZXJhdGUgcmFuZG9tIGJ5dGVzIGZyb20gc2VlZCArIGdsb2JhbCBzcGluIGNvdW50LgogICAgLy8gICAgIFRoZSBzcGluX2NvdW50IGVuc3VyZXMgZWFjaCBzcGluIGdldHMgYSB1bmlxdWUgc2VlZCBldmVuIGlmIG90aGVyIGlucHV0cyBhcmUgdGhlIHNhbWUuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgIyBDb21iaW5lIHNlZWQgd2l0aCBzcGluX2NvdW50IGFzIG5vbmNlIGZvciB1bmlxdWVuZXNzCiAgICAvLyAgICAgY29sX2luZGV4X2J5dGVzID0gYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgY29tYmluZWQgPSBzZWVkICsgY29sX2luZGV4X2J5dGVzCiAgICAvLyAgICAgcmV0dXJuIG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZ190cmlwbGUoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJuZzEgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzIgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzMgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBVSW50NjRfMygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmczKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NkZl9kcmF3KHNlbGYsIGNkZjogQnl0ZXMsIGNvbF9zZWxlY3Rpb246IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX2FycmF5ID0gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoY2RmKQogICAgLy8gICAgIGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzBdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIwIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIxIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIyIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzNdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIzIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI0IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzVdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI1IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzZdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI2IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzddOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI3IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzhdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI4IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzldOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI5IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEwXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMV06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkIiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJDIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEzXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiRCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxNF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkUiKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkYiKQogICAgLy8gCiAgICAvLyAjIFRPRE8gY29uc2lkZXIgcmVuYW1pbmcgdG8gX2dldF9kcmF3X2NvbAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkKHNlbGYpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHNlZWQgPSBzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbGluZV9zeW1ib2xzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IEJ5dGVzKGIiMDEyMzQ1Njc4OUFCQ0RFRiIpCiAgICAvLyAgICAgcmV0dXJuIGxpbmVfc3ltYm9scwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiByZWVsX2hhc19zeW1ib2woCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMxNSwgcmVlbDogYXJjNC5VSW50NjQsIHN5bTogQnl0ZXMxCiAgICAvLyApIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5Cb29sKHNlbGYuX3JlZWxfaGFzX3N5bWJvbChncmlkLmJ5dGVzLCByZWVsLm5hdGl2ZSwgc3ltLmJ5dGVzKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9oYXNfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMpIC0+IGJvb2w6CiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgLy8gICAgICAgICBpZiBncmlkW3JlZWwgKiAzICsgcl0gPT0gc3ltOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIC8vICAgICByZXR1cm4gRmFsc2UKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3ltYm9sX3RvX2luZGV4KHNlbGYsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBpZiBzeW0gPT0gQlVGRkFMTzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVBR0xFOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gQ09VR0FSOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDIpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gRUxLOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDMpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gV09MRjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg0KQogICAgLy8gICAgIGVsaWYgc3ltID09IEE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBLOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDYpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gUToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg3KQogICAgLy8gICAgIGVsaWYgc3ltID09IEo6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoOCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBURU46CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoOSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBOSU5FOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEwKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQxOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDExKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQyOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEyKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQzOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEzKQogICAgLy8gICAgIGVsaWYgc3ltID09IEhPVjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDE1KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWVsX21hdGNoZXMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmVlbF9tYXRjaGVzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTbG90TWFjaGluZVN0b3JhZ2UucmVlbF9tYXRjaGVzX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHJlZWxfbWF0Y2hlcy5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENvdW50IHRoZSBudW1iZXIgb2YgbWF0Y2hlcyBvZiB0aGUgc3ltYm9sIG9yIHdpbGQgb24gdGhlIGdyaWQgZm9yIGEgZ2l2ZW4gcmVlbC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBjbnQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICB2ID0gZ3JpZFtyZWVsICogMyArIHJdCiAgICAvLyAgICAgICAgIGlmIHYgPT0gc3ltIG9yIHYgPT0gV0lMRDEgb3IgdiA9PSBXSUxEMiBvciB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgY250ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBjbnQKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgY29udHJpYl9yZWVsczogQnl0ZXMsIG5fcmVlbHM6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjRfMjoKICAgIC8vICAgICBjb250cmliID0gVUludDY0XzE2LmZyb21fYnl0ZXMoY29udHJpYl9yZWVscykKICAgIC8vICAgICBtdWx0ID0gVUludDY0KDEpCiAgICAvLyAgICAgYW55X3dpbGQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2Uobl9yZWVscyk6CiAgICAvLyAgICAgICAgIHJpID0gY29udHJpYltpXS5uYXRpdmUKICAgIC8vICAgICAgICAgZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgLy8gICAgICAgICAgICAgdiA9IGdyaWRbcmkgKiAzICsgcl0KICAgIC8vICAgICAgICAgICAgIGlmIHYgPT0gV0lMRDM6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQoMyksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vICAgICAgICAgICAgIGVsaWYgdiA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgICAgICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgLy8gICAgICAgICAgICAgICAgIGlmIG11bHQgPCBVSW50NjQoMik6CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIG11bHQgPSBVSW50NjQoMikKICAgIC8vICAgICAgICAgICAgIGVsaWYgdiA9PSBXSUxEMToKICAgIC8vICAgICAgICAgICAgICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBVSW50NjRfMihhcmM0LlVJbnQ2NChtdWx0KSwgYXJjNC5VSW50NjQoYW55X3dpbGQpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgc3ltOiBCeXRlcywgcGF5X2RlbnNlOiBCeXRlcwogICAgLy8gKSAtPiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzOgogICAgLy8gCiAgICAvLyAgICAgcGQgPSBQYXlEZW5zZS5mcm9tX2J5dGVzKHBheV9kZW5zZSkKICAgIC8vIAogICAgLy8gICAgIGlmIG5vdCBzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZCwgVUludDY0KDApLCBzeW0pOgogICAgLy8gICAgICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHJlZWxfbWF0Y2hlcyA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgLy8gICAgIGNvbnRyaWIgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBuX2NvbnRyaWIgPSBVSW50NjQoMCkKICAgIC8vICAgICBrID0gVUludDY0KDApCiAgICAvLyAgICAgd2hpbGUgayA8IFVJbnQ2NChOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBtID0gc2VsZi5fY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZChncmlkLCBrLCBzeW0pCiAgICAvLyAgICAgICAgIGlmIG0gPT0gMDoKICAgIC8vICAgICAgICAgICAgIGJyZWFrCiAgICAvLyAgICAgICAgIHJlZWxfbWF0Y2hlc1trXSA9IGFyYzQuVUludDY0KG0pCiAgICAvLyAgICAgICAgIGNvbnRyaWJbbl9jb250cmliXSA9IGFyYzQuVUludDY0KGspCiAgICAvLyAgICAgICAgIG5fY29udHJpYiArPSAxCiAgICAvLyAgICAgICAgIGsgKz0gMQogICAgLy8gCiAgICAvLyAgICAgbWF0Y2hfbGVuID0gawogICAgLy8gICAgIGlmIG1hdGNoX2xlbiA8IDM6CiAgICAvLyAgICAgICAgIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgICAgICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICB3YXlzID0gVUludDY0KDEpCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG1hdGNoX2xlbik6CiAgICAvLyAgICAgICAgIHdheXMgKj0gcmVlbF9tYXRjaGVzW2ldLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYmFzZSA9IHBkW3NlbGYuX3N5bWJvbF90b19pbmRleChzeW0pICogNiArIG1hdGNoX2xlbl0ubmF0aXZlCiAgICAvLyAgICAgaWYgYmFzZSA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIC8vICAgICAgICAgICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZSA9IHNlbGYuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gICAgICkKICAgIC8vICAgICBtdWx0ID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVswXS5uYXRpdmUKICAgIC8vICAgICBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICAvLyAgICAgcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICAvLyAgICAgcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIC8vICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NChhbnlfd2lsZCksCiAgICAvLyAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KG11bHQpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PUZhbHNlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIGdyaWQgPSBzZWxmLl9nZXRfY2RmX2dyaWQoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ291bnQgYWxsIG9jY3VycmVuY2VzIG9mIGEgc3ltYm9sIGluIHRoZSBlbnRpcmUgZ3JpZC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBjbnQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgYyBpbiB1cmFuZ2UoTlVNX1JFRUxTKToKICAgIC8vICAgICAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgICAgIGlmIGdyaWRbYyAqIDMgKyByXSA9PSBzeW06CiAgICAvLyAgICAgICAgICAgICAgICAgY250ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBjbnQKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZ3JpZDogQnl0ZXMsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBQcm9jZXNzIG9uZSBzcGluIGFuZCByZXR1cm4gdGhlIHBheW91dC4KICAgIC8vICAgICBJbmNsdWRlcyBsaW5lIHBheXMsIGphY2twb3QgY2hlY2ssIGFuZCBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHJvdW5kLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGxpbmVfdG90YWwgPSBVSW50NjQoMCkKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBzZWxmLl9nZXRfbGluZV9zeW1ib2xzKCkKICAgIC8vICAgICBwYXlfZGVuc2UgPSBzZWxmLl9nZXRfcGF5X2RlbnNlKCkKICAgIC8vICAgICBmb3IgaWR4IGluIHVyYW5nZSgxNik6CiAgICAvLyAgICAgICAgIHN5bSA9IGxpbmVfc3ltYm9sc1tpZHhdCiAgICAvLyAgICAgICAgIHdheXNfcmVzdWx0ID0gc2VsZi5fd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMoZ3JpZCwgc3ltLCBwYXlfZGVuc2UpCiAgICAvLyAgICAgICAgIGxpbmVfdG90YWwgKz0gd2F5c19yZXN1bHQucGF5b3V0Lm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgcmV0dXJuIGxpbmVfdG90YWwKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Qoc2VsZikgLT4gU3BpblJlc3VsdDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIGdyaWQgPSBzZWxmLl9nZXRfY2RmX2dyaWQoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikpCiAgICAvLyAgICAgcmV0dXJuIFNwaW5SZXN1bHQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoZ3JpZCwgRmFsc2UsIFVJbnQ2NCgwKSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVG9rZW4gQmFuayBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXIoc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHRoZSB0b2tlbiBiYW5rIG1hbmFnZXIKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHRva2VuX2FwcF9pZC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2VfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgxNzMwMCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHN0b3JhZ2UgZm9yIGJhbGFuY2VzIGJveGVzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2Z1c2UubmF0aXZlCiAgICAvLyAgICAgKSwgImJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAKICAgIC8vICMgLS0tIGltcGxlbWVudGF0aW9uIC0tLQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBvd25lcl9kZXBvc2l0X3Rva2VuKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogYXJjNC5VSW50NjQsIGFtb3VudDogYXJjNC5VSW50MjU2CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdCBhcyBvd25lci4gVGhlIG93bmVyIGlzIGV4cGVjdGVkIHRvCiAgICAvLyAgICAgaGF2ZSBhbHJlYWR5IHN1Ym1pdHRlZCB0aGUgcGF5bWVudC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vd25lcl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZC5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX293bmVyX2RlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBEZXBvc2l0IGZ1bmRzIGludG8gdGhlIGNvbnRyYWN0IGFzIG93bmVyLiBUaGUgb3duZXIgaXMgZXhwZWN0ZWQgdG8KICAgIC8vICAgICBoYXZlIGFscmVhZHkgc3VibWl0dGVkIHRoZSBwYXltZW50LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHRva2VuX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3X3Rva2VuKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IEJpZ1VJbnQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICAgICAgdG9rZW5fYXBwX2lkCiAgICAvLyAgICAgKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZAogICAgLy8gICAgICksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlcyhzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gVG9rZW5CYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gc2VsZi50b2tlbl9iYWxhbmNlcy5nZXQoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Ub2tlbkJhbGFuY2VzKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Rva2VuX2JhbGFuY2VfbG9ja2VkKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpLmJhbGFuY2VfbG9ja2VkCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAidG9rZW4gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX3RvdGFsCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBUT0RPOiBpbXBsZW1lbnQgdGhpcwogICAgLy8gIyBAYXJjNC5hYmltZXRob2QKICAgIC8vICMgZGVmIHN5bmNfdG9rZW5fYmFsYW5jZShzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIFN5bmMgdGhlIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fc3luY190b2tlbl9iYWxhbmNlKHRva2VuX2FwcF9pZC5uYXRpdmUpKQogICAgLy8gCiAgICAvLyAjIFRPRE86IGltcGxlbWVudCB0aGlzCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfc3luY190b2tlbl9iYWxhbmNlKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBCaWdVSW50OgogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gIyAgICAgYXNzZXJ0IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA9PSAwCiAgICAvLyAjICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gIyAgICAgYmFsYW5jZSA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAjICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX2JhbGFuY2VPZiwKICAgIC8vICMgICAgICAgICBhY2NvdW50LAogICAgLy8gIyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gIyAgICAgKQogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBiYWxhbmNlCiAgICAvLyAjICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYmFsYW5jZQogICAgLy8gIyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAjICAgICBhcmM0LmVtaXQoCiAgICAvLyAjICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gIyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gIyAgICAgICAgICkKICAgIC8vICMgICAgICkKICAgIC8vICMgICAgIHJldHVybiBiYWxhbmNlLm5hdGl2ZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgQmFuayBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gIyAjIG92ZXJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gIyAjIG92cnJpZGUKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAjICAgICByZXR1cm4gR2xvYmFsLm1pbl9iYWxhbmNlICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vIAogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICMgICAgIHNlbGYuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMTc3MDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2Uoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHN0b3JhZ2UgZm9yIGJhbGFuY2VzIGJveGVzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3KHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFdpdGhkcmF3IGZ1bmRzIGZyb20gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYW1vdW50OiBUaGUgYW1vdW50IG9mIGZ1bmRzIHRvIHdpdGhkcmF3IGluIGF0b21pYyB1bml0cwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPiBVSW50NjQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1hbW91bnQpLnN1Ym1pdCgpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgIHJldHVybiBCYW5rQmFsYW5jZXMoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgYmFsYW5jZXMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2JhbmtfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgIHJldHVybiBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS5nZXQoCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfbG9ja2VkKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgICAgICBiZXRfa2V5LAogICAgLy8gICAgICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfbW9kZShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgIGJldCA9IHNlbGYuX2dldF9iZXQoYmV0X2tleSkKICAgIC8vICAgICByZXR1cm4gYmV0Lm1vZGUubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9tb2RlKHNlbGYsIG1vZGU6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3NldF9tb2RlKG1vZGUubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zZXRfbW9kZShzZWxmLCBtb2RlOiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IG1vZGUgPiBVSW50NjQoMCksICJtb2RlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgc3BpbiBwYXJhbXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDUwNTAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMSAqIDEwKio2KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDIpCiAgICAvLyAKICAgIC8vICMgc3BpbgogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsICAjIGJldCBhbW91bnQgaW4gY3JlZGl0cwogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwgICMgZWFjaCBzcGluIGhhcyBhIHVuaXF1ZSBpbmRleAogICAgLy8gICAgIG1vZGU6IGFyYzQuVUludDY0LCAgIyAwID0gYm9udXMgc3BpbiAsIDEgPSBjcmVkaXQgc3BpbiwgMiA9IG5ldHdvcmsgc3BpbiwgNCA9IHRva2VuIHNwaW4KICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICAjIGFzc2VydCBub3Qgc2VsZi5faXNfcGF1c2VkKCksICJTcGlucyBhcmUgcGF1c2VkIgogICAgLy8gICAgIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX3NwaW4oVHhuLnNlbmRlciwgYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgbW9kZS5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgZXh0cmFfcGF5bWVudDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudCh1c2VyX2lkKQogICAgLy8gICAgIHNwaW5fY29zdCA9IHNlbGYuX3NwaW5fY29zdCgpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcGF5bWVudCA+PSBzcGluX2Nvc3QgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gc3BpbiBjb3N0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBheW1lbnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJldFBsYWNlZCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NChzcGluX2luZGV4KSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWF0ZV9iZXQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGUsCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NzAKICAgIC8vIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGFzc2VydCAvLyBiZXQgYWxyZWFkeSBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3MQogICAgLy8gY2xhaW1fcm91bmQgPSBjb25maXJtZWRfcm91bmQgKyBzZWxmLl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKCkKICAgIGNhbGxzdWIgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEKICAgIHVuY292ZXIgMgogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzc0CiAgICAvLyBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NzUKICAgIC8vIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoc2VsZi5zcGluX2NvdW50KSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTkKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzc1CiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNlbGYuc3Bpbl9jb3VudCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuc3Bpbl9jb3VudCBleGlzdHMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3NgogICAgLy8gbW9kZT1hcmM0LlVJbnQ2NChtb2RlKSwKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Nzc3CiAgICAvLyBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc3Mi00Nzc4CiAgICAvLyBzZWxmLmJldFtiZXRfa2V5XSA9IEJldCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NChzZWxmLnNwaW5fY291bnQpLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGRpZyAyCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NzktNDc4MgogICAgLy8gcmV0dXJuIEJldEtleUluZm8oCiAgICAvLyAgICAgYmV0X2tleT1CeXRlczU2LmZyb21fYnl0ZXMoYmV0X2tleSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKS5ieXRlcwogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YSgpIC0+IHVpbnQ2NDoKX2dldF9yb3VuZF9mdXR1cmVfZGVsdGE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3MDgtNDcwOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDcxMAogICAgLy8gcmV0dXJuIFVJbnQ2NCgyKQogICAgaW50IDIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfc3Bpbl9jb3VudChhZGRyZXNzOiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF9zcGluX2NvdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjE4LTQ2MTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9zcGluX2NvdW50KHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYyNAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MjUKICAgIC8vIHVzZXIuc3Bpbl9jb3VudCA9IGFyYzQuVUludDY0KHVzZXIuc3Bpbl9jb3VudC5uYXRpdmUgKyBVSW50NjQoMSkpCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICBpdG9iCiAgICByZXBsYWNlMiA0OAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjI2CiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAoYWRkcmVzczogYnl0ZXMpIC0+IHZvaWQ6Cl91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYyOC00NjI5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfbGFzdF9zcGluX3RpbWVzdGFtcChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MzAKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjMxCiAgICAvLyB1c2VyLmxhc3Rfc3Bpbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGl0b2IKICAgIHJlcGxhY2UyIDU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MzIKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfYm9udXNfc3BpbihhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYm9udXNfc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYxMS00NjEyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjEzCiAgICAvLyB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3VzZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYxNAogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPj0gYW1vdW50LCAiYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYxNQogICAgLy8gdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgaXRvYgogICAgcmVwbGFjZTIgNDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYxNgogICAgLy8gc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2VtaXRfYmV0X3BsYWNlZCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCwgY2xhaW1fcm91bmQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2VtaXRfYmV0X3BsYWNlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc0MC00NzQ4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICB1c2VyX2lkOiBBY2NvdW50LAogICAgLy8gICAgIGJldF9hbW91bnQ6IFVJbnQ2NCwKICAgIC8vICAgICBzcGluX2luZGV4OiBVSW50NjQsCiAgICAvLyAgICAgbW9kZTogVUludDY0LAogICAgLy8gICAgIGNsYWltX3JvdW5kOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byA1IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc1MgogICAgLy8gYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAtNAogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzUzCiAgICAvLyBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NTQKICAgIC8vIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc1NQogICAgLy8gY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NTAtNDc1NgogICAgLy8gQmV0UGxhY2VkKAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC01CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDc0OS00NzU3CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0UGxhY2VkKAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNwaW5faW5kZXgpLAogICAgLy8gICAgICAgICBtb2RlPWFyYzQuVUludDY0KG1vZGUpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRQbGFjZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9zcGluX2NyZWRpdCh1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluX2NyZWRpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg0NS00ODUyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2NyZWRpdCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NTMtNDg1NAogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NTUtNDg1NgogICAgLy8gIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIGR1cAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgIQogICAgYXNzZXJ0IC8vIGJvbnVzIHNwaW4gaXMgbm90IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg1Ny00ODU4CiAgICAvLyAjIGNyZWRpdCBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBhc3NlcnQgdXNlci5jcmVkaXQubmF0aXZlID49IGJldF9hbW91bnQsICJjcmVkaXQgaXMgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTMKICAgID49CiAgICBhc3NlcnQgLy8gY3JlZGl0IGlzIGxlc3MgdGhhbiBiZXQgYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NTktNDg2MAogICAgLy8gIyBhc3NlcnQgYmV0X2Ftb3VudCA9PSBzZWxmLmNyZWRpdF9iZXRfY29zdCwgImJldCBhbW91bnQgaXMgY3JlZGl0IGJldCBjb3N0IgogICAgLy8gYXNzZXJ0IGJldF9hbW91bnQgPT0gVUludDY0KDQwKSwgImJldCBhbW91bnQgaXMgNDAiCiAgICBmcmFtZV9kaWcgLTMKICAgIGludCA0MAogICAgPT0KICAgIGFzc2VydCAvLyBiZXQgYW1vdW50IGlzIDQwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NjEtNDg2MgogICAgLy8gIyBwYXkgc3BpbiBjb3N0ICsgZXh0cmEgcGF5bWVudCBpZiBuZXR3b3JrCiAgICAvLyBzZWxmLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZCwgVUludDY0KDApKQogICAgZnJhbWVfZGlnIC00CiAgICBpbnQgMAogICAgY2FsbHN1YiBfZW5zdXJlX3NwaW5fY29zdF9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NjMtNDg2NgogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg2NQogICAgLy8gc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgY2FsbHN1YiBfY3JlYXRlX2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODY3LTQ4NjgKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk5CiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg2Ny00ODY4CiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNwaW5fY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk5CiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg2Ny00ODY4CiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg2OS00ODcwCiAgICAvLyAjIGNvbW1vbiB1c2VyIHVwZGF0ZXMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9zcGluX2NvdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NzEKICAgIC8vIHNlbGYuX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NzItNDg3MwogICAgLy8gIyAqIGNyZWRpdCBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfY3JlZGl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NzcKICAgIC8vIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0ODc0LTQ4NzgKICAgIC8vICMgc2VsZi5qYWNrcG90X2NyZWRpdCArPSBzZWxmLmphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbgogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgNAogICAgY2FsbHN1YiBfZW1pdF9iZXRfcGxhY2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NzktNDg4MAogICAgLy8gIyByZXR1cm4gYmV0IGtleQogICAgLy8gcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICBleHRyYWN0IDAgNTYgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2NyZWRpdChhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfY3JlZGl0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTk4LTQ1OTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9jcmVkaXQoc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYwMAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDEKICAgIC8vIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgYXNzZXJ0IC8vIGNyZWRpdCBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDIKICAgIC8vIHVzZXIuY3JlZGl0ID0gYXJjNC5VSW50NjQodXNlci5jcmVkaXQubmF0aXZlIC0gYW1vdW50KQogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICBpdG9iCiAgICByZXBsYWNlMiAzMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjAzCiAgICAvLyBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fc3Bpbl90b2tlbih1c2VyX2lkOiBieXRlcywgYmV0X2Ftb3VudDogdWludDY0LCBzcGluX2luZGV4OiB1aW50NjQsIG1vZGU6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluX3Rva2VuOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTQ3LTQ5NTAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fdG9rZW4oCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDQgMQogICAgYnl0ZSAiIgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTEtNDk1MgogICAgLy8gIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIodXNlcl9pZCkpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2dldF91c2VyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTQtNDk1NQogICAgLy8gIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICEKICAgIGFzc2VydCAvLyBib251cyBzcGluIGlzIG5vdCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTctNDk1OAogICAgLy8gIyB0b2tlbiBhbmQgbmV0d29yayBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyBiYXNlX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIxCiAgICAvLyBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTU3LTQ5NTgKICAgIC8vICMgdG9rZW4gYW5kIG5ldHdvcmsgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gYmFzZV9iZXRfY29zdCA9IHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NTkKICAgIC8vIGtpY2tlcl9iZXRfY29zdCA9IHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCArIHNlbGYudG9rZW5fa2lja2VyX2V4dHJhCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIxCiAgICAvLyBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9iYXNlX2JldF9jb3N0IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTU5CiAgICAvLyBraWNrZXJfYmV0X2Nvc3QgPSBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgKyBzZWxmLnRva2VuX2tpY2tlcl9leHRyYQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgZXhpc3RzCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIyCiAgICAvLyBzZWxmLnRva2VuX2tpY2tlcl9leHRyYSA9IEJpZ1VJbnQoMjAgKiAxMCoqNikKICAgIGJ5dGUgInRva2VuX2tpY2tlcl9leHRyYSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk1OQogICAgLy8ga2lja2VyX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ICsgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEgZXhpc3RzCiAgICBiKwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTYxCiAgICAvLyBiZXRfYW1vdW50ID09IGJhc2VfYmV0X2Nvc3Qgb3IgYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgZHVwCiAgICBjb3ZlciAyCiAgICBiPT0KICAgIGJueiBfc3Bpbl90b2tlbl9ib29sX3RydWVAMgogICAgZnJhbWVfZGlnIDIKICAgIGZyYW1lX2RpZyAzCiAgICBiPT0KICAgIGJ6IF9zcGluX3Rva2VuX2Jvb2xfZmFsc2VAMwoKX3NwaW5fdG9rZW5fYm9vbF90cnVlQDI6CiAgICBpbnQgMQogICAgYiBfc3Bpbl90b2tlbl9ib29sX21lcmdlQDQKCl9zcGluX3Rva2VuX2Jvb2xfZmFsc2VAMzoKICAgIGludCAwCgpfc3Bpbl90b2tlbl9ib29sX21lcmdlQDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjAtNDk2MgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiZXRfYW1vdW50ID09IGJhc2VfYmV0X2Nvc3Qgb3IgYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIC8vICksICJiZXQgYW1vdW50IG11c3QgYmUgYmFzZSBiZXQgY29zdCBvciBraWNrZXIgYmV0IGNvc3QiCiAgICBhc3NlcnQgLy8gYmV0IGFtb3VudCBtdXN0IGJlIGJhc2UgYmV0IGNvc3Qgb3Iga2lja2VyIGJldCBjb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjUKICAgIC8vIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsKHNlbGYudG9rZW5fYXBwX2lkKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjUKICAgIC8vIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsKHNlbGYudG9rZW5fYXBwX2lkKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjYKICAgIC8vID49IHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIzCiAgICAvLyBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudCA9IEJpZ1VJbnQoMTAwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9taW5fYmFua19hbW91bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NjYKICAgIC8vID49IHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fbWluX2JhbmtfYW1vdW50IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTY1LTQ5NjYKICAgIC8vIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX3RvdGFsKHNlbGYudG9rZW5fYXBwX2lkKQogICAgLy8gPj0gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQKICAgIGI+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTYzLTQ5NjcKICAgIC8vICMgKiB0b2tlbiBzcGVjaWZpYyBhc3NlcnRpb25zICoKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZi50b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgPj0gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQKICAgIC8vICksICJiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTY4LTQ5NzEKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NzAKICAgIC8vIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIGNhbGxzdWIgX2NyZWF0ZV9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk2OC00OTcxCiAgICAvLyAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICkKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTcyLTQ5NzMKICAgIC8vICMgY2FsY3VsYXRlIGZlZXMKICAgIC8vIGZlZV90cmVhc3VyeSA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV90cmVhc3VyeV9icHMgLy8gVUludDY0KDEwMDAwKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMAogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYnBzID0gVUludDY0KDMwKSAgIyAwLjMlCiAgICBieXRlICJmZWVfdHJlYXN1cnlfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTcyLTQ5NzMKICAgIC8vICMgY2FsY3VsYXRlIGZlZXMKICAgIC8vIGZlZV90cmVhc3VyeSA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV90cmVhc3VyeV9icHMgLy8gVUludDY0KDEwMDAwKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV90cmVhc3VyeV9icHMgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTMKICAgICoKICAgIGludCAxMDAwMAogICAgLwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3NAogICAgLy8gZmVlX21hcmtldGluZyA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzEKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19icHMgPSBVSW50NjQoMjApICAjIDAuMiUKICAgIGJ5dGUgImZlZV9tYXJrZXRpbmdfYnBzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTc0CiAgICAvLyBmZWVfbWFya2V0aW5nID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX21hcmtldGluZ19icHMgLy8gVUludDY0KDEwMDAwKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzIGV4aXN0cwogICAgZnJhbWVfZGlnIC0zCiAgICAqCiAgICBpbnQgMTAwMDAKICAgIC8KICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTc1LTQ5NzYKICAgIC8vICMgKiB0b2tlbiBzcGVjaWZpYyBmZWUgcGF5b3V0ICoKICAgIC8vIGlmIGZlZV90cmVhc3VyeSA+IDA6CiAgICBieiBfc3Bpbl90b2tlbl9hZnRlcl9pZl9lbHNlQDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3Ny00OTgyCiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyksCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KGZlZV90cmVhc3VyeSksCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3OQogICAgLy8gYXJjNC5BZGRyZXNzKHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyNAogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEFjY291bnQoCiAgICBieXRlICJmZWVfdHJlYXN1cnlfYWRkcmVzcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk3OQogICAgLy8gYXJjNC5BZGRyZXNzKHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTgwCiAgICAvLyBhcmM0LlVJbnQyNTYoZmVlX3RyZWFzdXJ5KSwKICAgIGZyYW1lX2RpZyAxCiAgICBpdG9iCiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTgxCiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODEKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NzctNDk4MgogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1NihmZWVfdHJlYXN1cnkpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImFyYzIwMF90cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpYm9vbCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKCl9zcGluX3Rva2VuX2FmdGVyX2lmX2Vsc2VANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk4MwogICAgLy8gaWYgZmVlX21hcmtldGluZyA+IDA6CiAgICBmcmFtZV9kaWcgMAogICAgYnogX3NwaW5fdG9rZW5fYWZ0ZXJfaWZfZWxzZUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTg0LTQ5ODkKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KGZlZV9tYXJrZXRpbmcpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODYKICAgIC8vIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjI3CiAgICAvLyBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyA9IEFjY291bnQoCiAgICBieXRlICJmZWVfbWFya2V0aW5nX2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5ODYKICAgIC8vIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTg3CiAgICAvLyBhcmM0LlVJbnQyNTYoZmVlX21hcmtldGluZyksCiAgICBmcmFtZV9kaWcgMAogICAgaXRvYgogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk4OAogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTg4CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTg0LTQ5ODkKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KGZlZV9tYXJrZXRpbmcpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImFyYzIwMF90cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpYm9vbCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKCl9zcGluX3Rva2VuX2FmdGVyX2lmX2Vsc2VAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5OTAtNDk5MQogICAgLy8gIyBjYWxjdWxhdGUgdG90YWwgZmVlcwogICAgLy8gdG90YWxfZmVlcyA9IGZlZV90cmVhc3VyeSArIGZlZV9tYXJrZXRpbmcKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9kaWcgMAogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTkyLTQ5OTMKICAgIC8vICMgY2FsY3VsYXRlIG5ldCBiZXQgYW1vdW50CiAgICAvLyBhc3NlcnQgdG90YWxfZmVlcyA8PSBiZXRfYW1vdW50LCAidG90YWwgZmVlcyBtdXN0IGJlIGxlc3MgdGhhbiBiZXQgYW1vdW50IgogICAgZHVwCiAgICBmcmFtZV9kaWcgLTMKICAgIDw9CiAgICBhc3NlcnQgLy8gdG90YWwgZmVlcyBtdXN0IGJlIGxlc3MgdGhhbiBiZXQgYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5OTQKICAgIC8vIG5ldF9iZXRfYW1vdW50ID0gYmV0X2Ftb3VudCAtIHRvdGFsX2ZlZXMKICAgIGZyYW1lX2RpZyAtMwogICAgc3dhcAogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk1LTQ5OTgKICAgIC8vICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgZGlnIDEKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5OTcKICAgIC8vIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgbmV0X2JldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICBjYWxsc3ViIF9jcmVhdGVfYmV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5OTUtNDk5OAogICAgLy8gIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gKQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTk5LTUwMDAKICAgIC8vICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk5CiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk5OS01MDAwCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnNwaW5fY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk5CiAgICAvLyBzZWxmLnNwaW5fY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAic3Bpbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk5OS01MDAwCiAgICAvLyAjIGNvbW1vbiBnbG9iYWwgdXBkYXRlcwogICAgLy8gc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwMS01MDAyCiAgICAvLyAjIGNvbW1vbiB1c2VyIHVwZGF0ZXMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICBmcmFtZV9kaWcgLTQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9zcGluX2NvdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDUKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KG5ldF9iZXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDUKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KG5ldF9iZXRfYW1vdW50KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGRpZyAxCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMDMtNTAwNgogICAgLy8gIyAqIG5ldHdvcmsgc3BlY2lmaWMgdXBkYXRlcyAqCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICkKICAgIGR1cAogICAgY292ZXIgMgogICAgY2FsbHN1YiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwOAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwOAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDA3LTUwMDkKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICkKICAgIHN3YXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDExCiAgICAvLyBzZWxmLl9sb2NrdXBfYW1vdW50KG5ldF9iZXRfYW1vdW50KSArIHNlbGYuamFja3BvdF90b2tlbgogICAgZHVwCiAgICBjYWxsc3ViIF9sb2NrdXBfYW1vdW50CiAgICBpdG9iCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA0CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW4iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTEKICAgIC8vIHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpICsgc2VsZi5qYWNrcG90X3Rva2VuCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF90b2tlbiBleGlzdHMKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTMKICAgIC8vIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZChzZWxmLnRva2VuX2FwcF9pZCwgbG9ja3VwX2Ftb3VudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDEzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQoc2VsZi50b2tlbl9hcHBfaWQsIGxvY2t1cF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgZGlnIDEKICAgIGNhbGxzdWIgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDE1CiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgbG9ja3VwX2Ftb3VudAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTUKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBsb2NrdXBfYW1vdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDE0LTUwMTYKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgbG9ja3VwX2Ftb3VudAogICAgLy8gKQogICAgc3dhcAogICAgY2FsbHN1YiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTcKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiArPSBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA0CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gPSBCaWdVSW50KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW4iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTcKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiArPSBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuamFja3BvdF90b2tlbiBleGlzdHMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDUKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBCaWdVSW50KDYgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDE3CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gKz0gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uIGV4aXN0cwogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNAogICAgLy8gc2VsZi5qYWNrcG90X3Rva2VuID0gQmlnVUludChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X3Rva2VuIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDE3CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW4gKz0gc2VsZi5qYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbgogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAyMAogICAgLy8gdXNlcl9pZCwgbmV0X2JldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIGRpZyAxCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMTgtNTAyMQogICAgLy8gIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICB1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gKQogICAgZnJhbWVfZGlnIC00CiAgICB1bmNvdmVyIDIKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICB1bmNvdmVyIDQKICAgIGNhbGxzdWIgX2VtaXRfYmV0X3BsYWNlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDIyLTUwMjMKICAgIC8vICMgcmV0dXJuIGJldCBrZXkKICAgIC8vIHJldHVybiBiZXRfa2V5X2luZm8uYmV0X2tleS5ieXRlcwogICAgZXh0cmFjdCAwIDU2IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyNTMtNDI1NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQpIC0+IGFyYzQuVUludDI1NjoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjU1CiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkuYmFsYW5jZV90b3RhbAogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdG9rZW5fYmFsYW5jZXMKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fbG9ja3VwX2Ftb3VudChiZXRfYW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKX2xvY2t1cF9hbW91bnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMjUtNTAyNgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja3VwX2Ftb3VudChzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDMwCiAgICAvLyByZXR1cm4gYmV0X2Ftb3VudCAqIFVJbnQ2NCg5MDApCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCA5MDAKICAgICoKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQodG9rZW5fYXBwX2lkOiB1aW50NjQsIGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9sb2NrZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMTYtNDIxOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X3Rva2VuX2JhbGFuY2VfbG9ja2VkKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjIwCiAgICAvLyB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjIyCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAtMQogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyMS00MjIzCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiA2NAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjI0CiAgICAvLyBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyNwogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIyOAogICAgLy8gYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDMyIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjI5CiAgICAvLyBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgNjQgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMjYtNDIzMAogICAgLy8gVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjI1LTQyMzEKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJUb2tlbkJhbGFuY2VzVXBkYXRlZCh1aW50MjU2LHVpbnQyNTYsdWludDI1NikiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDE5Mi00MTk1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxOTYKICAgIC8vIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIGZyYW1lX2RpZyAtMgogICAgY2FsbHN1YiBfZ2V0X3Rva2VuX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxOTgKICAgIC8vIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSA+PSBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgIGI+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTk3LTQxOTkKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgInRva2VuIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gdG9rZW4gYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjAxCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgYi0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIwMC00MjAyCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMDMKICAgIC8vIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBkaWcgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjA2CiAgICAvLyBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjA3CiAgICAvLyBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICBkdXAKICAgIGV4dHJhY3QgMzIgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMDgKICAgIC8vIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgZXh0cmFjdCA2NCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDIwNS00MjA5CiAgICAvLyBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyMDQtNDIxMAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlRva2VuQmFsYW5jZXNVcGRhdGVkKHVpbnQyNTYsdWludDI1Nix1aW50MjU2KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5jbGFpbShiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6CmNsYWltOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDM0LTUwMzYKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNDAKICAgIC8vIGVuc3VyZV9idWRnZXQoMjAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIGxvY2FsIHByb2dyYW0gY29zdCB3YXMgOTc4NwogICAgaW50IDIwMDAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNDEKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9jbGFpbShiZXRfa2V5LmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW0KICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbShiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNDMtNTA0NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTk3LTUwNDgKICAgIC8vICAgICAjIHNwaW4gc3RhdGUKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gICAgIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X2NyZWRpdCA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X2NyZWRpdF9jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF9uZXR3b3JrID0gVUludDY0KEpBQ0tQT1RfU1RBUlQgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLmphY2twb3RfbmV0d29ya19jb250cmlidXRpb24gPSBVSW50NjQoNiAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbiA9IEJpZ1VJbnQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbl9jb250cmlidXRpb24gPSBCaWdVSW50KDYgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgLy8gICAgICMgMSA9IGNyZWRpdCwgMiA9IG5ldHdvcmssIDQgPSB0b2tlbgogICAgLy8gICAgICMgMCA9IGRpc2FibGVkCiAgICAvLyAgICAgIyAxID0gY3JlZGl0IGVuYWJsZWQKICAgIC8vICAgICAjIDIgPSBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICAgICAjIDQgPSB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyAzID0gY3JlZGl0IGFuZCBuZXR3b3JrIGVuYWJsZWQKICAgIC8vICAgICAjIDUgPSBjcmVkaXQgYW5kIHRva2VuIGVuYWJsZWQKICAgIC8vICAgICAjIDYgPSBuZXR3b3JrIGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAgICAgIyA3ID0gY3JlZGl0LCBuZXR3b3JrLCBhbmQgdG9rZW4gZW5hYmxlZAogICAgLy8gICAgIHNlbGYuY3JlZGl0X2JldF9jb3N0ID0gVUludDY0KDQwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QgPSBVSW50NjQoNDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhID0gVUludDY0KDIwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCA9IFVJbnQ2NCgxMDAgKiAxMCoqNikKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIC8vICAgICBzZWxmLnRva2VuX2Jhc2VfYmV0X2Nvc3QgPSBCaWdVSW50KDQwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEgPSBCaWdVSW50KDIwICogMTAqKjYpCiAgICAvLyAgICAgc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQgPSBCaWdVSW50KDEwMCAqIDEwKio2KQogICAgLy8gICAgIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICAgICAiUUdXRlNXRE9MUDZaRVlNNlpGQUhPS0RUQVBOWjIzSDVZRDdJSTZQQVpWUEJHS0RNN0RLRUJEUjZRSSIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5mZWVfbWFya2V0aW5nX2FkZHJlc3MgPSBBY2NvdW50KAogICAgLy8gICAgICAgICAiUUdXRlNXRE9MUDZaRVlNNlpGQUhPS0RUQVBOWjIzSDVZRDdJSTZQQVpWUEJHS0RNN0RLRUJEUjZRSSIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5mZWVfdHJlYXN1cnlfYnBzID0gVUludDY0KDMwKSAgIyAwLjMlCiAgICAvLyAgICAgc2VsZi5mZWVfbWFya2V0aW5nX2JwcyA9IFVJbnQ2NCgyMCkgICMgMC4yJQogICAgLy8gICAgICMgZmVlIHBlcmNlbnRhZ2VzIGFyZSBjYWxjdWxhdGVkIGFzIGJwcyAvIDEwMDAwCiAgICAvLyAgICAgIyBzdG9yYWdlCiAgICAvLyAgICAgc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICAvLyAKICAgIC8vICMjIwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwb3N0X3VwZGF0ZShzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KSAgIyBtaW50YWJsZSBhcmMyMDAgYXBwIGlkICgiVk9JIikKICAgIC8vICAgICBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCgzKSAgIyBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gCiAgICAvLyAjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5fYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgcGFzcwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBib290c3RyYXBfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoMV8wMDBfMDAwKQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgT3duYWJsZQogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9vd25lcihzZWxmKSAtPiBhcmM0LkFkZHJlc3M6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2V0IHRoZSBvd25lciBvZiB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5BZGRyZXNzKHNlbGYuX2dldF9vd25lcigpKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB0cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgVHJhbnNmZXIgdGhlIG93bmVyc2hpcCBvZiB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBzZWxmLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb3duYWJsZV9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBCb3goQWNjb3VudCwga2V5PSJvd25lciIpLnZhbHVlID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgT25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYuX2dldF9vd25lcigpLCAib25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X293bmVyKHNlbGYpIC0+IEFjY291bnQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYub3duZXIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdHJhbnNmZXJfb3duZXJzaGlwKHNlbGYsIG5ld19vd25lcjogQWNjb3VudCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLm93bmVyID0gbmV3X293bmVyCiAgICAvLyAKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBDREYgTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgYmxvY2sgc2VlZCBmb3IgYSBzcGVjaWZpYyByb3VuZAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIC8vIAogICAgLy8gIyBDREZfUkVFTDEgPSBbCiAgICAvLyAjICAgICA0MjcwNzY2NiwgICA4NTQxNTMzMiwgIDE3MDgzMDY2NCwgIDIzNDg5MjE2MywKICAgIC8vICMgICAgIDI5ODk1MzY2MiwgIDM4NDM2ODk5NCwgIDQ2OTc4NDMyNiwgIDU1NTE5OTY1OCwKICAgIC8vICMgICAgIDY4MzMyMjY1NiwgIDgzMjc5OTQ4OCwgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwKICAgIC8vICMgICAgIDk4MjI3NjMxOSwgIDk4MjI3NjMxOSwgIDk4Mzk4NDYyNSwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX3JlZWwxKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLmNkZl9yZWVsMV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBjZGZfcmVlbDEuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9yZWVsMShzZWxmKSAtPiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb246CiAgICAvLyAgICAgcmV0dXJuIEN1bXVsYXRpdmVEaXN0cmlidXRpb25GdW5jdGlvbi5mcm9tX2J5dGVzKHNlbGYuX2dldF9jZGZfcmVlbDEoKSkKICAgIC8vIAogICAgLy8gIyBDREZfT1RIRVJTID0gWwogICAgLy8gIyAgICAgNDA3NDk3OTYsICAgODE0OTk1OTMsICAxNjI5OTkxODUsICAyMjQxMjM4NzksCiAgICAvLyAjICAgICAyODUyNDg1NzQsICAzNjY3NDgxNjYsICA0NDgyNDc3NTksICA1Mjk3NDczNTEsCiAgICAvLyAjICAgICA2NTE5OTY3NDAsICA3OTQ2MjEwMjcsICAqOTM3MjQ1MzE0LCAgOTU3NjIwMjEyLAogICAgLy8gIyAgICAgOTcyOTAxMzg1LCAgOTgzMDg4ODM1KiwgIDk4NDcxODgyNiwgMTAwMDAwMDAwMAogICAgLy8gIyBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX290aGVycyhzZWxmKSAtPiBCeXRlczoKICAgIC8vICAgICBjZGZfb3RoZXJzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTbG90TWFjaGluZVN0b3JhZ2UuY2RmX290aGVyX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGNkZl9vdGhlcnMuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9vdGhlcnMoc2VsZikgLT4gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uOgogICAgLy8gICAgIHJldHVybiBDdW11bGF0aXZlRGlzdHJpYnV0aW9uRnVuY3Rpb24uZnJvbV9ieXRlcyhzZWxmLl9nZXRfY2RmX290aGVycygpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5X2RlbnNlKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIHBheV9kZW5zZSwgdHhuID0gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgU2xvdE1hY2hpbmVTdG9yYWdlLnBheV9kZW5zZV9kZWZhdWx0LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi5zdG9yYWdlX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwYXlfZGVuc2UuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZyhzZWxmLCBzZWVkOiBCeXRlcywgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgR2VuZXJhdGUgcmFuZG9tIGJ5dGVzIGZyb20gc2VlZCArIGdsb2JhbCBzcGluIGNvdW50LgogICAgLy8gICAgIFRoZSBzcGluX2NvdW50IGVuc3VyZXMgZWFjaCBzcGluIGdldHMgYSB1bmlxdWUgc2VlZCBldmVuIGlmIG90aGVyIGlucHV0cyBhcmUgdGhlIHNhbWUuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgIyBDb21iaW5lIHNlZWQgd2l0aCBzcGluX2NvdW50IGFzIG5vbmNlIGZvciB1bmlxdWVuZXNzCiAgICAvLyAgICAgY29sX2luZGV4X2J5dGVzID0gYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgY29tYmluZWQgPSBzZWVkICsgY29sX2luZGV4X2J5dGVzCiAgICAvLyAgICAgcmV0dXJuIG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JuZ190cmlwbGUoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJuZzEgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMCkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzIgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMSkpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJuZzMgPSAoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JuZyhzZWVkLCBVSW50NjQoMikpWzo4XSkubmF0aXZlCiAgICAvLyAgICAgICAgICUgQ0RGX1NDQUxFCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBVSW50NjRfMygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocm5nMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHJuZzIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChybmczKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NkZl9kcmF3KHNlbGYsIGNkZjogQnl0ZXMsIGNvbF9zZWxlY3Rpb246IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgY2RmX2FycmF5ID0gQ3VtdWxhdGl2ZURpc3RyaWJ1dGlvbkZ1bmN0aW9uLmZyb21fYnl0ZXMoY2RmKQogICAgLy8gICAgIGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzBdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIwIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzFdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIxIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIyIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzNdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiIzIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzRdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI0IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzVdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI1IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzZdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI2IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzddOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI3IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzhdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI4IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzldOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiI5IikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEwXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiQSIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxMV06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkIiKQogICAgLy8gICAgIGVsaWYgY29sX3NlbGVjdGlvbiA8PSBjZGZfYXJyYXlbMTJdOgogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMoYiJDIikKICAgIC8vICAgICBlbGlmIGNvbF9zZWxlY3Rpb24gPD0gY2RmX2FycmF5WzEzXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzKGIiRCIpCiAgICAvLyAgICAgZWxpZiBjb2xfc2VsZWN0aW9uIDw9IGNkZl9hcnJheVsxNF06CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkUiKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlcyhiIkYiKQogICAgLy8gCiAgICAvLyAjIFRPRE8gY29uc2lkZXIgcmVuYW1pbmcgdG8gX2dldF9kcmF3X2NvbAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2RyYXdfY29sX251bWJhKHNlbGYsIGNkZjogQnl0ZXMsIHJuZzogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNvbF9zZWxlY3Rpb25zID0gVUludDY0XzMuZnJvbV9ieXRlcyhzZWxmLl9nZXRfcm5nX3RyaXBsZShybmcpKQogICAgLy8gICAgIGRyYXcxID0gc2VsZi5fY2RmX2RyYXcoY2RmLCBjb2xfc2VsZWN0aW9uc1swXS5uYXRpdmUpCiAgICAvLyAgICAgZHJhdzIgPSBzZWxmLl9jZGZfZHJhdyhjZGYsIGNvbF9zZWxlY3Rpb25zWzFdLm5hdGl2ZSkKICAgIC8vICAgICBkcmF3MyA9IHNlbGYuX2NkZl9kcmF3KGNkZiwgY29sX3NlbGVjdGlvbnNbMl0ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBCeXRlczMuZnJvbV9ieXRlcyhkcmF3MSArIGRyYXcyICsgZHJhdzMpLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jb2xfc2VsZWN0aW9uKHNlbGYsIHNlZWQ6IEJ5dGVzLCBjZGY6IEJ5dGVzLCBjb2xfaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcm5nID0gc2VsZi5fZ2V0X3JuZyhzZWVkLCBjb2xfaW5kZXgpCiAgICAvLyAgICAgY29sX3NlbGVjdGlvbiA9IHNlbGYuX2dldF9kcmF3X2NvbF9udW1iYShjZGYsIHJuZykKICAgIC8vICAgICByZXR1cm4gY29sX3NlbGVjdGlvbgogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfY2RmX2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgIGNkZl9yZWVsMSA9IHNlbGYuX2dldF9jZGZfcmVlbDEoKQogICAgLy8gICAgIGNkZl9vdGhlcnMgPSBzZWxmLl9nZXRfY2RmX290aGVycygpCiAgICAvLyAgICAgY29sMSA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9yZWVsMSwgVUludDY0KDApKQogICAgLy8gICAgIGNvbDIgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoMSkpCiAgICAvLyAgICAgY29sMyA9IHNlbGYuX2dldF9jb2xfc2VsZWN0aW9uKHNlZWQsIGNkZl9vdGhlcnMsIFVJbnQ2NCgyKSkKICAgIC8vICAgICBjb2w0ID0gc2VsZi5fZ2V0X2NvbF9zZWxlY3Rpb24oc2VlZCwgY2RmX290aGVycywgVUludDY0KDMpKQogICAgLy8gICAgIGNvbDUgPSBzZWxmLl9nZXRfY29sX3NlbGVjdGlvbihzZWVkLCBjZGZfb3RoZXJzLCBVSW50NjQoNCkpCiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhjb2wxICsgY29sMiArIGNvbDMgKyBjb2w0ICsgY29sNSkuYnl0ZXMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NkZl9ncmlkKHNlbGYpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyODAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHNlZWQgPSBzZWxmLl9nZXRfYmxvY2tfc2VlZChHbG9iYWwucm91bmQgLSAyKQogICAgLy8gICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2NkZl9ncmlkKHNlZWQpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbGluZV9zeW1ib2xzKHNlbGYpIC0+IEJ5dGVzOgogICAgLy8gICAgIGxpbmVfc3ltYm9scyA9IEJ5dGVzKGIiMDEyMzQ1Njc4OUFCQ0RFRiIpCiAgICAvLyAgICAgcmV0dXJuIGxpbmVfc3ltYm9scwogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiByZWVsX2hhc19zeW1ib2woCiAgICAvLyAgICAgc2VsZiwgZ3JpZDogQnl0ZXMxNSwgcmVlbDogYXJjNC5VSW50NjQsIHN5bTogQnl0ZXMxCiAgICAvLyApIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5Cb29sKHNlbGYuX3JlZWxfaGFzX3N5bWJvbChncmlkLmJ5dGVzLCByZWVsLm5hdGl2ZSwgc3ltLmJ5dGVzKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVlbF9oYXNfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMpIC0+IGJvb2w6CiAgICAvLyAgICAgZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgLy8gICAgICAgICBpZiBncmlkW3JlZWwgKiAzICsgcl0gPT0gc3ltOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgIC8vICAgICByZXR1cm4gRmFsc2UKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3ltYm9sX3RvX2luZGV4KHNlbGYsIHN5bTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBpZiBzeW0gPT0gQlVGRkFMTzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gICAgIGVsaWYgc3ltID09IEVBR0xFOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gQ09VR0FSOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDIpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gRUxLOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDMpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gV09MRjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg0KQogICAgLy8gICAgIGVsaWYgc3ltID09IEE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoNSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBLOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDYpCiAgICAvLyAgICAgZWxpZiBzeW0gPT0gUToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg3KQogICAgLy8gICAgIGVsaWYgc3ltID09IEo6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoOCkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBURU46CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoOSkKICAgIC8vICAgICBlbGlmIHN5bSA9PSBOSU5FOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEwKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQxOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDExKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQyOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEyKQogICAgLy8gICAgIGVsaWYgc3ltID09IFdJTEQzOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEzKQogICAgLy8gICAgIGVsaWYgc3ltID09IEhPVjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxNCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDE1KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWVsX21hdGNoZXMoc2VsZikgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmVlbF9tYXRjaGVzLCB0eG4gPSBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBTbG90TWFjaGluZVN0b3JhZ2UucmVlbF9tYXRjaGVzX2RlZmF1bHQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnN0b3JhZ2VfYXBwX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHJlZWxfbWF0Y2hlcy5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jb3VudF9tYXRjaGVzX3N5bWJvbF9vcl93aWxkKAogICAgLy8gICAgIHNlbGYsIGdyaWQ6IEJ5dGVzLCByZWVsOiBVSW50NjQsIHN5bTogQnl0ZXMKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENvdW50IHRoZSBudW1iZXIgb2YgbWF0Y2hlcyBvZiB0aGUgc3ltYm9sIG9yIHdpbGQgb24gdGhlIGdyaWQgZm9yIGEgZ2l2ZW4gcmVlbC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBjbnQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgciBpbiB1cmFuZ2UoTlVNX1JPV1MpOgogICAgLy8gICAgICAgICB2ID0gZ3JpZFtyZWVsICogMyArIHJdCiAgICAvLyAgICAgICAgIGlmIHYgPT0gc3ltIG9yIHYgPT0gV0lMRDEgb3IgdiA9PSBXSUxEMiBvciB2ID09IFdJTEQzOgogICAgLy8gICAgICAgICAgICAgY250ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBjbnQKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgY29udHJpYl9yZWVsczogQnl0ZXMsIG5fcmVlbHM6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjRfMjoKICAgIC8vICAgICBjb250cmliID0gVUludDY0XzE2LmZyb21fYnl0ZXMoY29udHJpYl9yZWVscykKICAgIC8vICAgICBtdWx0ID0gVUludDY0KDEpCiAgICAvLyAgICAgYW55X3dpbGQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgaSBpbiB1cmFuZ2Uobl9yZWVscyk6CiAgICAvLyAgICAgICAgIHJpID0gY29udHJpYltpXS5uYXRpdmUKICAgIC8vICAgICAgICAgZm9yIHIgaW4gdXJhbmdlKDMpOgogICAgLy8gICAgICAgICAgICAgdiA9IGdyaWRbcmkgKiAzICsgcl0KICAgIC8vICAgICAgICAgICAgIGlmIHYgPT0gV0lMRDM6CiAgICAvLyAgICAgICAgICAgICAgICAgYW55X3dpbGQgPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gVUludDY0XzIoYXJjNC5VSW50NjQoMyksIGFyYzQuVUludDY0KGFueV93aWxkKSkKICAgIC8vICAgICAgICAgICAgIGVsaWYgdiA9PSBXSUxEMjoKICAgIC8vICAgICAgICAgICAgICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgLy8gICAgICAgICAgICAgICAgIGlmIG11bHQgPCBVSW50NjQoMik6CiAgICAvLyAgICAgICAgICAgICAgICAgICAgIG11bHQgPSBVSW50NjQoMikKICAgIC8vICAgICAgICAgICAgIGVsaWYgdiA9PSBXSUxEMToKICAgIC8vICAgICAgICAgICAgICAgICBhbnlfd2lsZCA9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBVSW50NjRfMihhcmM0LlVJbnQ2NChtdWx0KSwgYXJjNC5VSW50NjQoYW55X3dpbGQpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93YXlzX3dpdGhfc3Bpbl9jYXBfZGV0YWlscygKICAgIC8vICAgICBzZWxmLCBncmlkOiBCeXRlcywgc3ltOiBCeXRlcywgcGF5X2RlbnNlOiBCeXRlcwogICAgLy8gKSAtPiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzOgogICAgLy8gCiAgICAvLyAgICAgcGQgPSBQYXlEZW5zZS5mcm9tX2J5dGVzKHBheV9kZW5zZSkKICAgIC8vIAogICAgLy8gICAgIGlmIG5vdCBzZWxmLl9yZWVsX2hhc19zeW1ib2woZ3JpZCwgVUludDY0KDApLCBzeW0pOgogICAgLy8gICAgICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHdheXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBhbnlfd2lsZF91c2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbXVsdGlfbGV2ZWw9YXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHJlZWxfbWF0Y2hlcyA9IFVJbnQ2NF8xNi5mcm9tX2J5dGVzKHNlbGYuX3JlZWxfbWF0Y2hlcygpKQogICAgLy8gICAgIGNvbnRyaWIgPSBVSW50NjRfMTYuZnJvbV9ieXRlcyhzZWxmLl9yZWVsX21hdGNoZXMoKSkKICAgIC8vICAgICBuX2NvbnRyaWIgPSBVSW50NjQoMCkKICAgIC8vICAgICBrID0gVUludDY0KDApCiAgICAvLyAgICAgd2hpbGUgayA8IFVJbnQ2NChOVU1fUkVFTFMpOgogICAgLy8gICAgICAgICBtID0gc2VsZi5fY291bnRfbWF0Y2hlc19zeW1ib2xfb3Jfd2lsZChncmlkLCBrLCBzeW0pCiAgICAvLyAgICAgICAgIGlmIG0gPT0gMDoKICAgIC8vICAgICAgICAgICAgIGJyZWFrCiAgICAvLyAgICAgICAgIHJlZWxfbWF0Y2hlc1trXSA9IGFyYzQuVUludDY0KG0pCiAgICAvLyAgICAgICAgIGNvbnRyaWJbbl9jb250cmliXSA9IGFyYzQuVUludDY0KGspCiAgICAvLyAgICAgICAgIG5fY29udHJpYiArPSAxCiAgICAvLyAgICAgICAgIGsgKz0gMQogICAgLy8gCiAgICAvLyAgICAgbWF0Y2hfbGVuID0gawogICAgLy8gICAgIGlmIG1hdGNoX2xlbiA8IDM6CiAgICAvLyAgICAgICAgIHJldHVybiBXYXlzV2l0aFNwaW5DYXBEZXRhaWxzKAogICAgLy8gICAgICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF0Y2hfbGVuPWFyYzQuVUludDY0KG1hdGNoX2xlbiksCiAgICAvLyAgICAgICAgICAgICB3YXlzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICB3YXlzID0gVUludDY0KDEpCiAgICAvLyAgICAgZm9yIGkgaW4gdXJhbmdlKG1hdGNoX2xlbik6CiAgICAvLyAgICAgICAgIHdheXMgKj0gcmVlbF9tYXRjaGVzW2ldLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYmFzZSA9IHBkW3NlbGYuX3N5bWJvbF90b19pbmRleChzeW0pICogNiArIG1hdGNoX2xlbl0ubmF0aXZlCiAgICAvLyAgICAgaWYgYmFzZSA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gV2F5c1dpdGhTcGluQ2FwRGV0YWlscygKICAgIC8vICAgICAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1hdGNoX2xlbj1hcmM0LlVJbnQ2NChtYXRjaF9sZW4pLAogICAgLy8gICAgICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIC8vICAgICAgICAgICAgIGFueV93aWxkX3VzZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtdWx0aV9sZXZlbD1hcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZSA9IHNlbGYuX2hpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmcoCiAgICAvLyAgICAgICAgIGdyaWQsIGNvbnRyaWIuYnl0ZXMsIG5fY29udHJpYgogICAgLy8gICAgICkKICAgIC8vICAgICBtdWx0ID0gaGlnaGVzdF93aWxkX29uX2NvbnRyaWJ1dGluZ19yZXNwb25zZVswXS5uYXRpdmUKICAgIC8vICAgICBhbnlfd2lsZCA9IGhpZ2hlc3Rfd2lsZF9vbl9jb250cmlidXRpbmdfcmVzcG9uc2VbMV0ubmF0aXZlCiAgICAvLyAgICAgcGF5b3V0ID0gYmFzZSAqIHdheXMgKiBtdWx0CiAgICAvLyAgICAgcmV0dXJuIFdheXNXaXRoU3BpbkNhcERldGFpbHMoCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICAgICBtYXRjaF9sZW49YXJjNC5VSW50NjQobWF0Y2hfbGVuKSwKICAgIC8vICAgICAgICAgd2F5cz1hcmM0LlVJbnQ2NCh3YXlzKSwKICAgIC8vICAgICAgICAgYW55X3dpbGRfdXNlZD1hcmM0LlVJbnQ2NChhbnlfd2lsZCksCiAgICAvLyAgICAgICAgIG11bHRpX2xldmVsPWFyYzQuVUludDY0KG11bHQpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PUZhbHNlKQogICAgLy8gZGVmIGNhbGN1bGF0ZV9ncmlkX3BheW91dChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIGdyaWQgPSBzZWxmLl9nZXRfY2RmX2dyaWQoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dChncmlkKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY291bnRfc3ltYm9sKHNlbGYsIGdyaWQ6IEJ5dGVzLCBzeW06IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ291bnQgYWxsIG9jY3VycmVuY2VzIG9mIGEgc3ltYm9sIGluIHRoZSBlbnRpcmUgZ3JpZC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBjbnQgPSBVSW50NjQoMCkKICAgIC8vICAgICBmb3IgYyBpbiB1cmFuZ2UoTlVNX1JFRUxTKToKICAgIC8vICAgICAgICAgZm9yIHIgaW4gdXJhbmdlKE5VTV9ST1dTKToKICAgIC8vICAgICAgICAgICAgIGlmIGdyaWRbYyAqIDMgKyByXSA9PSBzeW06CiAgICAvLyAgICAgICAgICAgICAgICAgY250ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgIHJldHVybiBjbnQKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2dyaWRfcGF5b3V0KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZ3JpZDogQnl0ZXMsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBQcm9jZXNzIG9uZSBzcGluIGFuZCByZXR1cm4gdGhlIHBheW91dC4KICAgIC8vICAgICBJbmNsdWRlcyBsaW5lIHBheXMsIGphY2twb3QgY2hlY2ssIGFuZCBib251cyBtdWx0aXBsaWVyIGlmIGluIGJvbnVzIHJvdW5kLgogICAgLy8gICAgICIiIgogICAgLy8gICAgIGxpbmVfdG90YWwgPSBVSW50NjQoMCkKICAgIC8vICAgICBsaW5lX3N5bWJvbHMgPSBzZWxmLl9nZXRfbGluZV9zeW1ib2xzKCkKICAgIC8vICAgICBwYXlfZGVuc2UgPSBzZWxmLl9nZXRfcGF5X2RlbnNlKCkKICAgIC8vICAgICBmb3IgaWR4IGluIHVyYW5nZSgxNik6CiAgICAvLyAgICAgICAgIHN5bSA9IGxpbmVfc3ltYm9sc1tpZHhdCiAgICAvLyAgICAgICAgIHdheXNfcmVzdWx0ID0gc2VsZi5fd2F5c193aXRoX3NwaW5fY2FwX2RldGFpbHMoZ3JpZCwgc3ltLCBwYXlfZGVuc2UpCiAgICAvLyAgICAgICAgIGxpbmVfdG90YWwgKz0gd2F5c19yZXN1bHQucGF5b3V0Lm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgcmV0dXJuIGxpbmVfdG90YWwKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3Qoc2VsZikgLT4gU3BpblJlc3VsdDoKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDIwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIGdyaWQgPSBzZWxmLl9nZXRfY2RmX2dyaWQoc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoR2xvYmFsLnJvdW5kIC0gMikpCiAgICAvLyAgICAgcmV0dXJuIFNwaW5SZXN1bHQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fY2FsY3VsYXRlX2dyaWRfcGF5b3V0X3dpdGhfYm9udXNfYW5kX2phY2twb3QoZ3JpZCwgRmFsc2UsIFVJbnQ2NCgwKSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVG9rZW4gQmFuayBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXIoc2VsZiwgdG9rZW5fYXBwX2lkOiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHRoZSB0b2tlbiBiYW5rIG1hbmFnZXIKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9pbml0aWFsaXplX3Rva2VuX2JhbmtfbWFuYWdlcl9zdG9yYWdlKHRva2VuX2FwcF9pZC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfdG9rZW5fYmFua19tYW5hZ2VyX3N0b3JhZ2VfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCgxNzMwMCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV90b2tlbl9iYW5rX21hbmFnZXJfc3RvcmFnZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHN0b3JhZ2UgZm9yIGJhbGFuY2VzIGJveGVzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2Z1c2UubmF0aXZlCiAgICAvLyAgICAgKSwgImJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAKICAgIC8vICMgLS0tIGltcGxlbWVudGF0aW9uIC0tLQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBvd25lcl9kZXBvc2l0X3Rva2VuKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogYXJjNC5VSW50NjQsIGFtb3VudDogYXJjNC5VSW50MjU2CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBjb250cmFjdCBhcyBvd25lci4gVGhlIG93bmVyIGlzIGV4cGVjdGVkIHRvCiAgICAvLyAgICAgaGF2ZSBhbHJlYWR5IHN1Ym1pdHRlZCB0aGUgcGF5bWVudC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9vd25lcl9kZXBvc2l0X3Rva2VuKHRva2VuX2FwcF9pZC5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX293bmVyX2RlcG9zaXRfdG9rZW4oc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludCkgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBEZXBvc2l0IGZ1bmRzIGludG8gdGhlIGNvbnRyYWN0IGFzIG93bmVyLiBUaGUgb3duZXIgaXMgZXhwZWN0ZWQgdG8KICAgIC8vICAgICBoYXZlIGFscmVhZHkgc3VibWl0dGVkIHRoZSBwYXltZW50LgogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYoYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHRva2VuX2FwcF9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKHRva2VuX2FwcF9pZCwgYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdF90b2tlbihzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQsIGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3X3Rva2VuKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgV2l0aGRyYXcgZnVuZHMgZnJvbSB0aGUgY29udHJhY3QKICAgIC8vICAgICBPbmx5IGNhbGxhYmxlIGJ5IGNvbnRyYWN0IG93bmVyCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBhbW91bnQ6IFRoZSBhbW91bnQgb2YgZnVuZHMgdG8gd2l0aGRyYXcgaW4gYXRvbWljIHVuaXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA+IEJpZ1VJbnQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICAgICAgdG9rZW5fYXBwX2lkCiAgICAvLyAgICAgKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VfdG90YWwoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZAogICAgLy8gICAgICksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KGFtb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwodG9rZW5fYXBwX2lkLCBhbW91bnQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlcyhzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gVG9rZW5CYWxhbmNlczoKICAgIC8vICAgICByZXR1cm4gc2VsZi50b2tlbl9iYWxhbmNlcy5nZXQoCiAgICAvLyAgICAgICAgIHRva2VuX2FwcF9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Ub2tlbkJhbGFuY2VzKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZiwgdG9rZW5fYXBwX2lkOiBVSW50NjQsIGFtb3VudDogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzID0gc2VsZi5fZ2V0X3Rva2VuX2JhbGFuY2VzKHRva2VuX2FwcF9pZCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Rva2VuX2JhbGFuY2VfbG9ja2VkKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpLmJhbGFuY2VfbG9ja2VkCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZCgKICAgIC8vICAgICBzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCwgYW1vdW50OiBCaWdVSW50CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAidG9rZW4gYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudG9rZW5fYmFsYW5jZXNbdG9rZW5fYXBwX2lkXSA9IHRva2VuX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLCB0b2tlbl9hcHBfaWQ6IFVJbnQ2NCkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKS5iYWxhbmNlX3RvdGFsCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBUb2tlbkJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICAvLyAgICAgKSwgInRva2VuIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnRva2VuX2JhbGFuY2VzW3Rva2VuX2FwcF9pZF0gPSB0b2tlbl9iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBUT0RPOiBpbXBsZW1lbnQgdGhpcwogICAgLy8gIyBAYXJjNC5hYmltZXRob2QKICAgIC8vICMgZGVmIHN5bmNfdG9rZW5fYmFsYW5jZShzZWxmLCB0b2tlbl9hcHBfaWQ6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIFN5bmMgdGhlIGJhbGFuY2Ugb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAjICAgICAiIiIKICAgIC8vICMgICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fc3luY190b2tlbl9iYWxhbmNlKHRva2VuX2FwcF9pZC5uYXRpdmUpKQogICAgLy8gCiAgICAvLyAjIFRPRE86IGltcGxlbWVudCB0aGlzCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfc3luY190b2tlbl9iYWxhbmNlKHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0KSAtPiBCaWdVSW50OgogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMgPSBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZXModG9rZW5fYXBwX2lkKQogICAgLy8gIyAgICAgYXNzZXJ0IHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA9PSAwCiAgICAvLyAjICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gIyAgICAgYmFsYW5jZSA9IGFyYzQuYWJpX2NhbGwoCiAgICAvLyAjICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX2JhbGFuY2VPZiwKICAgIC8vICMgICAgICAgICBhY2NvdW50LAogICAgLy8gIyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbih0b2tlbl9hcHBfaWQpLAogICAgLy8gIyAgICAgKQogICAgLy8gIyAgICAgdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBiYWxhbmNlCiAgICAvLyAjICAgICB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYmFsYW5jZQogICAgLy8gIyAgICAgc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICAvLyAjICAgICBhcmM0LmVtaXQoCiAgICAvLyAjICAgICAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gIyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAjICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gIyAgICAgICAgICkKICAgIC8vICMgICAgICkKICAgIC8vICMgICAgIHJldHVybiBiYWxhbmNlLm5hdGl2ZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgQmFuayBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gIyAjIG92ZXJyaWRlCiAgICAvLyAjIEBzdWJyb3V0aW5lCiAgICAvLyAjIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAjICAgICBzZWxmLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIC8vIAogICAgLy8gIyAjIG92cnJpZGUKICAgIC8vICMgQHN1YnJvdXRpbmUKICAgIC8vICMgZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAjICAgICByZXR1cm4gR2xvYmFsLm1pbl9iYWxhbmNlICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vIAogICAgLy8gIyBAc3Vicm91dGluZQogICAgLy8gIyBkZWYgX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICMgICAgIHNlbGYuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMTc3MDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2Uoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBJbml0aWFsaXplIHN0b3JhZ2UgZm9yIGJhbGFuY2VzIGJveGVzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJiYW5rIGJhbGFuY2VzIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QgYXMgb3duZXIuIFRoZSBvd25lciBpcyBleHBlY3RlZCB0bwogICAgLy8gICAgIGhhdmUgYWxyZWFkeSBzdWJtaXR0ZWQgdGhlIHBheW1lbnQuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIERlcG9zaXQgZnVuZHMgaW50byB0aGUgY29udHJhY3QKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3KHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFdpdGhkcmF3IGZ1bmRzIGZyb20gdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgT25seSBjYWxsYWJsZSBieSBjb250cmFjdCBvd25lcgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYW1vdW50OiBUaGUgYW1vdW50IG9mIGZ1bmRzIHRvIHdpdGhkcmF3IGluIGF0b21pYyB1bml0cwogICAgLy8gICAgICIiIgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIGFzc2VydCBhbW91bnQgPiBVSW50NjQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIC8vICAgICBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICAvLyAgICAgaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1hbW91bnQpLnN1Ym1pdCgpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgIHJldHVybiBCYW5rQmFsYW5jZXMoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYmFsYW5jZV9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEdldCB0aGUgYmFsYW5jZXMKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2JhbmtfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgLy8gICAgIHJldHVybiBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS5nZXQoCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfbG9ja2VkKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSBsb2NrZWQgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfdG90YWwubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJhbGFuY2VzVXBkYXRlZCgKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICAgICAgICAgIGJhbGFuY2VfbG9ja2VkPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHN5bmNfYmFsYW5jZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTeW5jIHRoZSBiYWxhbmNlIG9mIHRoZSBjb250cmFjdAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zeW5jX2JhbGFuY2UoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3luY19iYWxhbmNlKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICAvLyAgICAgYXNzZXJ0IGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID09IDAKICAgIC8vICAgICBhY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgLy8gICAgIGF2YWlsYWJsZV9iYWxhbmNlID0gYWNjb3VudC5iYWxhbmNlIC0gYWNjb3VudC5taW5fYmFsYW5jZQogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NChhdmFpbGFibGVfYmFsYW5jZSkKICAgIC8vICAgICBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2F2YWlsYWJsZT1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICAgICAgYmFsYW5jZV90b3RhbD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhdmFpbGFibGVfYmFsYW5jZQogICAgLy8gCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgVXNlciBNYW5hZ2VyCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3VzZXIoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzKSAtPiBVc2VyRGF0YToKICAgIC8vICAgICByZXR1cm4gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzLm5hdGl2ZSkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF91c2VyKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiBzZWxmLnVzZXIuZ2V0KAogICAgLy8gICAgICAgICBhZGRyZXNzLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVzZXJEYXRhKAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhhZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGNyZWRpdD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGJvbnVzX3NwaW49YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9zcGluX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApLmJ5dGVzCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNyZWRpdChzZWxmLCBhZGRyZXNzOiBhcmM0LkFkZHJlc3MsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQ3JlZGl0IHRoZSBjb250cmFjdC4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICBzZWxmLl9jcmVkaXQoYWRkcmVzcy5uYXRpdmUsIGFtb3VudC5uYXRpdmUpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfY3JlZGl0KGFkZHJlc3MsIGFtb3VudCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2NyZWRpdChzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLmNyZWRpdCA9IGFyYzQuVUludDY0KHVzZXIuY3JlZGl0Lm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfY3JlZGl0KHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgLy8gICAgIGFzc2VydCB1c2VyLmNyZWRpdC5uYXRpdmUgPj0gYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5jcmVkaXQgPSBhcmM0LlVJbnQ2NCh1c2VyLmNyZWRpdC5uYXRpdmUgLSBhbW91bnQpCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JvbnVzX3NwaW4oc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSArIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYm9udXNfc3BpbihzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA+PSBhbW91bnQsICJib251cyBzcGluIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICAvLyAgICAgdXNlci5ib251c19zcGluID0gYXJjNC5VSW50NjQodXNlci5ib251c19zcGluLm5hdGl2ZSAtIGFtb3VudCkKICAgIC8vICAgICBzZWxmLnVzZXJbYWRkcmVzc10gPSB1c2VyLmNvcHkoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfc3Bpbl9jb3VudChzZWxmLCBhZGRyZXNzOiBBY2NvdW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEluY3JlbWVudCB1c2VyJ3Mgc3BpbiBjb3VudCBieSAxLgogICAgLy8gICAgIENhbGxlZCBhZnRlciBlYWNoIHNwaW4gdG8gdHJhY2sgdXNlciBhY3Rpdml0eS4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcihhZGRyZXNzKSkKICAgIC8vICAgICB1c2VyLnNwaW5fY291bnQgPSBhcmM0LlVJbnQ2NCh1c2VyLnNwaW5fY291bnQubmF0aXZlICsgVUludDY0KDEpKQogICAgLy8gICAgIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9sYXN0X3NwaW5fdGltZXN0YW1wKHNlbGYsIGFkZHJlc3M6IEFjY291bnQpIC0+IE5vbmU6CiAgICAvLyAgICAgdXNlciA9IFVzZXJEYXRhLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3VzZXIoYWRkcmVzcykpCiAgICAvLyAgICAgdXNlci5sYXN0X3NwaW5fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi51c2VyW2FkZHJlc3NdID0gdXNlci5jb3B5KCkKICAgIC8vIAogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFNwaW4gTWFuYWdlcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgICAgICBiZXRfa2V5LAogICAgLy8gICAgICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfbW9kZShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgIGJldCA9IHNlbGYuX2dldF9iZXQoYmV0X2tleSkKICAgIC8vICAgICByZXR1cm4gYmV0Lm1vZGUubmF0aXZlCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9tb2RlKHNlbGYsIG1vZGU6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgIHNlbGYuX3NldF9tb2RlKG1vZGUubmF0aXZlKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zZXRfbW9kZShzZWxmLCBtb2RlOiBVSW50NjQpIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IG1vZGUgPiBVSW50NjQoMCksICJtb2RlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAiCiAgICAvLyAgICAgc2VsZi5tb2RlID0gbW9kZQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2tleSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFkZHJlc3M6IGFyYzQuQWRkcmVzcywKICAgIC8vICAgICBiZXRfYW1vdW50OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbW9kZTogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgICAgICBhZGRyZXNzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGJldF9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgaW5kZXgubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbW9kZS5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYWRkcmVzczogQWNjb3VudCwKICAgIC8vICAgICBiZXRfYW1vdW50OiBVSW50NjQsCiAgICAvLyAgICAgaW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGJldF9hbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQobW9kZSkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgc3BpbiBwYXJhbXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDUwNTAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMSAqIDEwKio2KQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDIpCiAgICAvLyAKICAgIC8vICMgc3BpbgogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsICAjIGJldCBhbW91bnQgaW4gY3JlZGl0cwogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwgICMgZWFjaCBzcGluIGhhcyBhIHVuaXF1ZSBpbmRleAogICAgLy8gICAgIG1vZGU6IGFyYzQuVUludDY0LCAgIyAwID0gYm9udXMgc3BpbiAsIDEgPSBjcmVkaXQgc3BpbiwgMiA9IG5ldHdvcmsgc3BpbiwgNCA9IHRva2VuIHNwaW4KICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIC8vICAgICAjIGFzc2VydCBub3Qgc2VsZi5faXNfcGF1c2VkKCksICJTcGlucyBhcmUgcGF1c2VkIgogICAgLy8gICAgIHJldHVybiBCeXRlczU2LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX3NwaW4oVHhuLnNlbmRlciwgYmV0X2Ftb3VudC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSwgbW9kZS5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgZXh0cmFfcGF5bWVudDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudCh1c2VyX2lkKQogICAgLy8gICAgIHNwaW5fY29zdCA9IHNlbGYuX3NwaW5fY29zdCgpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcGF5bWVudCA+PSBzcGluX2Nvc3QgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gc3BpbiBjb3N0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBheW1lbnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgKyBleHRyYV9wYXltZW50CiAgICAvLyAgICAgKSwgInBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIEJldFBsYWNlZCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3ModXNlcl9pZCksCiAgICAvLyAgICAgICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NChzcGluX2luZGV4KSwKICAgIC8vICAgICAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NyZWF0ZV9iZXQoCiAgICAvLyAgICAgc2VsZiwgdXNlcl9pZDogQWNjb3VudCwgYmV0X2Ftb3VudDogVUludDY0LCBzcGluX2luZGV4OiBVSW50NjQsIG1vZGU6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGUsCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBjbGFpbV9yb3VuZCA9IGNvbmZpcm1lZF9yb3VuZCArIHNlbGYuX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoKQogICAgLy8gICAgIHNlbGYuYmV0W2JldF9rZXldID0gQmV0KAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKHVzZXJfaWQpLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KHNlbGYuc3Bpbl9jb3VudCksCiAgICAvLyAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQobW9kZSksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIEJldEtleUluZm8oCiAgICAvLyAgICAgICAgIGJldF9rZXk9Qnl0ZXM1Ni5mcm9tX2J5dGVzKGJldF9rZXkpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgU3BpbiB0aGUgc2xvdCBtYWNoaW5lLiBPdXRjb21lIGlzIGRldGVybWluZWQgYnkgdGhlIHNlZWQKICAgIC8vICAgICBvZiBmdXR1cmUgcm91bmQuCiAgICAvLyAKICAgIC8vICAgICBBcmdzOgogICAgLy8gICAgICAgICBiZXQgKHVpbnQpOiBUaGUgcGxheWVyJ3Mgd2FnZXIuCiAgICAvLyAgICAgICAgIGluZGV4ICh1aW50KTogUGxheWVyJ3MgY2hvaWNlIG9mIGluZGV4LgogICAgLy8gCiAgICAvLyAgICAgUmV0dXJuczoKICAgIC8vICAgICAgICAgciAodWludCk6IFRoZSByb3VuZCBudW1iZXIgb2YgdGhlIHNwaW4uCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgYm9udXNfc3BpbiA9IG1vZGUgPT0gVUludDY0KDApCiAgICAvLyAgICAgY3JlZGl0X3NwaW4gPSBtb2RlID09IFVJbnQ2NCgxKQogICAgLy8gICAgICMgbmV0d29ya19zcGluID0gbW9kZSA9PSBVSW50NjQoMikKICAgIC8vICAgICB0b2tlbl9zcGluID0gbW9kZSA9PSBVSW50NjQoNCkKICAgIC8vICAgICBpZiBib251c19zcGluOgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9ib251cyh1c2VyX2lkLCBVSW50NjQoMCksIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgZWxpZiBjcmVkaXRfc3BpbjoKICAgIC8vICAgICAgICAgYXNzZXJ0IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDEpID09IFVJbnQ2NCgxKSwgImNyZWRpdCBtb2RlIG5vdCBlbmFibGVkIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICAjIGVsaWYgbmV0d29ya19zcGluOgogICAgLy8gICAgICMgICAgIGFzc2VydCBtb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KDIpLCAibmV0d29yayBtb2RlIG5vdCBlbmFibGVkIgogICAgLy8gICAgICMgICAgIHJldHVybiBzZWxmLl9zcGluX25ldHdvcmsodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICBlbGlmIHRva2VuX3NwaW46CiAgICAvLyAgICAgICAgIGFzc2VydCBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCksICJ0b2tlbiBtb2RlIG5vdCBlbmFibGVkIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl90b2tlbih1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIGFzc2VydCBGYWxzZSwgImludmFsaWQgbW9kZSIKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9ib251cygKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcih1c2VyX2lkKSkKICAgIC8vICAgICAjICogYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucyAqCiAgICAvLyAgICAgYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPj0gVUludDY0KDEpLCAiYm9udXMgc3BpbiBpcyBsZXNzIHRoYW4gMSIKICAgIC8vICAgICAjIHBheSBzcGluIGNvc3QgKyBleHRyYSBwYXltZW50IGlmIG5ldHdvcmsKICAgIC8vICAgICBzZWxmLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZCwgVUludDY0KDApKQogICAgLy8gICAgICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyAgICAgYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgICMgY29tbW9uIHVzZXIgdXBkYXRlcwogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAodXNlcl9pZCkKICAgIC8vICAgICAjICogYm9udXMgc3BlY2lmaWMgdXNlciB1cGRhdGVzICoKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYm9udXNfc3Bpbih1c2VyX2lkLCBVSW50NjQoMSkpCiAgICAvLyAgICAgIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vICAgICBzZWxmLl9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgIyByZXR1cm4gYmV0IGtleQogICAgLy8gICAgIHJldHVybiBiZXRfa2V5X2luZm8uYmV0X2tleS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2NyZWRpdCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHVzZXJfaWQ6IEFjY291bnQsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogVUludDY0LAogICAgLy8gICAgIHNwaW5faW5kZXg6IFVJbnQ2NCwKICAgIC8vICAgICBtb2RlOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcih1c2VyX2lkKSkKICAgIC8vICAgICAjIG5vbi1ib251cyBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyAgICAgYXNzZXJ0IHVzZXIuYm9udXNfc3Bpbi5uYXRpdmUgPT0gVUludDY0KDApLCAiYm9udXMgc3BpbiBpcyBub3QgMCIKICAgIC8vICAgICAjIGNyZWRpdCBzcGVjaWZpYyBhc3NlcnRpb25zCiAgICAvLyAgICAgYXNzZXJ0IHVzZXIuY3JlZGl0Lm5hdGl2ZSA+PSBiZXRfYW1vdW50LCAiY3JlZGl0IGlzIGxlc3MgdGhhbiBiZXQgYW1vdW50IgogICAgLy8gICAgICMgYXNzZXJ0IGJldF9hbW91bnQgPT0gc2VsZi5jcmVkaXRfYmV0X2Nvc3QsICJiZXQgYW1vdW50IGlzIGNyZWRpdCBiZXQgY29zdCIKICAgIC8vICAgICBhc3NlcnQgYmV0X2Ftb3VudCA9PSBVSW50NjQoNDApLCAiYmV0IGFtb3VudCBpcyA0MCIKICAgIC8vICAgICAjIHBheSBzcGluIGNvc3QgKyBleHRyYSBwYXltZW50IGlmIG5ldHdvcmsKICAgIC8vICAgICBzZWxmLl9lbnN1cmVfc3Bpbl9jb3N0X3BheW1lbnQodXNlcl9pZCwgVUludDY0KDApKQogICAgLy8gICAgICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyAgICAgYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUpCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgY29tbW9uIGdsb2JhbCB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5zcGluX2NvdW50ICs9IFVJbnQ2NCgxKQogICAgLy8gICAgICMgY29tbW9uIHVzZXIgdXBkYXRlcwogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9zcGluX2NvdW50KHVzZXJfaWQpCiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX2xhc3Rfc3Bpbl90aW1lc3RhbXAodXNlcl9pZCkKICAgIC8vICAgICAjICogY3JlZGl0IHNwZWNpZmljIHVwZGF0ZXMgKgogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9jcmVkaXQodXNlcl9pZCwgYmV0X2Ftb3VudCkKICAgIC8vICAgICAjIHNlbGYuamFja3BvdF9jcmVkaXQgKz0gc2VsZi5qYWNrcG90X2NyZWRpdF9jb250cmlidXRpb24KICAgIC8vICAgICAjIGVtaXQgYmV0IHBsYWNlZCBldmVudAogICAgLy8gICAgIHNlbGYuX2VtaXRfYmV0X3BsYWNlZCgKICAgIC8vICAgICAgICAgdXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSwgYmV0X2tleV9pbmZvLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICAjIHJldHVybiBiZXQga2V5CiAgICAvLyAgICAgcmV0dXJuIGJldF9rZXlfaW5mby5iZXRfa2V5LmJ5dGVzCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbmV0d29yaygKICAgIC8vICAgICBzZWxmLCB1c2VyX2lkOiBBY2NvdW50LCBiZXRfYW1vdW50OiBVSW50NjQsIHNwaW5faW5kZXg6IFVJbnQ2NCwgbW9kZTogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICMgY29tbW9uIHVzZXIgc2V0dXAKICAgIC8vICAgICB1c2VyID0gVXNlckRhdGEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfdXNlcih1c2VyX2lkKSkKICAgIC8vIAogICAgLy8gICAgICMgbm9uLWJvbnVzIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBhc3NlcnQgdXNlci5ib251c19zcGluLm5hdGl2ZSA9PSBVSW50NjQoMCksICJib251cyBzcGluIGlzIG5vdCAwIgogICAgLy8gCiAgICAvLyAgICAgIyBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBiYXNlX2JldF9jb3N0ID0gc2VsZi5uZXR3b3JrX2Jhc2VfYmV0X2Nvc3QKICAgIC8vICAgICBraWNrZXJfYmV0X2Nvc3QgPSBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCArIHNlbGYubmV0d29ya19raWNrZXJfZXh0cmEKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiZXRfYW1vdW50ID09IGJhc2VfYmV0X2Nvc3Qgb3IgYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIC8vICAgICApLCAiYmV0IGFtb3VudCBtdXN0IGJlIGJhc2UgYmV0IGNvc3Qgb3Iga2lja2VyIGJldCBjb3N0IgogICAgLy8gICAgICMgbmV0d29yayBhbmQgdG9rZW4gc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkgPj0gc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudAogICAgLy8gICAgICksICJiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudCIKICAgIC8vICAgICAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gICAgIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBiZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gICAgICkKICAgIC8vICAgICAjIGNhbGN1bGF0ZSBmZWVzCiAgICAvLyAgICAgZmVlX3RyZWFzdXJ5ID0gYmV0X2Ftb3VudCAqIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICAvLyAgICAgZmVlX21hcmtldGluZyA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV9tYXJrZXRpbmdfYnBzIC8vIFVJbnQ2NCgxMDAwMCkKICAgIC8vICAgICAjIGNhbGN1bGF0ZSB0b3RhbCBmZWVzCiAgICAvLyAgICAgdG90YWxfZmVlcyA9IGZlZV90cmVhc3VyeSArIGZlZV9tYXJrZXRpbmcKICAgIC8vICAgICAjIGNhbGN1bGF0ZSBuZXQgYmV0IGFtb3VudAogICAgLy8gICAgIGFzc2VydCB0b3RhbF9mZWVzIDw9IGJldF9hbW91bnQsICJ0b3RhbCBmZWVzIG11c3QgYmUgbGVzcyB0aGFuIGJldCBhbW91bnQiCiAgICAvLyAgICAgbmV0X2JldF9hbW91bnQgPSBiZXRfYW1vdW50IC0gdG90YWxfZmVlcwogICAgLy8gICAgICMgY3JlYXRlIGJldCBib3ggKyBhc3NlcnQgYmV0IGRvZXMgbm90IGV4aXN0CiAgICAvLyAgICAgYmV0X2tleV9pbmZvID0gQmV0S2V5SW5mby5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9jcmVhdGVfYmV0KHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlKQogICAgLy8gICAgICkKICAgIC8vICAgICAjICogbmV0d29yayBzcGVjaWZpYyBmZWUgcGF5b3V0ICoKICAgIC8vICAgICBpZiBmZWVfdHJlYXN1cnkgPiAwOgogICAgLy8gICAgICAgICBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgICAgICAgICByZWNlaXZlcj1zZWxmLmZlZV90cmVhc3VyeV9hZGRyZXNzLAogICAgLy8gICAgICAgICAgICAgYW1vdW50PWZlZV90cmVhc3VyeSwKICAgIC8vICAgICAgICAgKS5zdWJtaXQoKQogICAgLy8gICAgIGlmIGZlZV9tYXJrZXRpbmcgPiAwOgogICAgLy8gICAgICAgICBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgICAgICAgICByZWNlaXZlcj1zZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcywKICAgIC8vICAgICAgICAgICAgIGFtb3VudD1mZWVfbWFya2V0aW5nLAogICAgLy8gICAgICAgICApLnN1Ym1pdCgpCiAgICAvLyAgICAgIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIC8vICAgICAjICogbmV0d29yayBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChuZXRfYmV0X2Ftb3VudCkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUobmV0X2JldF9hbW91bnQpCiAgICAvLyAgICAgbG9ja3VwX2Ftb3VudCA9IHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGxvY2t1cF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGxvY2t1cF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5qYWNrcG90X25ldHdvcmsgKz0gc2VsZi5qYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uCiAgICAvLyAgICAgIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vICAgICBzZWxmLl9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsIGJldF9hbW91bnQsIHNwaW5faW5kZXgsIG1vZGUsIGJldF9rZXlfaW5mby5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgIyByZXR1cm4gYmV0IGtleQogICAgLy8gICAgIHJldHVybiBiZXRfa2V5X2luZm8uYmV0X2tleS5ieXRlcwogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX3Rva2VuKAogICAgLy8gICAgIHNlbGYsIHVzZXJfaWQ6IEFjY291bnQsIGJldF9hbW91bnQ6IFVJbnQ2NCwgc3Bpbl9pbmRleDogVUludDY0LCBtb2RlOiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgIyBjb21tb24gdXNlciBzZXR1cAogICAgLy8gICAgIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKHVzZXJfaWQpKQogICAgLy8gCiAgICAvLyAgICAgIyBub24tYm9udXMgc3BlY2lmaWMgYXNzZXJ0aW9ucwogICAgLy8gICAgIGFzc2VydCB1c2VyLmJvbnVzX3NwaW4ubmF0aXZlID09IFVJbnQ2NCgwKSwgImJvbnVzIHNwaW4gaXMgbm90IDAiCiAgICAvLyAKICAgIC8vICAgICAjIHRva2VuIGFuZCBuZXR3b3JrIHNwZWNpZmljIGFzc2VydGlvbnMKICAgIC8vICAgICBiYXNlX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0CiAgICAvLyAgICAga2lja2VyX2JldF9jb3N0ID0gc2VsZi50b2tlbl9iYXNlX2JldF9jb3N0ICsgc2VsZi50b2tlbl9raWNrZXJfZXh0cmEKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBiZXRfYW1vdW50ID09IGJhc2VfYmV0X2Nvc3Qgb3IgYmV0X2Ftb3VudCA9PSBraWNrZXJfYmV0X2Nvc3QKICAgIC8vICAgICApLCAiYmV0IGFtb3VudCBtdXN0IGJlIGJhc2UgYmV0IGNvc3Qgb3Iga2lja2VyIGJldCBjb3N0IgogICAgLy8gICAgICMgKiB0b2tlbiBzcGVjaWZpYyBhc3NlcnRpb25zICoKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfdG9rZW5fYmFsYW5jZV90b3RhbChzZWxmLnRva2VuX2FwcF9pZCkKICAgIC8vICAgICAgICAgPj0gc2VsZi50b2tlbl9taW5fYmFua19hbW91bnQKICAgIC8vICAgICApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICAvLyAgICAgIyBjcmVhdGUgYmV0IGJveCArIGFzc2VydCBiZXQgZG9lcyBub3QgZXhpc3QKICAgIC8vICAgICBiZXRfa2V5X2luZm8gPSBCZXRLZXlJbmZvLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX2NyZWF0ZV9iZXQodXNlcl9pZCwgYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgZmVlcwogICAgLy8gICAgIGZlZV90cmVhc3VyeSA9IGJldF9hbW91bnQgKiBzZWxmLmZlZV90cmVhc3VyeV9icHMgLy8gVUludDY0KDEwMDAwKQogICAgLy8gICAgIGZlZV9tYXJrZXRpbmcgPSBiZXRfYW1vdW50ICogc2VsZi5mZWVfbWFya2V0aW5nX2JwcyAvLyBVSW50NjQoMTAwMDApCiAgICAvLyAgICAgIyAqIHRva2VuIHNwZWNpZmljIGZlZSBwYXlvdXQgKgogICAgLy8gICAgIGlmIGZlZV90cmVhc3VyeSA+IDA6CiAgICAvLyAgICAgICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgICAgICBhcmM0LkFkZHJlc3Moc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQyNTYoZmVlX3RyZWFzdXJ5KSwKICAgIC8vICAgICAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICBpZiBmZWVfbWFya2V0aW5nID4gMDoKICAgIC8vICAgICAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgICAgIGFyYzQuQWRkcmVzcyhzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQyNTYoZmVlX21hcmtldGluZyksCiAgICAvLyAgICAgICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgdG90YWwgZmVlcwogICAgLy8gICAgIHRvdGFsX2ZlZXMgPSBmZWVfdHJlYXN1cnkgKyBmZWVfbWFya2V0aW5nCiAgICAvLyAgICAgIyBjYWxjdWxhdGUgbmV0IGJldCBhbW91bnQKICAgIC8vICAgICBhc3NlcnQgdG90YWxfZmVlcyA8PSBiZXRfYW1vdW50LCAidG90YWwgZmVlcyBtdXN0IGJlIGxlc3MgdGhhbiBiZXQgYW1vdW50IgogICAgLy8gICAgIG5ldF9iZXRfYW1vdW50ID0gYmV0X2Ftb3VudCAtIHRvdGFsX2ZlZXMKICAgIC8vICAgICAjIGNyZWF0ZSBiZXQgYm94ICsgYXNzZXJ0IGJldCBkb2VzIG5vdCBleGlzdAogICAgLy8gICAgIGJldF9rZXlfaW5mbyA9IEJldEtleUluZm8uZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgc2VsZi5fY3JlYXRlX2JldCh1c2VyX2lkLCBuZXRfYmV0X2Ftb3VudCwgc3Bpbl9pbmRleCwgbW9kZSkKICAgIC8vICAgICApCiAgICAvLyAgICAgIyBjb21tb24gZ2xvYmFsIHVwZGF0ZXMKICAgIC8vICAgICBzZWxmLnNwaW5fY291bnQgKz0gVUludDY0KDEpCiAgICAvLyAgICAgIyBjb21tb24gdXNlciB1cGRhdGVzCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X3NwaW5fY291bnQodXNlcl9pZCkKICAgIC8vICAgICAjICogbmV0d29yayBzcGVjaWZpYyB1cGRhdGVzICoKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICAgICAgc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICAgICAgc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQobmV0X2JldF9hbW91bnQpCiAgICAvLyAgICAgKQogICAgLy8gICAgIGxvY2t1cF9hbW91bnQgPSAoCiAgICAvLyAgICAgICAgIHNlbGYuX2xvY2t1cF9hbW91bnQobmV0X2JldF9hbW91bnQpICsgc2VsZi5qYWNrcG90X3Rva2VuCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF90b2tlbl9iYWxhbmNlX2xvY2tlZChzZWxmLnRva2VuX2FwcF9pZCwgbG9ja3VwX2Ftb3VudCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgICAgIHNlbGYudG9rZW5fYXBwX2lkLCBsb2NrdXBfYW1vdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuamFja3BvdF90b2tlbiArPSBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uCiAgICAvLyAgICAgIyBlbWl0IGJldCBwbGFjZWQgZXZlbnQKICAgIC8vICAgICBzZWxmLl9lbWl0X2JldF9wbGFjZWQoCiAgICAvLyAgICAgICAgIHVzZXJfaWQsIG5ldF9iZXRfYW1vdW50LCBzcGluX2luZGV4LCBtb2RlLCBiZXRfa2V5X2luZm8uY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgICMgcmV0dXJuIGJldCBrZXkKICAgIC8vICAgICByZXR1cm4gYmV0X2tleV9pbmZvLmJldF9rZXkuYnl0ZXMKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja3VwX2Ftb3VudChzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBMb2NrdXAgYW1vdW50IGlzIHRoZSBiZXQgYW1vdW50IG11bHRpcGxpZWQgYnkgdGhlIG1heCBwYXlvdXQgbXVsdGlwbGllciBleGNsdWRpbmcgdGhlIGphY2twb3QuCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIGJldF9hbW91bnQgKiBVSW50NjQoOTAwKQogICAgLy8gCiAgICAvLyAjIGNsYWltCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENsYWltIGFsbCBiZXRzCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgZW5zdXJlX2J1ZGdldCgyMDAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkgICMgbG9jYWwgcHJvZ3JhbSBjb3N0IHdhcyA5Nzg3CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NsYWltKGJldF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jbGFpbShzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIENsYWltIGJldAogICAgLy8gICAgICIiIgogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IGluIHNlbGYuYmV0LCAiYmV0IG5vdCBmb3VuZCIKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNDgKICAgIC8vIGFzc2VydCBiZXRfa2V5IGluIHNlbGYuYmV0LCAiYmV0IG5vdCBmb3VuZCIKICAgIGFzc2VydCAvLyBiZXQgbm90IGZvdW5kCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNTAKICAgIC8vIGJldCA9IHNlbGYuX2dldF9iZXQoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2JldAogICAgZHVwbiAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNTEKICAgIC8vIG1vZGUgPSBiZXQubW9kZS5uYXRpdmUKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgY292ZXIgMgogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDUzCiAgICAvLyBpZiBHbG9iYWwucm91bmQgPiBiZXQuY2xhaW1fcm91bmQubmF0aXZlICsgVUludDY0KE1BWF9DTEFJTV9ST1VORF9ERUxUQSk6CiAgICBnbG9iYWwgUm91bmQKICAgIHN3YXAKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgY292ZXIgMgogICAgYnRvaQogICAgaW50IDEwMDAKICAgICsKICAgID4KICAgIGJ6IF9jbGFpbV9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1NAogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDU3CiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAwCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1OAogICAgLy8gYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDU5CiAgICAvLyBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgZXh0cmFjdCA0MCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDU2LTUwNjMKICAgIC8vIEJldENsYWltZWQoCiAgICAvLyAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIC8vICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgLy8gICAgIHBheW91dD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAxCiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAzCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2MgogICAgLy8gcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1Ni01MDYzCiAgICAvLyBCZXRDbGFpbWVkKAogICAgLy8gICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyApCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA1NS01MDY0CiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0Q2xhaW1lZCgKICAgIC8vICAgICAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmV0Q2xhaW1lZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA2NQogICAgLy8gcmV0dXJuIFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfY2xhaW1fYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDY3CiAgICAvLyBpZiBtb2RlID09IFVJbnQ2NCgxKTogICMgYm9udXMKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgMQogICAgPT0KICAgIGJ6IF9jbGFpbV9lbHNlX2JvZHlANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDY4CiAgICAvLyByZXR1cm4gc2VsZi5fY2xhaW1fYm9udXMoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW1fYm9udXMKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfY2xhaW1fZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNjkKICAgIC8vIGVsaWYgbW9kZSA9PSBVSW50NjQoMik6ICAjIGNyZWRpdAogICAgZnJhbWVfZGlnIDIKICAgIGludCAyCiAgICA9PQogICAgYnogX2NsYWltX2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNzAKICAgIC8vIHJldHVybiBzZWxmLl9jbGFpbV9jcmVkaXQoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW1fY3JlZGl0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDcxLTUwNzMKICAgIC8vICMgZWxpZiBtb2RlID09IFVJbnQ2NCgzKTogICMgbmV0d29yawogICAgLy8gIyAgICAgcmV0dXJuIHNlbGYuX2NsYWltX25ldHdvcmsoYmV0X2tleSkKICAgIC8vIGVsaWYgbW9kZSA9PSBVSW50NjQoNCk6ICAjIHRva2VuCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDQKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBtb2RlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNzQKICAgIC8vIHJldHVybiBzZWxmLl9jbGFpbV90b2tlbihiZXRfa2V5KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbV90b2tlbgogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X2JldChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjM4LTQ2MzkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQwLTQ2NDkKICAgIC8vIHJldHVybiBzZWxmLmJldC5nZXQoCiAgICAvLyAgICAgYmV0X2tleSwKICAgIC8vICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgc3Bpbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbW9kZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2dldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjQyLTQ2NDgKICAgIC8vIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgYnl0ZSBiYXNlMzIgQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY0MC00NjQ5CiAgICAvLyByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgIGJldF9rZXksCiAgICAvLyAgICAgZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1vZGU9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbV9ib251cyhiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fYm9udXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwNzgtNTA3OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fYm9udXMoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgYnl0ZSAiIgogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODMKICAgIC8vIGJldCA9IHNlbGYuX2dldF9iZXQoYmV0X2tleSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2JldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDg1CiAgICAvLyBzcGluX3Jlc3VsdF9ieXRlcyA9IHNlbGYuX2dldF9zcGluX3Jlc3VsdHMoYmV0X2tleSkgICMgaG9vawogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfc3Bpbl9yZXN1bHRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODgKICAgIC8vIHBheW91dCA9IHNwaW5fcmVzdWx0LnBheW91dC5uYXRpdmUKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwODkKICAgIC8vIGJvbnVzX3NwaW5zX2F3YXJkZWQgPSBzcGluX3Jlc3VsdC5ib251c19zcGluc19hd2FyZGVkLm5hdGl2ZQogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5MQogICAgLy8gaWYgYm9udXNfc3BpbnNfYXdhcmRlZCA+IDA6CiAgICBieiBfY2xhaW1fYm9udXNfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTIKICAgIC8vIHNlbGYuX2luY3JlbWVudF9ib251c19zcGluKGJldC53aG8ubmF0aXZlLCBib251c19zcGluc19hd2FyZGVkKQogICAgZnJhbWVfZGlnIDIKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyA0CiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYm9udXNfc3BpbgoKX2NsYWltX2JvbnVzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5NQogICAgLy8gcGF5b3V0X2Ftb3VudCA9IHBheW91dCAqIHBheW91dF9tdWx0aXBsaWVyIC8vIFVJbnQ2NCgxMDApCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOTQKICAgIC8vIHBheW91dF9tdWx0aXBsaWVyID0gVUludDY0KDE3NSkgICMgZXF1aXZhbGVudCB0byAxLjc1eCAoMTc1IC8gMTAwKQogICAgaW50IDE3NQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDk1CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KDEwMCkKICAgICoKICAgIGludCAxMDAKICAgIC8KICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDk3CiAgICAvLyBpZiBwYXlvdXQgPiAwOgogICAgYnogX2NsYWltX2JvbnVzX2FmdGVyX2lmX2Vsc2VAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5OAogICAgLy8gdG9rZW5fZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDQpID09IFVJbnQ2NCg0KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNgogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5OAogICAgLy8gdG9rZW5fZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDQpID09IFVJbnQ2NCg0KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm1vZGVfZW5hYmxlZCBleGlzdHMKICAgIGludCA0CiAgICAmCiAgICBpbnQgNAogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5OQogICAgLy8gbmV0d29ya19lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KDIpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA2CiAgICAvLyBzZWxmLm1vZGVfZW5hYmxlZCA9IFVJbnQ2NCg3KQogICAgYnl0ZSAibW9kZV9lbmFibGVkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDk5CiAgICAvLyBuZXR3b3JrX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCgyKSA9PSBVSW50NjQoMikKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgMgogICAgJgogICAgaW50IDIKICAgID09CiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwMAogICAgLy8gaWYgdG9rZW5fZW5hYmxlZDoKICAgIGJ6IF9jbGFpbV9ib251c19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTAxLTUxMDYKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGJldC53aG8sCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KHBheW91dF9hbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMDMKICAgIC8vIGJldC53aG8sCiAgICBmcmFtZV9kaWcgMgogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTA0CiAgICAvLyBhcmM0LlVJbnQyNTYocGF5b3V0X2Ftb3VudCksCiAgICBmcmFtZV9kaWcgMQogICAgaXRvYgogICAgaW50IDMyCiAgICBiemVybwogICAgZGlnIDEKICAgIGJ8CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMDUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwNQogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwMS01MTA2CiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICBiZXQud2hvLAogICAgLy8gICAgIGFyYzQuVUludDI1NihwYXlvdXRfYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIGl0eG5fc3VibWl0CiAgICBpdHhuIExhc3RMb2cKICAgIGV4dHJhY3QgMCA0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgID09CiAgICBhc3NlcnQgLy8gQVJDNCBwcmVmaXggaXMgdmFsaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwOAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTA4CiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEwNy01MTA5CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUoCiAgICAvLyAgICAgc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIC8vICkKICAgIGRpZyAxCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExMQogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTExCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExMC01MTEyCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgLy8gKQogICAgc3dhcAogICAgY2FsbHN1YiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwKICAgIGIgX2NsYWltX2JvbnVzX2FmdGVyX2lmX2Vsc2VAMTEKCl9jbGFpbV9ib251c19lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExMwogICAgLy8gZWxpZiBuZXR3b3JrX2VuYWJsZWQ6CiAgICBmcmFtZV9kaWcgMAogICAgYnogX2NsYWltX2JvbnVzX2FmdGVyX2lmX2Vsc2VAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExNC01MTE3CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsCiAgICAvLyAgICAgYW1vdW50PXBheW91dF9hbW91bnQsCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMTUKICAgIC8vIHJlY2VpdmVyPWJldC53aG8ubmF0aXZlLAogICAgZnJhbWVfZGlnIDIKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMTQKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTE0LTUxMTcKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9cGF5b3V0X2Ftb3VudCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMTgKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShwYXlvdXRfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTExOQogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwocGF5b3V0X2Ftb3VudCkKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsCgpfY2xhaW1fYm9udXNfYWZ0ZXJfaWZfZWxzZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEyMQogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTIzLTUxMjYKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEyNAogICAgLy8gcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEyNQogICAgLy8gYW1vdW50PXNlbGYuX3NwaW5fY29zdCgpLAogICAgY2FsbHN1YiBfc3Bpbl9jb3N0CiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTIzCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEyMy01MTI2CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIC8vICAgICBhbW91bnQ9c2VsZi5fc3Bpbl9jb3N0KCksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTMwCiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzMQogICAgLy8gYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTMyCiAgICAvLyBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMzMKICAgIC8vIG1vZGU9YmV0Lm1vZGUsCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzNAogICAgLy8gY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTM1CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIGZyYW1lX2RpZyAzCiAgICBpdG9iCiAgICBjb3ZlciA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMjktNTEzNgogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxMjgtNTEzNwogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmV0Q2xhaW1lZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTEzOQogICAgLy8gcmV0dXJuIHBheW91dF9hbW91bnQKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9zcGluX3Jlc3VsdHM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMDQtNTMwNQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3NwaW5fcmVzdWx0cyhzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gQnl0ZXM6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwNgogICAgLy8gYmV0ID0gc2VsZi5iZXRbYmV0X2tleV0uY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmJldCBlbnRyeSBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwNwogICAgLy8gc2VlZCA9IHNlbGYuX2dldF9ibG9ja19zZWVkKGJldC5jbGFpbV9yb3VuZC5uYXRpdmUpICAjIGJsb2NrIHNlZWQKICAgIGR1cAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2Jsb2NrX3NlZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMwOAogICAgLy8gZ3JpZF9zZWVkID0gb3Auc2hhMjU2KHNlZWQgKyBiZXQuc3Bpbl9pbmRleC5ieXRlcykgICMgYmxvY2sgc2VlZCArIHNwaW4gaW5kZXgKICAgIGRpZyAxCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb25jYXQKICAgIHNoYTI1NgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzA5CiAgICAvLyBib251c19zcGluID0gYmV0Lm1vZGUubmF0aXZlID09IFVJbnQ2NCgwKQogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgIQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzEwCiAgICAvLyBncmlkID0gc2VsZi5fZ2V0X2NkZl9ncmlkKGdyaWRfc2VlZCkKICAgIGNhbGxzdWIgX2dldF9jZGZfZ3JpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzE0CiAgICAvLyBzZWxmLmphY2twb3QsCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDgxCiAgICAvLyBzZWxmLmphY2twb3QgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCkgICMgcmVzZXQgamFja3BvdAogICAgYnl0ZSAiamFja3BvdCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTMxNAogICAgLy8gc2VsZi5qYWNrcG90LAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmphY2twb3QgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUzMTEtNTMxNQogICAgLy8gcmV0dXJuIHNlbGYuX2NhbGN1bGF0ZV9ncmlkX3BheW91dF93aXRoX2JvbnVzX2FuZF9qYWNrcG90KAogICAgLy8gICAgIGdyaWQsCiAgICAvLyAgICAgYm9udXNfc3BpbiwKICAgIC8vICAgICBzZWxmLmphY2twb3QsCiAgICAvLyApCiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfZ3JpZF9wYXlvdXRfd2l0aF9ib251c19hbmRfamFja3BvdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2luY3JlbWVudF9ib251c19zcGluKGFkZHJlc3M6IGJ5dGVzLCBhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luY3JlbWVudF9ib251c19zcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjA1LTQ2MDYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9ib251c19zcGluKHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDcKICAgIC8vIHVzZXIgPSBVc2VyRGF0YS5mcm9tX2J5dGVzKHNlbGYuX2dldF91c2VyKGFkZHJlc3MpKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdXNlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjA4CiAgICAvLyB1c2VyLmJvbnVzX3NwaW4gPSBhcmM0LlVJbnQ2NCh1c2VyLmJvbnVzX3NwaW4ubmF0aXZlICsgYW1vdW50KQogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIGl0b2IKICAgIHJlcGxhY2UyIDQwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2MDkKICAgIC8vIHNlbGYudXNlclthZGRyZXNzXSA9IHVzZXIuY29weSgpCiAgICBmcmFtZV9kaWcgLTIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbCh0b2tlbl9hcHBfaWQ6IHVpbnQ2NCwgYW1vdW50OiBieXRlcykgLT4gdm9pZDoKX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjc0LTQyNzcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYsIHRva2VuX2FwcF9pZDogVUludDY0LCBhbW91bnQ6IEJpZ1VJbnQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjc4CiAgICAvLyB0b2tlbl9iYWxhbmNlcyA9IHNlbGYuX2dldF90b2tlbl9iYWxhbmNlcyh0b2tlbl9hcHBfaWQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF90b2tlbl9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjgwCiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAzMiAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICBiPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI3OS00MjgxCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgInRva2VuIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIGFzc2VydCAvLyB0b2tlbiBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4MwogICAgLy8gdG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgYi0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4Mi00Mjg0CiAgICAvLyB0b2tlbl9iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgIHRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICAvLyApCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgcmVwbGFjZTIgMzIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4NQogICAgLy8gc2VsZi50b2tlbl9iYWxhbmNlc1t0b2tlbl9hcHBfaWRdID0gdG9rZW5fYmFsYW5jZXMuY29weSgpCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIGRpZyAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyODgKICAgIC8vIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgZHVwCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyODkKICAgIC8vIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIGR1cAogICAgZXh0cmFjdCAzMiAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI5MAogICAgLy8gYmFsYW5jZV9sb2NrZWQ9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQsCiAgICBleHRyYWN0IDY0IDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0Mjg3LTQyOTEKICAgIC8vIFRva2VuQmFsYW5jZXNVcGRhdGVkKAogICAgLy8gICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgIGJhbGFuY2VfdG90YWw9dG9rZW5fYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD10b2tlbl9iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI4Ni00MjkyCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgVG9rZW5CYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLAogICAgLy8gICAgICAgICBiYWxhbmNlX3RvdGFsPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfbG9ja2VkPXRva2VuX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiVG9rZW5CYWxhbmNlc1VwZGF0ZWQodWludDI1Nix1aW50MjU2LHVpbnQyNTYpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDMtNDQ0NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDUKICAgIC8vIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ0NwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NDYtNDQ0OAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJiYWxhbmNlIGF2YWlsYWJsZSBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgYXNzZXJ0IC8vIGJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1MAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgLSBhbW91bnQKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDQ5LTQ0NTEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDUyCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1NQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ0NTYKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1NwogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQ1NC00NDU4CiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NDUzLTQ0NTkKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUxNy00NTE4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTE5CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjAtNDUyMgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyNAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MjMtNDUyNQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI2CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgZGlnIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyOQogICAgLy8gYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ1MzAKICAgIC8vIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUzMQogICAgLy8gYmFsYW5jZV9sb2NrZWQ9YmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZCwKICAgIGV4dHJhY3QgMTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDUyOC00NTMyCiAgICAvLyBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgYmFsYW5jZV9hdmFpbGFibGU9YmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCwKICAgIC8vICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NTI3LTQ1MzMKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCYWxhbmNlc1VwZGF0ZWQoCiAgICAvLyAgICAgICAgIGJhbGFuY2VfYXZhaWxhYmxlPWJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUsCiAgICAvLyAgICAgICAgIGJhbGFuY2VfdG90YWw9YmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLAogICAgLy8gICAgICAgICBiYWxhbmNlX2xvY2tlZD1iYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmFsYW5jZXNVcGRhdGVkKHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fY2xhaW1fY3JlZGl0KGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbV9jcmVkaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNDEtNTE0MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fY3JlZGl0KHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTQ2CiAgICAvLyBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0OAogICAgLy8gc3Bpbl9yZXN1bHRfYnl0ZXMgPSBzZWxmLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXkpICAjIGhvb2sKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3NwaW5fcmVzdWx0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTUxCiAgICAvLyBwYXlvdXQgPSBzcGluX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTUyCiAgICAvLyBib251c19zcGluc19hd2FyZGVkID0gc3Bpbl9yZXN1bHQuYm9udXNfc3BpbnNfYXdhcmRlZC5uYXRpdmUKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTQKICAgIC8vIGlmIGJvbnVzX3NwaW5zX2F3YXJkZWQgPiAwOgogICAgYnogX2NsYWltX2NyZWRpdF9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1NQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JvbnVzX3NwaW4oYmV0Lndoby5uYXRpdmUsIGJvbnVzX3NwaW5zX2F3YXJkZWQpCiAgICBmcmFtZV9kaWcgMgogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDQKICAgIGNhbGxzdWIgX2luY3JlbWVudF9ib251c19zcGluCgpfY2xhaW1fY3JlZGl0X2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE1OAogICAgLy8gcGF5b3V0X2Ftb3VudCA9IHBheW91dCAqIHBheW91dF9tdWx0aXBsaWVyIC8vIFVJbnQ2NCgxMDApCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNTcKICAgIC8vIHBheW91dF9tdWx0aXBsaWVyID0gVUludDY0KDEwMCkgICMgZXF1aXZhbGVudCB0byAxeCAoMTAwIC8gMTAwKQogICAgaW50IDEwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTU4CiAgICAvLyBwYXlvdXRfYW1vdW50ID0gcGF5b3V0ICogcGF5b3V0X211bHRpcGxpZXIgLy8gVUludDY0KDEwMCkKICAgICoKICAgIGludCAxMDAKICAgIC8KICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTYwCiAgICAvLyBpZiBwYXlvdXQgPiAwOgogICAgYnogX2NsYWltX2NyZWRpdF9hZnRlcl9pZl9lbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjEKICAgIC8vIHRva2VuX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDYKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjEKICAgIC8vIHRva2VuX2VuYWJsZWQgPSBzZWxmLm1vZGVfZW5hYmxlZCAmIFVJbnQ2NCg0KSA9PSBVSW50NjQoNCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5tb2RlX2VuYWJsZWQgZXhpc3RzCiAgICBpbnQgNAogICAgJgogICAgaW50IDQKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjIKICAgIC8vIG5ldHdvcmtfZW5hYmxlZCA9IHNlbGYubW9kZV9lbmFibGVkICYgVUludDY0KDIpID09IFVJbnQ2NCgyKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNgogICAgLy8gc2VsZi5tb2RlX2VuYWJsZWQgPSBVSW50NjQoNykKICAgIGJ5dGUgIm1vZGVfZW5hYmxlZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2MgogICAgLy8gbmV0d29ya19lbmFibGVkID0gc2VsZi5tb2RlX2VuYWJsZWQgJiBVSW50NjQoMikgPT0gVUludDY0KDIpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYubW9kZV9lbmFibGVkIGV4aXN0cwogICAgaW50IDIKICAgICYKICAgIGludCAyCiAgICA9PQogICAgZnJhbWVfYnVyeSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjMKICAgIC8vIGlmIHRva2VuX2VuYWJsZWQ6CiAgICBieiBfY2xhaW1fY3JlZGl0X2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjQtNTE2OQogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X2Ftb3VudCksCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2NgogICAgLy8gYmV0LndobywKICAgIGZyYW1lX2RpZyAyCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNjcKICAgIC8vIGFyYzQuVUludDI1NihwYXlvdXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAxCiAgICBpdG9iCiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBkaWcgMQogICAgYnwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE2OAogICAgLy8gYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjAKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkID0gVUludDY0KDQ2NTA0NDM2KQogICAgYnl0ZSAidG9rZW5fYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTY4CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRva2VuX2FwcF9pZCBleGlzdHMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTY0LTUxNjkKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIGJldC53aG8sCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KHBheW91dF9hbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICAvLyApCiAgICBtZXRob2QgImFyYzIwMF90cmFuc2ZlcihhZGRyZXNzLHVpbnQyNTYpYm9vbCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTcxCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzEKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTcwLTUxNzIKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZSgKICAgIC8vICAgICBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgLy8gKQogICAgZGlnIDEKICAgIGNhbGxzdWIgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTc0CiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCwgQmlnVUludChwYXlvdXRfYW1vdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzQKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTczLTUxNzUKICAgIC8vIHNlbGYuX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsKAogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICAvLyApCiAgICBzd2FwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfdG9rZW5fYmFsYW5jZV90b3RhbAogICAgYiBfY2xhaW1fY3JlZGl0X2FmdGVyX2lmX2Vsc2VAMTEKCl9jbGFpbV9jcmVkaXRfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzYKICAgIC8vIGVsaWYgbmV0d29ya19lbmFibGVkOgogICAgZnJhbWVfZGlnIDAKICAgIGJ6IF9jbGFpbV9jcmVkaXRfYWZ0ZXJfaWZfZWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTc3LTUxODAKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1iZXQud2hvLm5hdGl2ZSwKICAgIC8vICAgICBhbW91bnQ9cGF5b3V0X2Ftb3VudCwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE3OAogICAgLy8gcmVjZWl2ZXI9YmV0Lndoby5uYXRpdmUsCiAgICBmcmFtZV9kaWcgMgogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIDEKICAgIGR1cAogICAgY292ZXIgMgogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE3NwogICAgLy8gaXR4bi5QYXltZW50KAogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxNzctNTE4MAogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPWJldC53aG8ubmF0aXZlLAogICAgLy8gICAgIGFtb3VudD1wYXlvdXRfYW1vdW50LAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4MQogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW91dF9hbW91bnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTgyCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChwYXlvdXRfYW1vdW50KQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKCl9jbGFpbV9jcmVkaXRfYWZ0ZXJfaWZfZWxzZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4NAogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTg2LTUxODkKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4NwogICAgLy8gcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4OAogICAgLy8gYW1vdW50PXNlbGYuX3NwaW5fY29zdCgpLAogICAgY2FsbHN1YiBfc3Bpbl9jb3N0CiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTg2CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE4Ni01MTg5CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIC8vICAgICBhbW91bnQ9c2VsZi5fc3Bpbl9jb3N0KCksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTkzCiAgICAvLyB3aG89YmV0LndobywKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE5NAogICAgLy8gYmV0X2Ftb3VudD1iZXQuYmV0X2Ftb3VudCwKICAgIGR1cAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTk1CiAgICAvLyBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgZHVwCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTYKICAgIC8vIG1vZGU9YmV0Lm1vZGUsCiAgICBkdXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE5NwogICAgLy8gY2xhaW1fcm91bmQ9YmV0LmNsYWltX3JvdW5kLAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTk4CiAgICAvLyBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIGZyYW1lX2RpZyAzCiAgICBpdG9iCiAgICBjb3ZlciA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTItNTE5OQogICAgLy8gQmV0Q2xhaW1lZCgKICAgIC8vICAgICB3aG89YmV0LndobywKICAgIC8vICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgbW9kZT1iZXQubW9kZSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUxOTEtNTIwMAogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldENsYWltZWQoCiAgICAvLyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgICAgICBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgLy8gICAgICAgICBzcGluX2luZGV4PWJldC5zcGluX2luZGV4LAogICAgLy8gICAgICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAgICAgICAgIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIG1ldGhvZCAiQmV0Q2xhaW1lZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIwMgogICAgLy8gcmV0dXJuIHBheW91dF9hbW91bnQKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbV90b2tlbihiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW1fdG9rZW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNTEtNTI1MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW1fdG9rZW4oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgYnl0ZSAiIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjU2CiAgICAvLyBiZXQgPSBzZWxmLl9nZXRfYmV0KGJldF9rZXkpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI1OAogICAgLy8gc3Bpbl9yZXN1bHRfYnl0ZXMgPSBzZWxmLl9nZXRfc3Bpbl9yZXN1bHRzKGJldF9rZXkpICAjIGhvb2sKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3NwaW5fcmVzdWx0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjYxCiAgICAvLyBwYXlvdXQgPSBzcGluX3Jlc3VsdC5wYXlvdXQubmF0aXZlCiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjYyCiAgICAvLyBib251c19zcGluc19hd2FyZGVkID0gc3Bpbl9yZXN1bHQuYm9udXNfc3BpbnNfYXdhcmRlZC5uYXRpdmUKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNjQKICAgIC8vIGlmIGJvbnVzX3NwaW5zX2F3YXJkZWQgPiAwOgogICAgYnogX2NsYWltX3Rva2VuX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjY1CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYm9udXNfc3BpbihiZXQud2hvLm5hdGl2ZSwgYm9udXNfc3BpbnNfYXdhcmRlZCkKICAgIGZyYW1lX2RpZyAxCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMwogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JvbnVzX3NwaW4KCl9jbGFpbV90b2tlbl9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNjgKICAgIC8vIHBheW91dF9hbW91bnQgPSBwYXlvdXQgKiBwYXlvdXRfbXVsdGlwbGllciAvLyBVSW50NjQoMTAwKQogICAgZnJhbWVfZGlnIDIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjY3CiAgICAvLyBwYXlvdXRfbXVsdGlwbGllciA9IFVJbnQ2NCgxMDApICAjIGVxdWl2YWxlbnQgdG8gMXggKDEwMCAvIDEwMCkKICAgIGludCAxMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI2OAogICAgLy8gcGF5b3V0X2Ftb3VudCA9IHBheW91dCAqIHBheW91dF9tdWx0aXBsaWVyIC8vIFVJbnQ2NCgxMDApCiAgICAqCiAgICBpbnQgMTAwCiAgICAvCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI3MAogICAgLy8gaWYgcGF5b3V0ID4gMDoKICAgIGJ6IF9jbGFpbV90b2tlbl9hZnRlcl9pZl9lbHNlQDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI3MS01Mjc2CiAgICAvLyBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICBiZXQud2hvLAogICAgLy8gICAgIGFyYzQuVUludDI1NihwYXlvdXRfYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjczCiAgICAvLyBiZXQud2hvLAogICAgZnJhbWVfZGlnIDEKICAgIGV4dHJhY3QgMCAzMiAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI3NAogICAgLy8gYXJjNC5VSW50MjU2KHBheW91dF9hbW91bnQpLAogICAgZnJhbWVfZGlnIDAKICAgIGl0b2IKICAgIGludCAzMgogICAgYnplcm8KICAgIGRpZyAxCiAgICBifAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjc1CiAgICAvLyBhcHBfaWQ9QXBwbGljYXRpb24oc2VsZi50b2tlbl9hcHBfaWQpLAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzUKICAgIC8vIGFwcF9pZD1BcHBsaWNhdGlvbihzZWxmLnRva2VuX2FwcF9pZCksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG9rZW5fYXBwX2lkIGV4aXN0cwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzEtNTI3NgogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgYmV0LndobywKICAgIC8vICAgICBhcmM0LlVJbnQyNTYocGF5b3V0X2Ftb3VudCksCiAgICAvLyAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHNlbGYudG9rZW5fYXBwX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiYXJjMjAwX3RyYW5zZmVyKGFkZHJlc3MsdWludDI1Nilib29sIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgaXR4biBMYXN0TG9nCiAgICBleHRyYWN0IDAgNAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICA9PQogICAgYXNzZXJ0IC8vIEFSQzQgcHJlZml4IGlzIHZhbGlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzgKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI3OAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyNzctNTI3OQogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlKAogICAgLy8gICAgIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICAvLyApCiAgICBkaWcgMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODEKICAgIC8vIHNlbGYudG9rZW5fYXBwX2lkLCBCaWdVSW50KHBheW91dF9hbW91bnQpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIwCiAgICAvLyBzZWxmLnRva2VuX2FwcF9pZCA9IFVJbnQ2NCg0NjUwNDQzNikKICAgIGJ5dGUgInRva2VuX2FwcF9pZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI4MQogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b2tlbl9hcHBfaWQgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODAtNTI4MgogICAgLy8gc2VsZi5fZGVjcmVtZW50X3Rva2VuX2JhbGFuY2VfdG90YWwoCiAgICAvLyAgICAgc2VsZi50b2tlbl9hcHBfaWQsIEJpZ1VJbnQocGF5b3V0X2Ftb3VudCkKICAgIC8vICkKICAgIHN3YXAKICAgIGNhbGxzdWIgX2RlY3JlbWVudF90b2tlbl9iYWxhbmNlX3RvdGFsCgpfY2xhaW1fdG9rZW5fYWZ0ZXJfaWZfZWxzZUA1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg0CiAgICAvLyBkZWwgc2VsZi5iZXRbYmV0X2tleV0KICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODYtNTI4OQogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50PXNlbGYuX3NwaW5fY29zdCgpLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg3CiAgICAvLyByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg4CiAgICAvLyBhbW91bnQ9c2VsZi5fc3Bpbl9jb3N0KCksCiAgICBjYWxsc3ViIF9zcGluX2Nvc3QKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyODYKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjg2LTUyODkKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSwKICAgIC8vICkuc3VibWl0KCkKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOTMKICAgIC8vIHdobz1iZXQud2hvLAogICAgZnJhbWVfZGlnIDEKICAgIGR1cAogICAgZXh0cmFjdCAwIDMyIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjk0CiAgICAvLyBiZXRfYW1vdW50PWJldC5iZXRfYW1vdW50LAogICAgZHVwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOTUKICAgIC8vIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICBkdXAKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI5NgogICAgLy8gbW9kZT1iZXQubW9kZSwKICAgIGR1cAogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1Mjk3CiAgICAvLyBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICBleHRyYWN0IDU2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOTgKICAgIC8vIHBheW91dD1hcmM0LlVJbnQ2NChwYXlvdXQpLAogICAgZnJhbWVfZGlnIDIKICAgIGl0b2IKICAgIGNvdmVyIDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI5Mi01Mjk5CiAgICAvLyBCZXRDbGFpbWVkKAogICAgLy8gICAgIHdobz1iZXQud2hvLAogICAgLy8gICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgc3Bpbl9pbmRleD1iZXQuc3Bpbl9pbmRleCwKICAgIC8vICAgICBtb2RlPWJldC5tb2RlLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICBwYXlvdXQ9YXJjNC5VSW50NjQocGF5b3V0KSwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI5MS01MzAwCiAgICAvLyBhcmM0LmVtaXQoCiAgICAvLyAgICAgQmV0Q2xhaW1lZCgKICAgIC8vICAgICAgICAgd2hvPWJldC53aG8sCiAgICAvLyAgICAgICAgIGJldF9hbW91bnQ9YmV0LmJldF9hbW91bnQsCiAgICAvLyAgICAgICAgIHNwaW5faW5kZXg9YmV0LnNwaW5faW5kZXgsCiAgICAvLyAgICAgICAgIG1vZGU9YmV0Lm1vZGUsCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICAgICAgICAgcGF5b3V0PWFyYzQuVUludDY0KHBheW91dCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRDbGFpbWVkKGFkZHJlc3MsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MzAyCiAgICAvLyByZXR1cm4gcGF5b3V0X2Ftb3VudAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ3JhbnRfZnJlZV9zcGlucyhhZGRyZXNzOiBieXRlcywgY291bnQ6IGJ5dGVzKSAtPiB2b2lkOgpncmFudF9mcmVlX3NwaW5zOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDQ5LTU0NTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdyYW50X2ZyZWVfc3BpbnMoc2VsZiwgYWRkcmVzczogYXJjNC5BZGRyZXNzLCBjb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ1MQogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0NTIKICAgIC8vIHNlbGYuX2luY3JlbWVudF9ib251c19zcGluKGFkZHJlc3MubmF0aXZlLCBjb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMgogICAgc3dhcAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JvbnVzX3NwaW4KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLnNldF9zdG9yYWdlX2FwcF9pZChhcHBfaWQ6IGJ5dGVzKSAtPiB2b2lkOgpzZXRfc3RvcmFnZV9hcHBfaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0OTUtNTQ5NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3N0b3JhZ2VfYXBwX2lkKHNlbGYsIGFwcF9pZDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTQ5NwogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU0OTgKICAgIC8vIHNlbGYuc3RvcmFnZV9hcHBfaWQgPSBhcHBfaWQubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMi0zNjM0CiAgICAvLyAjIGZlZSBwZXJjZW50YWdlcyBhcmUgY2FsY3VsYXRlZCBhcyBicHMgLyAxMDAwMAogICAgLy8gIyBzdG9yYWdlCiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gVUludDY0KCkKICAgIGJ5dGUgInN0b3JhZ2VfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NDk4CiAgICAvLyBzZWxmLnN0b3JhZ2VfYXBwX2lkID0gYXBwX2lkLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5zZXRfdmVyc2lvbihjb250cmFjdF92ZXJzaW9uOiBieXRlcywgZGVwbG95bWVudF92ZXJzaW9uOiBieXRlcykgLT4gdm9pZDoKc2V0X3ZlcnNpb246CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMtODYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF92ZXJzaW9uKAogICAgLy8gICAgIHNlbGYsIGNvbnRyYWN0X3ZlcnNpb246IGFyYzQuVUludDY0LCBkZXBsb3ltZW50X3ZlcnNpb246IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4NwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBncmFkZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgdXBncmFkZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OAogICAgLy8gYXJjNC5lbWl0KFZlcnNpb25VcGRhdGVkKGNvbnRyYWN0X3ZlcnNpb24sIGRlcGxveW1lbnRfdmVyc2lvbikpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBtZXRob2QgIlZlcnNpb25VcGRhdGVkKHVpbnQ2NCx1aW50NjQpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMxCiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBVSW50NjQoKQogICAgYnl0ZSAiY29udHJhY3RfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo4OQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gY29udHJhY3RfdmVyc2lvbi5uYXRpdmUKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gZGVwbG95bWVudF92ZXJzaW9uLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzIKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImRlcGxveW1lbnRfdmVyc2lvbiIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5MAogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBkZXBsb3ltZW50X3ZlcnNpb24ubmF0aXZlCiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLmFwcHJvdmVfdXBkYXRlKGFwcHJvdmFsOiBieXRlcykgLT4gdm9pZDoKYXBwcm92ZV91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxLTEwMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYXBwcm92ZV91cGRhdGUoc2VsZiwgYXBwcm92YWw6IGFyYzQuQm9vbCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgb3duZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDQKICAgIC8vIGFyYzQuZW1pdChVcGRhdGVBcHByb3ZlZChhcmM0LkFkZHJlc3Moc2VsZi5vd25lciksIGFwcHJvdmFsKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA0CiAgICAvLyBhcmM0LmVtaXQoVXBkYXRlQXBwcm92ZWQoYXJjNC5BZGRyZXNzKHNlbGYub3duZXIpLCBhcHByb3ZhbCkpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgbWV0aG9kICJVcGRhdGVBcHByb3ZlZChhZGRyZXNzLGJvb2wpIgogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDUKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYXBwcm92YWwubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBnZXRiaXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGFwcHJvdmFsLm5hdGl2ZQogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5ncmFudF91cGdyYWRlcih1cGdyYWRlcjogYnl0ZXMpIC0+IHZvaWQ6CmdyYW50X3VwZ3JhZGVyOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNy0xMDgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdyYW50X3VwZ3JhZGVyKHNlbGYsIHVwZ3JhZGVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDkKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MsICJtdXN0IGJlIGNyZWF0b3IiCiAgICB0eG4gU2VuZGVyCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSBjcmVhdG9yCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTEwCiAgICAvLyBhcmM0LmVtaXQoVXBncmFkZXJHcmFudGVkKGFyYzQuQWRkcmVzcyhzZWxmLnVwZ3JhZGVyKSwgdXBncmFkZXIpKQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBncmFkZXJHcmFudGVkKGFkZHJlc3MsYWRkcmVzcykiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMTEKICAgIC8vIHNlbGYudXBncmFkZXIgPSB1cGdyYWRlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUuY29udHJhY3RzLnVwZGF0ZS5VcGdyYWRlYWJsZS5jb250cmFjdC5VcGdyYWRlYWJsZS5vbl91cGRhdGUoKSAtPiB2b2lkOgpvbl91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTItOTMKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICAvLyBkZWYgb25fdXBkYXRlKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5NC05NwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFdBUk5JTkc6IFRoaXMgYXBwIGNhbiBiZSB1cGRhdGVkIGJ5IHRoZSBjcmVhdG9yCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTQtOTcKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBXQVJOSU5HOiBUaGlzIGFwcCBjYW4gYmUgdXBkYXRlZCBieSB0aGUgY3JlYXRvcgogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLnVwZ3JhZGVyLCAibXVzdCBiZSB1cGdyYWRlciIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi51cGdyYWRlciBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gbXVzdCBiZSB1cGdyYWRlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk4CiAgICAvLyBhc3NlcnQgc2VsZi51cGRhdGFibGUgPT0gVUludDY0KDEpLCAibm90IGFwcHJvdmVkIgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTgKICAgIC8vIGFzc2VydCBzZWxmLnVwZGF0YWJsZSA9PSBVSW50NjQoMSksICJub3QgYXBwcm92ZWQiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBkYXRhYmxlIGV4aXN0cwogICAgaW50IDEKICAgID09CiAgICBhc3NlcnQgLy8gbm90IGFwcHJvdmVkCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fX2luaXRfXygpIC0+IHZvaWQ6Cl9faW5pdF9fOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTgyCiAgICAvLyBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTgzLTM1ODQKICAgIC8vICMgb3duYWJsZSBzdGF0ZQogICAgLy8gc2VsZi5vd25lciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1ODUtMzU4NgogICAgLy8gIyB1cGdyYWRlYWJsZSBzdGF0ZQogICAgLy8gc2VsZi51cGdyYWRlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMQogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImNvbnRyYWN0X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1ODcKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NCgwKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzIKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gVUludDY0KCkKICAgIGJ5dGUgImRlcGxveW1lbnRfdmVyc2lvbiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4OAogICAgLy8gc2VsZi5kZXBsb3ltZW50X3ZlcnNpb24gPSBVSW50NjQoMCkKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMzCiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGJvb2woMSkKICAgIGJ5dGUgInVwZGF0YWJsZSIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU4OQogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBpbnQgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzU5MC0zNTkxCiAgICAvLyAjIHN0YWtlYWJsZSBzdGF0ZQogICAgLy8gc2VsZi5kZWxlZ2F0ZSA9IEFjY291bnQoKQogICAgYnl0ZSAiZGVsZWdhdGUiCiAgICBnbG9iYWwgWmVyb0FkZHJlc3MKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTIKICAgIC8vIHNlbGYuc3Rha2VhYmxlID0gYm9vbCgxKQogICAgYnl0ZSAic3Rha2VhYmxlIgogICAgaW50IDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1OTkKICAgIC8vIHNlbGYuc3Bpbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJzcGluX2NvdW50IgogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDAKICAgIC8vIHNlbGYuamFja3BvdF9jcmVkaXQgPSBVSW50NjQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF9jcmVkaXQiCiAgICBpbnQgNTAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDEKICAgIC8vIHNlbGYuamFja3BvdF9jcmVkaXRfY29udHJpYnV0aW9uID0gVUludDY0KDYgKiAxMCoqNikKICAgIGJ5dGUgImphY2twb3RfY3JlZGl0X2NvbnRyaWJ1dGlvbiIKICAgIGludCA2MDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjAyCiAgICAvLyBzZWxmLmphY2twb3RfbmV0d29yayA9IFVJbnQ2NChKQUNLUE9UX1NUQVJUICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmsiCiAgICBpbnQgNTAwMDAwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDMKICAgIC8vIHNlbGYuamFja3BvdF9uZXR3b3JrX2NvbnRyaWJ1dGlvbiA9IFVJbnQ2NCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X25ldHdvcmtfY29udHJpYnV0aW9uIgogICAgaW50IDYwMDAwMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDQKICAgIC8vIHNlbGYuamFja3BvdF90b2tlbiA9IEJpZ1VJbnQoSkFDS1BPVF9TVEFSVCAqIDEwKio2KQogICAgYnl0ZSAiamFja3BvdF90b2tlbiIKICAgIGJ5dGUgMHgwYmE0M2I3NDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjA1CiAgICAvLyBzZWxmLmphY2twb3RfdG9rZW5fY29udHJpYnV0aW9uID0gQmlnVUludCg2ICogMTAqKjYpCiAgICBieXRlICJqYWNrcG90X3Rva2VuX2NvbnRyaWJ1dGlvbiIKICAgIGJ5dGUgMHg1YjhkODAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MDYKICAgIC8vIHNlbGYubW9kZV9lbmFibGVkID0gVUludDY0KDcpCiAgICBieXRlICJtb2RlX2VuYWJsZWQiCiAgICBpbnQgNwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYwNy0zNjE2CiAgICAvLyAjIDEgPSBjcmVkaXQsIDIgPSBuZXR3b3JrLCA0ID0gdG9rZW4KICAgIC8vICMgMCA9IGRpc2FibGVkCiAgICAvLyAjIDEgPSBjcmVkaXQgZW5hYmxlZAogICAgLy8gIyAyID0gbmV0d29yayBlbmFibGVkCiAgICAvLyAjIDQgPSB0b2tlbiBlbmFibGVkCiAgICAvLyAjIDMgPSBjcmVkaXQgYW5kIG5ldHdvcmsgZW5hYmxlZAogICAgLy8gIyA1ID0gY3JlZGl0IGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAjIDYgPSBuZXR3b3JrIGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyAjIDcgPSBjcmVkaXQsIG5ldHdvcmssIGFuZCB0b2tlbiBlbmFibGVkCiAgICAvLyBzZWxmLmNyZWRpdF9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgYnl0ZSAiY3JlZGl0X2JldF9jb3N0IgogICAgaW50IDQwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE3CiAgICAvLyBzZWxmLm5ldHdvcmtfYmFzZV9iZXRfY29zdCA9IFVJbnQ2NCg0MCAqIDEwKio2KQogICAgYnl0ZSAibmV0d29ya19iYXNlX2JldF9jb3N0IgogICAgaW50IDQwMDAwMDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjE4CiAgICAvLyBzZWxmLm5ldHdvcmtfa2lja2VyX2V4dHJhID0gVUludDY0KDIwICogMTAqKjYpCiAgICBieXRlICJuZXR3b3JrX2tpY2tlcl9leHRyYSIKICAgIGludCAyMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYxOQogICAgLy8gc2VsZi5uZXR3b3JrX21pbl9iYW5rX2Ftb3VudCA9IFVJbnQ2NCgxMDAgKiAxMCoqNikKICAgIGJ5dGUgIm5ldHdvcmtfbWluX2JhbmtfYW1vdW50IgogICAgaW50IDEwMDAwMDAwMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyMAogICAgLy8gc2VsZi50b2tlbl9hcHBfaWQgPSBVSW50NjQoNDY1MDQ0MzYpCiAgICBieXRlICJ0b2tlbl9hcHBfaWQiCiAgICBpbnQgNDY1MDQ0MzYKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjEKICAgIC8vIHNlbGYudG9rZW5fYmFzZV9iZXRfY29zdCA9IEJpZ1VJbnQoNDAgKiAxMCoqNikKICAgIGJ5dGUgInRva2VuX2Jhc2VfYmV0X2Nvc3QiCiAgICBieXRlIDB4MDI2MjVhMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjIKICAgIC8vIHNlbGYudG9rZW5fa2lja2VyX2V4dHJhID0gQmlnVUludCgyMCAqIDEwKio2KQogICAgYnl0ZSAidG9rZW5fa2lja2VyX2V4dHJhIgogICAgYnl0ZSAweDAxMzEyZDAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIzCiAgICAvLyBzZWxmLnRva2VuX21pbl9iYW5rX2Ftb3VudCA9IEJpZ1VJbnQoMTAwICogMTAqKjYpCiAgICBieXRlICJ0b2tlbl9taW5fYmFua19hbW91bnQiCiAgICBieXRlIDB4MDVmNWUxMDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjQKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2FkZHJlc3MgPSBBY2NvdW50KAogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2FkZHJlc3MiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjQtMzYyNgogICAgLy8gc2VsZi5mZWVfdHJlYXN1cnlfYWRkcmVzcyA9IEFjY291bnQoCiAgICAvLyAgICAgIlFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkiCiAgICAvLyApCiAgICBhZGRyIFFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MjcKICAgIC8vIHNlbGYuZmVlX21hcmtldGluZ19hZGRyZXNzID0gQWNjb3VudCgKICAgIGJ5dGUgImZlZV9tYXJrZXRpbmdfYWRkcmVzcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYyNy0zNjI5CiAgICAvLyBzZWxmLmZlZV9tYXJrZXRpbmdfYWRkcmVzcyA9IEFjY291bnQoCiAgICAvLyAgICAgIlFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkiCiAgICAvLyApCiAgICBhZGRyIFFHV0ZTV0RPTFA2WkVZTTZaRkFIT0tEVEFQTloyM0g1WUQ3SUk2UEFaVlBCR0tETTdES0VCRFI2UUkKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzAKICAgIC8vIHNlbGYuZmVlX3RyZWFzdXJ5X2JwcyA9IFVJbnQ2NCgzMCkgICMgMC4zJQogICAgYnl0ZSAiZmVlX3RyZWFzdXJ5X2JwcyIKICAgIGludCAzMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzYzMQogICAgLy8gc2VsZi5mZWVfbWFya2V0aW5nX2JwcyA9IFVJbnQ2NCgyMCkgICMgMC4yJQogICAgYnl0ZSAiZmVlX21hcmtldGluZ19icHMiCiAgICBpbnQgMjAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM2MzItMzYzNAogICAgLy8gIyBmZWUgcGVyY2VudGFnZXMgYXJlIGNhbGN1bGF0ZWQgYXMgYnBzIC8gMTAwMDAKICAgIC8vICMgc3RvcmFnZQogICAgLy8gc2VsZi5zdG9yYWdlX2FwcF9pZCA9IFVJbnQ2NCgpCiAgICBieXRlICJzdG9yYWdlX2FwcF9pZCIKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCg==",
    "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5jbGVhcl9zdGF0ZV9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTcwLTM1NzcKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKAogICAgLy8gICAgICMgVXNlck1hbmFnZXIsCiAgICAvLyAgICAgIyBCYW5rTWFuYWdlciwKICAgIC8vICAgICAjIFRva2VuQmFua01hbmFnZXIsCiAgICAvLyAgICAgIyBDREZNYW5hZ2VyLAogICAgLy8gICAgICMgT3duYWJsZSwKICAgIC8vICAgICBVcGdyYWRlYWJsZQogICAgLy8gKToKICAgIGludCAxCiAgICByZXR1cm4K"
  },
  "state": {
    "global": {
      "num_byte_slices": 10,
      "num_uints": 20
    },
    "local": {
      "num_byte_slices": 0,
      "num_uints": 0
    }
  },
  "schema": {
    "global": {
      "declared": {
        "contract_version": {
          "type": "uint64",
          "key": "contract_version"
        },
        "credit_bet_cost": {
          "type": "uint64",
          "key": "credit_bet_cost"
        },
        "delegate": {
          "type": "bytes",
          "key": "delegate"
        },
        "deployment_version": {
          "type": "uint64",
          "key": "deployment_version"
        },
        "fee_marketing_address": {
          "type": "bytes",
          "key": "fee_marketing_address"
        },
        "fee_marketing_bps": {
          "type": "uint64",
          "key": "fee_marketing_bps"
        },
        "fee_treasury_address": {
          "type": "bytes",
          "key": "fee_treasury_address"
        },
        "fee_treasury_bps": {
          "type": "uint64",
          "key": "fee_treasury_bps"
        },
        "jackpot": {
          "type": "uint64",
          "key": "jackpot"
        },
        "jackpot_credit": {
          "type": "uint64",
          "key": "jackpot_credit"
        },
        "jackpot_credit_contribution": {
          "type": "uint64",
          "key": "jackpot_credit_contribution"
        },
        "jackpot_network": {
          "type": "uint64",
          "key": "jackpot_network"
        },
        "jackpot_network_contribution": {
          "type": "uint64",
          "key": "jackpot_network_contribution"
        },
        "jackpot_token": {
          "type": "bytes",
          "key": "jackpot_token"
        },
        "jackpot_token_contribution": {
          "type": "bytes",
          "key": "jackpot_token_contribution"
        },
        "mode": {
          "type": "uint64",
          "key": "mode"
        },
        "mode_enabled": {
          "type": "uint64",
          "key": "mode_enabled"
        },
        "network_base_bet_cost": {
          "type": "uint64",
          "key": "network_base_bet_cost"
        },
        "network_kicker_extra": {
          "type": "uint64",
          "key": "network_kicker_extra"
        },
        "network_min_bank_amount": {
          "type": "uint64",
          "key": "network_min_bank_amount"
        },
        "owner": {
          "type": "bytes",
          "key": "owner"
        },
        "spin_count": {
          "type": "uint64",
          "key": "spin_count"
        },
        "stakeable": {
          "type": "uint64",
          "key": "stakeable"
        },
        "storage_app_id": {
          "type": "uint64",
          "key": "storage_app_id"
        },
        "token_app_id": {
          "type": "uint64",
          "key": "token_app_id"
        },
        "token_base_bet_cost": {
          "type": "bytes",
          "key": "token_base_bet_cost"
        },
        "token_kicker_extra": {
          "type": "bytes",
          "key": "token_kicker_extra"
        },
        "token_min_bank_amount": {
          "type": "bytes",
          "key": "token_min_bank_amount"
        },
        "updatable": {
          "type": "uint64",
          "key": "updatable"
        },
        "upgrader": {
          "type": "bytes",
          "key": "upgrader"
        }
      },
      "reserved": {}
    },
    "local": {
      "declared": {},
      "reserved": {}
    }
  },
  "contract": {
    "name": "SlotMachine",
    "desc": "\n    A simple slot machine smart contract\n    ",
    "methods": [
      {
        "name": "post_update",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "bootstrap",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "bootstrap_cost",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "get_owner",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "address"
        },
        "desc": "Get the owner of the contract"
      },
      {
        "name": "transfer_ownership",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer the ownership of the contract"
      },
      {
        "name": "get_cdf_reel1",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "get_cdf_others",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "uint64[16]"
        }
      },
      {
        "name": "get_cdf_grid",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "byte[15]"
        }
      },
      {
        "name": "reel_has_symbol",
        "args": [
          {
            "type": "byte[15]",
            "name": "grid"
          },
          {
            "type": "uint64",
            "name": "reel"
          },
          {
            "type": "byte[1]",
            "name": "sym"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "bool"
        }
      },
      {
        "name": "calculate_grid_payout",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "calculate_grid_payout_with_bonus_and_jackpot",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64)"
        }
      },
      {
        "name": "initialize_token_bank_manager",
        "args": [
          {
            "type": "uint64",
            "name": "token_app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Initialize the token bank manager"
      },
      {
        "name": "owner_deposit_token",
        "args": [
          {
            "type": "uint64",
            "name": "token_app_id"
          },
          {
            "type": "uint256",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
      },
      {
        "name": "owner_deposit",
        "args": [
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
      },
      {
        "name": "get_balances",
        "args": [],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,uint64,bool)"
        },
        "desc": "Get the balances"
      },
      {
        "name": "sync_balance",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Sync the balance of the contract"
      },
      {
        "name": "get_user",
        "args": [
          {
            "type": "address",
            "name": "address"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(address,uint64,uint64,uint64,uint64)"
        }
      },
      {
        "name": "credit",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "amount"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Credit the contract."
      },
      {
        "name": "set_mode",
        "args": [
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_bet_key",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "spin",
        "args": [
          {
            "type": "uint64",
            "name": "bet_amount"
          },
          {
            "type": "uint64",
            "name": "index"
          },
          {
            "type": "uint64",
            "name": "mode"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[56]"
        }
      },
      {
        "name": "claim",
        "args": [
          {
            "type": "byte[56]",
            "name": "bet_key"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Claim all bets"
      },
      {
        "name": "grant_free_spins",
        "args": [
          {
            "type": "address",
            "name": "address"
          },
          {
            "type": "uint64",
            "name": "count"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_storage_app_id",
        "args": [
          {
            "type": "uint64",
            "name": "app_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_version",
        "args": [
          {
            "type": "uint64",
            "name": "contract_version"
          },
          {
            "type": "uint64",
            "name": "deployment_version"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "approve_update",
        "args": [
          {
            "type": "bool",
            "name": "approval"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "grant_upgrader",
        "args": [
          {
            "type": "address",
            "name": "upgrader"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "transfer",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event."
      }
    ],
    "networks": {}
  },
  "bare_call_config": {
    "update_application": "CALL",
    "no_op": "CREATE"
  }
}

/**
 * Defines an onCompletionAction of 'no_op'
 */
export type OnCompleteNoOp =  { onCompleteAction?: 'no_op' | OnApplicationComplete.NoOpOC }
/**
 * Defines an onCompletionAction of 'opt_in'
 */
export type OnCompleteOptIn =  { onCompleteAction: 'opt_in' | OnApplicationComplete.OptInOC }
/**
 * Defines an onCompletionAction of 'close_out'
 */
export type OnCompleteCloseOut =  { onCompleteAction: 'close_out' | OnApplicationComplete.CloseOutOC }
/**
 * Defines an onCompletionAction of 'delete_application'
 */
export type OnCompleteDelApp =  { onCompleteAction: 'delete_application' | OnApplicationComplete.DeleteApplicationOC }
/**
 * Defines an onCompletionAction of 'update_application'
 */
export type OnCompleteUpdApp =  { onCompleteAction: 'update_application' | OnApplicationComplete.UpdateApplicationOC }
/**
 * A state record containing a single unsigned integer
 */
export type IntegerState = {
  /**
   * Gets the state value as a BigInt.
   */
  asBigInt(): bigint
  /**
   * Gets the state value as a number.
   */
  asNumber(): number
}
/**
 * A state record containing binary data
 */
export type BinaryState = {
  /**
   * Gets the state value as a Uint8Array
   */
  asByteArray(): Uint8Array
  /**
   * Gets the state value as a string
   */
  asString(): string
}

export type AppCreateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult> & AppReference
export type AppUpdateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult>

export type AppClientComposeCallCoreParams = Omit<AppClientCallCoreParams, 'sendParams'> & {
  sendParams?: Omit<SendTransactionParams, 'skipSending' | 'atc' | 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources'>
}
export type AppClientComposeExecuteParams = Pick<SendTransactionParams, 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources' | 'suppressLog'>

/**
 * Defines the types of available calls and state of the SlotMachine smart contract.
 */
export type SlotMachine = {
  /**
   * Maps method signatures / names to their argument and return types.
   */
  methods:
    & Record<'post_update()void' | 'post_update', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'bootstrap()void' | 'bootstrap', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'bootstrap_cost()uint64' | 'bootstrap_cost', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_owner()address' | 'get_owner', {
      argsObj: {
      }
      argsTuple: []
      returns: string
    }>
    & Record<'transfer_ownership(address)void' | 'transfer_ownership', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
    & Record<'get_cdf_reel1()uint64[16]' | 'get_cdf_reel1', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'get_cdf_others()uint64[16]' | 'get_cdf_others', {
      argsObj: {
      }
      argsTuple: []
      returns: [bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint]
    }>
    & Record<'get_cdf_grid()byte[15]' | 'get_cdf_grid', {
      argsObj: {
      }
      argsTuple: []
      returns: Uint8Array
    }>
    & Record<'reel_has_symbol(byte[15],uint64,byte[1])bool' | 'reel_has_symbol', {
      argsObj: {
        grid: Uint8Array
        reel: bigint | number
        sym: Uint8Array
      }
      argsTuple: [grid: Uint8Array, reel: bigint | number, sym: Uint8Array]
      returns: boolean
    }>
    & Record<'calculate_grid_payout()uint64' | 'calculate_grid_payout', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)' | 'calculate_grid_payout_with_bonus_and_jackpot', {
      argsObj: {
      }
      argsTuple: []
      returns: SpinResult
    }>
    & Record<'initialize_token_bank_manager(uint64)void' | 'initialize_token_bank_manager', {
      argsObj: {
        tokenAppId: bigint | number
      }
      argsTuple: [tokenAppId: bigint | number]
      returns: void
    }>
    & Record<'owner_deposit_token(uint64,uint256)void' | 'owner_deposit_token', {
      argsObj: {
        tokenAppId: bigint | number
        amount: bigint | number
      }
      argsTuple: [tokenAppId: bigint | number, amount: bigint | number]
      returns: void
    }>
    & Record<'owner_deposit(uint64)void' | 'owner_deposit', {
      argsObj: {
        amount: bigint | number
      }
      argsTuple: [amount: bigint | number]
      returns: void
    }>
    & Record<'get_balances()(uint64,uint64,uint64,bool)' | 'get_balances', {
      argsObj: {
      }
      argsTuple: []
      returns: BankBalances
    }>
    & Record<'sync_balance()uint64' | 'sync_balance', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_user(address)(address,uint64,uint64,uint64,uint64)' | 'get_user', {
      argsObj: {
        address: string
      }
      argsTuple: [address: string]
      returns: UserData
    }>
    & Record<'credit(address,uint64)void' | 'credit', {
      argsObj: {
        address: string
        amount: bigint | number
      }
      argsTuple: [address: string, amount: bigint | number]
      returns: void
    }>
    & Record<'set_mode(uint64)void' | 'set_mode', {
      argsObj: {
        mode: bigint | number
      }
      argsTuple: [mode: bigint | number]
      returns: void
    }>
    & Record<'get_bet_key(address,uint64,uint64,uint64)byte[56]' | 'get_bet_key', {
      argsObj: {
        address: string
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [address: string, betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'spin(uint64,uint64,uint64)byte[56]' | 'spin', {
      argsObj: {
        betAmount: bigint | number
        index: bigint | number
        mode: bigint | number
      }
      argsTuple: [betAmount: bigint | number, index: bigint | number, mode: bigint | number]
      returns: Uint8Array
    }>
    & Record<'claim(byte[56])uint64' | 'claim', {
      argsObj: {
        betKey: Uint8Array
      }
      argsTuple: [betKey: Uint8Array]
      returns: bigint
    }>
    & Record<'grant_free_spins(address,uint64)void' | 'grant_free_spins', {
      argsObj: {
        address: string
        count: bigint | number
      }
      argsTuple: [address: string, count: bigint | number]
      returns: void
    }>
    & Record<'set_storage_app_id(uint64)void' | 'set_storage_app_id', {
      argsObj: {
        appId: bigint | number
      }
      argsTuple: [appId: bigint | number]
      returns: void
    }>
    & Record<'set_version(uint64,uint64)void' | 'set_version', {
      argsObj: {
        contractVersion: bigint | number
        deploymentVersion: bigint | number
      }
      argsTuple: [contractVersion: bigint | number, deploymentVersion: bigint | number]
      returns: void
    }>
    & Record<'approve_update(bool)void' | 'approve_update', {
      argsObj: {
        approval: boolean
      }
      argsTuple: [approval: boolean]
      returns: void
    }>
    & Record<'grant_upgrader(address)void' | 'grant_upgrader', {
      argsObj: {
        upgrader: string
      }
      argsTuple: [upgrader: string]
      returns: void
    }>
    & Record<'transfer(address)void' | 'transfer', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
  /**
   * Defines the shape of the global and local state of the application.
   */
  state: {
    global: {
      contractVersion?: IntegerState
      creditBetCost?: IntegerState
      delegate?: BinaryState
      deploymentVersion?: IntegerState
      feeMarketingAddress?: BinaryState
      feeMarketingBps?: IntegerState
      feeTreasuryAddress?: BinaryState
      feeTreasuryBps?: IntegerState
      jackpot?: IntegerState
      jackpotCredit?: IntegerState
      jackpotCreditContribution?: IntegerState
      jackpotNetwork?: IntegerState
      jackpotNetworkContribution?: IntegerState
      jackpotToken?: BinaryState
      jackpotTokenContribution?: BinaryState
      mode?: IntegerState
      modeEnabled?: IntegerState
      networkBaseBetCost?: IntegerState
      networkKickerExtra?: IntegerState
      networkMinBankAmount?: IntegerState
      owner?: BinaryState
      spinCount?: IntegerState
      stakeable?: IntegerState
      storageAppId?: IntegerState
      tokenAppId?: IntegerState
      tokenBaseBetCost?: BinaryState
      tokenKickerExtra?: BinaryState
      tokenMinBankAmount?: BinaryState
      updatable?: IntegerState
      upgrader?: BinaryState
    }
  }
}
/**
 * Defines the possible abi call signatures
 */
export type SlotMachineSig = keyof SlotMachine['methods']
/**
 * Defines an object containing all relevant parameters for a single call to the contract. Where TSignature is undefined, a bare call is made
 */
export type TypedCallParams<TSignature extends SlotMachineSig | undefined> = {
  method: TSignature
  methodArgs: TSignature extends undefined ? undefined : Array<ABIAppCallArg | undefined>
} & AppClientCallCoreParams & CoreAppCallArgs
/**
 * Defines the arguments required for a bare call
 */
export type BareCallArgs = Omit<RawAppCallArgs, keyof CoreAppCallArgs>
/**
 * Represents a SpinResult result as a struct
 */
export type SpinResult = {
  payout: bigint
  bonusSpinsAwarded: bigint
  jackpotHit: bigint
}
/**
 * Converts the tuple representation of a SpinResult to the struct representation
 */
export function SpinResult([payout, bonusSpinsAwarded, jackpotHit]: [bigint, bigint, bigint] ) {
  return {
    payout,
    bonusSpinsAwarded,
    jackpotHit,
  }
}
/**
 * Represents a BankBalances result as a struct
 */
export type BankBalances = {
  balanceAvailable: bigint
  balanceTotal: bigint
  balanceLocked: bigint
  balanceFuse: boolean
}
/**
 * Converts the tuple representation of a BankBalances to the struct representation
 */
export function BankBalances([balanceAvailable, balanceTotal, balanceLocked, balanceFuse]: [bigint, bigint, bigint, boolean] ) {
  return {
    balanceAvailable,
    balanceTotal,
    balanceLocked,
    balanceFuse,
  }
}
/**
 * Represents a UserData result as a struct
 */
export type UserData = {
  who: string
  credit: bigint
  bonusSpin: bigint
  spinCount: bigint
  lastSpinTimestamp: bigint
}
/**
 * Converts the tuple representation of a UserData to the struct representation
 */
export function UserData([who, credit, bonusSpin, spinCount, lastSpinTimestamp]: [string, bigint, bigint, bigint, bigint] ) {
  return {
    who,
    credit,
    bonusSpin,
    spinCount,
    lastSpinTimestamp,
  }
}
/**
 * Maps a method signature from the SlotMachine smart contract to the method's arguments in either tuple of struct form
 */
export type MethodArgs<TSignature extends SlotMachineSig> = SlotMachine['methods'][TSignature]['argsObj' | 'argsTuple']
/**
 * Maps a method signature from the SlotMachine smart contract to the method's return type
 */
export type MethodReturn<TSignature extends SlotMachineSig> = SlotMachine['methods'][TSignature]['returns']

/**
 * A factory for available 'create' calls
 */
export type SlotMachineCreateCalls = (typeof SlotMachineCallFactory)['create']
/**
 * Defines supported create methods for this smart contract
 */
export type SlotMachineCreateCallParams =
  | (TypedCallParams<undefined> & (OnCompleteNoOp))
/**
 * A factory for available 'update' calls
 */
export type SlotMachineUpdateCalls = (typeof SlotMachineCallFactory)['update']
/**
 * Defines supported update methods for this smart contract
 */
export type SlotMachineUpdateCallParams =
  | TypedCallParams<undefined>
/**
 * Defines arguments required for the deploy method.
 */
export type SlotMachineDeployArgs = {
  deployTimeParams?: TealTemplateParams
  /**
   * A delegate which takes a create call factory and returns the create call params for this smart contract
   */
  createCall?: (callFactory: SlotMachineCreateCalls) => SlotMachineCreateCallParams
  /**
   * A delegate which takes a update call factory and returns the update call params for this smart contract
   */
  updateCall?: (callFactory: SlotMachineUpdateCalls) => SlotMachineUpdateCallParams
}


/**
 * Exposes methods for constructing all available smart contract calls
 */
export abstract class SlotMachineCallFactory {
  /**
   * Gets available create call factories
   */
  static get create() {
    return {
      /**
       * Constructs a create call for the SlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams & (OnCompleteNoOp) = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Gets available update call factories
   */
  static get update() {
    return {
      /**
       * Constructs an update call for the SlotMachine smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Constructs a no op call for the post_update()void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static postUpdate(args: MethodArgs<'post_update()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'post_update()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the bootstrap()void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'bootstrap()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the bootstrap_cost()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'bootstrap_cost()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_owner()address ABI method
   *
   * Get the owner of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_owner()address' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer_ownership(address)void ABI method
   *
   * Transfer the ownership of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer_ownership(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_reel1()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_reel1()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_others()uint64[16] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_others()uint64[16]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_cdf_grid()byte[15] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCdfGrid(args: MethodArgs<'get_cdf_grid()byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_cdf_grid()byte[15]' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'reel_has_symbol(byte[15],uint64,byte[1])bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.grid, args.reel, args.sym],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_grid_payout()uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_grid_payout()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the initialize_token_bank_manager(uint64)void ABI method
   *
   * Initialize the token bank manager
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'initialize_token_bank_manager(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.tokenAppId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the owner_deposit_token(uint64,uint256)void ABI method
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'owner_deposit_token(uint64,uint256)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.tokenAppId, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the owner_deposit(uint64)void ABI method
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'owner_deposit(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_balances()(uint64,uint64,uint64,bool) ABI method
   *
   * Get the balances
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_balances()(uint64,uint64,uint64,bool)' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the sync_balance()uint64 ABI method
   *
   * Sync the balance of the contract
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'sync_balance()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_user(address)(address,uint64,uint64,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.address],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the credit(address,uint64)void ABI method
   *
   * Credit the contract.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'credit(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.amount],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_mode(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setMode(args: MethodArgs<'set_mode(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_mode(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_bet_key(address,uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the spin(uint64,uint64,uint64)byte[56] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'spin(uint64,uint64,uint64)byte[56]' as const,
      methodArgs: Array.isArray(args) ? args : [args.betAmount, args.index, args.mode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the claim(byte[56])uint64 ABI method
   *
   * Claim all bets
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'claim(byte[56])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.betKey],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_free_spins(address,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_free_spins(address,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.address, args.count],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_storage_app_id(uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_storage_app_id(uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.appId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_version(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_version(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.contractVersion, args.deploymentVersion],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the approve_update(bool)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'approve_update(bool)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.approval],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_upgrader(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_upgrader(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.upgrader],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer(address)void ABI method
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
}

/**
 * A client to make calls to the SlotMachine smart contract
 */
export class SlotMachineClient {
  /**
   * The underlying `ApplicationClient` for when you want to have more flexibility
   */
  public readonly appClient: ApplicationClient

  private readonly sender: SendTransactionFrom | undefined

  /**
   * Creates a new instance of `SlotMachineClient`
   *
   * @param appDetails appDetails The details to identify the app to deploy
   * @param algod An algod client instance
   */
  constructor(appDetails: AppDetails, private algod: Algodv2) {
    this.sender = appDetails.sender
    this.appClient = algokit.getAppClient({
      ...appDetails,
      app: APP_SPEC
    }, algod)
  }

  /**
   * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
   *
   * @param result The AppCallTransactionResult to be mapped
   * @param returnValueFormatter An optional delegate to format the return value if required
   * @returns The smart contract response with an updated return value
   */
  protected mapReturnValue<TReturn, TResult extends AppCallTransactionResult = AppCallTransactionResult>(result: AppCallTransactionResult, returnValueFormatter?: (value: any) => TReturn): AppCallTransactionResultOfType<TReturn> & TResult {
    if(result.return?.decodeError) {
      throw result.return.decodeError
    }
    const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
      ? returnValueFormatter(result.return.returnValue)
      : result.return?.returnValue as TReturn | undefined
      return { ...result, return: returnValue } as AppCallTransactionResultOfType<TReturn> & TResult
  }

  /**
   * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
   *
   * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
   * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
   * @returns The result of the smart contract call
   */
  public async call<TSignature extends keyof SlotMachine['methods']>(typedCallParams: TypedCallParams<TSignature>, returnValueFormatter?: (value: any) => MethodReturn<TSignature>) {
    return this.mapReturnValue<MethodReturn<TSignature>>(await this.appClient.call(typedCallParams), returnValueFormatter)
  }

  /**
   * Idempotently deploys the SlotMachine smart contract.
   *
   * @param params The arguments for the contract calls and any additional parameters for the call
   * @returns The deployment result
   */
  public deploy(params: SlotMachineDeployArgs & AppClientDeployCoreParams = {}): ReturnType<ApplicationClient['deploy']> {
    const createArgs = params.createCall?.(SlotMachineCallFactory.create)
    const updateArgs = params.updateCall?.(SlotMachineCallFactory.update)
    return this.appClient.deploy({
      ...params,
      updateArgs,
      createArgs,
      createOnCompleteAction: createArgs?.onCompleteAction,
    })
  }

  /**
   * Gets available create methods
   */
  public get create() {
    const $this = this
    return {
      /**
       * Creates a new instance of the SlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The create result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs & (OnCompleteNoOp) = {}) {
        return $this.mapReturnValue<undefined, AppCreateCallTransactionResult>(await $this.appClient.create(args))
      },
    }
  }

  /**
   * Gets available update methods
   */
  public get update() {
    const $this = this
    return {
      /**
       * Updates an existing instance of the SlotMachine smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The update result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs = {}) {
        return $this.mapReturnValue<undefined, AppUpdateCallTransactionResult>(await $this.appClient.update(args))
      },
    }
  }

  /**
   * Makes a clear_state call to an existing instance of the SlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The clear_state result
   */
  public clearState(args: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.appClient.clearState(args)
  }

  /**
   * Calls the post_update()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public postUpdate(args: MethodArgs<'post_update()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.postUpdate(args, params))
  }

  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.bootstrap(args, params))
  }

  /**
   * Calls the bootstrap_cost()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.bootstrapCost(args, params))
  }

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getOwner(args: MethodArgs<'get_owner()address'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getOwner(args, params))
  }

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.transferOwnership(args, params))
  }

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfReel1(args, params))
  }

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfOthers(args, params))
  }

  /**
   * Calls the get_cdf_grid()byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCdfGrid(args: MethodArgs<'get_cdf_grid()byte[15]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getCdfGrid(args, params))
  }

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.reelHasSymbol(args, params))
  }

  /**
   * Calls the calculate_grid_payout()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.calculateGridPayout(args, params))
  }

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.calculateGridPayoutWithBonusAndJackpot(args, params), SpinResult)
  }

  /**
   * Calls the initialize_token_bank_manager(uint64)void ABI method.
   *
   * Initialize the token bank manager
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.initializeTokenBankManager(args, params))
  }

  /**
   * Calls the owner_deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.ownerDepositToken(args, params))
  }

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.ownerDeposit(args, params))
  }

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBalances(args, params), BankBalances)
  }

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public syncBalance(args: MethodArgs<'sync_balance()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.syncBalance(args, params))
  }

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getUser(args, params), UserData)
  }

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public credit(args: MethodArgs<'credit(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.credit(args, params))
  }

  /**
   * Calls the set_mode(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setMode(args: MethodArgs<'set_mode(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setMode(args, params))
  }

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.getBetKey(args, params))
  }

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.spin(args, params))
  }

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public claim(args: MethodArgs<'claim(byte[56])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.claim(args, params))
  }

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.grantFreeSpins(args, params))
  }

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setStorageAppId(args, params))
  }

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.setVersion(args, params))
  }

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.approveUpdate(args, params))
  }

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.grantUpgrader(args, params))
  }

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(SlotMachineCallFactory.transfer(args, params))
  }

  /**
   * Extracts a binary state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns A BinaryState instance containing the state value, or undefined if the key was not found
   */
  private static getBinaryState(state: AppState, key: string): BinaryState | undefined {
    const value = state[key]
    if (!value) return undefined
    if (!('valueRaw' in value))
      throw new Error(`Failed to parse state value for ${key}; received an int when expected a byte array`)
    return {
      asString(): string {
        return value.value
      },
      asByteArray(): Uint8Array {
        return value.valueRaw
      }
    }
  }

  /**
   * Extracts a integer state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns An IntegerState instance containing the state value, or undefined if the key was not found
   */
  private static getIntegerState(state: AppState, key: string): IntegerState | undefined {
    const value = state[key]
    if (!value) return undefined
    if ('valueRaw' in value)
      throw new Error(`Failed to parse state value for ${key}; received a byte array when expected a number`)
    return {
      asBigInt() {
        return typeof value.value === 'bigint' ? value.value : BigInt(value.value)
      },
      asNumber(): number {
        return typeof value.value === 'bigint' ? Number(value.value) : value.value
      },
    }
  }

  /**
   * Returns the smart contract's global state wrapped in a strongly typed accessor with options to format the stored value
   */
  public async getGlobalState(): Promise<SlotMachine['state']['global']> {
    const state = await this.appClient.getGlobalState()
    return {
      get contractVersion() {
        return SlotMachineClient.getIntegerState(state, 'contract_version')
      },
      get creditBetCost() {
        return SlotMachineClient.getIntegerState(state, 'credit_bet_cost')
      },
      get delegate() {
        return SlotMachineClient.getBinaryState(state, 'delegate')
      },
      get deploymentVersion() {
        return SlotMachineClient.getIntegerState(state, 'deployment_version')
      },
      get feeMarketingAddress() {
        return SlotMachineClient.getBinaryState(state, 'fee_marketing_address')
      },
      get feeMarketingBps() {
        return SlotMachineClient.getIntegerState(state, 'fee_marketing_bps')
      },
      get feeTreasuryAddress() {
        return SlotMachineClient.getBinaryState(state, 'fee_treasury_address')
      },
      get feeTreasuryBps() {
        return SlotMachineClient.getIntegerState(state, 'fee_treasury_bps')
      },
      get jackpot() {
        return SlotMachineClient.getIntegerState(state, 'jackpot')
      },
      get jackpotCredit() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_credit')
      },
      get jackpotCreditContribution() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_credit_contribution')
      },
      get jackpotNetwork() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_network')
      },
      get jackpotNetworkContribution() {
        return SlotMachineClient.getIntegerState(state, 'jackpot_network_contribution')
      },
      get jackpotToken() {
        return SlotMachineClient.getBinaryState(state, 'jackpot_token')
      },
      get jackpotTokenContribution() {
        return SlotMachineClient.getBinaryState(state, 'jackpot_token_contribution')
      },
      get mode() {
        return SlotMachineClient.getIntegerState(state, 'mode')
      },
      get modeEnabled() {
        return SlotMachineClient.getIntegerState(state, 'mode_enabled')
      },
      get networkBaseBetCost() {
        return SlotMachineClient.getIntegerState(state, 'network_base_bet_cost')
      },
      get networkKickerExtra() {
        return SlotMachineClient.getIntegerState(state, 'network_kicker_extra')
      },
      get networkMinBankAmount() {
        return SlotMachineClient.getIntegerState(state, 'network_min_bank_amount')
      },
      get owner() {
        return SlotMachineClient.getBinaryState(state, 'owner')
      },
      get spinCount() {
        return SlotMachineClient.getIntegerState(state, 'spin_count')
      },
      get stakeable() {
        return SlotMachineClient.getIntegerState(state, 'stakeable')
      },
      get storageAppId() {
        return SlotMachineClient.getIntegerState(state, 'storage_app_id')
      },
      get tokenAppId() {
        return SlotMachineClient.getIntegerState(state, 'token_app_id')
      },
      get tokenBaseBetCost() {
        return SlotMachineClient.getBinaryState(state, 'token_base_bet_cost')
      },
      get tokenKickerExtra() {
        return SlotMachineClient.getBinaryState(state, 'token_kicker_extra')
      },
      get tokenMinBankAmount() {
        return SlotMachineClient.getBinaryState(state, 'token_min_bank_amount')
      },
      get updatable() {
        return SlotMachineClient.getIntegerState(state, 'updatable')
      },
      get upgrader() {
        return SlotMachineClient.getBinaryState(state, 'upgrader')
      },
    }
  }

  public compose(): SlotMachineComposer {
    const client = this
    const atc = new AtomicTransactionComposer()
    let promiseChain:Promise<unknown> = Promise.resolve()
    const resultMappers: Array<undefined | ((x: any) => any)> = []
    return {
      postUpdate(args: MethodArgs<'post_update()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.postUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.bootstrap(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.bootstrapCost(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getOwner(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transferOwnership(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfReel1(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfOthers(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCdfGrid(args: MethodArgs<'get_cdf_grid()byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCdfGrid(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.reelHasSymbol(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculateGridPayout(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculateGridPayoutWithBonusAndJackpot(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(SpinResult)
        return this
      },
      initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.initializeTokenBankManager(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.ownerDepositToken(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.ownerDeposit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBalances(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(BankBalances)
        return this
      },
      syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.syncBalance(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getUser(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(UserData)
        return this
      },
      credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.credit(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setMode(args: MethodArgs<'set_mode(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setMode(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getBetKey(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.spin(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.claim(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantFreeSpins(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setStorageAppId(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setVersion(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.approveUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantUpgrader(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transfer(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      get update() {
        const $this = this
        return {
          bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs) {
            promiseChain = promiseChain.then(() => client.update.bare({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
            resultMappers.push(undefined)
            return $this
          },
        }
      },
      clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.clearState({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom) {
        promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)))
        return this
      },
      async atc() {
        await promiseChain
        return atc
      },
      async simulate(options?: SimulateOptions) {
        await promiseChain
        const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }))
        return {
          ...result,
          returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      },
      async execute(sendParams?: AppClientComposeExecuteParams) {
        await promiseChain
        const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod)
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      }
    } as unknown as SlotMachineComposer
  }
}
export type SlotMachineComposer<TReturns extends [...any[]] = []> = {
  /**
   * Calls the post_update()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  postUpdate(args: MethodArgs<'post_update()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'post_update()void'>]>

  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'bootstrap()void'>]>

  /**
   * Calls the bootstrap_cost()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  bootstrapCost(args: MethodArgs<'bootstrap_cost()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'bootstrap_cost()uint64'>]>

  /**
   * Calls the get_owner()address ABI method.
   *
   * Get the owner of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getOwner(args: MethodArgs<'get_owner()address'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_owner()address'>]>

  /**
   * Calls the transfer_ownership(address)void ABI method.
   *
   * Transfer the ownership of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transferOwnership(args: MethodArgs<'transfer_ownership(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'transfer_ownership(address)void'>]>

  /**
   * Calls the get_cdf_reel1()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfReel1(args: MethodArgs<'get_cdf_reel1()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_reel1()uint64[16]'>]>

  /**
   * Calls the get_cdf_others()uint64[16] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfOthers(args: MethodArgs<'get_cdf_others()uint64[16]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_others()uint64[16]'>]>

  /**
   * Calls the get_cdf_grid()byte[15] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCdfGrid(args: MethodArgs<'get_cdf_grid()byte[15]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_cdf_grid()byte[15]'>]>

  /**
   * Calls the reel_has_symbol(byte[15],uint64,byte[1])bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  reelHasSymbol(args: MethodArgs<'reel_has_symbol(byte[15],uint64,byte[1])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'reel_has_symbol(byte[15],uint64,byte[1])bool'>]>

  /**
   * Calls the calculate_grid_payout()uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculateGridPayout(args: MethodArgs<'calculate_grid_payout()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'calculate_grid_payout()uint64'>]>

  /**
   * Calls the calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculateGridPayoutWithBonusAndJackpot(args: MethodArgs<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'calculate_grid_payout_with_bonus_and_jackpot()(uint64,uint64,uint64)'>]>

  /**
   * Calls the initialize_token_bank_manager(uint64)void ABI method.
   *
   * Initialize the token bank manager
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  initializeTokenBankManager(args: MethodArgs<'initialize_token_bank_manager(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'initialize_token_bank_manager(uint64)void'>]>

  /**
   * Calls the owner_deposit_token(uint64,uint256)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  ownerDepositToken(args: MethodArgs<'owner_deposit_token(uint64,uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'owner_deposit_token(uint64,uint256)void'>]>

  /**
   * Calls the owner_deposit(uint64)void ABI method.
   *
   * Deposit funds into the contract as owner. The owner is expected to
have already submitted the payment.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  ownerDeposit(args: MethodArgs<'owner_deposit(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'owner_deposit(uint64)void'>]>

  /**
   * Calls the get_balances()(uint64,uint64,uint64,bool) ABI method.
   *
   * Get the balances
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBalances(args: MethodArgs<'get_balances()(uint64,uint64,uint64,bool)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_balances()(uint64,uint64,uint64,bool)'>]>

  /**
   * Calls the sync_balance()uint64 ABI method.
   *
   * Sync the balance of the contract
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  syncBalance(args: MethodArgs<'sync_balance()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'sync_balance()uint64'>]>

  /**
   * Calls the get_user(address)(address,uint64,uint64,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getUser(args: MethodArgs<'get_user(address)(address,uint64,uint64,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_user(address)(address,uint64,uint64,uint64,uint64)'>]>

  /**
   * Calls the credit(address,uint64)void ABI method.
   *
   * Credit the contract.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  credit(args: MethodArgs<'credit(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'credit(address,uint64)void'>]>

  /**
   * Calls the set_mode(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setMode(args: MethodArgs<'set_mode(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_mode(uint64)void'>]>

  /**
   * Calls the get_bet_key(address,uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getBetKey(args: MethodArgs<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'get_bet_key(address,uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  spin(args: MethodArgs<'spin(uint64,uint64,uint64)byte[56]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'spin(uint64,uint64,uint64)byte[56]'>]>

  /**
   * Calls the claim(byte[56])uint64 ABI method.
   *
   * Claim all bets
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  claim(args: MethodArgs<'claim(byte[56])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'claim(byte[56])uint64'>]>

  /**
   * Calls the grant_free_spins(address,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantFreeSpins(args: MethodArgs<'grant_free_spins(address,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'grant_free_spins(address,uint64)void'>]>

  /**
   * Calls the set_storage_app_id(uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setStorageAppId(args: MethodArgs<'set_storage_app_id(uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_storage_app_id(uint64)void'>]>

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'set_version(uint64,uint64)void'>]>

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'approve_update(bool)void'>]>

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'grant_upgrader(address)void'>]>

  /**
   * Calls the transfer(address)void ABI method.
   *
   * Transfer ownership of the contract to a new owner. Emits OwnershipTransferred event.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, MethodReturn<'transfer(address)void'>]>

  /**
   * Gets available update methods
   */
  readonly update: {
    /**
     * Updates an existing instance of the SlotMachine smart contract using a bare call.
     *
     * @param args The arguments for the bare call
     * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
     */
    bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, undefined]>
  }

  /**
   * Makes a clear_state call to an existing instance of the SlotMachine smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs): SlotMachineComposer<[...TReturns, undefined]>

  /**
   * Adds a transaction to the composer
   *
   * @param txn One of: A TransactionWithSigner object (returned as is), a TransactionToSign object (signer is obtained from the signer property), a Transaction object (signer is extracted from the defaultSender parameter), an async SendTransactionResult returned by one of algokit utils helpers (signer is obtained from the defaultSender parameter)
   * @param defaultSender The default sender to be used to obtain a signer where the object provided to the transaction parameter does not include a signer.
   */
  addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom): SlotMachineComposer<TReturns>
  /**
   * Returns the underlying AtomicTransactionComposer instance
   */
  atc(): Promise<AtomicTransactionComposer>
  /**
   * Simulates the transaction group and returns the result
   */
  simulate(options?: SimulateOptions): Promise<SlotMachineComposerSimulateResult<TReturns>>
  /**
   * Executes the transaction group and returns the results
   */
  execute(sendParams?: AppClientComposeExecuteParams): Promise<SlotMachineComposerResults<TReturns>>
}
export type SimulateOptions = Omit<ConstructorParameters<typeof modelsv2.SimulateRequest>[0], 'txnGroups'>
export type SlotMachineComposerSimulateResult<TReturns extends [...any[]]> = {
  returns: TReturns
  methodResults: ABIResult[]
  simulateResponse: modelsv2.SimulateResponse
}
export type SlotMachineComposerResults<TReturns extends [...any[]]> = {
  returns: TReturns
  groupId: string
  txIds: string[]
  transactions: Transaction[]
}
